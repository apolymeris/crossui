undefined;_=function(){return +new Date()};Namespace=function(f){var d=f.split("."),c=window;return _.get(c,d)||_.set(c,d,{})};Class=function(F,u,m){var d,B=[],r=Class,l=window,A=r._fun,g=r._reg,h,x,z,p,D,c=r._all;m=m||{};if(!r._ignoreNSCache&&(p=_.get(l,F.split(".")))&&typeof(p)=="function"&&p.$xui$){return r._last=p}u=(!u?[]:typeof u=="string"?[u]:u);for(z=0;p=u[z];z++){if(!(B[z]=(_.get(l,p.split("."))||(xui&&xui.SC&&xui.SC(p))))){throw"errNoParent--"+p}}if(m.Dependency){if(typeof m.Dependency=="string"){m.Dependency=[m.Dependency]}for(z=0;p=m.Dependency[z];z++){if(!(_.get(l,p.split("."))||(xui&&xui.SC&&xui.SC(p)))){throw"errNoDependency--"+p}}}h=B[0];d=m.Static||{};p={};for(z in d){if(g[z]){p[z]=1}}for(z in p){delete d[z]}d.Before=m.Before||(h&&h.Before);d.After=m.After||(h&&h.After);d.$End=m.$End||(h&&h.$End);d.__gc=m.__gc||d.__gc||(h&&h.__gc)||function(){Class.__gc(this.$key)};var q=function(){if(typeof this.initialize=="function"){this.initialize()}};if(typeof m.Constructor=="function"){x=A(m.Constructor,"Constructor",F,h||q,"constructor");x.Constructor=String(m.Constructor)}else{if(h){var C=q,s=h.Constructor;if(s){C=new Function(s.slice(s.indexOf("(")+1,s.indexOf(")")).split(","),s.slice(s.indexOf("{")+1,s.lastIndexOf("}")))}x=A(C,"Constructor",F,h.upper,"constructor");x.Constructor=s}else{x=q}}D=_.fun();for(z=B.length-1;p=B[z--];){_.merge(D,p);_.merge(D.prototype,p.prototype)}x.KEY=x.$key=x.prototype.KEY=x.prototype.$key=F;r._wrap(x,d,0,D,"static");if(p=m.Instance){r._wrap(x.prototype,p,1,D.prototype,"instance")}r._inherit(x,D);r._inherit(x.prototype,D.prototype);D=null;if(_.tryF(x.Before,arguments,x)===false){return false}for(z=0;p=B[z];z++){p=(p.$children||(p.$children=[]));for(var y=0,v=p.length,E;y<v;y++){if(p[v]==F){E=true;break}}if(!E){p[p.length]=F}}x.$xui$=1;x.$children=[];x.$parent=B;x.prototype.constructor=x;x.prototype.$xui$=1;x[F]=x.prototype[F]=true;D=p=_.get(l,F.split("."));_.set(l,F.split("."),x);if(Object.prototype.toString.call(D)=="[object Object]"){for(z in D){x[z]=D[z]}}_.tryF(x.After,[],x);_.tryF(m.Initialize,[],x);_.tryF(x.$End,[],x);_.breakO([m.Static,m.Instance,m],2);c[F]=c.length;c.push(F);return r._last=x};linb=xui=function(d,c){return xui.Dom.pack(d,c)};_.merge=function(j,h,d){var c,g;if(typeof d=="function"){g=d;d="fun"}switch(d){case"fun":for(c in h){if(true===g(h[c],c)){j[c]=h[c]}}break;case"all":for(c in h){j[c]=h[c]}break;case"with":for(c in h){if(c in j){j[c]=h[c]}}break;default:for(c in h){if(!(c in j)){j[c]=h[c]}}}return j};new function(){var h=0,j=["ms","moz","webkit","o"],f=window,g=0,d=j.length,c;for(;g<d&&!f.requestAnimationFrame&&(c=j[g++]);){f.requestAnimationFrame=f[c+"RequestAnimationFrame"];f.cancelAnimationFrame=f[c+"CancelAnimationFrame"]||f[c+"CancelRequestAnimationFrame"]}if(!f.requestAnimationFrame){f.requestAnimationFrame=function(p,k){var i=(new Date()).getTime(),l=Math.max(0,16-(i-h)),m=setTimeout(function(){p(i+l)},l);h=i+l;return m}}if(!f.cancelAnimationFrame){f.cancelAnimationFrame=function(i){clearTimeout(i)}}};_.merge(_,{setTimeout:function(d,c){return(c||0)>16?(setTimeout(d,c)*-1):requestAnimationFrame(d)},clearTimeout:function(c){if(c>=0){cancelAnimationFrame(c)}else{clearTimeout(Math.abs(c))}},fun:function(){return function(){}},exec:function(c){var i=this,j=document,g=j.getElementsByTagName("head")[0]||j.documentElement,f=j.createElement("script");f.type="text/javascript";if(xui.browser.ie){f.text=c}else{f.appendChild(j.createTextNode(c))}g.insertBefore(f,g.firstChild);f.disalbed=true;f.disabled=false;g.removeChild(f)},get:function(g,f){if(!f){return g}if(!_.isSet(g)){return undefined}else{if(typeof f=="string"){return g[f]}else{for(var d=0,c=f.length;d<c;){if(!g||(g=g[f[d++]])===undefined){return}}return g}}},set:function(k,j,h){if(typeof j!="string"){var d,f=0,c,g=j.length-1;for(;f<g;){d=j[f++];if(k[d]&&((c=typeof k[d])=="object"||c=="function")){k=k[d]}else{k=k[d]={}}}j=j[g]}if(h===undefined){if(k.hasOwnProperty&&k.hasOwnProperty(j)){delete k[j]}else{k[j]=undefined}}else{return k[j]=h}},tryF:function(c,d,f,g){return(c&&typeof c=="function")?c.apply(f||{},d||[]):g},asyRun:function(c,g,d,f){return _.setTimeout(typeof c=="string"?function(){_.exec(c)}:function(){c.apply(f,d||[]);c=d=null},g||0)},asyHTML:function(f,i,g,d){var h=document.createElement("div"),c=document.createDocumentFragment();h.innerHTML=f;(function(){var j=d||10;while(--j&&h.firstChild){c.appendChild(h.firstChild)}if(h.firstChild){_.setTimeout(arguments.callee,g||0)}else{i(c)}})()},isEmpty:function(d){if(d==null){return true}for(var c in d){if(_._has.call(d,c)){return false}}return true},resetRun:function(h,c,l,g,i){var j=arguments.callee,f=h,d=j.$cache||((j.exists=function(m){return this.$cache[m]})&&(j.$cache={}));if(d[f]){_.clearTimeout(d[f])}if(typeof c=="function"){d[f]=_.setTimeout(function(){delete d[f];c.apply(i||null,g||[])},l||0)}else{delete d[f]}},observableRun:function(g,d,f,c){xui.Thread.observableRun(g,d,f,c)},breakO:function(j,k){var m=k||1,c=1+(arguments[2]||0),d=arguments.callee,g="___gc_",f;if(j&&(typeof j=="object"||typeof j=="function")&&j!==window&&j!==document&&j.nodeType!==1){try{if(j.hasOwnProperty(g)){return}else{j[g]=null}}catch(h){return}try{for(f in j){if(j.hasOwnProperty(f)&&j[f]){if(typeof j[f]=="object"||typeof j[f]=="function"){if(c<m){d(j[f],m,c)}}try{j[f]=null}catch(h){}}}}catch(h){return}if(j.length){j.length=0}delete j[g]}},each:function(g,c,f){f=f||g;for(var d in g){if(false===c.call(f,g[d],d,g)){break}}return g},toFixedNumber:function(i,j){if(!_.isSet(j)){j=2}var c=Math.abs(i),h=""+Math.round(c*Math.pow(10,j)),f,g,k,d;if(/\D/.test(h)){f=""+c}else{while(h.length<1+j){h="0"+h}k=h.substring(0,g=(h.length-j));d=h.substring(g);if(d){d="."+d}f=k+d}return parseFloat((i<0?"-":"")+f)},toNumeric:function(g,c,f,d){if(!_.isNumb(g)){g=parseFloat((g+"").replace(/\s*(e\+|[^0-9])/g,function(i,h,j){return h=="e+"||h=="E+"||(j==0&&h=="-")?h:h==d?".":""}))||0}if(_.isSet(c)&&c>=0){g=_.toFixedNumber(g,c)}return g},formatNumeric:function(h,c,g,d,f){if(_.isSet(c)){c=parseInt(c,10)}c=(c||c===0)?c:0;g=_.isSet(g)?g:",";d=d||".";h=""+parseFloat(h);if(h.indexOf("e")==-1){h=_.toFixedNumber(h,c)+"";h=h.split(".");if(f!==false){if((h[1]?h[1].length:0)<c){h[1]=(h[1]||"")+_.str.repeat("0",c-(h[1]?h[1].length:0))}}h[0]=h[0].split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1"+g).split("").reverse().join("");return h.join(d)}else{return h}},copy:function(d,c){return _.clone(d,c,1)},clone:function(g,c,r){var m=arguments[3]||0;if(g&&(_.isHash(g)||_.isArr(g))){if(_.isObj(g)){var p=arguments.callee,f=_.isArr(g),k=f?[]:{},j=0,q,d;if(!r){if(r<=0){return g}else{r=100}}if(f){d=g.length;for(;j<d;j++){if(typeof c=="function"&&false===c.call(g,g[j],j,m+1)){continue}k[k.length]=((q=g[j])&&r&&(_.isHash(q)||_.isArr(q)))?p(q,c,r-1,m+1):q}}else{for(j in g){if(c===true?j.charAt(0)=="_":c===false?(j.charAt(0)=="_"||j.charAt(0)=="$"):typeof c=="function"?false===c.call(g,g[j],j,m+1):0){continue}k[j]=((q=g[j])&&r&&(_.isHash(q)||_.isArr(q)))?p(q,c,r-1,m+1):q}}return k}else{return g}}else{return g}},filter:function(h,d,c){if(!c&&h&&_.isArr(h)){var j,g,m,k=[],f;for(j=0,g=h.length;j<g;j++){k[k.length]=h[j]}h.length=0;for(j=0,g=k.length;j<g;j++){if(typeof d=="function"?false!==d.call(k,k[j],j):1){h[h.length]=k[j]}}}else{var j,p={};for(j in h){if(d===true?j.charAt(0)=="_":d===false?(j.charAt(0)=="_"||j.charAt(0)=="$"):typeof d=="function"?false===d.call(h,h[j],j):0){p[j]=1}}for(j in p){delete h[j]}}return h},toArr:function(h,f){if(!h){return[]}var c=[];if(typeof f=="boolean"){for(var g in h){c[c.length]=f?g:h[g]}}else{if(_.isHash(h)){for(var g in h){c.push({key:g,value:h[g]})}}else{if(typeof h=="string"){c=h.split(f||",")}else{for(var g=0,d=h.length;g<d;++g){c[g]=h[g]}}}}return c},toUTF8:function(c){return c.replace(/[^\x00-\xff]/g,function(f,d){return"\\u"+((d=f.charCodeAt())<16?"000":d<256?"00":d<4096?"0":"")+d.toString(16)})},fromUTF8:function(c){return c.replace(/\\u([0-9a-f]{3})([0-9a-f])/g,function(f,d,g){return String.fromCharCode((parseInt(d,16)*16+parseInt(g,16)))})},urlEncode:function(f){var c=[],d,g;for(d in f){if(_.isDefined(g=f[d])){c.push(encodeURIComponent(d)+"="+encodeURIComponent(typeof g=="string"?g:_.serialize(g)))}}return c.join("&")},urlDecode:function(k,p){if(!k){return p?"":{}}var h,f={},m=k.split("&"),c;for(var g=0,d=m.length;g<d;g++){c=m[g];h=c.split("=");try{f[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}catch(j){f[h[0]]=h[1]}}return p?f[p]:f},preLoadImage:function(h,g,j){if(_.isArr(h)){for(var f=0,c=arr.length;f<c;f++){_.preLoadImage(h[f],g,j)}return c}var d=document.createElement("img");d.style.cssText="position:absolute;left:-999px;top:-999px";d.width=d.height=2;d.onload=function(){if(typeof g=="function"){g.call(this)}this.onload=this.onerror=null;document.body.removeChild(this)};d.onerror=function(){if(typeof j=="function"){j.call(this)}this.onload=this.onerror=null;document.body.removeChild(this)};document.body.appendChild(d);d.src=h;return 1},_to:Object.prototype.toString,_has:Object.prototype.hasOwnProperty,_ht:/^\s*function\s+Object\(\s*\)/,isDefined:function(c){return c!==undefined},isNull:function(c){return c===null},isSet:function(c){return c!==undefined&&c!==null&&c!==NaN},isObj:function(c){return !!c&&(typeof c=="object"||typeof c=="function")},isHash:function(c){return !!c&&_._to.call(c)=="[object Object]"&&c.constructor&&_._ht.test(c.constructor.toString())&&!_._has.call(c,"callee")},isBool:function(c){return typeof c=="boolean"},isNumb:function(c){return typeof c=="number"&&isFinite(c)},isFinite:function(c){return(c||c===0)&&isFinite(c)&&!isNaN(parseFloat(c))},isDate:function(c){return _._to.call(c)==="[object Date]"&&isFinite(+c)},isFun:function(c){return _._to.call(c)==="[object Function]"},isArr:function(c){return _._to.call(c)==="[object Array]"},isReg:function(c){return _._to.call(c)==="[object RegExp]"},isStr:function(c){return _._to.call(c)==="[object String]"},isArguments:function(c){return _._to.call(c)==="[object Arguments]"||_._has.call(c,"callee")},isElem:function(c){!!(c&&c.nodeType===1)},isNaN:function(c){_.isNumb(c)&&c!=+c},str:{startWith:function(d,c){return d.indexOf(c)===0},endWith:function(d,f){var c=d.length-f.length;return c>=0&&d.lastIndexOf(f)===c},repeat:function(d,c){return new Array(c+1).join(d)},initial:function(c){return c.charAt(0).toUpperCase()+c.substring(1)},trim:function(c){return c?c.replace(/^(\s|\uFEFF|\xA0)+|(\s|\uFEFF|\xA0)+$/g,""):c},ltrim:function(c){return c?c.replace(/^(\s|\uFEFF|\xA0)+/,""):c},rtrim:function(c){return c?c.replace(/(\s|\uFEFF|\xA0)+$/,""):c},toDom:function(j){var h=xui.$getGhostDiv(),g=[];h.innerHTML=j;for(var f=0,d=h.childNodes,c=d.length;f<c;f++){g[g.length]=d[f]}h=null;return xui(g)}},arr:{fastSortObject:function(l,k){if(!l||l.length<2){return l}var u=l.length,q=[],m=(u+"").length,d=Object.prototype,f,w,r,v;for(var h=0;h<m;h++){q[h]=new Array(m-h).join("0")}for(var g=0;g<u;g++){w=g+"";r=l[g];if(typeof r=="object"){r._xui_$s$=(_.isSet(v=k.call(r,g))?v:"")+q[w.length-1]+w}}try{f=d.toString;d.toString=function(){return this.hasOwnProperty("_xui_$s$")?(this._xui_$s$):(f.call(this))};l.sort()}finally{d.toString=f;for(var g=0;g<u;g++){if(typeof l[g]=="object"){delete l[g]._xui_$s$}}}return l},stableSort:function(d,j){if(d&&d.length>1){for(var h=0,g=d.length,f=[],c=[];h<g;h++){c[h]=d[f[h]=h]}if(_.isFun(j)){f.sort(function(i,k){return j.call(d,d[i],d[k])||(i>k?1:-1)})}else{f.sort(function(i,k){return d[i]>d[k]?1:d[i]<d[k]?-1:i>k?1:-1})}for(h=0;h<g;h++){d[h]=c[f[h]]}f.length=c.length=0}return d},subIndexOf:function(c,g,h){if(h===undefined){return -1}for(var f=0,d=c.length;f<d;f++){if(c[f]&&c[f][g]===h){return f}}return -1},removeFrom:function(c,d,f){c.splice(d,f||1);return c},removeValue:function(c,g){for(var d=c.length,f=d-1;f>=0;f--){if(c[f]===g){c.splice(f,1)}}return c},insertAny:function(c,i,h,g){var f=c.length;g=(!_.isArr(i))||g;if(h===0){if(g){c.unshift(i)}else{c.unshift.apply(c,i)}}else{var d;if(!h||h<0||h>f){h=f}if(h!=f){d=c.splice(h,f-h)}if(g){c[c.length]=i}else{c.push.apply(c,i)}if(d){c.push.apply(c,d)}}return h},indexOf:function(c,g){for(var f=0,d=c.length;f<d;f++){if(c[f]===g){return f}}return -1},each:function(c,g,j,k){var h,f,d=c;if(!d){return d}if(!_.isArr(d)){if((d=d._nodes)||!_.isArr(d)){throw"errNotArray"}if(k===undefined){k=1}}f=d.length;j=j||c;if(!k){for(h=0;h<f;h++){if(g.call(j,d[h],h,d)===false){break}}}else{for(h=f-1;h>=0;h--){if(g.call(j,d[h],h,d)===false){break}}}return c},removeDuplicate:function(c,h){var f=c.length,d=c.concat();c.length=0;for(var g=f-1;g>=0;g--){if(h?this.subIndexOf(d,h,d[g][h])===g:this.indexOf(d,d[g])===g){c.push(d[g])}}return c.reverse()}}});_.merge(_.fun,{body:function(fun){with(""+fun){return slice(indexOf("{")+1,lastIndexOf("}"))}},args:function(fun){with(""+fun){return slice(indexOf("(")+1,indexOf(")")).split(",")}},clone:function(c){return new Function(_.fun.args(c),_.fun.body(c))}});_.merge(Class,{_reg:{$key:1,$parent:1,$children:1,KEY:1,Static:1,Instance:1,Constructor:1,Initialize:1},_reg2:{nodeType:1,constructor:1,prototype:1,toString:1,valueOf:1,hasOwnProperty:1,isPrototypeOf:1,propertyIsEnumerable:1,toLocaleString:1},_all:[],_fun:function(c,d,f,h,g){c.$name$=d;c.$original$=f;if(g){c.$type$=g}if(h){c.upper=h}return c},_other:["toString","valueOf"],_o:{},_inherit:function(g,j,c){var d,h,f=this._reg;for(d in j){if(d in g||(!c&&f[d])||d.charAt(0)=="$"){continue}h=j[d];if(h&&h.$xui$){continue}g[d]=h}},_wrap:function(u,d,w,v,l){var x=this,q,p,h,m=u.KEY,c=x._reg,g=x._reg2,t=x._fun,s=x._other;for(q in d){if(g[q]||(!w&&c[q])){continue}h=d[q];u[q]=(typeof h!="function")?h:t(h,q,m,typeof v[q]=="function"&&v[q],l)}for(p=0;q=s[p++];){h=d[q];if(h&&(h==x._o[q])){continue}u[q]=(typeof h!="function")?h:t(h,q,m,typeof v[q]=="function"&&v[q],l)}},__gc:function(h){var c=Class._all;if(!h){for(var g=c.length-1;g>0;g--){Class.__gc(c[g])}return}if(typeof h=="object"){h=h.KEY||""}var f=_.get(window,h.split(".")),k,g,d;if(f){if(k=_.get(window,["xui","$cache","SC"])){delete k[h]}if(f.$parent){f.$parent.length=0}if(k=f.$children){for(var g=0,l;l=k[g];g++){if(l=_.get(window,l.split("."))){l.__gc()}}k.length=0}for(g in f){if(g!="upper"&&typeof f[g]=="function"){for(d in f[g]){if(f[g].hasOwnProperty(d)){delete f[g][d]}}}}_.breakO(f);f=f.prototype;for(g in f){if(g!="upper"&&typeof f[g]=="function"){for(d in f[g]){if(f[g].hasOwnProperty(d)){delete f[g][d]}}}}_.breakO(f);_.set(window,h.split("."))}c.splice(c[h],1);delete c[h]},destroy:function(c){Class.__gc(c)}});_.merge(xui,{version:1.2,$DEFAULTHREF:"javascript:;",$IEUNSELECTABLE:function(){return xui.browser.ie?' onselectstart="return false;" ':""},SERIALIZEMAXLAYER:99,SERIALIZEMAXSIZE:9999,$localeKey:"en",$localeDomId:"xlid",$dateFormat:"",debugMode:true,Locale:{},$cache:{thread:{},SC:{},clsByURI:{},hookKey:{},hookKeyUp:{},snipScript:{},subscribes:{},ghostDiv:[],domPurgeData:{},profileMap:{},reclaimId:{},template:{},UIKeyMapEvents:{},droppable:{},unique:{}},subscribe:function(d,g,j,h){if(d===null||d===undefined||g===null||g===undefined||typeof j!="function"){return}var k=xui.$cache.subscribes,f;k[d]=k[d]||[];f=_.arr.subIndexOf(k[d],"id",g);if(f!=-1){_.arr.removeFrom(k[d],f)}return k[d].push({id:g,receiver:j,asy:!!h})},unsubscribe:function(d,g){var h=xui.$cache.subscribes,f;if(!g){if(d===null||d===undefined){h={}}else{delete h[d]}}else{if(h[d]){f=_.arr.subIndexOf(h[d],"id",g);if(f!=-1){_.arr.removeFrom(h[d],f)}}}},publish:function(f,d,h,g){var i=xui.$cache.subscribes;if(f===null||f===undefined){for(var f in i){_.arr.each(i[f],function(c){if(!h||h===c.id||(_.isArr(h)&&_.arr.indexOf(h,c.id)!=-1)){if(c.asy){_.asyRun(c.receiver,0,d,g)}else{return _.tryF(c.receiver,d,g,true)}}})}}else{if(i[f]){_.arr.each(i[f],function(c){if(!h||h===c.id||(_.isArr(h)&&_.arr.indexOf(h,c.id)!=-1)){if(c.asy){_.asyRun(c.receiver,0,d,g)}else{return _.tryF(c.receiver,d,g,true)}}})}}},getSubscribers:function(c){return(c===null||c===undefined)?xui.$cache.subscribes:xui.$cache.subscribes[c]},setDateFormat:function(c){xui.$dateFormat=c},getDateFormat:function(){return xui.$dateFormat},setAppLangKey:function(c){xui.$appLangKey=c},getAppLangKey:function(c){return xui.$appLangKey},getLang:function(){return xui.$localeKey},setLang:function(u,x){var p=xui.getRes,y,w,k,h,q,c,r,s=[],d;xui.$localeKey=u;w=xui.browser.ie?document.all.tags("span"):document.getElementsByTagName("span");for(k=0;y=w[k];k++){if(y.id==xui.$localeDomId){s[s.length]=y}}d=s.length;q=function(){(function(){h=s.splice(0,100);for(k=0;y=h[k];k++){if(y.className&&typeof(w=p(y.className))=="string"){y.innerHTML=w}}if(s.length){_.setTimeout(arguments.callee,0)}_.tryF(x,[s.length,d])}())},r="xui.Locale."+u,c=function(){var f=xui.$appLangKey;if(f){xui.include(r+"."+f,xui.getPath("Locale."+u,".js"),q,q)}else{q()}};xui.include(r+".inline.$_$",xui.getPath(r,".js"),c,c)},getTheme:function(c){try{c=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(d){}finally{return c||"default"}},setTheme:function(k,i,d,c){k=k||"default";var l=xui.getTheme();if(k!=l){if(i!==false){if(k!="default"){var m;try{m=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(h){}finally{if(m==k||k=="default"){_.tryF(d);return}}xui.CSS.includeLink(xui.getPath("xui.appearance."+k,"/theme.css"),"theme:"+k)}if(l!=="default"){var f=xui.CSS.get("id","theme:"+l);if(f){f.disabled=true;f.parentNode.removeChild(f)}var f=xui.CSS.$getCSSValue(".setting-uikey","fontFamily",l);if(f){f.disabled=true;f.parentNode.removeChild(f)}}}if(i!==false){xui.$CSSCACHE={};var g=0,j=function(p){if(g>20){if(false!==_.tryF(c)){throw"errLoadTheme:"+k}}g++;var q;try{q=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(r){}finally{if(q==k||k=="default"){if(xui.UI){xui.UI.getAll().reLayout(true)}_.tryF(d);j=g=null}else{_.asyRun(j,100*g)}}};j("l")}else{_.tryF(d)}}else{_.tryF(d)}},$CSSCACHE:{},_langParamReg:/\x24(\d+)/g,_langscMark:/[$@{][\S]+/,_langReg:/((\$)([^\w\(]))|((\$)([\w][\w\.-]*[\w]+))|((\$)\(([\w][\w\.]*[^)\n\r]+))\)|((\$)([^\s]))|((\@)([\w][\w\.]*[\w]+)(\@?))|((\@)([^\s])(\@?))|((\{)([~!@#$%^&*+-\/?.|:][\w]*|[\w][\w\.]*[\w]+)(\}))/g,_escapeMap:{"$":"\x01",".":"\x02","-":"\x03",")":"\x04","@":"\x05"},_unescapeMap:{"\x01":"$","\x02":".","\x03":"-","\x04":")","\x05":"@"},getRes:function(h){if(!_.isStr(h)){return h}var c,d,f,i=arguments,g;if(typeof h=="string"){h=h.replace(/\$([$.-])/g,function(k,j){return xui._escapeMap[j]||k});if(h.charAt(0)=="$"){h=h.slice(1)}if(h.indexOf("-")!=-1){f=h.split("-");h=f[0];i=f}c=h.split(".");c[c.length-1]=c[c.length-1].replace(/([\x01\x02\x03\x04])/g,function(j){return xui._unescapeMap[j]})}else{c=h}d=_.get(xui.Locale[xui.$localeKey],c);if((f=typeof d)=="function"){return d.apply(null,i)}else{if(f=="object"){return d}else{d=f=="string"?d.replace(/\$([$.-])/g,function(k,j){return xui._escapeMap[j]||k}):c[c.length-1];g=i.length>1?d.replace(xui._langParamReg,function(l,m,j){j=i[1+ +m];return(j===null||j===undefined)?l:j}):d;return g.replace(/([\x01\x02\x03])/g,function(j){return xui._unescapeMap[j]})}}},wrapRes:function(g){if(!_.isStr(g)){return g}var c=g,d,f;if(c.charAt(0)=="$"){arguments[0]=c.substr(1,c.length-1)}d=g;f=xui.getRes.apply(null,arguments);if(d==f){f=c}return'<span id="'+xui.$localeDomId+'" class="'+d.replace(/([\x01\x02\x03\x04])/g,function(h){return"$"+xui._unescapeMap[h]})+'" '+xui.$IEUNSELECTABLE()+">"+f+"</span>"},adjustRes:function(g,f,d,c){if(!_.isStr(g)){return g}f=f?xui.wrapRes:xui.getRes;g=g.replace(/\$([\$\.\-\)])/g,function(i,h){return xui._escapeMap[h]||i});g=xui._langscMark.test(g)?g.replace(xui._langReg,function(Z,Y,X,W,V,U,T,S,R,Q,P,O,N,M,L,K,J,I,H,G,F,E,D,C,B,A){return X=="$"?c?Z:W:U=="$"?c?Z:f(T):R=="$"?c?Z:f(Q):O=="$"?c?Z:f(N):((d?0:(L=="@"||H=="@"))||D=="{")?((A=xui.SC.get(L=="@"?K:H=="@"?G:C))||(_.isSet(A)?A:"")):Z}):g;return g.replace(/([\x01\x02\x03\x04])/g,function(h){return xui._unescapeMap[h]})},request:function(d,f,h,i,g,c){return((c&&c.proxyType)?(c.proxyType.toLowerCase()=="sajax"?xui.SAjax:c.proxyType.toLowerCase()=="iajax"?xui.IAjax:xui.Ajax):(typeof f=="object"&&((function(k){if(!_.isHash(k)){return 0}for(var j in k){if(k[j]&&k[j].nodeType==1){return 1}}})(f)))?xui.IAjax:(c&&c.method&&c.method.toLowerCase()=="post")?xui.absIO.isCrossDomain(d)?xui.IAjax:xui.Ajax:xui.absIO.isCrossDomain(d)?xui.SAjax:xui.Ajax).apply(null,arguments).start()},getFileSync:function(f,d,g,h,c){return xui.Ajax(f,xui.Ajax._id,g,h,null,_.merge({asy:false,rspType:d||"text"},c,"without")).start()||null},getFileAsync:function(f,d,h,i,g,c){xui.Ajax(f,xui.Ajax._id,h,i,g,_.merge({asy:true,rspType:d||"text"},c,"without")).start()},include:function(i,f,g,h,d,c){if(i&&xui.SC.get(i)){_.tryF(g)}else{c=typeof c=="object"?c:{};if(!d){c.rspType="script";c.checkKey=i;xui.SAjax(f,xui.SAjax._id,g,h,0,c).start()}else{c.asy=!d;xui.Ajax(f,xui.Ajax._id,function(j){try{_.exec(j)}catch(k){_.tryF(h,[k.name+": "+k.message])}_.tryF(g)},h,0,c).start()}}},fetchClass:function(f,h,j,g){var d,i=xui.$cache.clsByURI;if(!g&&(d=i[f])&&d.$xui$){_.tryF(h,[f],d)}else{if(xui.absIO.isCrossDomain(f)){Class._ignoreNSCache=1;Class._last=null;xui.SAjax(f,xui.SAjax._id,function(){if(Class._last){d=i[f]=Class._last}Class._ignoreNSCache=Class._last=null;_.tryF(h,[f],d)},function(){Class._ignoreNSCache=1;Class._last=null;_.tryF(j,_.toArr(arguments))},0,{rspType:"script"}).start()}else{xui.Ajax(f,xui.Ajax._id,function(c){Class._ignoreNSCache=Class._last=null;try{_.exec(c)}catch(k){_.tryF(j,[k.name+": "+k.message]);Class._last=null}if(Class._last){d=i[f]=Class._last}Class._last=null;_.tryF(h,[f],d)},function(){Class._last=null;_.tryF(j,_.toArr(arguments))},0,{rspType:"text",asy:false}).start()}}},require:function(c,d,f,g){xui.include(c,xui.getPath(c,".js","js"),f,g,d)},_m:[],main:function(c){xui._m.push(c);if(xui.isDomReady){xui._domReadyFuns()}},getPath:function(j,c,k){j=j.split(".");if(k){var f=[j[0],k];for(var h=1,d=j.length;h<d;h++){f.push(j[h])}j.length=0;j=f}var m,g=xui.ini;if(j[0]=="xui"){m=g.path;j.shift();if(j.length==(k?1:0)){j.push("xui")}}else{m=g.appPath;if(j.length==((k?1:0)+1)&&c==".js"){j.push("index")}if(g.verPath){m+=g.verPath+"/"}if(g.ver){m+=g.ver+"/"}}if(m.slice(-1)!="/"){m+="/"}return m+j.join("/")+(c||"/")},log:_.fun(),echo:_.fun(),message:_.fun(),_pool:[],getObject:function(c){return xui._pool["$"+c]},_ghostDivId:"xui.ghost::",$getGhostDiv:function(){var f=xui.$cache.ghostDiv,d=0,c=f.length,g;do{g=f[d++]}while(d<c&&(g&&g.firstChild));if(!g||g.firstChild){g=document.createElement("div");g.id=xui._ghostDivId;f.push(g)}return g},$xid:0,$registerNode:function(f){var g,d,c=xui.$cache.domPurgeData;if(!(f.$xid&&(d=c[f.$xid])&&d.element==f)){g="!"+xui.$xid++;d=c[g]||(c[g]={});d.element=f;f.$xid=d.$xid=g}f=null;return d},getId:function(c){if(typeof c=="string"){c=document.getElementById(c)}return c?window===c?"!window":document===c?"!document":(c.$xid||""):""},getNode:function(c){return xui.use(c).get(0)},getNodeData:function(c,d){if(!c){return}return _.get(xui.$cache.domPurgeData[typeof c=="string"?c:xui.getId(c)],d)},setNodeData:function(c,f,d){if(!c){return}return _.set(xui.$cache.domPurgeData[typeof c=="string"?c:xui.getId(c)],f,d)},$purgeChildren:function(k){var d=xui.$cache,r=d.profileMap,c=d.UIKeyMapEvents,s=d.domPurgeData,A=xui.Event.$eventhandler,h=(xui.browser.ie&&k.all)?k.all:k.getElementsByTagName("*"),m=h.length,y=[],q,p,g,z,x,u,f;for(q=0;q<m;q++){if(!(x=h[q])){continue}if(z=x.$xid){if(g=s[z]){if(u=g.eHandlers){if(xui.browser.isTouch&&u.onxuitouchdown){if(x.removeEventListener){x.removeEventListener("xuitouchdown",A,false)}else{if(x.detachEvent){x.detachEvent("xuitouchdown",A)}}}for(p in u){x[p]=null}}for(p in g){g[p]=null}delete s[z]}if(xui.browser.ie){x.removeAttribute("$xid")}else{delete x.$xid}}if(f=x.id){if(f in r){g=r[f];if(!g){continue}z=g.renderId;if("!window"===z||"!document"===z){continue}g.__gc();y[y.length]=q;if(g.$domId&&g.$domId!=g.domId){y[y.length]=g.$domId}}}}for(q=0;q<y.length;){delete r[y[q++]]}k.innerHTML=""},create:function(d){var c,m,j,k=arguments.callee,g=k.r1||(k.r1=/</);if(typeof d=="string"){if(j=xui.absBox.$type[d]){c=[];for(var h=1,f=arguments.length;h<f;h++){c[h-1]=arguments[h]}m=new (xui.SC(j))(false);if(m._ini){m._ini.apply(m,c)}}else{if(g.test(d)){m=_.str.toDom(d)}else{m=document.createElement(d);m.id=typeof id=="string"?id:_.id();m=xui(m)}}}else{m=new (xui.SC(d.key))(d)}return m},use:function(d){var g=xui._tempBox||(xui._tempBox=xui()),f=g._nodes;f[0]=d;if(f.length!=1){f.length=1}return g}});new function(){var q=window,t=navigator.userAgent.toLowerCase(),m=document,i=m.documentMode,p=xui.browser={kde:/webkit/.test(t),opr:/opera/.test(t),ie:(/msie/.test(t)&&!/opera/.test(t)),newie:/trident\/.* rv:([0-9]{1,}[.0-9]{0,})/.test(t),gek:/mozilla/.test(t)&&!/(compatible|webkit)/.test(t),isStrict:m.compatMode=="CSS1Compat",isWebKit:/webkit/.test(t),isFF:/firefox/.test(t),isChrome:/chrome/.test(t),isSafari:(!/chrome/.test(t))&&/safari/.test(t),isWin:/(windows|win32)/.test(t),isMac:/(macintosh|mac os x)/.test(t),isAir:/adobeair/.test(t),isLinux:/linux/.test(t),isSecure:location.href.toLowerCase().indexOf("https")==0,isTouch:(("ontouchend" in m)&&!(/hp-tablet/).test(t))||(q.DocumentTouch&&m instanceof DocumentTouch)||q.PointerEvent||q.MSPointerEvent,isIOS:/iphone|ipad|ipod/.test(t),isAndroid:/android/.test(t),isBB:/blackberry/.test(t)||/BB[\d]+;.+\sMobile\s/.test(navigator.userAgent)},r=function(d,f){f=t.split(f)[1].split(".");return d+(p.ver=parseFloat((f.length>0&&isFinite(f[1]))?(f[0]+"."+f[1]):f[0]))};xui.$secureUrl=p.isSecure&&p.ie?'javascript:""':"about:blank";_.filter(p,function(d){return !!d});if(p.newie){p["newie"+(p.ver=i)]=true;p.cssTag1="-ms-";p.cssTag2="ms"}else{if(p.ie){if(_.isNumb(i)){p["ie"+(p.ver=i)]=true}else{p[r("ie","msie ")]=true}if(p.ie6){try{document.execCommand("BackgroundImageCache",false,true)}catch(k){}q.XMLHttpRequest=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}p.cssTag1="-ms-";p.cssTag2="ms"}else{if(p.gek){p[r("gek",/.+\//)]=true;p.cssTag1="-moz-";p.cssTag2="Moz"}else{if(p.opr){p[r("opr","opera/")]=true;p.cssTag1="-o-";p.cssTag2="O"}else{if(p.kde){p[r("kde","webkit/")]=true;if(p.isSafari){if(/applewebkit\/4/.test(t)){p["safari"+(p.ver=2)]=true}else{p[r("safari","version/")]=true}}else{if(p.isChrome){p[r("chrome","chrome/")]=true}}if(p.isWebKit){p.cssTag1="-webkit-";p.cssTag2="Webkit"}else{p.cssTag1="-khtml-";p.cssTag2="Khtml"}}}}}}if(p.isBB&&!p.ver){p.ver=parseFloat(ua.split("/")[1].substring(0,3));p["bb"+p.ver]=true}p.contentBox=function(d){return(p.ie||p.opr)?!/BackCompat|QuirksMode/.test(m.compatMode):(d=(d=d||m.documentElement).style["-moz-box-sizing"]||d.style["box-sizing"])?(d=="content-box"):true}();var y=xui.ini={};if(window.xui_ini){_.merge(y,window.xui_ini)}if(!y.path){var x,h=document.getElementsByTagName("script"),c=/js\/xui(-[\w]+)?\.js$/,g=h.length;while(--g>=0){x=h[g].src;if(x.match(c)){y.path=x.replace(c,"").replace(/\(/g,"%28").replace(/\)/g,"%29");break}}}_.merge(y,{appPath:location.href.split("?")[0].replace(/[^\\\/]+$/,""),img_bg:y.path+"bg.gif",img_busy:y.path+"busy.gif",img_blank:p.ie&&p.ver<=7?(y.path+"bg.gif"):"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",dummy_tag:"$_dummy_$"});if(!y.path){y.path=y.appPath+"/xui/"}if(!y.basePath){y.basePath=y.path.replace(/xui\/$/,"").replace(/runtime\/$/,"")}var j=xui._domReadyFuns=function(){if(!xui.isDomReady){if(m.addEventListener){m.removeEventListener("DOMContentLoaded",j,false);q.removeEventListener("load",j,false)}else{m.detachEvent("onreadystatechange",j);q.detachEvent("onload",j)}}try{if(xui.ini.customStyle&&!_.isEmpty(xui.ini.customStyle)){var f=[],v=xui.ini.customStyle,d;_.each(v,function(z,l){f.push(l+" : "+z+";")});d=".xui-custom{\r\n"+f.join("\r\n")+"\r\n}";xui.CSS.addStyleSheet(d,"xui:css:custom",1)}for(var u=0,s=xui._m.length;u<s;u++){_.tryF(xui._m[u])}xui._m.length=0;xui.isDomReady=true}catch(w){_.asyRun(function(){throw w})}};if(m.addEventListener){m.addEventListener("DOMContentLoaded",j,false);q.addEventListener("load",j,false)}else{m.attachEvent("onreadystatechange",j);q.attachEvent("onload",j);(function(){if(xui.isDomReady){return}try{m.activeElement.id;m.documentElement.doScroll("left");j()}catch(d){_.setTimeout(arguments.callee,9)}})()}(function(){((!xui.isDomReady)&&((!m.readyState)||/in/.test(m.readyState)))?_.setTimeout(arguments.callee,9):j()})()};new function(){xui._uriReg=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/;xui._localReg=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/;xui._curHref=(function(c){try{return location.href}catch(d){c=document.createElement("a");c.href="";return c.href}})(),xui._localParts=xui._uriReg.exec(xui._curHref.toLowerCase())||[]};Class("xui.Thread",null,{Constructor:function(d,f,h,k,l,c,g){var j=arguments.callee.upper;if(j){j.call(this)}j=null;var p=this,i=arguments.callee,m=xui.$cache.thread;if(p.constructor!==i||!!p.id){return new i(d,f,h,k,l,c,g)}if(typeof d!="string"){d="$"+(p.constructor.$xid++)}p.id=d;p.profile=m[d]||(m[d]={id:d,_start:false,time:0,_left:0,_asy:0.1,index:0,tasks:f||[],delay:h||0,callback:k,onStart:l,onEnd:c,cache:{},status:"ini",cycle:!!g})},Instance:{_fun:_.fun(),__gc:function(){var c=xui.$cache.thread,f=c[this.id];if(f){delete c[this.id];f.tasks.length=0;for(var d in f){f[d]=null}}},_task:function(){var c=this,k=c.profile;if(!k||!k.status||!k.tasks){return}k._asy=0.1;var f={},j=k.tasks[k.index],h,d,g=typeof j;if(g=="function"){f.task=j}else{if(g=="object"){for(d in j){f[d]=j[d]}}}if(typeof f.callback!="function"){f.callback=k.callback}if(typeof f.task=="function"){f.args=f.args||[];f.args.push(k.id)}k.index++;k.time=_();if(typeof f.task=="function"){h=_.tryF(f.task,f.args||[k.id],f.scope||c,null)}if(!k.status){return}if(f.id){k.cache[f.id]=h}if(f.callback&&false===_.tryF(f.callback,[k.id],c,true)){return c.abort()}if(k.status!=="run"){return}c.start()},start:function(h){var d=this,g=d.profile,c,f;if(g._start===false){g._start=true;if(false===_.tryF(g.onStart,[g.id],d)){return d.abort()}}if(g.status!="run"){g.status="run"}if(!g.tasks.length){return d.abort()}if(g.index>=g.tasks.length){if(g.cycle===true){d.profile.index=0}else{return d.abort()}}c=g.tasks[g.index];f=typeof c=="number"?c:(c&&typeof c.delay=="number")?c.delay:g.delay;g._left=(h||h===0)?h:f;if(g._asy!=0.1){_.clearTimeout(g._asy)}g._asy=_.asyRun(d._task,g._left,[],d);g.time=_();return d},suspend:function(d){var f,c=this.profile;if(c.status=="pause"){return}c.status="pause";if(c._asy!==0.1){_.clearTimeout(c._asy);if(c.index>0){c.index--}}f=c._left-(_()-c.time);c._left=(f>=0?f:0);if((Number(d)||0)){this.resume(d)}return this},resume:function(d){var c=this;if(c.profile.status=="run"){return}d=d===undefined?c.profile._left:d===true?c.profile.delay:d===false?0:(Number(d)||0);c.profile.status="run";c.start(d);return c},abort:function(){var c=this.profile;c.status="stop";_.clearTimeout(c._asy);_.tryF(c.onEnd,[c.id]);this.__gc()},links:function(c){var f=this.profile,d=f.onEnd,g=f.id;f.onEnd=function(){_.tryF(d,[g]);c.start()};return this},insert:function(c,h){var g=this,i=g.profile.tasks,f=i.length,d;if(!_.isArr(c)){c=[c]}h=h||g.profile.index;if(h<0){h=-1}if(h==-1){Array.prototype.push.apply(i,c)}else{if(h>f){h=f}d=i.splice(h,f-h);i.push.apply(i,c);i.push.apply(i,d)}return g},getCache:function(c){return this.profile.cache[c]},setCache:function(c,d){this.profile.cache[c]=d;return this},isAlive:function(){return !!xui.$cache.thread[this.id]},getStatus:function(){return this.profile.status}},After:function(){var g=this,j=function(f){g[f]=function(k){var i;if(xui.$cache.thread[k]){(i=xui.Thread(k))[f].apply(i,Array.prototype.slice.call(arguments,1))}}},d="start,suspend,resume,abort".split(",");for(var h=0,c=d.length;h<c;h++){j(d[h])}},Static:{$asFunction:1,$xid:1,__gc:function(){xui.$cache.thread={}},isAlive:function(c){return !!xui.$cache.thread[c]},observableRun:function(i,f,g,d){var c=xui.Thread,h=xui.Dom;if(!_.isArr(i)){i=[i]}if(xui.$cache.thread[g]){if(typeof f=="function"){i.push(f)}c(g).insert(i)}else{c(g,i,0,null,function(j){if(h){h.busy(j,d)}},function(j){_.tryF(f,arguments,this);if(h){h.free(j)}}).start()}},group:function(d,k,l,m,c){var p={},j=xui.Thread,h=function(t,q,s){if(typeof t=="string"){t=j(t)}if(t){var r=function(){var f=arguments.callee;_.tryF(f.onEnd,arguments,this);f.onEnd=null;delete p[q];_.tryF(l,[q,s],this);if(_.isEmpty(p)){j.resume(s)}};r.onEnd=t.profile.onEnd;t.profile.onEnd=r;t.start()}};for(var g in k){p[g]=1}return j(d,[function(q){if(!_.isEmpty(k)){j.suspend(q);for(var f in k){h(k[f],f,q)}}}],0,null,m,c)},repeat:function(f,d,c,g){return xui.Thread(null,[null],d||0,f,c,g,true).start()}}});Class("xui.absIO",null,{Constructor:function(f,p,k,c,h,t){var r=arguments.callee.upper;if(r){r.call(this)}r=null;if(typeof f=="object"){t=f}else{t=t||{};_.merge(t,{uri:f,query:p,onSuccess:k,onFail:c,threadid:h})}var s=this,m=arguments.callee,d=s.constructor;if((d!==m)||s.id){return new m(t)}_.merge(t,{id:t.id||(""+(d._id++)),uri:t.uri?xui.adjustRes(t.uri,0,1,1):"",username:t.username||undefined,password:t.password||undefined,query:t.query||"",contentType:t.contentType||"",Accept:t.Accept||"",header:t.header||null,asy:t.asy!==false,method:"POST"==(t.method||d.method).toUpperCase()?"POST":"GET"},"all");var q="retry,timeout,reqType,rspType,optimized,customQS".split(",");for(var j=0,g=q.length;j<g;j++){t[q[j]]=(q[j] in t)?t[q[j]]:d[q[j]];if(typeof t[q[j]]=="string"){t[q[j]]=t[q[j]].toLowerCase()}}_.merge(s,t,"all");if(s.reqType=="xml"){s.method="POST"}if(d.events){_.merge(s,d.events)}s.query=s.customQS(s.query);if(typeof s.query=="object"&&s.reqType!="xml"){s.query=_.copy(s.query,function(i){return i!==undefined})}if(!s._useForm&&_.isHash(s.query)&&s.reqType!="xml"){s.query=d._buildQS(s.query,s.reqType=="json",s.method=="POST")}return s},Instance:{_fun:_.fun(),_flag:0,_response:false,_txtresponse:"",_retryNo:0,_time:function(){var d=this,f=d.constructor;d._clear();if(d._retryNo<d.retry){d._retryNo++;_.tryF(d.onRetry,[d._retryNo],d);d.start()}else{if(false!==_.tryF(d.onTimeout,[],d)){d._onError(new Error("Request timeout"))}}},_onEnd:function(){var c=this;if(!c._end){c._end=true;if(c._flag>0){_.clearTimeout(c._flag);c._flag=0}xui.Thread.resume(c.threadid);_.tryF(c.onEnd,[],c);c._clear()}},_onStart:function(){var c=this;xui.Thread.suspend(c.threadid);_.tryF(c.onStart,[],c)},_onResponse:function(){var c=this;if(false!==_.tryF(c.beforeSuccess,[c._response,c.rspType,c.threadid],c)){_.tryF(c.onSuccess,[c._response,c.rspType,c.threadid],c)}c._onEnd()},_onError:function(d){var c=this;if(false!==_.tryF(c.beforeFail,[d,c.threadid],c)){_.tryF(c.onFail,[d.name?(d.name+": "+d.message):d,c.rspType,c.threadid,d],c)}c._onEnd()},isAlive:function(){return !this._end},abort:function(){this._onEnd()}},Static:{$abstract:true,_id:1,method:"GET",retry:0,timeout:60000,reqType:"form",rspType:"json",optimized:false,callback:"callback",_buildQS:function(f,c,d){return c?((c=_.serialize(f))&&(d?c:encodeURIComponent(c))):_.urlEncode(f)},customQS:function(c){return c},_if:function(h,j,f){var c=xui.browser.ie&&xui.browser.ver<9,g=c?("<iframe "+(j?("name='xui_IAajax_"+j+"'"):"")+(f?(" onload='xui.IAjax._o(\""+j+"\")'"):"")+">"):"iframe";var i=h.createElement(g),d;if(j){i.id=i.name="xui_IAajax_"+j}if(!c&&f){i.onload=f}i.style.display="none";h.body.appendChild(i);d=frames[frames.length-1].window;return[i,d,d.document]},isCrossDomain:function(f){var c=xui._localParts;f=f.replace(/#.*$/,"").replace(/^\/\//,c[1]+"//");var d=xui._uriReg.exec((f||"").toLowerCase());return !!(d&&(d[1]!==c[1]||d[2]!==c[2]||(d[3]||(d[1]==="http:"?80:443))!==(c[3]||(c[1]==="http:"?80:443))))},groupCall:function(k,l,c,d,j){var g,h=function(p,f,m){m[f]=xui.Thread(null,[function(i){p.threadid=i;p.start()}])};for(g in k){h(k[g],g,k)}return xui.Thread.group(null,k,l,function(){xui.Thread(j).suspend();_.tryF(c,arguments,this)},function(){_.tryF(d,arguments,this);xui.Thread(j).resume()}).start()}}});Class("xui.Ajax","xui.absIO",{Instance:{_XML:null,_unsafeHeader:"Accept-Charset,Accept-Encoding,Access-Control-Request-Headers,Access-Control-Request-Method,Connection,Content-Length,Cookie,Cookie2,Date,DNT,Expect,Host,Keep-Alive,Origin,Referer,TE,Trailer,Transfer-Encoding,Upgrade,User-Agent,Via".toLowerCase().split(","),_isunsafe:function(c){return xui.browser.isWebKit&&(_.str.startWith("Proxy-",c)||_.str.startWith("Sec-",c)||_.arr.indexOf(this._unsafeHeader,c.toLowerCase())!==-1)},_header:function(d,c){if(!this._isunsafe(d)){if(this._XML){this._XML.setRequestHeader(d,c)}}},start:function(){var self=this;if(false===_.tryF(self.beforeStart,[],self)){self._onEnd();return}if(!self._retryNo){self._onStart()}try{with(self){self._XML=new window.XMLHttpRequest();if(asy){self._XML.onreadystatechange=function(){if(self&&self._XML&&self._XML.readyState==4){self._complete.apply(self);self._clear()}}}if(!_retryNo&&method!="POST"){if(query){uri=uri.split("?")[0]+"?"+query}query=null}if(username&&password){self._XML.open(method,uri,asy,username,password)}else{self._XML.open(method,uri,asy)}self._header("Accept",Accept?Accept:(rspType=="json"?"application/json,text/javascript,*/*;q=0.01":rspType=="xml"?"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8":"*/*"));self._header("Content-type",contentType?contentType:((reqType=="xml"?"text/xml; ":reqType=="json"?"application/json; ":method=="POST"?"application/x-www-form-urlencoded; ":"")+"charset="+(self.charset||"UTF-8")));self._header("X-Requested-With","XMLHttpRequest");if(optimized){try{self._header("User-Agent",null);self._header("Accept-Language",null);self._header("Connection","keep-alive");self._header("Keep-Alive",null);self._header("Cookie",null);self._header("Cookie","")}catch(e){}}try{if(_.isHash(header)){_.each(header,function(o,i){self._header(i,o)})}}catch(e){}if(false===_.tryF(self.beforeSend,[self._XML],self)){self._onEnd();return}try{self._XML.send(query)}catch(e){}if(asy){if(self._XML&&timeout>0){_flag=_.asyRun(function(){if(self&&!self._end){self._time()}},self.timeout)}}else{return _complete()}}}catch(e){self._onError(e)}return self},abort:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML.abort();c._XML=null}arguments.callee.upper.call(c)},_clear:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML=null}},_complete:function(){with(this){var ns=this,obj,status=ns._XML.status;_txtresponse=rspType=="xml"?ns._XML.responseXML:ns._XML.responseText;_response=rspType=="json"?((obj=_.unserialize(_txtresponse))===false?_txtresponse:obj):_txtresponse;if(!status&&xui._localReg.test(xui._localParts[1])){status=ns._XML.responseText?200:404}if(status==1223){status=204}if(status>=200&&status<300||status==304){_onResponse()}else{if(status===undefined||status<10){_onError(new Error("Network problems--"+status))}else{_onError(new Error("XMLHTTP returns--"+status))}}}return this._response}},Static:{$asFunction:1}});Class("xui.SAjax","xui.absIO",{Instance:{start:function(){var m=this,d,h=m.constructor,l,g,i=false;if(false===_.tryF(m.beforeStart,[],m)){m._onEnd();return}if(!m._retryNo){m._onStart()}if(m.rspType=="script"){m.retry=0}d=m.id;if(h._pool[d]){h._pool[d].push(m)}else{h._pool[d]=[m]}h.No["_"+d]=function(c){h.$response(c,d)};var j=document,k=function(){if(!i){i=true;if(m.rspType=="script"){if(typeof m.checkKey=="string"){_.asyRun(function(){_.exec("if(xui.SC.get('"+m.checkKey+"'))xui.SAjax._pool['"+d+"'][0]._onResponse();else xui.SAjax._pool['"+d+"'][0]._loaded();")})}else{m._onResponse()}}else{m._loaded()}}};g=m.node=j.createElement("script");var f=m.uri;if(m.query){f=f.split("?")[0]+"?"+m.query}g.src=f;g.type="text/javascript";g.charset=m.charset||"UTF-8";g.onload=g.onreadystatechange=function(){if(i){return}var c=this.readyState;if(!c||c=="loaded"||c=="complete"){k()}if(c=="interactive"&&xui.browser.opr){xui.Thread.repeat(function(){if(i){return false}if(/loaded|complete/.test(document.readyState)){k();return false}},50)}};if("onerror" in g){g.onerror=function(c){m._clear();m._onError(new Error("Not Found - "+f));m=null;return}}(j.body||j.getElementsByTagName("head")[0]).appendChild(g);g=null;if(m.timeout>0){m._flag=_.asyRun(function(){if(m&&!m._end){m._time()}},m.timeout)}},_clear:function(){var f=this,j=f.node,i=f.constructor,h=f.id,d=i._pool;if(d[h]){d[h].length=0;delete d[h]}delete i.No["_"+h];if(j){f.node=j.onload=j.onreadystatechange=j.onerror=null;var g=document.createElement("div");g.appendChild(j.parentNode&&j.parentNode.removeChild(j)||j);if(xui.browser.ie){_.asyRun(function(){g.innerHTML=j.outerHTML="";if(_.isEmpty(d)){i._id=1}d=i=j=g=null})}else{_.asyRun(function(){g.innerHTML="";j=g=null;if(_.isEmpty(d)){i._id=1}})}}else{if(_.isEmpty(d)){i._id=1}}},_loaded:function(){var c=this;_.asyRun(function(){if(c.id&&c.constructor._pool[c.id]){c._onError(new Error("SAjax return script doesn't match"))}},500)}},Static:{$asFunction:1,_pool:{},No:{},$response:function(h,j){var d=this;try{if(h&&(o=d._pool[j])){for(var f=0,c=o.length;f<c;f++){o[f]._response=h;o[f]._onResponse()}}else{d._onError(new Error("SAjax return value formatting error--"+h))}}catch(g){xui.Debugger&&xui.Debugger.trace(g)}},customQS:function(g){var h=this.constructor,d=h.callback,f=(this.rspType!="script");if(typeof g=="string"){return(g||"")+(f?("&"+d+"=xui.SAjax.No._"+this.id):"")}else{if(f){g[d]="xui.SAjax.No._"+this.id}return g}}}});Class("xui.IAjax","xui.absIO",{Instance:{_useForm:true,start:function(){var v=this,q=v.constructor,p,f,u,j,m,g,r,d,l;if(false===_.tryF(v.beforeStart,[],v)){v._onEnd();return}if(!v._retryNo){v._onStart()}f=v.id;if(q._pool[f]){q._pool[f].push(v)}else{q._pool[f]=[v]}v._onload=l=function(B){if(v.OK){return}if(!v.node){return}var k=v.node.contentWindow,A=xui.IAjax,z,x;if(xui.browser.opr){try{if(k.location=="about:blank"){return}}catch(y){}}v.OK=1;var i=0;try{if(k.name===undefined){i=1}}catch(y){i=1}if(i){k.location.replace(A._getDummy()+"#"+xui.ini.dummy_tag)}(function(){var t=0;try{if(k.name===undefined){t=1}}catch(D){t=1}if(t){return _.asyRun(arguments.callee)}var C;if(("xui_IAajax_"+v.id)==k.name){v._clear();v._onError(new Error("IAjax no return value"));return}else{C=k.name}if(C&&(z=_.unserialize(C))&&(x=A._pool[v.id])){for(var w=0,c=x.length;w<c;w++){x[w]._response=z;x[w]._onResponse()}}else{v._clear();v._onError(new Error("IAjax return value formatting error, or no matched 'id'-- "+C))}})()};var s=q._if(document,f,l);v.node=s[0];v.frm=s[1];d=v.form=document.createElement("form");d.style.display="none";var h=v.uri;if(v.method!="POST"){h=h.split("?")[0]}d.action=v.uri;d.method=v.method;d.target="xui_IAajax_"+f;m=v.query||{};for(p in m){if(m[p]&&m[p].nodeType==1){m[p].id=m[p].name=p;d.appendChild(m[p]);r=true}else{if(_.isDefined(m[p])){u=document.createElement("textarea");u.id=u.name=p;u.value=typeof m[p]=="string"?m[p]:_.serialize(m[p],function(c){return c!==undefined});d.appendChild(u)}}}if(v.method=="POST"&&r){d.enctype="multipart/form-data";if(d.encoding){d.encoding=d.enctype}}document.body.appendChild(d);d.submit();u=d=null;if(v.timeout>0){v._flag=_.asyRun(function(){if(v&&!v._end){v._time()}},v.timeout)}},_clear:function(){var q=this,i=q.node,k=q.form,p=q.constructor,g=document.createElement("div"),h=q.id,j=p._pool;if(j[h]){j[h].length=0;delete j[h]}if(xui.browser.gek&&i){try{i.onload=null;var m=i.contentWindow.document;m.write(" ");m.close()}catch(l){}}q.form=q.node=q.frm=null;if(i){g.appendChild(i.parentNode.removeChild(i))}if(k){g.appendChild(k.parentNode.removeChild(k))}g.innerHTML="";if(_.isEmpty(j)){p._id=1}k=g=null}},Static:{$asFunction:1,method:"POST",_pool:{},_o:function(g){var c=this,d=c._pool[g],f=d[d.length-1];_.tryF(f._onload)},_getDummy:function(l){l=l||window;var r=this,k,c,q=l.document,t=xui.ini,s=xui.browser,m=r.isCrossDomain;if(r.dummy){return r.dummy}if(t.dummy){return r.dummy=t.dummy}if(!m(t.path)){if(!q.getElementById("xui:img:bg")){c=q.createElement("img");c.id="xui:img:bg";c.src=t.img_bg;c.style.display="none";q.body.appendChild(c);c=null}}if(c=q.getElementById("xui:img:bg")){return r.dummy=c.src.split("#")[0]}else{k=q.getElementsByTagName("img");for(var h=0,g=k.length;h<g;h++){c=k[h];if(c.src&&!m(c.src)){return r.dummy=c.src.split("#")[0]}}if(s.gek){k=q.getElementsByTagName("link");for(var h=0,g=k.length;h<g;h++){c=k[h];if(c.rel=="stylesheet"&&!m(c.href)){return r.dummy=c.href.split("#")[0]}}}}try{if(l!=l.parent){if((l=l.parent)&&!m(""+l.document.location.href)){return r._getDummy(l)}}}catch(p){}return"/favicon.ico"},customQS:function(g){var f=this,h=f.constructor,d=h.callback;g[d]="window.name";return g}}});Class("xui.SC",null,{Constructor:function(j,k,c,i,d){var f=arguments.callee.upper;if(f){f.call(this)}f=null;var h=xui.$cache.SC,g;if(g=h[j]||(h[j]=_.get(window,j.split(".")))){_.tryF(k,[j,null,i],g)}else{d=d||{};d.$cb=k;if(c){d.threadid=i}g=h[j]=xui.SC._call(j||"",d,c)}return g},Static:{$asFunction:1,__gc:function(c){xui.$cache.SC={}},get:function(d,c){return _.get(c||window,(d||"").split("."))},_call:function(v,w,m){m=!!m;var h,q,c,g,l=[],u=xui.SC.get,j=xui.$cache.snipScript,k=function(s,t,r){var f=this;if(s){if(!u(v)){if(f.$p){(f.$cache||j)[f.$tag]=s}else{try{_.exec(s)}catch(i){throw i.name+": "+i.message+" "+f.$tag}}}}_.tryF(f.$cb,[f.$tag,s,r],u(v)||{})},d=function(i){var f=this;_.tryF(f.$cb,[null,null,f.threadid],f)};if(!(c=u(v))){if(q=j[v]){m=false;k.call({$cb:w.$cb},q);delete j[v]}if(!(c=u(v))){g=xui.getPath(v,".js","js");w=w||{};w.$tag=v;var p;if(m&&!w.$p){w.rspType="script";p=xui.SAjax}else{w.asy=m;p=xui.Ajax}p(g,{rand:_()},k,d,null,w).start();if(!m){c=u(v)}}}else{if(w.$cb){k.call(w)}}return c},loadSnips:function(j,d,k,c,g){if(!j||!j.length){_.tryF(c,[g]);return}var m={},q={$p:1,$cache:d||xui.$cache.snipScript};for(var h=0,f=j.length;h<f;h++){m[j[h]]=1}if(k||c){q.$cb=function(i){if(k){_.tryF(k,arguments,this)}delete m[i||this.$tag];if(_.isEmpty(m)){_.tryF(c,[g]);c=null;xui.Thread.resume(g)}}}xui.Thread.suspend(g);for(var h=0,p;p=j[h++];){this._call(p,_.merge({$tag:p},q),true)}},runInBG:function(h,k,l,c){var f=0,d,m,p=this,g=function(i){while(h.length>f&&(m=p.get(d=h[f++]))){}if(!m){p._call(d,{threadid:i},true)}if(h.length<f){xui.Thread(i).abort()}if(h.length==f){f++}};xui.Thread(null,[g],1000,k,l,c,true).start()},execSnips:function(c){var d,f=c||xui.$cache.snipScript;for(d in f){try{_.exec(f[d])}catch(g){throw g}}f={}},groupCall:function(f,h,d,g){if(f){var c=this;c.execSnips();xui.Thread.suspend(g);c.loadSnips(f,0,h,function(){c.execSnips();_.tryF(d,[g]);d=null;xui.Thread.resume(g)})}else{_.tryF(d,[g])}}}});new function(){var M={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","/":"\\/","\x0B":"\\u000b"},H={"@window":"window","@this":"this"},A1=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/:/[\\\"\x00-\x1f\x7f-\xff]/,A2=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,D=/^(-\d+|\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?((?:[+-](\d{2})(\d{2}))|Z)?$/,E=function(t,i,a,v,m,n,p){for(i in t){if((a=typeof(v=t[i]))=="string"&&(v=D.exec(v))){m=v[8]&&v[8].charAt(0);if(m!="Z"){n=(m=="-"?-1:1)*((+v[9]||0)*60)+(+v[10]||0)}else{n=0}m=new Date(+v[1],+v[2]-1,+v[3],+v[4],+v[5],+v[6],+v[7]||0);n+=m.getTimezoneOffset();if(n){m.setTime(m.getTime()+n*60000)}t[i]=m}else{if(a=="object"&&t[i]&&(_.isObj(t[i])||_.isArr(t[i]))){E(t[i])}}}return t},R=function(n){return n<10?"0"+n:n},F="function",N="number",L="boolean",S="string",O="object",T={},MS=function(x,s){return"."+((s=x[s]())?s<10?"00"+s:s<100?"0"+s:s:"000")},Z=(function(a,b){a=-(new Date).getTimezoneOffset()/60;b=a>0?"+":"-";a=""+Math.abs(a);return b+(a.length==1?"0":"")+a+"00"})();T["undefined"]=function(){return"null"};T[L]=function(x){return String(x)};T[N]=function(x){return((x||x===0)&&isFinite(x))?String(x):"null"};T[S]=function(x){return H[x]||'"'+(A1.test(x)?x.replace(A2,function(a,b){if(b=M[a]){return b}return"\\u"+((b=a.charCodeAt())<16?"000":b<256?"00":b<4096?"0":"")+b.toString(16)}):x)+'"'};T[O]=function(x,filter,dateformat,deep,max){var me=arguments.callee,map=me.map||(me.map={prototype:1,constructor:1,toString:1,valueOf:1});deep=deep||1;max=max||0;if(deep>xui.SERIALIZEMAXLAYER||max>xui.SERIALIZEMAXSIZE){return'"too much recursion!"'}max++;if(x){var a=[],b=[],f,i,l,v;if(x===window){return"window"}if(x===document){return"document"}if((typeof x==O||typeof x==F)&&!_.isFun(x.constructor)){return x.nodeType?"document.getElementById('"+x.id+"')":"$alien"}else{if(_.isArr(x)){a[0]="[";l=x.length;for(i=0;i<l;++i){if(typeof filter=="function"&&false==filter.call(x,x[i],i)){continue}if(f=T[typeof(v=x[i])]){if(typeof(v=f(v,filter,dateformat,deep+1,max))==S){b[b.length]=v}}}a[2]="]"}else{if(_.isDate(x)){if(dateformat=="utc"){return'"'+x.getUTCFullYear()+"-"+R(x.getUTCMonth()+1)+"-"+R(x.getUTCDate())+"T"+R(x.getUTCHours())+":"+R(x.getUTCMinutes())+":"+R(x.getUTCSeconds())+MS(x,"getUTCMilliseconds")+'Z"'}else{if(dateformat=="gmt"){return'"'+x.getFullYear()+"-"+R(x.getMonth()+1)+"-"+R(x.getDate())+"T"+R(x.getHours())+":"+R(x.getMinutes())+":"+R(x.getSeconds())+MS(x,"getMilliseconds")+Z+'"'}else{return"new Date("+[x.getFullYear(),x.getMonth(),x.getDate(),x.getHours(),x.getMinutes(),x.getSeconds(),x.getMilliseconds()].join(",")+")"}}}else{if(_.isReg(x)){return String(x)}else{if(typeof x.serialize==F){x=x.serialize()}if(typeof x==O){if(x.nodeType){return"document.getElementById('"+x.id+"')"}else{a[0]="{";for(i in x){if(map[i]||(filter===true?i.charAt(0)=="_":typeof filter=="function"?false===filter.call(x,x[i],i):0)){continue}if(f=T[typeof(v=x[i])]){if(typeof(v=f(v,filter,dateformat,deep+1,max))==S){b[b.length]=T.string(i)+":"+v}}}a[2]="}"}}else{return String(x)}}}}}a[1]=b.join(", ");return a[0]+a[1]+a[2]}return"null"};T[F]=function(x){return x.$path?x.$path:String(x)};_.serialize=function(obj,filter,dateformat){return T[typeof obj](obj,filter,dateformat||(xui&&xui.$dateFormat))||""};_.stringify=function(obj,filter,dateformat){return _.fromUTF8(_.serialize(obj,filter,dateformat))};_.unserialize=function(str,dateformat){try{str="({_:"+str+"})";str=eval(str);if(dateformat||(xui&&xui.$dateFormat)){E(str)}str=str._;return str}catch(e){return false}}};_.id=function(){var c=this,d=arguments.callee;if(c.constructor!==d||c.a){return(d._||(d._=new d)).next()}c.a=[-1];c.b=[""];c.value=""};_.id.prototype={constructor:_.id,_chars:"abcdefghijklmnopqrstuvwxyz".split(""),next:function(i){with(this){i=(i||i===0)?i:b.length-1;var m,k,l;if((m=a[i])>=25){m=0;if(i===0){a.splice(0,0,1);b.splice(0,0,"a");l=a.length;for(k=1;k<l;++k){a[k]=0;b[k]="0"}++i}else{next(i-1)}}else{++m}a[i]=m;b[i]=_chars[m];return value=b.join("")}}};Class("xui.absBox",null,{Constructor:function(){var c=arguments.callee.upper;if(c){c.call(this)}c=null;this._nodes=[]},Before:function(d){var c=xui.absBox;if(c){(c=c.$type)[d.replace("xui.","")]=c[d]=d}},Instance:{__gc:function(){this.each(function(c){_.tryF(c.__gc)});this._nodes=0},_get:function(c){var d=this._nodes;return _.isNumb(c)?d[c]:d},_empty:function(){this._nodes.length=0;return this},get:function(c){return this._get(c)},size:function(){return this._nodes.length},_each:function(d,k,m){var f=this,g=f._nodes,c=g.length,h,p;if(m){for(h=c;h>=0;h--){if(p=g[h]){if(false===d.call(k||f,p,h)){break}}}}else{for(h=0;h<c;h++){if(p=g[h]){if(false===d.call(k||f,p,h)){break}}}}p=null;return f},each:function(c,d,f){return this._each(c,d,f)},isEmpty:function(){return !this._nodes.length},merge:function(h){if(this==xui.win||this==xui.doc||this==xui("body")){return this}var d=this,k=d.constructor,h=h._nodes,g=0,f,j=d._nodes;if(h.length){for(;f=h[g++];){j[j.length]=f}d._nodes=k._unique(j)}return d},reBoxing:function(g,c){var d=this,f=xui.absBox.$type[g||"Dom"];if(!f){return xui.UI.pack([])}if(f==d.KEY){return d}if(f=xui.SC(f)){return f.pack(d._nodes,c)}}},Static:{$abstract:true,$type:{},pack:function(c,d){var f=new this(false);f._nodes=!c?[]:d===false?_.isArr(c)?c:[c]:typeof this._ensureValues=="function"?this._ensureValues(c):_.isArr(c)?c:[c];return f},_unique:function(c){var l={},d=[],j=0,g,f;for(;g=c[j++];){f=typeof g=="string"?g:g.$xid;if(!l[f]){l[f]=1;d[d.length]=g}}return d},plugIn:function(d,c){this.prototype[d]=c;return this}}});Class("xui.absProfile",null,{Constructor:function(){var c=arguments.callee.upper;if(c){c.call(this)}c=null;if(!this.$xid){this.$xid=xui.absProfile.$xid.next()}},Instance:{getId:function(){return this.$xid},link:function(h,i,g,d){var c=this,f="$"+c.$xid;g=g||c;if(h[f]){c.unLink(i)}h[f]=g;if(_.isArr(h)){_.arr.insertAny(h,g,d,true)}c._links[i]=h;return c},unLink:function(g){var c=this,f,d="$"+c.$xid;if(!c._links){return}if(!(f=c._links[g])){return}if(_.isArr(f)){_.arr.removeValue(f,f[d])}delete f[d];delete c._links[g];return c},unLinkAll:function(){var d=this,h="$"+d.$xid,c=d._links,g,f;for(f in c){g=c[f];if(_.isArr(g)){_.arr.removeValue(g,g[h])}delete g[h]}d._links={};return d}},Static:{$xid:new _.id,$abstract:true}});Class("xui.Profile","xui.absProfile",{Constructor:function(k,i,d,c,g,l,m){var h=arguments.callee.upper,f=_.toArr(arguments);h.apply(this,f);h=null;var j=this;_.merge(j,m);j.key=i||j.key||"";j.alias=d||j.alias||"",j.properties=g?_.copy(g):(j.properties||{});j.events=l?_.copy(l):(j.events||{});j.host=k||j.host||j;j.box=c||j.box||j.constructor;if(j.events){j.setEvents(j.events);delete j.events}j._links={}},Instance:{setEvents:function(d,f){var c=this.box.$EventHandlers;if(_.isHash(d)){return _.merge(this,d,"all",function(h,g){return c[g]})}else{if(c[d]){this[d]=f}}},getEvents:function(f){if(f){return this[f]}else{var c=this,d,g={};_.each(c.box.$EventHandlers,function(j,h){if(c[h]){g[h]=c[h]}});return g}},getProperties:function(c){var d=this.properties;return c?d[c]:_.copy(d)},setProperties:function(c,d){if(_.isHash(c)){this.properties=c}else{this.properties[c]=d}},_applySetAction:function(c,d){return c.call(this,d)},__gc:function(){var c=this;if(c.$beforeDestroy){_.each(c.$beforeDestroy,function(g){_.tryF(g,[],c)});delete c.$beforeDestroy}_.tryF(c.$ondestory,[],c);if(c.onDestroy){c.boxing().onDestroy()}if(c.destroyTrigger){c.destroyTrigger()}var d;if(c.alias&&c.host&&(d=c.host[c.alias])&&(d=d._nodes)&&d.length===1){delete c.host[c.alias]}c.unLinkAll();_.tryF(c.clearCache,[],c);var d=_.get(c,["box","_namePool"]);if(d){delete d[c.alias]}c.destroyed=true;if(c.$afterDestroy){_.each(c.$afterDestroy,function(g){_.tryF(g,[],c)});delete c.$afterDestroy}if(c.afterDestroy){c.boxing().afterDestroy(c)}_.breakO([c.properties,c.events,c],2);c.destroyed=true},boxing:function(){var c=this,d;if(!c.box){return null}if(!((d=c._cacheInstance)&&d.get(0)==c&&d._nodes.length==1)){d=c._cacheInstance=c.box.pack([c],false)}return d},serialize:function(k,q){var l,m=this,h=(l=m.box._beforeSerialized)?l(m):m,d={alias:h.alias,key:h.key,host:h.host};if(d.host===m){delete d.host}else{if(h.host&&!q){if(k!==false){d.host="@this"}else{delete d.host}}}var j={},g=h.box.$DataStruct,f=xui.absObj.$specialChars;_.merge(j,h.properties,function(p,c){return(c in g)&&g[c]!==p&&!f[c.charAt(0)]});if(!_.isEmpty(j)){d.properties=j}if(!_.isEmpty(l=this.getEvents())){d.events=l}var i=h.box.$EventHandlers;_.filter(d.events,function(p,c){return p!=i[c]});if(_.isEmpty(d.events)){delete d.events}return k===false?d:_.serialize(d)}}});Class("xui.absObj","xui.absBox",{Constructor:function(){var d=arguments.callee.upper,c=_.toArr(arguments);d.apply(this,c);d=null;if(c[0]!==false&&typeof this._ini=="function"){return this._ini.apply(this,c)}},Before:function(d,c,f){xui.absBox.$type[d]=d;return true},After:function(){var z=this,q=arguments.callee,x,y,g,w,d,p,h,f,s,c,r;z._nameId=0;z._namePool={};z._nameTag=z.$nameTag||("ctl_"+(y=z.KEY.split("."))[y.length-1].toLowerCase());z._cache=[];d=q.a1||(q.a1=_.toArr("$Keys,$DataStruct,$EventHandlers,$DataModel"));for(h=0;s=d[h++];){g={};if((y=z.$parent)&&(p=y.length)){while(p--){_.merge(g,y[p][s])}}z[s]=g}z.setDataModel(z.DataModel);delete z.DataModel;z.setEventHandlers(z.EventHandlers);delete z.EventHandlers;d=q.a5||(q.a5=_.toArr("RenderTrigger,LayoutTrigger"));for(h=0;s=d[h++];){x=[];if((y=z.$parent)&&(f=y.length)){for(p=0;p<f;p++){w=y[p];if(w=w["$"+s]){x.push.apply(x,w)}}}if(z[s]){x.push(z[s])}z["$"+s]=x;delete z[s]}},Static:{$abstract:true,$specialChars:{_:1,$:1},_objectProp:{tagVar:1},DataModel:{tag:"",desc:"",tagVar:{ini:{}}},getAll:function(){return this.pack(this._cache)},pickAlias:function(){var d,f=this._namePool,c=this._nameTag;while(f[d=(c+(++this._nameId))]){}return d},setDataModel:function(p){var w=this,u=xui.absObj.$specialChars,h=w.$DataStruct,s=w.$DataModel,d=w.prototype,q,l,v,f,g,k,c;for(q in p){if(!s[q]){s[q]={}}f=p[q];if(null===f||undefined===f){c=_.str.initial(q);delete h[q];delete s[q];if(d[l="get"+c]&&d[l].$auto$){delete d[l]}if(d[l="set"+c]&&d[l].$auto$){delete d[l]}}else{v=typeof f;if(v!="object"||f.constructor!=Object){f={ini:f}}h[q]=("ini" in f)?f.ini:(q in h)?h[q]:"";v=s[q];for(l in v){if(!(l in f)){f[l]=v[l]}}s[q]=f}}_.each(p,function(t,m){if(null===t||undefined===t||u[m.charAt(0)]){return}c=_.str.initial(m);g="set"+c;if(!(t&&(t.readonly||t.inner))){var j=t.set;k=d[g];d[g]=(typeof j!="function"&&typeof k=="function")?k:Class._fun(function(x,i){return this.each(function(z){if(!z.properties){return}if(z.properties[m]===x&&!i){return}var A=z.properties[m];if(z.beforePropertyChanged&&false===z.boxing().beforePropertyChanged(z,m,x,A)){return}if(typeof j=="function"){j.call(z,x,A)}else{var y=_.get(z.box.$DataModel,[m,"action"]);z.properties[m]=x;if(typeof y=="function"&&z._applySetAction(y,x,A)===false){z.properties[m]=A}}if(z.afterPropertyChanged){z.boxing().afterPropertyChanged(z,m,x,A)}})},g,w.KEY,null,"instance");delete t.set;if(d[g]!==k){d[g].$auto$=1}}else{delete d[g]}g="get"+c;if(!(t&&t.inner)){var r=t.get;k=d[g];d[g]=(typeof r!="function"&&typeof k=="function")?k:Class._fun(function(){if(typeof r=="function"){return r.apply(this.get(0),arguments)}else{return this.get(0).properties[m]}},g,w.KEY,null,"instance");delete t.get;if(d[g]!==k){d[g].$auto$=1}}else{delete d[g]}});return w},setEventHandlers:function(d){var c=this;_.each(d,function(j,g){if(null===j){delete c.$EventHandlers[g];delete c.prototype[g]}else{c.$EventHandlers[g]=j;var h=function(i){var f=arguments.length;if(f==1&&(typeof i=="function"||typeof i=="string")){return this.each(function(k){if(k.renderId){k.clearCache()}if(k.box._addEventHanlder){k.box._addEventHanlder(k,g,i)}k[g]=i;i=null})}else{if(f==1&&null===i){return this.each(function(k){k.clearCache();if(k.box._removeEventHanlder){k.box._removeEventHanlder(k,g,k[g])}delete k[g]})}else{var r=[],p=this.get(0),s=p[g],m=p.host||p,q;if(p.$inDesign){return}if(arguments[0]!=p){r[0]=p}for(q=0;q<f;q++){r[r.length]=arguments[q]}p.$lastEvent=g;if(typeof s=="string"){s=m[s]}if(typeof s=="function"){return _.tryF(s,r,m)}}}};h.$event$=1;h.$original$=j.$original$||c.KEY;h.$name$=g;h.$type$="event";c.plugIn(g,h)}});return c},unserialize:function(g,h){if(typeof g=="string"){g=_.unserialize(g)}var d=function(f){if(_.isArr(f)){f=f[0]}delete f.serialId;if(f.children){_.arr.each(f.children,d)}},c=[];_.arr.each(g,function(f){if(!h){d(f)}c.push((new (xui.SC(f.key))(f)).get(0))});return this.pack(c,false)}},Instance:{clone:function(){var c=[],g=arguments,d=function(h){delete h.alias;for(var f=0;f<g.length;f++){delete h[g[f]]}if(h.children){for(var f=0,j;j=h.children[f];f++){d(j[0])}}};this.each(function(f){f=f.serialize(false,true);d(f);c.push(f)});return this.constructor.unserialize(c)},serialize:function(d,f){var c=[];this.each(function(g){c[c.length]=g.serialize(false,f)});return d===false?c:c.length==1?" new "+c[0].key+"("+_.serialize(c[0])+")":"xui.UI.unserialize("+_.serialize(c)+")"},setAlias:function(h){var d=this,f=this.get(0),c;if(c=f.alias){if(f.host&&f.host!==f){try{delete f.host[c]}catch(g){f.host[c]=undefined}if(f.host._ctrlpool){delete f.host._ctrlpool[c]}}delete d.constructor._namePool[c]}d.constructor._namePool[f.alias=h]=1;if(f.host&&f.host!==f){f.host[h]=d;if(f.host._ctrlpool){f.host._ctrlpool[h]=d.get(0)}}if(f.box&&f.box._syncAlias){f.box._syncAlias(f,c,h)}return d},getAlias:function(){return this.get(0).alias},getProperties:function(d){var f={},g=this.get(0),j=g.properties,i;if(d===true){return _.copy(j)}else{if(typeof d=="string"){return j[d]}else{for(var c in j){i="get"+_.str.initial(c);if(typeof this[i]=="function"){f[c]=this[i].call(this)}}return f}}},setProperties:function(c,g,f){if(typeof c=="string"){var d={};d[c]=g;c=d}return this.each(function(h){_.each(c,function(j,i){var m="set"+_.str.initial(i),l=h.boxing();if(l&&typeof l[m]=="function"){l[m].call(l,j,!!f)}else{h.properties[i]=j}})})},getEvents:function(c){return this.get(0).getEvents(c)},setEvents:function(c,f){if(typeof c=="string"){var d={};d[c]=f;c=d}return this.each(function(h){var g=h.boxing();_.each(c,function(j,i){if(typeof g[i]=="function"){g[i].call(g,j)}})})},alias:function(c){return c?this.setAlias(c):this.getAlias()},host:function(d,c){return d?this.setHost(d,c):this.getHost()},setHost:function(f,d){var c=this;c.get(0).host=f;if(d){c.setAlias(d)}return c},getHost:function(){return this.get(0).host}}});Class("xui.DataBinder","xui.absObj",{Instance:{_ini:function(h,p,m){var q=this,j=q.constructor,d,r,k=j._namePool,g,l;if(h&&h["xui.Profile"]){d=h;g=d.alias||j.pickAlias()}else{if(h&&h.key&&xui.absBox.$type[h.key]){r=h;h=null;g=r.alias;g=(g&&!k[g])?g:j.pickAlias()}else{g=j.pickAlias()}d=new xui.Profile(m,q.$key,g,j,h,p,r)}k[g]=1;d._n=d._n||[];for(var f in (l=j.$DataStruct)){if(!(f in d.properties)){d.properties[f]=typeof l[f]=="object"?_.copy(l[f]):l[f]}}d.link(j._cache,"self").link(xui._pool,"xui");q._nodes.push(d);d._cacheInstance=q;if(!d.name){q.setName(g)}return q},destroy:function(){this.each(function(d){var f=d.box,c=d.properties.name;_.arr.each(d._n,function(g){if(g){f._unBind(c,g)}});delete f._pool[c];d.__gc()})},getUI:function(c){var d;if(!c){d=xui.UI.pack(this.get(0)._n,false)}else{_.arr.each(this.get(0)._n,function(f){if(f.properties.dataField==c){d=f.boxing();return false}})}return d},checkValid:function(){return xui.absValue.pack(this.get(0)._n,false).checkValid()},getUIValue:function(h,g){var c=this,d=c.get(0),f={};_.arr.each(d._n,function(k){var l=k.properties,i=k.boxing(),j=i.getUIValue();if(!g||(j+" ")!==(i.getValue()+" ")){if(h&&i.getCaption){f[l.dataField]={value:j,caption:i.getCaption()}}else{f[l.dataField]=j}}});return f},isDirtied:function(){var h=this.get(0);for(var f=0,c=h._n.length;f<c;f++){var g=h._n[f],d=g.boxing();if((d.getUIValue()+" ")!==(d.getValue()+" ")){return true}}return false},getDirtied:function(c){return this.getUIValue(c,true)},updateValue:function(){xui.absValue.pack(this.get(0)._n,false).updateValue();return this},updateDataFromUI:function(j,k,g,i){var d=this,f=d.get(0),h={},c;_.arr.each(f._n,function(r){var s=r.properties,l=r.boxing(),m=l.getValue(_.isBool(g)?g:r.__returnArray),q=l.getUIValue(_.isBool(g)?g:r.__returnArray);if(k&&l.getCaption){h[s.dataField]={value:q,caption:l.getCaption()}}else{h[s.dataField]=q}if(j!==false&&r.renderId){l.updateValue()}});if(i){h=_.tryF(i,[h,f],this)}if(f.afterUpdateDataFromUI){c=this.afterUpdateDataFromUI(f,h);if(_.isHash(c)){h=c}c=null}_.merge(f.properties.data,h,"all");return d},updateDataToUI:function(k,d){var u,h,r,l,q,m=this,i=m.get(0),g=i.properties,f={},j,s={};_.merge(f,g.data,function(c,p){return !d||d===p||(_.isArr(d)?_.arr.indexOf(d,p)!=-1:false)});if(k){f=_.tryF(k,[f,i],m)}if(i.beforeUpdateDataToUI){j=m.beforeUpdateDataToUI(i,f);if(_.isHash(j)){f=j}j=null}_.arr.each(i._n,function(c){h=c.properties;u=h.dataField;if(!d||d===u||(_.isArr(d)?_.arr.indexOf(d,u)!=-1:false)){r=(f&&u in f)?f[u]:"";s[u]=r;l=null;q=c.boxing();if(_.isHash(r)){l=_.isSet(r.caption)?r.caption:null;r=r.value}q.resetValue(r);c.__returnArray=_.isArr(r);if(_.isSet(l)&&_.isFun(q.setCaption)){_.tryF(q.setCaption,[l,true],q)}}});_.merge(g.data,s,"all");return m},setHost:function(f,d){var c=this;if(f&&d){c.setName(d)}return arguments.callee.upper.apply(c,arguments)},invoke:function(m,c,z,p,u,r,i){var B=this,l=B.constructor,x=B.get(0),h=x.properties,w=h.dataSourceType,g=h.responseType,d=h.requestType,j=_.isSet(h.queryModel)&&h.queryModel!=="",q=(j?(((h.queryURL.lastIndexOf("/")!=h.queryURL.length-1)?(h.queryURL+"/"):h.queryURL)+h.queryModel):h.queryURL),A=h.queryUserName;queryPasswrod=h.queryPasswrod;queryArgs=_.copy(h.queryArgs),queryOptions=_.copy(h.queryOptions);if(w!="remoting"){return}if(x.beforeInvoke&&false===x.boxing().beforeInvoke(x)){return}var s,k={};if(g=="SOAP"||d=="SOAP"){if(!l.WDSLCache){l.WDSLCache={}}if(!l.WDSLCache[q]){var f=xui.SOAP.getWsdl(q,function(C){if(x.afterInvoke){x.boxing().afterInvoke(x,C)}_.tryF(c,arguments,this);_.tryF(p,arguments,this)});if(f){l.WDSLCache[q]=f}else{return}}}switch(g){case"JSON":k.rspType="json";break;case"XML":s="ajax";k.rspType="xml";break;case"SOAP":s="ajax";k.rspType="xml";var t=xui.SOAP.getNameSpace(l.WDSLCache[q]),y=((t.lastIndexOf("/")!=t.length-1)?t+"/":t)+(queryArgs.methodName||"");k.header=k.header||{};k.header.SOAPAction=y;break}switch(d){case"HTTP":queryArgs=typeof queryArgs=="string"?_.unserialize(queryArgs):queryArgs;break;case"JSON":k.reqType="json";if(h.queryMethod=="auto"){k.method="POST"}queryArgs=typeof queryArgs=="string"?queryArgs:_.serialize(queryArgs);break;case"XML":k.reqType="xml";s="ajax";k.method="POST";if(A&&queryPassword){k.username=A;k.password=queryPassword;k.header=k.header||{};k.header.Authorization="Basic "+l._toBase64(A+":"+queryPassword)}queryArgs=typeof queryArgs=="string"?queryArgs:xui.XMLRPC.wrapRequest(queryArgs);break;case"SOAP":k.reqType="xml";s="ajax";k.method="POST";if(A&&queryPassword){k.username=A;k.password=queryPassword;k.header=k.header||{};k.header.Authorization="Basic "+l._toBase64(A+":"+queryPassword)}queryArgs=typeof queryArgs=="string"?queryArgs:xui.SOAP.wrapRequest(queryArgs,l.WDSLCache[q]);break}if(!s&&h.proxyType!="auto"){s=h.proxyType}if(s!="ajax"){k.asy=true}if(s=="sajax"){k.method="GET"}if(s){s=s.toLowerCase()}i=i||{};if(!("asy" in i)){i.asy=!!h.queryAsync}if(!("method" in i)&&h.queryMethod!="auto"){i.method=h.queryMethod}if(!("onEnd" in i)){i.onEnd=p}if(!("onStart" in i)){i.onStart=z}_.merge(i,queryOptions);_.merge(i,k,"all");var v=(s?(s=="sajax"?xui.SAjax:s=="iajax"?xui.IAjax:xui.Ajax):((function(D){if(!_.isHash(D)){return 0}for(var C in D){if(D[C]&&D[C].nodeType==1){return 1}}})(queryArgs))?xui.IAjax:(i&&i.method&&i.method.toLowerCase()=="post")?xui.absIO.isCrossDomain(q)?xui.IAjax:xui.Ajax:xui.absIO.isCrossDomain(q)?xui.SAjax:xui.Ajax).apply(null,[q,queryArgs,function(D){var C;if(x.afterInvoke){C=x.boxing().afterInvoke(x,D);if(_.isSet(C)){D=C}C=null}if(w=="remoting"&&!_.isHash(D)&&!_.isStr(D)){if(g=="XML"){D=xui.XMLRPC.parseResponse(D)}else{if(g=="SOAP"){D=xui.SOAP.parseResponse(D,queryArgs.methodName,l.WDSLCache[q])}}}_.tryF(m,arguments,this)},function(C){if(x.afterInvoke){x.boxing().afterInvoke(x,C)}_.tryF(c,arguments,this)},r,i]);if(u=="busy"){_.observableRun(function(C){v.start()})}else{if(u=="return"){return v}else{v.start()}}},read:function(k,f,p,c,j,h,q,i){var m=this,g=m.get(0),d=g.properties,l=d.dataSourceType;if(l=="none"||l=="memory"){return}if(g.beforeRead&&false===g.boxing().beforeRead(g)){return}return m.invoke(function(s){var r;if(g.afterRead){r=g.boxing().afterRead(g,s);if(_.isSet(r)){s=r}r=null}if(_.isHash(s)){g.boxing().setData(s).updateDataToUI(i)}_.tryF(k,arguments,this)},f,p,c,j,h,q)},write:function(i,d,l,c,h,g,m){var k=this,f=k.get(0),j=f.properties.dataSourceType;if(j=="none"||j=="memory"){return}if(f.beforeWrite&&false===f.boxing().beforeWrite(f)){return}return k.invoke(function(q){var p;if(f.afterWrite){p=f.boxing().afterWrite(f,q);if(_.isSet(p)){q=p}p=null}_.tryF(i,arguments,this)},d,l,c,h,g,m)},getData:function(c){var f=this.get(0),d=f.properties.data;return _.isSet(c)?d[c]:d},setData:function(c,d){var f=this.get(0).properties;if(c===false){_.each(f.data,function(h,g){f.data[g]=null})}else{if(!_.isSet(c)){f.data={}}else{if(_.isHash(c)){f.data=c}else{f.data[c]=d}}}return this}},Static:{WDSLCache:{},$nameTag:"databinder_",_pool:{},destroyAll:function(){this.pack(_.toArr(this._pool,false),false).destroy();this._pool={}},getFromName:function(c){var d=this._pool[c];return d&&d.boxing()},_toBase64:function(p){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j=[],h=0,g,f,d,q,m,l,k;do{g=p.charCodeAt(h++);f=p.charCodeAt(h++);d=p.charCodeAt(h++);q=g>>2;m=((g&3)<<4)|(f>>4);l=((f&15)<<2)|(d>>6);k=d&63;if(isNaN(f)){l=k=64}else{if(isNaN(d)){k=64}}j.push(c.charAt(q)+c.charAt(m)+c.charAt(l)+c.charAt(k))}while(h<p.length);return j.join("")},_bind:function(f,i){var m,l,h=this._pool[f];if(!h){h=new xui.DataBinder();h.setName(f);h=h.get(0)}var d=h.properties.data;if(i){if(_.arr.indexOf(h._n,i)==-1){i.link(h._n,"databinder."+f)}var g=i.properties,j,k;if(m=g.dataField){l=(d&&m in d)?d[m]:(g.value||"");d[m]=l;j=null;k=i.boxing();if(_.isHash(l)){j=_.isSet(l.caption)?l.caption:null;l=l.value}k.resetValue(l);if(!_.isSet(g.caption)&&k.setCaption){_.tryF(k.setCaption,[j,true],k)}}}},_unBind:function(c,d){if(d&&d.box&&this._pool[c]){d.unLink("databinder."+c)}},_beforeSerialized:function(c){var f={};_.merge(f,c,"all");var d=f.properties=_.clone(c.properties,true);if(d.dataSourceType!="memory"){delete d.data}if(d.dataSourceType=="none"&&d.dataSourceType=="memory"){delete d.queryURL;delete d.queryUserName;delete d.queryPassword;delete d.queryModel;delete d.queryArgs;delete d.queryOptions;delete d.proxyType;delete d.queryAsync;delete d.queryMethod;delete d.requestType;delete d.responseType}if(d.data&&_.isEmpty(d.data)){delete d.data}if(d.queryArgs&&_.isEmpty(d.queryArgs)){delete d.queryArgs}if(d.queryOptions&&_.isEmpty(d.queryOptions)){delete d.queryOptions}return f},DataModel:{data:{ini:{}},dataSourceType:{ini:"none",listbox:["none","memory","remoting"]},queryURL:{ini:""},queryUserName:{ini:""},queryPassword:{ini:""},queryModel:"",queryMethod:{ini:"auto",listbox:["auto","GET","POST"]},queryAsync:true,requestType:{ini:"HTTP",listbox:["HTTP","JSON","XML","SOAP"]},responseType:{ini:"JSON",listbox:["JSON","XML","SOAP"]},queryArgs:{ini:{}},queryOptions:{ini:{}},proxyType:{ini:"auto",listbox:["auto","Ajax","SAjax","IAjax"]},name:{set:function(i,j){var k=this,l=xui.DataBinder,d=l._pool,f=d[j],g=d[i],h;d[k.properties.name=i]=k;if(f&&!g&&k._n.length){h=xui.absValue.pack(_.copy(k._n));_.arr.each(k._n,function(c){l._unBind(j,c)});h.setDataBinder(i)}if(g&&!f){k._n=g._n}if(f){delete d[j]}}}},EventHandlers:{beforeUpdateDataToUI:function(d,c){},afterUpdateDataFromUI:function(d,c){},beforeInvoke:function(c){},afterInvoke:function(d,c){},beforeRead:function(c){},afterRead:function(d,c){},beforeWrite:function(c){},afterWrite:function(d,c){}}}});Class("xui.Event",null,{Constructor:function(B,y,c,D){var s=xui.Event,l=window,F=document,H=0,x,p,k=xui.DragDrop,i,v,m;if(!(B=B||l.event)||!(i=y)){i=y=null;return false}y=null;var g=B.type,I=B.$xuievent,u=B.$xuitype,z=B.$xuiall;if(g=="xuitouchdown"){g="mousedown";I=1;z=0;u="beforeMousedown"}if("mouseover"==g||"mouseout"==g){H=(k&&k._profile.isWorking)?1:2;if(H!=1&&c){i=null;return s.$FALSE}if(!s._handleMouseHover(B,i,H==1)){i=null;return s.$FALSE}if(H==1){v=k&&k._dropElement}}else{if((m=s._tabHookStack).length&&s._kb[g]&&(B.$key||B.keyCode||B.charCode)==9&&false===s._handleTabHook(s.getSrc(B),m=m[m.length-1])){i=null;return}}x=D||s.getId(i);if(m=s._getProfile(x)){if(g=="DOMMouseScroll"){g="mousewheel"}if(g=="mousedown"||g=="mousewheel"){_.tryF(xui.Dom._blurTrigger,[m,B])}else{if(g=="resize"){g="size";if(xui.browser.ie&&l===i){var l=xui.browser.contentBox&&F.documentElement.clientWidth||F.body.clientWidth,C=xui.browser.contentBox&&F.documentElement.clientHeight||F.body.clientHeight;if(m._w==l&&m._h==C){i=null;return}else{m._w=l;m._h=C}}}}var A,E,J,q=true,G=[];for(A=0;A<=2;++A){if(H==1&&A!==0&&!B.$force){break}if(H==2&&A===0){continue}J=s._type[g+A]||(s._type[g+A]=s._getEventName(g,A));if(!I||z||(J===u)){m._getEV(G,x,J,i.$xid)}}E=function(f,d){for(var j=0,h;h=arguments.callee.tasks[j++];){if(false===h(m,f,d)){return false}}return true};E.tasks=G;q=E(B,i.$xid);if(l===i&&g=="size"){_.asyRun(function(){E(B,i.$xid);E.tasks.length=0;delete E.tasks;E=i=null},150)}if(k){if(g=="drag"){k._onDrag=E}else{if(g=="dragover"){k._onDragover=E}}}else{if(g!=="size"){E.tasks.length=0;delete E.tasks;E=null}}if(H==1){if("mouseover"==g&&k._dropElement==i.$xid&&v&&v!=i.$xid){p=xui.use(v).get(0);s({type:"mouseout",target:p,$xui:true,$xuitype:"beforeMouseout",preventDefault:function(d){xui.Event.stopDefault(d)},stopPropagation:function(d){xui.Event.stopBubble(d)}},p);k.setDropElement(i.$xid)}if("mouseout"==g&&!k._dropElement&&v&&v==i.$xid){s._preDroppable=x;_.asyRun(function(){delete xui.Event._preDroppable})}if(i.$xid==k._dropElement){q=false}}if(q===false){s.stopBubble(B)}return q}},Static:{$FALSE:xui.browser.opr?undefined:false,_type:{},_kb:{keydown:1,keypress:1,keyup:1},_reg:/(-[\w]+)|([\w]+$)/g,$eventhandler:function(){return xui.Event(arguments[0],this)},$eventhandler2:function(){return xui.Event(arguments[0],this,1)},$eventhandler3:function(){return xui.Event(arguments[0],xui.Event.getSrc(arguments[0]||window.event))},$lastMouseupTime:0,$dblcInterval:500,$lastClickFunMark:0,_events:("mouseover,mouseout,mousedown,mouseup,mousemove,mousewheel,click,dblclick,contextmenu,keydown,keypress,keyup,scroll,blur,focus,load,unload,beforeunload,abort,change,select,submit,reset,error,move,size,dragbegin,drag,dragstop,dragleave,dragenter,dragover,drop,touchstart,touchmove,touchend,touchcancel,mspointerdown,mspointermove,mspointerup,mspointercancel,pointerdown,pointermove,pointerup,pointercancel").split(","),simulateEvent:function(f,d,c,g){c=c||{};if(f[0]){f=f[0]}_.tryF(xui.Event.$eventsforSimulation[g||d],[f,d,c])},_getEventName:function(c,d){return(c=this._map1[c])&&((d===0||d==1||d==2)?c[d]:c)},_getProfile:function(f,d,c){return f&&(typeof f=="string")&&((d=(c=xui.$cache.profileMap)[f])?d["xui.UIProfile"]?d:(c=c[f.replace(this._reg,"")])?c:d:c[f.replace(this._reg,"")])},_handleTabHook:function(h,g){if(h===document){return true}var f=h,d,c=f.tabIndex;do{if(xui.getId(f)==g[0]){f=h=null;return true}}while(f&&(f=f.parentNode)&&f!==document&&f!==window);d=_.tryF(g[1],[g[0],c],h);f=h=null;return false},_handleMouseHover:function(c,h,k){if(h==document){h=null;return true}var f=(c.type=="mouseover"?c.fromElement:c.toElement)||c.relatedTarget;if(k&&c.type=="mouseover"&&this._preDroppable){try{do{if(f&&f.id&&f.id==this._preDroppable){h=f=null;return true}}while(f&&(f=f.parentNode)&&f!==document&&f!==window)}catch(j){}}if(xui.browser.gek){try{do{if(f==h){h=f=null;return false}}while(f&&(f=f.parentNode))}catch(j){var i=this.getPos(c),f=xui([h]),d=f.offset(),l=f.cssSize(),g=(i.left<d.left||i.left>d.left+l.width||i.top<d.top||i.top>d.top+l.height);h=f=null;return c.type=="mouseover"?!g:g}}else{do{if(f==h){h=f=null;return false}}while(f&&(f=f.parentNode))}h=f=null;return true},_tabHookStack:[],pushTabOutTrigger:function(d,c){this._tabHookStack.push([xui(d)._nodes[0],c]);return this},popTabOutTrigger:function(c){if(c){this._tabHookStack=[]}else{this._tabHookStack.pop()}return this},getSrc:function(d){var c;return((c=d.target||d.srcElement||null)&&xui.browser.kde&&c.nodeType==3)?c.parentNode:c},getId:function(c){return window===c?"!window":document===c?"!document":c.id},getBtn:function(c){return xui.browser.ie?c.button==4?"middle":c.button==2?"right":"left":c.which==2?"middle":c.which==3?"right":"left"},getPos:function(i){i=i||window.event;if(xui.browser.isTouch&&i.changedTouches&&i.changedTouches[0]){i=i.changedTouches[0]}if("pageX" in i){return{left:i.pageX,top:i.pageY}}else{var k=document,j=k.documentElement,c=k.body,g,f=(_.isSet(g=j&&j.scrollLeft)?g:_.isSet(g=c&&c.scrollLeft)?g:0)-(_.isSet(g=j.clientLeft)?g:0),h=(_.isSet(g=j&&j.scrollTop)?g:_.isSet(g=c&&c.scrollTop)?g:0)-(_.isSet(g=j.clientTop)?g:0);return{left:i.clientX+f,top:i.clientY+h}}},getKey:function(c){c=c||window.event;var j=[],q,f=c.$key||c.keyCode||c.charCode||0;if(typeof f=="string"){j[0]=f}else{var p=String.fromCharCode(f),m=c.type;if((m=="keypress"&&f>=33&&f<=128)||((f>=48&&f<=57)||(f>=65&&f<=90))){j[0]=p}else{if(!(q=arguments.callee.map)){q=arguments.callee.map={};var f,h=("3,enter,8,backspace,9,tab,12,numlock,13,enter,19,pause,20,capslock,27,esc,32, ,33,pageup,34,pagedown,35,end,36,home,37,left,38,up,39,right,40,down,44,printscreen,45,insert,46,delete,50,down,52,left,54,right,56,up,91,win,92,win,93,apps,96,0,97,1,98,2,99,3,100,4,101,5,102,6,103,7,104,8,105,9,106,*,107,+,109,-,110,.,111,/,112,f1,113,f2,114,f3,115,f4,116,f5,117,f6,118,f7,119,f8,120,f9,121,f10,122,f11,123,f12,144,numlock,145,scroll,186,;,187,=,189,-,190,.,191,/,192,`,219,[,220,\\,221,],222,',224,meta,63289,numlock,63276,pageup,63277,pagedown,63275,end,63273,home,63234,left,63232,up,63235,right,63233,down,63272,delete,63302,insert,63236,f1,63237,f2,63238,f3,63239,f4,63240,f5,63241,f6,63242,f7,63243,f8,63244,f9,63245,f10,63246,f11,63247,f12,63248,print").split(",");for(var g=1,d=h.length;g<d;g=g+2){q[h[g-1]]=h[g]}h.length=0;q[188]=","}j[0]=q[f]||p}}if((c.modifiers)?(c.modifiers&Event.CONTROL_MASK):(c.ctrlKey||c.ctrlLeft||f==17||f==57391)){if(f==17||f==57391){j[0]=""}j.push("1")}else{j.push("")}if((c.modifiers)?(c.modifiers&Event.SHIFT_MASK):(c.shiftKey||c.shiftLeft||f==16||f==57390)){if(f==16||f==57390){j[0]=""}j.push("1")}else{j.push("")}if((c.modifiers)?false:(c.altKey||c.altLeft||f==18||f==57388)){if(f==18||f==57388){j[0]=""}j.push("1")}else{j.push("")}j[0]=j[0];j.key=j[0];j.type=m;j.ctrlKey=!!j[1];j.shiftKey=!!j[2];j.altKey=!!j[3];if(m=="keypress"){if(this.$keydownchar&&this.$keydownchar.length>1){j.key=this.$keydownchar}}else{if(m=="keydown"){if(j[0].length>1){this.$keydownchar=j[0]}else{if(this.$keydownchar){this.$keydownchar=null}}}else{if(m=="keyup"){if(this.$keydownchar){this.$keydownchar=null}}}}return j},getEventPara:function(j,c){if(!c){c=xui.Event.getPos(j)}var g=this.getKey(j),f={pageX:c&&c.left,pageY:c&&c.top,keyCode:g.key,ctrlKey:g.ctrlKey,shiftKey:g.shiftKey,altKey:g[3].altKey};for(var d in j){if(d.charAt(0)=="$"){f[d]=j[d]}}return f},stopBubble:function(c){c=c||window.event;if(c.stopPropagation){c.stopPropagation()}if("cancelBubble" in c){c.cancelBubble=true}this.stopDefault(c)},stopDefault:function(c){c=c||window.event;if(c.preventDefault){c.preventDefault()}else{if("returnValue" in c){c.returnValue=false}}},keyboardHook:function(l,c,f,h,j,i,q,m){if(l){var d=xui.$cache.hookKey,g=(l||"").toLowerCase()+":"+(c?"1":"")+":"+(f?"1":"")+":"+(h?"1":"");if(typeof j!="function"){delete d[g]}else{d[g]=[j,i,q,m]}}return this},keyboardHookUp:function(l,c,f,h,j,i,q,m){if(l){var d=xui.$cache.hookKeyUp,g=(l||"").toLowerCase()+":"+(c?"1":"")+":"+(f?"1":"")+":"+(h?"1":"");if(typeof j!="function"){delete d[g]}else{d[g]=[j,i,q,m]}}return this},getWheelDelta:function(c){return c.wheelDelta?c.wheelDelta/120:-c.detail/3},$TAGNAMES:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},_supportCache:{},isSupported:function(d,h){var g=this,j=g._supportCache,i=(h?h.tagName.toLowerCase():"div")+":"+d;if(i in j){return j[i]}h=h||document.createElement(g.$TAGNAMES[d]||"div");d="on"+d;var f=(d in h);if(!f){if(!h.setAttribute){h=document.createElement("div")}if(h.setAttribute){h.setAttribute(d,"");f=typeof h[d]=="function";if(typeof h[d]!="undefined"){h[d]=undefined}h.removeAttribute(d)}}h=null;return j[i]=f},_simulateMousedown:function(c){if(!c.touches){return true}var d=xui.Event,f=c.changedTouches,g=f[0];if(c.touches.length>1){return true}d.__simulatedMousedownNode=g.target;if(!d.isSupported("mousedown")){d.simulateEvent(g.target,"mousedown",{screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY})}else{d._xuitouchdowntime=_.setTimeout(function(){d._xuitouchdowntime=0;d.simulateEvent(g.target,"xuitouchdown",{screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY},"mousedown")},100)}return true},_simulateMouseup:function(f){if(!f.touches){return true}var g=xui.Event,d=(new Date).getTime(),c=d-g.$lastMouseupTime,h=f.changedTouches,i=h[0];if(g._xuitouchdowntime){_.clearTimeout(g._xuitouchdowntime)}g.__simulatedMouseupNode=i.target;if(!g.isSupported("mouseup")){g.simulateEvent(i.target,"mouseup",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY})}if(g.__simulatedMouseupNode===g.__simulatedMousedownNode){if(!g.isSupported("click")){g.simulateEvent(i.target,"click",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY})}if(c<=g.$dblcInterval){_.asyRun(function(){g.$lastMouseupTime=0;g.simulateEvent(i.target,"dblclick",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY})})}}g.__simulatedMouseupNode=g.__simulatedMousedownNode=null;g.$lastMouseupTime=d;return true},stopPageTouchmove:function(){document.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointermove":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerMove":"touchmove",function(c){c.preventDefault()})}},Initialize:function(){var p=this,q=window,l=document,r={move:null,size:null,drag:null,dragstop:null,dragover:null,mousewheel:null,dragbegin:"onmousedown",dragenter:"onmouseover",dragleave:"onmouseout",drop:"onmouseup"},f=["before","on","after"],j,i,t;j=p._map1={};_.arr.each(p._events,function(d){t=_.str.initial(d);j[d]=[f[0]+t,f[1]+t,f[2]+t]});j=p._eventMap={};i=p._eventHandler={};_.arr.each(p._events,function(d){t=_.str.initial(d);j[d]=j[f[1]+d]=j[f[0]+t]=j[f[1]+t]=j[f[2]+t]=d;i[d]=i[f[1]+d]=i[f[0]+t]=i[f[1]+t]=i[f[2]+t]=(d in r)?r[d]:("on"+d)});q.onresize=p.$eventhandler;if(q.addEventListener){q.addEventListener("DOMMouseScroll",p.$eventhandler3,false)}if(xui.browser.isTouch){if(l.addEventListener){l.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",p._simulateMousedown,false);l.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",p._simulateMouseup,false);l.addEventListener("xuitouchdown",p.$eventhandler,false)}else{if(l.attachEvent){l.attachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",p._simulateMousedown);l.attachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",p._simulateMouseup);l.attachEvent("xuitouchdown",p.$eventhandler)}}}l.onmousewheel=q.onmousewheel=p.$eventhandler3;var k=function(x,C,G){switch(C){case"textevent":C="keypress";break;case"keyup":case"keydown":case"keypress":break}_.merge(G,{bubbles:true,cancelable:true,view:q,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:0,charCode:0},"without");var w=G.bubbles,u=G.cancelable,D=G.view,s=G.ctrlKey,d=G.altKey,B=G.shiftKey,z=G.metaKey,F=G.keyCode,E=G.charCode;var A=null;if(l.createEvent){try{A=l.createEvent("KeyEvents");A.initKeyEvent(C,w,u,D,s,d,B,z,F,E)}catch(y){try{A=l.createEvent("Events")}catch(v){A=l.createEvent("UIEvents")}finally{A.initEvent(C,w,u);A.view=D;A.altKey=d;A.ctrlKey=s;A.shiftKey=B;A.metaKey=z;A.keyCode=F;A.charCode=E}}x.dispatchEvent(A)}else{if(l.createEventObject){A=l.createEventObject();A.bubbles=w;A.cancelable=u;A.view=D;A.ctrlKey=s;A.altKey=d;A.shiftKey=B;A.metaKey=z;A.keyCode=(E>0)?E:F;x.fireEvent("on"+C,A)}else{throw C+" cant be simulated in "+navigator.userAgent}}},c=function(H,y,x){x=x||{};_.merge(x,{bubbles:true,cancelable:true,view:q,detail:1,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,screenX:0,screenY:0,clientX:0,clientY:0,button:0,relatedTarget:null},"without");var A=x.bubbles,I=x.cancelable,C=x.view,G=x.detail,v=x.ctrlKey,u=x.altKey,D=x.shiftKey,w=x.metaKey,d=x.screenX,J=x.screenY,F=x.clientX,E=x.clientY,s=x.button,z=x.relatedTarget;var B=null;if(l.createEvent){B=l.createEvent("MouseEvents");if(B.initMouseEvent){B.initMouseEvent(y,A,I,C,G,d,J,F,E,v,u,D,w,s,z)}else{B=l.createEvent("UIEvents");B.initEvent(y,A,I);B.view=C;B.detail=G;B.screenX=d;B.screenY=J;B.clientX=F;B.clientY=E;B.ctrlKey=v;B.altKey=u;B.metaKey=w;B.shiftKey=D;B.button=s;B.relatedTarget=z}if(z&&!B.relatedTarget){if(y==="mouseout"){B.toElement=z}else{if(y==="mouseover"){B.fromElement=z}}}H.dispatchEvent(B)}else{if(l.createEventObject){B=l.createEventObject();B.bubbles=A;B.cancelable=I;B.view=C;B.detail=G;B.screenX=d;B.screenY=J;B.clientX=F;B.clientY=E;B.ctrlKey=v;B.altKey=u;B.metaKey=w;B.shiftKey=D;switch(s){case 0:B.button=1;break;case 1:B.button=4;break;case 2:break;default:B.button=0}B.relatedTarget=z;H.fireEvent("on"+y,B)}else{throw y+" cant be simulated in "+navigator.userAgent}}},h=function(z,y,v){_.merge(v,{bubbles:true,cancelable:(y==="submit"),view:q,detail:1},"without");var u=v.bubbles,s=v.cancelable,d=v.view,x=v.detail;var w=null;if(l.createEvent){w=l.createEvent("UIEvents");w.initUIEvent(y,u,s,d,x);z.dispatchEvent(w)}else{if(l.createEventObject){w=l.createEventObject();w.bubbles=u;w.cancelable=s;w.view=d;w.detail=x;z.fireEvent("on"+y,w)}else{throw y+" cant be simulated in "+navigator.userAgent}}},m=function(y,C,F){_.merge(F,{bubbles:true,cancelable:true,detail:2,view:q,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,scale:1,rotation:0},"without");var w=F.bubbles,u=F.cancelable,x=F.detail,D=F.view,s=F.ctrlKey,d=F.altKey,B=F.shiftKey,z=F.metaKey,v=F.scale,E=F.rotation;var A;A=l.createEvent("GestureEvent");A.initGestureEvent(C,w,u,D,x,screenX,screenY,clientX,clientY,s,d,B,z,y,v,E);y.dispatchEvent(A)},g=function(J,y,w){if(y==="touchstart"||y==="touchmove"){if(!w.touches||!w.touches.length){throw"No touch object in touches."}}else{if(y==="touchend"){if(!w.changedTouches||!w.changedTouches.length){throw"No touch object in changedTouches."}}}_.merge(w,{bubbles:true,cancelable:(y!=="touchcancel"),detail:1,view:q,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,screenX:0,screenY:0,clientX:0,clientY:0,scale:1,rotation:0},"without");var z=w.bubbles,L=w.cancelable,I=w.detail,B=w.view,K=w.scale,G=w.rotation,C=w.touches,H=w.targetTouches,x=w.changedTouches,u=w.ctrlKey,s=w.altKey,D=w.shiftKey,v=w.metaKey,d=w.screenX,M=w.screenY,F=w.clientX,E=w.clientY,L=y=="touchcancel"?false:w.cancelable;var A;if(l.createEvent){if(xui.browser.isAndroid){if(xui.browser.ver<4){A=l.createEvent("MouseEvents");A.initMouseEvent(y,z,L,B,I,d,M,F,E,u,s,D,v,0,J);A.touches=C;A.targetTouches=H;A.changedTouches=x}else{A=l.createEvent("TouchEvent");A.initTouchEvent(C,H,x,y,B,d,M,F,E,u,s,D,v)}}else{if(xui.browser.isIOS){if(xui.browser.ver>=2){A=l.createEvent("TouchEvent");A.initTouchEvent(y,z,L,B,I,d,M,F,E,u,s,D,v,C,H,x,K,G)}else{throw y+" cant be simulated in "+navigator.userAgent}}else{throw y+" cant be simulated in "+navigator.userAgent}}J.dispatchEvent(A)}else{throw y+" cant be simulated in "+navigator.userAgent}};p.$eventsforSimulation={click:c,dblclick:c,mouseover:c,mouseout:c,mouseenter:c,mouseleave:c,mousedown:c,mouseup:c,mousemove:c,pointerover:c,pointerout:c,pointerdown:c,pointerup:c,pointermove:c,MSPointerOver:c,MSPointerOut:c,MSPointerDown:c,MSPointerUp:c,MSPointerMove:c,keydown:k,keyup:k,keypress:k,submit:h,blur:h,change:h,focus:h,resize:h,scroll:h,select:h,touchstart:g,touchmove:g,touchend:g,touchcancel:g,gesturestart:m,gesturechange:m,gestureend:m}}});Class("xui.CSS",null,{Static:{_r:xui.browser.ie?"rules":"cssRules",_baseid:"xui:css:base",_firstid:"xui:css:first",_lastid:"xui:css:last",_reg1:/\.(\w+)\[CLASS~="\1"\]/g,_reg2:/\[ID"([^"]+)"\]/g,_reg3:/\*([.#])/g,_reg4:/\s+/g,_reg5:/\*\|/g,_reg6:/(\s*,\s*)/g,_rep:function(d){var c=this;return d.replace(c._reg1,".$1").replace(c._reg2,"#$1").replace(c._reg3,"$1").replace(c._reg4," ").replace(c._reg5,"").replace(c._reg6,",").toLowerCase()},_appendSS:function(d,c,h){var f=document.createElement("style");f.type="text/css";if(h){f.id=h}if(xui.browser.ie&&f.styleSheet&&"cssText" in f.styleSheet){f.styleSheet.cssText=c||""}else{try{f.appendChild(document.createTextNode(c||""))}catch(g){f.styleSheet.cssText=c||""}}d.appendChild(f);return f},_createCss:function(f,i,q){var l=this,m=this._getHead(),h=l._firstid,j=l._lastid,g,k;g=document.createElement("style");g.type="text/css";g.id=f;if(i){if(xui.browser.ie&&g.styleSheet&&"cssText" in g.styleSheet){g.styleSheet.cssText=i||""}else{try{g.appendChild(document.createTextNode(i||""))}catch(d){g.styleSheet.cssText=i||""}}}if(!q){k=document.getElementById(h)||m.firstChild;while((k=k.nextSibling)&&!/^(script|link|style)$/i.test(""+k.tagName)){}if(k){m.insertBefore(g,k)}else{if(k=document.getElementById(j)){m.insertBefore(g,k)}else{m.appendChild(g)}}}else{m.appendChild(g)}return g},_getCss:function(f,c,d){return document.getElementById(f)||this._createCss(f,c,d)},_getBase:function(){return this._getCss(this._baseid)},_getFirst:function(){return this._getCss(this._firstid)},_getLast:function(){return this._getCss(this._lastid,null,true)},_getHead:function(){return this._head||(this._head=document.getElementsByTagName("head")[0]||document.documentElement)},_check:function(){if(!xui.browser.ie){return}var h=0;for(var g=this._getHead(),f=0,d=g.childNodes,c;c=d[f++];){if(c.type=="text/css"){h++}}return h>20},get:function(j,h){for(var g=this._getHead(),f=0,d=g.childNodes,c;c=d[f++];){if(c.type=="text/css"&&j in c&&c[j]==h){return c}}},addStyleSheet:function(c,k,d){var i,g=this,f=g._getHead(),h=function(l,s,m){var r=document.createElement("style");r.type="text/css";if(s){r.id=s}if(xui.browser.ie&&r.styleSheet&&"cssText" in r.styleSheet){r.styleSheet.cssText=l||""}else{try{r.appendChild(document.createTextNode(l||""))}catch(q){r.styleSheet.cssText=l||""}}if(m===-1){if(f.firstChild){f.insertBefore(r,f.firstChild)}else{f.appendChild(r)}}else{if(m===1){f.appendChild(r)}else{f.insertBefore(r,m?g._getLast():g._getBase())}}r.disabled=true;r.disabled=false;return r},j=function(l,m){var p=m?g._getLast():g._getBase();p.styleSheet.cssText+=l;return p};if(k&&(k=k.replace(/[^\w\-\_\.\:]/g,"_"))&&(i=g.get("id",k))){return i}if(g._check()){return j(c,d)}else{return h(c,k,d)}},includeLink:function(d,j,h,c){var i,g=this,f=g._getHead();if(d&&(i=g.get("href",d))){}else{i=document.createElement("link");i.type="text/css";i.rel="stylesheet";i.href=d;if(j){i.id=j}i.media="all";_.each(c,function(l,k){i.setAttribute(k,l)})}f.insertBefore(i,h?g._getBase():g._getLast());i.disabled=true;i.disabled=false;return i},remove:function(f,d){var c=this._getHead();if(d=this.get(f,d)){d.disabled=true;c.removeChild(d)}},replaceLink:function(c,l,h,d){var i=this,j=i._getHead(),g={},f,k;g[l]=d;f=i.includeLink(c,null,false,g);if(k=i.get(l,h)){j.replaceChild(f,k)}f.disabled=true;f.disabled=false},_build:function(c,g,d){var f="";_.each(g,function(j,h){f+=h.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+j+";"});return d?f:c+"{"+f+"}"},setStyleRules:function(g,p,d){var m=this,u=true,f=document.styleSheets,l,i,c,r,j,k,s,q;g=_.str.trim(g.replace(/\s+/g," "));if(!(p&&d)){r=g.toLowerCase();_.arr.each(_.toArr(f),function(t){try{t[m._r]}catch(h){return}_.arr.each(_.toArr(t[m._r]),function(w,x){if(!w.selectorText){return}if(w.disabled){return}c=m._rep(w.selectorText);q=c.split(",");if(!p){u=false;if(_.arr.indexOf(q,r)!=-1&&q.length>1){q=_.arr.removeFrom(q,_.arr.indexOf(q,r)).join(",");s=w.cssText.slice(w.cssText.indexOf("{")+1,w.cssText.lastIndexOf("}"));if(t.insertRule){t.insertRule(q+"{"+s+"}",t[m._r].length)}else{if(t.addRule){t.addRule(q,s||"{}")}}if(t.deleteRule){t.deleteRule(x)}else{t.removeRule(x)}t.disabled=true;t.disabled=false}else{if(c==r){if(t.deleteRule){t.deleteRule(x)}else{t.removeRule(x)}t.disabled=true;t.disabled=false}}}else{if(c==r){l=w;return false}if(_.arr.indexOf(q,r)!=-1){i=w;return false}}},null,true);if(l){u=false;try{_.each(p,function(w,v){v=v.replace(/(-[a-z])/gi,function(x,y){return y.charAt(1).toUpperCase()});l.style[v]=typeof w=="function"?w(l.style[v]):w})}catch(h){}t.disabled=true;t.disabled=false;return false}else{if(i){u=false;t.insertRule(m._build(g,p),t[m._r].length);t.disabled=true;t.disabled=false;return false}}},null,true)}if(d||u){m._addRules(g,p)}return m},$getCSSValue:function(q,h,u){var x=this,r=x._r,f=document.styleSheets,p=f.length,g,d,y,t,s,c;q=_.str.trim(q.replace(/\s+/g," "));for(t=p-1;t>=0;t--){try{d=f[t][r]}catch(w){continue}if(!f[t].disabled){g=(d=f[t][r]).length;for(s=g-1;s>=0;s--){if((y=d[s]).selectorText&&!y.disabled){c=x._rep(y.selectorText);if(_.arr.indexOf(c.split(/\s*,\s*/g),q)!=-1){if(!u){return(y.style[h]||"").replace(/^\"|\"$/g,"")}else{if(u===y.style[h]){return f[t].ownerNode||f[t].owningElement}}}}}}}},_addRules:function(c,f){var d=this,g=d._getLast(),h=g.sheet||g.styleSheet;if(h.insertRule){h.insertRule(d._build(c,f),h[d._r].length)}else{if(h.addRule){h.addRule(c,d._build(c,f,true)||"{}")}}g.disabled=true;g.disabled=false;return d},resetCSS:function(){var c=xui.browser,d="html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,ar{font-style:normal;font-weight:normal;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}sup{vertical-align:text-top;}sub{vertical-align:text-bottom;}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit;}input,textarea,select{*font-size:100%;}"+(c.isWebKit?"input,textarea,select{-webkit-user-select: auto;}":"")+"legend{color:#000;}span{outline-offset:-1px;"+(c.gek?c.ver<3?((c.ver<3?"-moz-outline-offset:-1px !important;":"")+"display:-moz-inline-block;display:-moz-inline-box;display:inline-block;"):"display:inline-block;":c.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(c.ie?"zoom:1;":"")+"}";this.addStyleSheet(d,"xui.CSSreset")}},Initialize:function(){var c=xui.browser,d=".xui-node{margin:0;padding:0;line-height:1.22em;}.xui-wrapper{color:#000;font-family:arial,helvetica,clean,sans-serif;font-style:normal;font-weight:normal;font-size:12px;vertical-align:middle;}.xui-cover{cursor:wait;background:url("+xui.ini.img_bg+") transparent repeat;font-size:12px;}.xui-node-table{border-collapse:collapse;border-spacing:0;empty-cells:show;font-size:inherit;"+(c.ie?"font:100%;":"")+"}.xui-node-fieldset,.xui-node-img{border:0;}.xui-node-ol,.xui-node-ul,.xui-node-li{list-style:none;}.xui-node-caption,.xui-node-th{text-align:left;}.xui-node-th{font-weight:normal;}.xui-node-q:before,.xui-node-q:after{content:'';}.xui-node-abbr,.xui-node-acronym{border:0;font-variant:normal;}.xui-node-sup{vertical-align:text-top;}.xui-node-sub{vertical-align:text-bottom;}.xui-node-input,.xui-node-textarea,.xui-node-select{cursor:text;font-family:inherit;font-size:inherit;font-weight:inherit;"+(c.ie?"font-size:100%;":"")+"}.xui-node-del,.xui-node-ins{text-decoration:none;}.xui-node-pre,.xui-node-code,.xui-node-kbd,.xui-node-samp,.xui-node-tt{font-family:monospace;"+(c.ie?"font-size:108%;":"")+"line-height:100%;}.xui-node-select,.xui-node-input,.xui-node-button,.xui-node-textarea{font:99% arial,helvetica,clean,sans-serif;border-width:1px;}.xui-node-a{cursor:pointer;color:#0000ee;text-decoration:none;}.xui-node-a:hover{color:red}"+(c.gek?(".xui-node-a:focus{outline-offset:-1px;"+(c.ver<3?"-moz-outline-offset:-1px !important":"")+"}"):"")+".xui-node-span, .xui-node-div{border:0;font-size:12px;}.xui-node-span, .xui-wrapper span{outline-offset:-1px;"+(c.gek?c.ver<3?((c.ver<3?"-moz-outline-offset:-1px !important;":"")+"display:-moz-inline-block;display:-moz-inline-box;display:inline-block;"):"display:inline-block;":c.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(c.ie?"zoom:1;":"")+"}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6{font-size:100%;font-weight:normal;}.xui-node-h1{font-size:138.5%;}.xui-node-h2{font-size:123.1%;}.xui-node-h3{font-size:108%;}.xui-node-h1,.xui-node-h2,.xui-node-h3{margin:1em 0;}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6,.xui-node-strong{font-weight:bold;}.xui-node-em{font-style:italic;}.xui-node-legend{color:#000;}"+(c.ie6?("#"+xui.$localeDomId+"{vertical-align:baseline;}"):"")+".xui-nooutline:focus{outline:0;}.xui-busy{background-image:url(data:image/gif;base64,R0lGODlhEAAQAOMAAAQCBHx+fLy+vOTm5ERCRMTGxISGhAQGBISChMTCxOzq7FRSVMzKzP7+/gAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQANACwAAAAAEAAQAAAESrDJSau9OOvNe1VFonCFIBRcIiQJp7BjNySDxRjMNAQBUk+FAwCAaiR6gURhsUgYhgCEZIDgDRYEwqIALTZmNay2UTB4KwKmwBIBACH5BAkJAA8ALAAAAAAQABAAgwQCBHx+fLy+vERCRKSmpOTi5BQWFNTW1KyurIyKjMTCxERGRPTy9BwaHLSytP7+/gRE8MlJq7046827n47RIJwBAEZ5phsikg9TMNZBHBMj7PR0DEDco7ATFA6JhA04IEh0AgUjEQgomcLY7EG1PmzZClJpiQAAIfkECQkADQAsAAAAABAAEAAABEewyUmrtcywWxn4BTcZH4CIUlGGaFMYbOsuSywuBLHIuC4LNEFrkBjIBoEAwmhRFBKKRDKQuBQEgsIAoWRWEoJEleitRKGWCAAh+QQJCQAPACwAAAAAEAAQAIMEAgR8fny8vrxEQkSkpqTk4uQUFhTU1tSsrqyMiozEwsRERkT08vQcGhy0srT+/v4ERfDJ6UxDM2sDgHkHcWgT5x1DOpKIhRDpQJAaqtK1iJNHkqy7RyIQSAQlw+IR5APiGAXGkiGoSoOFqqBwpAoU1yA0vJxEAAAh+QQJCQANACwAAAAAEAAQAAAES7DJWdYqMzdmWFsEsTRDMkwMoFbhMgQBcjaGCiCCJQhwkEgFG2YyQMRmjYJhmCkhNVBFoqCAQgu7nzWTECS0W4k0UQ2bz+i0en2OAAAh+QQJCQAPACwAAAAAEAAQAIMEAgR8fny8vrxEQkSkpqTk4uQUFhTU1tSsrqyMiozEwsRERkT08vQcGhy0srT+/v4ERfDJeVI6M79DcApB8jAFQy3DUIEJI7zmQ6RDZx3FKxTSQWMTl0AR23Q0o5LEYWggkEgDAGCAaqRUawbRfGq/4LB4TC5DIwAh+QQJCQANACwAAAAAEAAQAAAER7DJqUpSM7eRRkuCUGjSgAQIJyQJ+QXwxWLkAKeuxnm5VCyLVk+yIBAWQ6IRmRQABclJwcCIMg4AwGhoyAIQyYJ3O5ySo9EIACH5BAkJAA8ALAAAAAAQABAAgwQCBHx+fLy+vERCRKSmpOTi5BQWFNTW1KyurIyKjMTCxERGRPTy9BwaHLSytP7+/gRG8MlJ62SFWcuE19tUeEIRXp4Cng+2hkeSHKyUBEFSP3e+x7Od5ECg1Q6LwcB4IigHBETD4NgcngcDAGCAFR9a7g5hMCAsEQA7);background-repeat:no-repeat;background-position:center center;}.xui-err{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAAJdnBBZwAAABAAAAAQAFzGrcMAAADdSURBVCjPfdGxTsJQGIbhpw20GgN1IZQBDQnGxvu/FEU3IjEBB5SKUsGkdTiCYeGb/pw803uixum1iMJ1KZdp40dpYQWNqBERuXItRY1YrPJspmm0wNAYlZkvdPR1jTVmtJAZgUhliaWFQs9IqYwxkKhUUnf64NuTD6kBMTK8mKgkigNZaGQBJGqfVh6PyFotCWC/NxMbiUL+/xhjJ9Y5kEriVk9HbBdAKZI7A+8ebLQVhigDmNvqKg7k3kZbamceOpSmbvSkXq1xIfSfKh2lPlf/pWa7Tx3A6c86vV+v4FNOkQDWwAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMC0wMi0xMVQxMTo1MDowOC0wNjowMNYQZfsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMDYtMDUtMDVUMTM6MjI6NDAtMDU6MDC/5P4aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-position:center center;}.xui-cls-wordwrap{white-space: pre-wrap;"+(c.gek?"white-space: -moz-pre-wrap;":"")+(c.opr?"white-space: -pre-wrap;":"")+(c.opr?"white-space: -o-pre-wrap;":"")+(c.ie?"word-wrap: break-word;":"")+"}";this.addStyleSheet(d,"xui.CSS")}});Class("xui.DomProfile","xui.absProfile",{Constructor:function(d){var c=arguments.callee.upper;if(c){c.call(this)}c=null;xui.$cache.profileMap[this.domId=d]=this},Instance:{__gc:function(){delete xui.$cache.profileMap[this.domId]},_getEV:function(d,j,f){var h=xui.$cache.profileMap[j];if(h&&(h=h.events)&&(h=h[f])){for(var g=0,c=h.length;g<c;g++){if(typeof h[h[g]]=="function"){d[d.length]=h[h[g]]}}}}},Static:{get:function(c){return xui.$cache.profileMap[c]},$abstract:true}});Class("xui.Dom","xui.absBox",{Instance:{get:function(g){var f=xui.$cache.domPurgeData,j=this._nodes,k;if(_.isNumb(g)){return(k=j[g])&&(k=f[k])&&k.element}else{var d=[],c=j.length;for(var h=0;h<c;h++){d[d.length]=(k=f[j[h]])&&k.element}return d}},each:function(d){var k=this,f=xui.$cache.domPurgeData,m;for(var h=0,g=k._nodes,c=g.length;h<c;h++){if((m=f[g[h]])&&(m=m.element)){if(false===d.call(k,m,h)){break}}}m=null;return k},serialize:function(){var c=[];this.each(function(d){c[c.length]=d.id});return"xui(['"+c.join("','")+"'])"},xid:function(){return xui.getId(this.get(0))},id:function(g,h){var f,d,c=xui.$cache.profileMap;if(typeof g=="string"){return this.each(function(i){if((d=i.id)!==g){if(!h&&(f=c[d])){c[g]=f;delete c[d]}i.id=g}})}else{return this.get(0).id}},$sum:function(d,f){var c=[],h,g;this.each(function(i){h=d.apply(i,f||[]);if(h){if(_.isArr(h)){for(g=0;i=h[g];g++){c[c.length]=i}}else{c[c.length]=h}}});return xui(c)},children:function(){return this.$sum(function(){return _.toArr(this.childNodes)})},clone:function(c){return this.$sum(function(){var j=this.cloneNode(c?true:false),f=j.getElementsByTagName("*"),h=xui.browser.ie&&xui.browser.ver<9,d=0,g;if(h){j.removeAttribute("$xid")}else{delete j.$xid}for(;g=f[d];d++){if(h){g.removeAttribute("$xid")}else{delete g.$xid}}return j},arguments)},$iterator:function(f,d,h,c,g){return this.$sum(function(r,k,v,s,u){var x=arguments.callee;if(typeof s!="function"){var l=s||0;s=function(t,m){return m==l}}var p=0,j,i=this,q=0,w;while(i){if(i.nodeType==1){if(s(i,p++)===true){break}}if(r=="x"){i=k?i.nextSibling:i.previousSibling}else{if(r=="y"){i=k?x.call(k===1?i.lastChild:i.firstChild,"x",(k!==1),true,0,u):i.parentNode}else{v=_.isBool(v)?v:true;j=null;i=k?(w=v&&i.firstChild)?w:(w=i.nextSibling)?w:(j=i.parentNode):(w=v&&i.lastChild)?w:(w=i.previousSibling)?w:(j=i.parentNode);if(j){while(!(j=k?i.nextSibling:i.previousSibling)){i=i.parentNode;if(!i){if(q){return null}else{q=true;j=k?document.body.firstChild:document.body.lastChild;break}}}i=j}v=true}}}return i},arguments)},query:function(d,p,m){d=d||"*";var k="getElementsByTagName",l=arguments.callee,j=l.f1||(l.f1=function(r,q,u){var t=this[k](r),f=[];if(u.test(this[q])){f[f.length]=this}for(var v,s=0;v=t[s];s++){if(u.test(v[q])){f[f.length]=v}}return f}),i=l.f2||(l.f2=function(r,q,u){var t=this[k](r),f=[];if(this[q]==u){f[f.length]=this}for(var v,s=0;v=t[s];s++){if(v[q]==u){f[f.length]=v}}return f}),h=l.f3||(l.f3=function(r,q,u){var t=this[k](r),f=[];if(this[q]){f[f.length]=this}for(var v,s=0;v=t[s];s++){if(v[q]){f[f.length]=v}}return f}),g=l.f4||(l.f4=function(f){return _.toArr(this[k](f))}),c=l.f5||(l.f5=function(r,q){var t=this[k](r),f=[];if(q(this)){f[f.length]=this}for(var u,s=0;u=t[s];s++){if(q(u)){f[f.length]=u}}return f});return this.$sum(p?typeof p=="function"?c:m?_.isReg(m)?j:i:h:g,[d,p,m])},$add:function(t,r,l){if(_.isHash(r)||_.isStr(r)){r=xui.create(r)}if(l){l=xui(r);r=this}else{r=xui(r);l=this}if(r._nodes.length){var q=l.get(0),u=r.get(),h=xui.Dom,c=xui.$cache.profileMap,s,x,d,k,f,g,w,x,m=[];r.each(function(i){x=(d=i.id)&&(d=c[d])&&d.LayoutTrigger&&(q===xui("body").get(0)||h.getStyle(q,"display")!="none")&&d.LayoutTrigger;if(x){m.push([x,d])}});if(u.length==1){s=u[0]}else{s=document.createDocumentFragment();for(k=0;f=u[k];k++){s.appendChild(f)}}t.call(q,s);for(k=0;f=m[k];k++){for(g=0;w=f[0][g];g++){w.call(f[1])}if(f[1].onLayout){f[1].boxing().onLayout(f[1])}}m.length=0;q=f=s=null}return this},prepend:function(c,d){return this.$add(function(f){if(this.previousSibling!=f){if(this.firstChild){this.insertBefore(f,this.firstChild)}else{this.appendChild(f)}}},c,d)},append:function(d,f,c){return this.$add(function(g){if(c||this!=g.parentNode){this.appendChild(g)}},d,f)},addPrev:function(c,d){return this.$add(function(f){if(this.firstChild!=f){this.parentNode.insertBefore(f,this)}},c,d)},addNext:function(c,d){return this.$add(function(f){if(this.nextSibling!=f){if(this.nextSibling){this.parentNode.insertBefore(f,this.nextSibling)}else{this.parentNode.appendChild(f)}}},c,d)},replace:function(k,j){if(_.isHash(k)||_.isStr(k)){k=xui.create(k)}k=xui(k);var f,g,m=this.get(0),h=k.get(),d=h.length;if(d>0&&(f=h[d-1])){m.parentNode.replaceChild(f,m);for(g=0;g<d-1;g++){f.parentNode.insertBefore(h[g],f)}if(j){this.remove()}}m=f=null;return k},swap:function(f){var c=this,d=xui.Dom.getEmptyDiv().html("*",false);if(_.isHash(f)||_.isStr(f)){f=xui.create(f)}f=xui(f);c.replace(d,false);f.replace(c,false);d.replace(f,false);d.get(0).innerHTML="";document.body.insertBefore(d.get(0),document.body.firstChild);return c},remove:function(d){var f=xui.$getGhostDiv();if(d===false){this.each(function(g,c){if(g.raphael&&g.remove){g.remove()}else{if(g.parentNode){g.parentNode.removeChild(g)}}})}else{this.each(function(c){f.appendChild(c)});xui.$purgeChildren(f);f.innerHTML="";f=null}return this},empty:function(c){return this.each(function(d){xui([d]).html("",c)})},html:function(p,d,l){var r="",q,h=this.get(0);d=d!==false;if(p!==undefined){if(h){if(h.nodeType==3){h.nodeValue=p}else{if(!h.firstChild&&p===""){return this}if(d){xui.$purgeChildren(h)}var k;if(l){var j=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,i=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,g=/\ssrc=([\'\"])(.*?)\1/i,f,m,c;k=[];while((f=j.exec(p))){m=f[1];c=m?m.match(g):false;if(c&&c[2]){k.push([1,c[2]])}else{if(f[2]&&f[2].length>0){k.push([2,f[2]])}}}p=p.replace(i,"")}h.innerHTML=p;if(k&&k.length>0){_.arr.each(k,function(t){if(t[0]==1){xui.include(null,t[1])}else{_.exec(t[1])}})}}h=null}return this}else{if(h){r=(h.nodeType==3)?h.nodeValue:h.innerHTML;h=null}return r}},loadHtml:function(f,c,d){var g=this;if(typeof f=="string"){f={url:f}}_.tryF(c);xui.Ajax(f.url,f.query,function(h){var i=xui.create("div");i.html(h,false,true);g.append(i.children());_.tryF(d)},function(h){g.append("<div>"+h+"</div>");_.tryF(d)},null,f.options).start()},loadIframe:function(c,g){if(typeof c=="string"){c={url:c}}var i=g||("aiframe_"+_()),d;if(d=xui.Dom.byId(g)){xui(d).remove()}var f=xui.browser.ie&&xui.browser.ver<9,h=document.createElement(f?"<iframe name='"+i+"'>":"iframe");h.id=h.name=i;h.src=c.url;h.frameBorder="0";h.marginWidth="0";h.marginHeight="0";h.vspace="0";h.hspace="0";h.allowTransparency="true";h.width="100%";h.height="100%";this.append(h);xui.Dom.submit(c.url,c.query,c.method,h.name,c.enctype)},outerHTML:function(i,c){var k=this,j,l="",f=k.get(0),d=f.id;if(i!==undefined){var g=k.replace(_.str.toDom(i),false);k._nodes[0]=g._nodes[0];xui([f]).remove(c);return k}else{if(xui.browser.gek){var h=xui.$getGhostDiv();h.appendChild(k.get(0).cloneNode(true));l=h.innerHTML;h.innerHTML="";h=null}else{l=f.outerHTML}f=null;return l}},text:function(f){if(f!==undefined){var d=this,c=[];d.each(function(h){var g=h.firstChild;if(g&&g.nodeType!=1){g.nodeValue=f}else{c[c.length]=h}});if(c.length){xui(c).empty().each(function(g){g.appendChild(document.createTextNode(f))})}return d}else{return(function(p){if(!p){return""}var j,h=p.childNodes,g=h.length,m="",k=arguments.callee;for(j=0;j<g;j++){if(h[j].nodeType!=8){m+=(h[j].nodeType!=1)?h[j].nodeValue:k(h[j])}}return m})(this.get(0))}},attr:function(d,m){var q=this,l=arguments.callee,j=l.map1||(l.map1={"class":"className",readonly:"readOnly",tabindex:"tabIndex","for":"htmlFor",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",value:"value"}),h=l.map2||(l.map2={href:1,src:1,style:1});if(typeof d=="object"){for(var g in d){l.call(q,g,d[g])}return q}var p=xui.browser.ie&&d=="style",k=!h[d=j[d]||d];if(m!==undefined){return q.each(function(r){if(m===null){if(p){r.style.cssText=""}else{if(k){try{r[d]=null;if(r.nodeType==1){r.removeAttribute(d)}}catch(i){}}}}else{if(p){r.style.cssText=""+m}else{if(k){r[d]=m;if(r.nodeType==1&&d!="value"&&typeof m=="string"){r.setAttribute(d,m)}}else{r.setAttribute(d,m)}}}})}else{var c,f=q.get(0);if(p){return f.style.cssText}if(d=="selected"&&xui.browser.kde){return f.parentNode.selectedIndex}c=((d in f)&&k)?f[d]:f.getAttribute(d,xui.browser.ie&&!k?2:undefined);f=null;return c}},$touchscroll:function(h){if(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){var i={x:1,y:1,xy:1},c=0,j=0,g=null,d=null,f=this._nodes;if(!i[h]){h=null}xui(f).onTouchstart(i[h]?function(q,m,r){if(xui.DragDrop._profile.isWorking){return true}var l=m.touches[0],k=xui(r).get(0);if(k){if(h=="xy"||h=="x"){c=l.pageX}if(h=="xy"||h=="y"){j=l.pageY}}return true}:null);xui(f).onTouchmove(i[h]?function(u,r,w){if(xui.DragDrop._profile.isWorking){return true}var q=r.touches[0],l=xui(w).get(0),k,m,v;if(l){k=l.scrollLeft;m=l.scrollTop;if(h=="xy"||h=="x"){if(g===null){v=1;g=l.scrollLeft+q.pageX+(c==q.pageX?0:c>q.pageX?1:-1)*10}l.scrollLeft=g-q.pageX}if(h=="xy"||h=="y"){if(d===null){v=1;d=l.scrollTop+q.pageY+(j==q.pageY?0:j>q.pageY?1:-1)*10}l.scrollTop=d-q.pageY}return(!v)&&k==l.scrollLeft&&m==l.scrollTop}}:null);xui(f).onTouchend(i[h]?function(l,k,m){if(xui.DragDrop._profile.isWorking){return true}g=d=null}:null)}return this},isScrollBarShowed:function(c){c=c=="x"?"scrollLeft":"scrollTop";if(this[c]()!==0){return true}this[c](1);if(this[c]()===0){return false}this[c](0);return true},scrollIntoView:function(){if(this.get(0)){this.get(0).scrollIntoView()}return this},css:function(c,d){if(typeof c=="object"||d!==undefined){this.each(function(f){xui.Dom.setStyle(f,c,d)});if(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){if(c=="overflow"||c=="overflow-x"||c=="overflow-y"){if(d=="auto"||d=="scroll"){this.$touchscroll(c=="overflow"?"xy":c=="overflow-x"?"x":"y")}else{this.$touchscroll(null)}}}return this}else{return xui.Dom.getStyle(this.get(0),c)}},caret:function(g,k){var w=this.get(0),y=w.tagName.toLowerCase(),t=typeof g,f=xui.browser.ie,u;if(!/^(input|textarea)$/i.test(y)){return}if(y=="input"&&w.type.toLowerCase()!="text"&&w.type.toLowerCase()!="password"){return}w.focus();if(t=="number"){if(f){var c=w.createTextRange();c.collapse(true);c.moveEnd("character",k);c.moveStart("character",g);c.select()}else{w.setSelectionRange(g,k)}return this}else{if(t=="string"){var c=this.caret(),j=0,i=0,s,x=w.value,h=/\r/g;if(f){j=x.substr(0,c[0]).match(h);j=(j&&j.length)||0;i=g.match(h);i=(i&&i.length)||0}if(xui.browser.opr){j=g.match(/\n/g);j=(j&&j.length)||0;i=g.match(/\r\n/g);i=(i&&i.length)||0;i=j-i;j=0}w.value=x.substr(0,c[0])+g+x.substr(c[1],x.length);s=c[0]-j+i+g.length;this.caret(s,s);return s}else{if(f){var c=document.selection.createRange(),p=c.text,j=p.length,q,i;if(y.toLowerCase()=="input"){c.moveStart("character",-w.value.length);q=c.text.length;return[q-j,q]}else{var d=c.duplicate();d.moveToElementText(w);d.setEndPoint("EndToEnd",c);q=d.text.length;return[q-j,q]}}else{return[w.selectionStart,w.selectionEnd]}}}},show:function(i,h){var f,d,j="auto",c=xui.Dom.HIDE_VALUE,g;return this.each(function(k){if(k.nodeType!=1){return}f=k.style;g=xui.getNodeData(k);if(d=(h||(f.top==c&&(g._top||j)))){f.top=d}if(d=(i||(f.left==c&&(g._left||j)))){f.left=d}if(d=g._position){if(f.position!=d){f.position=d}}g._xuihide=0;if(f.visibility!="visible"){f.visibility="visible"}})},hide:function(){var d,c,f;return this.each(function(g){if(g.nodeType!=1){return}d=g.style;c=xui([g]);f=xui.getNodeData(g);if(f._xuihide!==1){f._position=d.position;f._top=d.top;f._left=d.left;f._xuihide=1}if(d.position!="absolute"){d.position="absolute"}d.top=d.left=xui.Dom.HIDE_VALUE})},cssRegion:function(u,v){var y=this;if(typeof u=="object"){var p,x,g,d=y.get(0),l=xui.Dom,q=l._setPxStyle,g={};for(var k=0,r=l._boxArr;p=r[k++];){g[p]=((p in u)&&u[p]!==null)?q(d,p,u[p]):false}if(v){var q=l.$hasEventHandler;if(q(d,"onsize")&&(g.width||g.height)){y.onSize(true,{width:g.width,height:g.height})}if(q(d,"onmove")&&(g.left||g.top)){y.onMove(true,{left:g.left,top:g.top})}}return y}else{var h=u,w=v,s=h?y.offset(null,w):y.cssPos(),z=y.cssSize();return{left:s.left,top:s.top,width:z.width,height:z.height}}},cssSize:function(p,j){var m=this,d=m.get(0),c,g=xui.Dom,h=g._setPxStyle,k,i;if(p){var l;k=p.width!==null?h(d,"width",p.width):false;i=p.height!==null?h(d,"height",p.height):false;if(j&&(k||i)&&g.$hasEventHandler(d,"onsize")){m.onSize(true,{width:k,height:i})}c=m}else{c={width:m._W(d,1)||0,height:m._H(d,1)}}return c},cssPos:function(i,k){var d=this.get(0),g=xui.Dom,h=g._setPxStyle,l,j,c;if(i){var m;l=i.left!=null?h(d,"left",i.left):false;j=i.top!==null?h(d,"top",i.top):false;if(k&&(l||j)&&g.$hasEventHandler(d,"onmove")){this.onMove(true,{left:l,top:j})}c=this}else{h=g.getStyle;c={left:parseInt(h(d,"left"),10)||0,top:parseInt(h(d,"top"),10)||0}}d=null;return c},offset:function(i,v){var p,l,A=xui.browser,E=this,s=E.get(0),x=s,k=s.parentNode,j=s.offsetParent,D=s.ownerDocument,z=D.documentElement,B=D.body,f=/^inline|table.*$/i,h=xui.Dom.getStyle,g=h(s,"position")=="fixed",C=arguments.callee,m=C.add||(C.add=function(F,d,r){F.left+=parseInt(d,10)||0;F.top+=parseInt(r,10)||0}),u=C.border||(C.border=function(d,r){m(r,h(d,"borderLeftWidth"),h(d,"borderTopWidth"))}),q=C.TTAG||(C.TTAG={TABLE:1,TD:1,TH:1}),w=C.HTAG||(C.HTAG={BODY:1,HTML:1}),c=C.posDiff||(C.posDiff=function(F,t){var r=F.cssPos(),d=F.offset(null,t);return{left:d.left-r.left,top:d.top-r.top}});v=v?xui(v).get(0):D;if(i){if(i.left===null&&i.top===null){return E}var y=c(E,v);E.cssPos({left:i.left===null?null:(i.left-y.left),top:i.top===null?null:(i.top-y.top)});p=E}else{if(!(xui.browser.gek&&s===document.body)&&s.getBoundingClientRect){l=s.getBoundingClientRect();i={left:l.left,top:l.top};if(v.nodeType==1&&v!==document.body){m(i,-(l=v.getBoundingClientRect()).left+v.scrollLeft,-l.top+v.scrollTop)}else{m(i,(_.isNumb(z.scrollLeft)?z.scrollLeft:B.scrollLeft)-z.clientLeft,(_.isNumb(z.scrollTop)?z.scrollTop:B.scrollTop)-z.clientTop)}}else{i={left:0,top:0};m(i,s.offsetLeft,s.offsetTop);while(j&&j!=v&&j!=v.offsetParent){m(i,j.offsetLeft,j.offsetTop);if(A.kde||(A.gek&&!q[j.tagName])){u(j,i)}if(!g&&h(j,"position")=="fixed"){g=true}if(j.tagName!="BODY"){x=j.tagName=="BODY"?x:j}j=j.offsetParent}while(k&&k.tagName&&k!=v&&!w[k.tagName]){if(!f.test(h(k,"display"))){m(i,-k.scrollLeft,-k.scrollTop)}if(A.gek&&h(k,"overflow")!="visible"){u(k,i)}k=k.parentNode}if((A.gek&&h(x,"position")!="absolute")){m(i,-B.offsetLeft,-B.offsetTop)}if(g){m(i,_.isNumb(z.scrollLeft)?z.scrollLeft:B.scrollLeft,_.isNumb(z.scrollTop)?z.scrollTop:B.scrollTop)}}p=i}return p},hasClass:function(d){var c=xui.Dom._getClass(this.get(0)).split(/\s+/);return _.arr.indexOf(c,d)!=-1},addClass:function(d){var c,f,h=arguments.callee,g=(h.reg||(h.reg=/\s+/));return this.each(function(i){c=(f=xui.Dom._getClass(i)).split(g);if(_.arr.indexOf(c,d)==-1){xui.Dom._setClass(i,f+" "+d)}})},removeClass:function(c){var h,g,f,k,p,m=typeof c=="string",j=arguments.callee,d=(j.reg||(j.reg=/\s+/));return this.each(function(i){h=xui.Dom._getClass(i).split(d);f=h.length;k=[];for(g=0;p=h[g];g++){if(m?(p!=c):(!c.test(String(p)))){k[k.length]=p}}if(f!=k.length){xui.Dom._setClass(i,k.join(" "))}})},replaceClass:function(f,c){var g,d;return this.each(function(h){d=(g=xui.Dom._getClass(h)).replace(f,c);if(g!=d){xui.Dom._setClass(h,d)}})},tagClass:function(c,h){var g=this,i=arguments.callee,f=i["_r1_"+c]||(i["_r1_"+c]=new RegExp("([-\\w]+"+c+"[-\\w]*)")),d=i._r2||(i._r2=/([-\w]+)/g);g.removeClass(f);return(false===h)?g:g.replaceClass(d,"$1 $1"+c)},$addEventHandler:function(c){var g=xui.Event,f,d=g.$eventhandler;return this.each(function(h){if(h.nodeType==3){return}xui.setNodeData(h,["eHandlers","on"+g._eventMap[c]],d);if(f=g._eventHandler[c]){h[f]=d;xui.setNodeData(h,["eHandlers",f],d);if(xui.browser.isTouch&&f=="onmousedown"){xui.setNodeData(h,["eHandlers","onxuitouchdown"],d);if(h.addEventListener){h.addEventListener("xuitouchdown",d,false)}else{if(h.attachEvent){h.attachEvent("xuitouchdown",d)}}}}})},$removeEventHandler:function(c){var g=xui.Event,f=g.$eventhandler,d;return this.each(function(h){if(d=g._eventHandler[c]){h[d]=null;if(xui.browser.isTouch&&d=="onmousedown"){if(h.removeEventListener){h.removeEventListener("xuitouchdown",f,false)}else{if(h.detachEvent){h.detachEvent("xuitouchdown",f)}}}}if(h=xui.getNodeData(h,"eHandlers")){d="on"+g._eventMap[c];delete h[d];if(xui.browser.isTouch&&d=="onmousedown"){delete h.onxuitouchdown}}})},$addEvent:function(f,l,p,j){var s=this,d=xui.Event,i=_.arr.removeValue,q=_.arr.insertAny,g,k,r,h;if(!j&&j!==0){j=-1}if(typeof p=="string"){p="$"+p}else{p=undefined}s.$addEventHandler(f).each(function(c){if(c.nodeType==3){return}if(!(g=d.getId(c))){g=c.id=xui.Dom._pickDomId()}if(!(k=xui.$cache.profileMap[g])){k=new xui.DomProfile(g)}r=k.events||(k.events={});h=r[f]||(r[f]=[]);if(p===undefined){h.length=0;h=r[f]=[];j=-1;p="_"}h[p]=l;i(h,p);if(j==-1){h[h.length]=p}else{q(h,p,j)}if(xui.Event&&(k=xui.Event._getProfile(g))&&k.clearCache){k.clearCache()}});return s},$removeEvent:function(f,r,h){var u=this,q,s,j,g,m,p,d=xui.Event,l=xui.$cache.profileMap,p=d._eventMap[f];u.each(function(c){if(!(g=d.getId(c))){return}if(!(q=l[g])){return}if(!(s=q.events)){return}if(h){_.arr.each(d._getEventName(p),function(i){delete s[i]})}else{if(typeof r=="string"){r="$"+r;if(j=s[f]){if(_.arr.indexOf(j,r)!=-1){_.arr.removeValue(j,r)}delete j[r]}}else{delete s[f]}}if(xui.Event&&(q=xui.Event._getProfile(g))&&q.clearCache){q.clearCache()}});return u},$getEvent:function(f,d){var h;if(!(h=xui.Event.getId(this.get(0)))){return}if(d){return _.get(xui.$cache.profileMap,[h,"events",f,"$"+d])}else{var g=[],c=_.get(xui.$cache.profileMap,[h,"events",f]);_.arr.each(c,function(k,j){g[g.length]={o:c[k]}});return g}},$clearEvent:function(){return this.each(function(d,c){if(!(c=xui.Event.getId(d))){return}if(!(c=xui.$cache.profileMap[c])){return}_.breakO(c.events,2);delete c.events;_.arr.each(xui.Event._events,function(f){if(d["on"+f]){d["on"+f]=null}})})},$fireEvent:function(c,j){var l=xui.Event._eventMap[c],p,q="on"+l,m,h,k=arguments.callee,i=xui.Event.$eventhandler,g=k.f1||(k.f1=function(){this.returnValue=false}),d=k.f2||(k.f2=function(){this.cancelBubble=true});return this.each(function(r){if(!(m=xui.getNodeData(r,["eHandlers",q]))){return}if("blur"==l||"focus"==l){try{r[l]()}catch(f){}}else{h=_.copy(j);_.merge(h,{type:l,target:r,button:1,$xuievent:true,$xuitype:c,preventDefault:g,stopPropagation:d},"all");m.call(r,h)}})},nativeEvent:function(c){return this.each(function(f){if(f.nodeType===3||f.nodeType===8){return}try{f[c]()}catch(d){}})},$canFocus:function(){var g=arguments.callee,c=xui.Dom.getStyle,h=g.map||(g.map={a:1,input:1,select:1,textarea:1,button:1,object:1}),d,f;return !!((f=this.get(0))&&f.focus&&(((d=h[f.tagName.toLowerCase()])&&!(parseInt(f.tabIndex,10)<=-1))||(!d&&parseInt(f.tabIndex,10)>=(xui.browser.ie?1:0)))&&c(f,"display")!="none"&&c(f,"visibility")!="hidden"&&f.offsetWidth>0&&f.offsetHeight>0)},focus:function(d){var c=this;if(d||c.$canFocus()){try{c.get(0).focus()}catch(f){}}return c},setSelectable:function(f){var d=arguments.callee,c;this.removeClass("xui-ui-selectable").removeClass("xui-ui-unselectable");this.addClass(f?"xui-ui-selectable":"xui-ui-unselectable");return this.each(function(g){if(xui.browser.ie&&xui.browser.ver<10){xui.setNodeData(g,"_onxuisel",f?"true":"false")}})},setInlineBlock:function(){var c=this;if(xui.browser.gek){if(xui.browser.ver<3){c.css("display","-moz-inline-block").css("display","-moz-inline-box").css("display","inline-block")}else{c.css("display","inline-block")}}else{if(xui.browser.ie6){c.css("display","inline-block").css({display:"inline",zoom:"1"})}else{c.css("display","inline-block")}}return c},topZindex:function(c){var h=1000,f=0,d,l=this.get(0),m=l.offsetParent,g,q;if(xui.browser.ie&&(!m||(m.tagName+"").toUpperCase()=="HTML")){m=xui("body").get(0)}if(l.nodeType!=1||!m){return 1}g=m.childNodes;for(d=0;q=g[d];d++){if(q==l||q.nodeType!=1||!q.$xid||q.style.display=="none"||q.style.visibility=="hidden"||xui.getNodeData(q,"zIndexIgnore")){continue}f=parseInt(q.style&&q.style.zIndex,10)||0;h=h>f?h:f}h++;if(h>=xui.Dom.TOP_ZINDEX){xui.Dom.TOP_ZINDEX=h+1}if(c){l.style.zIndex=h}else{f=parseInt(l.style.zIndex,10)||0;return h>f?h:f}return this},nextFocus:function(g,f,d){g=_.isBool(g)?g:true;var c=this.get(0),h=this.$iterator("",g,f,function(i){return i!==c&&xui([i]).$canFocus()});if(!h.isEmpty()&&d!==false){h.focus()}c=null;return h},animate:function(l,r,c,g,f,p,h,q){var m=arguments.callee,j=m.lib||(m.lib={linear:function(t,u){return t/u},expoIn:function(t,u){return(t/u==0)?0:Math.pow(2,10*(t/u-1))},expoOut:function(t,u){return(t/u==1)?1:-Math.pow(2,-10*t/u)+1},expoInOut:function(t,u){if(t==0){return 0}else{if(t==u){return 1}else{if((t/=u/2)<1){return 1/2*Math.pow(2,10*(t-1))}}}return 1/2*(-Math.pow(2,-10*--t)+2)},sineIn:function(t,u){return -1*Math.cos(t/u*(Math.PI/2))+1},sineOut:function(t,u){return Math.sin(t/u*(Math.PI/2))},sineInOut:function(t,u){return -1/2*(Math.cos(Math.PI*t/u)-1)},backIn:function(t,u){var v=1.70158;return(t/=u)*t*((v+1)*t-v)},backOut:function(t,u){var v=1.70158;return((t=t/u-1)*t*((v+1)*t+v)+1)},backInOut:function(t,u){var v=1.70158;if((t/=u/2)<1){return 1/2*(t*t*(((v*=(1.525))+1)*t-v))}return 1/2*((t-=2)*t*(((v*=(1.525))+1)*t+v)+2)},bounceOut:function(t,u){if((t/=u)<(1/2.75)){return 7.5625*t*t}else{if(t<(2/2.75)){return 7.5625*(t-=(1.5/2.75))*t+0.75}else{if(t<(2.5/2.75)){return 7.5625*(t-=(2.25/2.75))*t+0.9375}else{return 7.5625*(t-=(2.625/2.75))*t+0.984375}}}}}),i=m.color||(m.color=function(x,w,t,u){var v,y,B=0+(100-0)*j[x](u,t),A=w[0],z=w[1];if(typeof A!="string"||typeof z!="string"){return"#fff"}if(B<0){return A}else{if(B>100){return z}}v=function(C){return(C.charAt(0)!="#")?("#"+C):C};A=v(A);z=v(z);v=function(E,D,C){return parseInt(E.slice(D,C),16)||0};y=function(C){return{red:v(C,1,3),green:v(C,3,5),blue:v(C,5,7)}};A=y(A);z=y(z);v=function(G,F,D,E){var C=G[E]+Math.round((D/100)*(F[E]-G[E]));return(C<16?"0":"")+C.toString(16)};return"#"+v(A,z,B,"red")+v(A,z,B,"green")+v(A,z,B,"blue")});if((f||0)>0){g=f*16}else{g=g||200}p=j[p]!==undefined?p:"expoIn";var d,s=this,k=[function(t){var u=_()-d;if(u>=g){u=g}_.each(l,function(x,v){if(typeof x=="function"){x(j[p](u,g))}else{var w=String(_.str.endWith(v.toLowerCase(),"color")?i(p,x,g,u):(x[0]+(x[1]-x[0])*j[p](u,g)));(s[v])?(s[v](w+(q||""))):(s.css(v,w+(q||"")))}});if(u==g){xui.Thread(t).abort();return false}}];return xui.Thread(h||_.id(),k,0,null,function(){d=_();_.tryF(r,arguments,this)},c,true)},popToTop:function(j,i,p){var k,g=this,q;p=xui(p);if(p.isEmpty()){p=xui("body")}g.css({position:"absolute",left:xui.Dom.HIDE_VALUE,top:xui.Dom.HIDE_VALUE,display:"block",zIndex:xui.Dom.TOP_ZINDEX++});if(j["xui.Dom"]||j.nodeType==1||typeof j=="string"){if(typeof(i)!="function"){i=(i||12)+""}var c=xui(j),r=c.offset(null,p);k={left:r.left,top:r.top,width:c.offsetWidth(),height:c.offsetHeight()}}else{if(typeof(i)!="function"){i=i?"3":"0"}q=i=="0"?0:8;k=j.region||{left:j.left-q,top:j.top-q,width:q*2,height:q*2}}j={left:0,top:0};var q=(p.get(0)===document.body||p.get(0)===document||p.get(0)===window)?xui.win:p,f={};g.cssPos(j).css({visibility:"hidden",display:"block"});p.append(g);f.left=q.scrollLeft();f.top=q.scrollTop();f.width=q.width()+f.left;f.height=q.height()+f.top;if(typeof(i)=="function"){j=i(k,f,g,q)}else{var m=g.offsetWidth(),d=g.offsetHeight(),l=function(t){var s,h;switch(t){case"1":s=false;h=true;break;case"2":s=true;h=false;break;case"3":s=h=false;break;case"4":s=h=true;break}if(s){if(k.top+d<f.height){j.top=k.top}else{j.top=k.top+k.height-d}}else{if(k.top+k.height+d<f.height){j.top=k.top+k.height}else{j.top=k.top-d}}if(h){if(k.left+m<f.width){j.left=k.left}else{j.left=k.left+k.width-m}}else{if(k.left+k.width+m<f.width){j.left=k.left+k.width}else{j.left=k.left-m}}};if(i=="12"){l("1");if(j.top+d>f.height||j.top<f.top){l("2")}}else{l(i)}if(j.left+m>f.width){j.left=f.width-m}if(j.left<f.left){j.left=f.left}if(j.top+d>f.height){j.top=f.height-d}if(j.top<f.top){j.top=f.top}}g.cssPos(j).css({visibility:"visible"});return this},setHoverPop:function(j,i,g,f,h){var l=this.get(0),k=xui(l);if(j["xui.UI"]){j=j.getRoot()}else{if(j["xui.UIProfile"]||j["xui.Template"]){j=j.boxing()}else{if(typeof(j)=="string"&&j.chartAt(0)=="!"){j=xui(j)}}}if(!_.isDefined(i)){i="12"}var d=l.xid()+":"+j.xid();k.onMouseover(i===null?null:function(c,m,p){_.resetRun(d,null);if(!g||false!==g(c,j,m,p)){j.popToTop(p,i)}},d).onMouseout(i===null?null:function(c,m,p){_.resetRun(d,function(){if(!f||false!==f(c,j,m,p,"host")){j.hide()}})},d);j.onMouseover(i===null?null:function(){_.resetRun(d,null)},d).onMouseout(i===null?null:function(){_.resetRun(d,function(){if(!f||false!==f(profile,j,e,src,"pop")){j.hide()}})},d);return this},setBlurTrigger:function(c,g,m,p,d){var k=this,l=document,f="$blur_triggers$",j=xui.Dom._blurTrigger||(xui.Dom._blurTrigger=function(q,t){var q=xui.Event.getPos(t),s=arguments.callee.arr,B=xui.Event.getSrc(t),y=_.copy(s),x,u,z,r,A;_.arr.each(y,function(v){x=true;if(!(A=s[v].target)){x=false}else{A.each(function(w){if(!xui.Dom.byId(w.id)){return x=false}})}if(!x){_.arr.removeValue(s,v);delete s[v]}});y=_.copy(s);_.arr.each(y,function(w){A=s[w];x=true;var v=function(){var C=A.target.get();while(B&&B.tagName&&B.tagName!="BODY"&&B.tagName!="HTML"){if(_.arr.indexOf(C,B)!=-1){return true}B=B.parentNode}};if(!A.checkChild||v()){A.target.each(function(C){if(C.parentNode&&(z=C.offsetWidth)&&(r=C.offsetHeight)){u=xui([C]).offset();if(q.left>=u.left&&q.top>=u.top&&q.left<=(u.left+z)&&q.top<=(u.top+r)){return x=false}}})}v=null;if(!x&&!_.isFun(A.trigger)){return false}if(x){_.tryF(A.trigger,[q,t],A.target);_.arr.removeValue(s,w);delete s[w]}else{if(A.stopNext){return false}}},null,true);B=null;y.length=0}),h=j.arr||(j.arr=[]),i;if(h[c]){_.arr.removeValue(h,c);delete h[c]}if(g){if(m){if(m["xui.Dom"]){i=m}else{if(_.isArr(m)){i=xui();i._nodes=m}}}else{i=k}i.each(function(q){if(!q.id){q.id=xui.Dom._pickDomId()}});h[c]={trigger:g,target:i,checkChild:!!p,stopNext:!d};h.push(c);if(!l.onmousedown){l.onmousedown=xui.Event.$eventhandler}l=j=null}return this},$firfox2:function(){if(!xui.browser.gek2){return this}var c=this;c.css("overflow","hidden");_.asyRun(function(){c.css("overflow","auto")});return c},ieRemedy:function(){if(xui.browser.ie){var f=this.get(),c=[],d=f.length;_.asyRun(function(){for(var g=0;g<d;g++){if((c[g]=f[g].style.WordWrap)=="break-word"){f[g].style.WordWrap="normal"}else{f[g].style.WordWrap="break-word"}}});_.asyRun(function(){for(var g=0;g<d;g++){f[g].style.WordWrap=c[g]}f.length=c.length=0})}return this},fixPng:function(c){if(xui.browser.ie6){c=c||"crop";return this.each(function(g){if(g.tagName=="IMG"&&/\.png$/i.test(g.src)){g.style.height=g.height;g.style.width=g.width;g.style.filter=(g.style.filter||"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+g.src+", sizingMethod="+c+")";if("msfilter" in g.style){g.style.msfilter=g.style.filter}g.src=xui.ini.img_bg}var f=g.currentStyle.backgroundImage||g.style.backgroundImage,d=f.match(/^url[("']+(.*\.png[^\)"']*)[\)"']+[^\)]*$/i);if(d){g.style.backgroundImage="url("+xui.ini.img_bg+")";g.style.filter=(g.style.filter||"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+d[1]+", sizingMethod="+c+")";if("msfilter" in g.style){g.style.msfilter=g.style.filter}}})}}},Static:{HIDE_VALUE:"-10000px",TOP_ZINDEX:10000,_boxArr:_.toArr("width,height,left,top,right,bottom"),_cursor:{},_pickDomId:function(){var c;do{c="xui_"+_.id()}while(document.getElementById(c));return c},_map:{html:1,head:1,body:1},_getTag:function(c){return c?c.$xid?c.$xid:c.nodeType==1?xui.$registerNode(c).$xid:0:0},_ensureValues:function(j){var g,f,h=this._map,d=[],c=j===window?["!window"]:j===document?["!document"]:_.isArr(j)?j:j["xui.Dom"]?j._nodes:j._toDomElems?j._toDomElems():typeof j=="function"?j():[j];for(f=0;f<c.length;f++){if(g=!(g=c[f])?0:g===window?"!window":g===document?"!document":(typeof g=="string"||(g["xui.DomProfile"]&&(g=g.domId)))?g.charAt(0)=="!"?g:this._getTag(h[g]?document.getElementsByTagName(g)[0]:document.getElementById(g)):((g=c[f])["xui.UIProfile"]||g["xui.Template"])?g.renderId?g.renderId:(g.boxing().render()&&g.renderId):this._getTag(g)){d[d.length]=g}}return d.length<=1?d:this._unique(d)},_scrollBarSize:0,_getClass:function(c){return(typeof c.className=="string"&&c.className)||(typeof c.className.baseVal=="string"&&c.className.baseVal)||(typeof c.getAttribute!=="undefined"&&c.getAttribute("class"))||""},_setClass:function(d,c){if(typeof d.className=="string"){d.className=c}else{if(typeof d.className.baseVal=="string"){d.className.baseVal=c}else{if(typeof d.getAttribute!="undefined"){d.setAttribute(c)}}}},getScrollBarSize:function(d){var c=this;if(d||!c._scrollBarSize){var f;xui("body").append(f=xui.create('<div style="width:50px;height:50px;visibility:hidden;position:absolute;margin:0;padding:0;left:-10000px;overflow:scroll;"></div>'));c._scrollBarSize=f.get(0).offsetWidth-f.get(0).clientWidth;f.remove()}return c._scrollBarSize},getStyle:function(f,d){if(!f||f.nodeType!=1){return""}var s=xui.Dom,m=xui.Dom._css3prop;var v,u;if(d=="opacity"&&(!s.css3Support("opacity"))&&xui.browser.ie){u=d="filter"}v=f.style[d];if(!v){var r=arguments.callee,w,q=xui.browser,c=r.map||(r.map={"float":1,cssFloat:1,styleFloat:1}),j=r._c1||(r._c1={}),h=r._c2||(r._c2={}),g=r._c3||(r._c3={}),d=j[d]||(j[d]=d.replace(/\-(\w)/g,function(x,t){return t.toUpperCase()})),l=h[d]||(h[d]=d.replace(/([A-Z])/g,"-$1").toLowerCase()),k,i;var p=d;if(p.indexOf("border")===0){p=p.replace(/[-]?(left|top|right|bottom)/ig,"")}if(_.arr.indexOf(m,p)!=-1){if(!s.css3Support(d)){return""}else{if(d!="textShadow"){k=q.cssTag2+l.charAt(0).toUpperCase()+l.substr(1);i=q.cssTag1+l}}}if(c[d]){d=xui.browser.ie?"styleFloat":"cssFloat"}v=((w=document.defaultView)&&w.getComputedStyle)?(w=w.getComputedStyle(f,null))?(w.getPropertyValue(l)||(i&&w.getPropertyValue(i))):"":f.currentStyle?(f.currentStyle[d]||f.currentStyle[l]||(k&&(f.currentStyle[k]||f.currentStyle[i]))):((f.style&&(f.style[d]||(k&&f.style[k])))||"")}return u?v?(parseFloat(v.match(/alpha\(opacity=(.*)\)/)[1])||0)/100:1:(v||"")},$transformIE:function(t,s){var q,v,y,x,k,j,d,c,m=function(h){return h*(Math.PI/180)};if(!s){t.style.filter=(t.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Matrix\([^)]+\)/ig,"");if("msfilter" in t.style){t.style.msfilter=t.style.filter}t.style.marginTop=t.style.marginLeft=""}else{q=s.match(/(rotate)\(\s*([\d.-]+)deg\s*\)/);if(q&&q.length==3){v=q[2]}q=s.match(/(scale)\(\s*([\d.-]+)\s*,\s*([\d.-]+)\)/);if(q&&q.length==4){y=q[2];x=q[3]}q=s.match(/(skew)\(\s*([\d.-]+)deg\s*,\s*([\d.-]+)deg\s*\)/);if(q&&q.length==4){k=q[2];j=q[3]}q=s.match(/(translate)\(\s*([\d.-]+)px\s*,\s*([\d.-]+)px\s*\)/);if(q&&q.length==4){d=q[2];c=q[3]}v=parseFloat(v)||0;y=parseFloat(y)||1;x=parseFloat(x)||1;k=parseFloat(k)||0;j=parseFloat(j)||0;d=parseFloat(d)||0;c=parseFloat(c)||0;t.style.filter=(t.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Matrix\([^)]+\)/ig,"");if("msfilter" in t.style){t.style.msfilter=t.style.filter}t.style.marginTop=t.style.marginLeft="";var f=t.offsetWidth,p=t.offsetHeight;var A=1,i=0,z=0,g=1;if(v){var B=m(v);A=Math.cos(B);i=Math.sin(B);z=-1*Math.sin(B);g=Math.cos(B)}if(y!=1){A*=y;i*=y}if(x!=1){z*=x;g*=x}if(k){z+=Math.tan(m(k))}if(j){i+=Math.tan(m(j))}t.style.filter=(n.style.filter||"")+"progid:DXImageTransform.Microsoft.Matrix(M11="+A+",M12="+z+",M21="+i+",M22="+g+",SizingMethod='auto expand')";if("msfilter" in t.style){t.style.msfilter=t.style.filter}var l=t.offsetWidth,u=t.offsetHeight;if(l!=f||d){t.style.marginLeft=-(l-f)/2+d+"px"}if(u!=p||c){t.style.marginTop=-(u-p)/2+c+"px"}}},$textShadowIE:function(i,k,h){if(!k){var j=function(f){return(f||"").replace(/progid\:DXImageTransform\.Microsoft\.(Chroma|DropShadow|Glow)\([^)]+\)/ig,"")},d=i.style.filter,c=("msfilter" in i.style)?i.style.msfilter:"";if(d){i.style.filter=j(d)}if(c){i.style.msfilter=j(c)}if(!h){i.style.backgroundColor=""}}else{var j=function(f,p,l,m){return(h?"":"progid:DXImageTransform.Microsoft.Chroma(Color=#cccccc) ")+"progid:DXImageTransform.Microsoft.DropShadow(Color="+m+", OffX="+f+", OffY="+p+") "+(parseFloat(l)>0?"progid:DXImageTransform.Microsoft.Glow(Strength="+l+", Color="+m+")":"")},g=k.match(/([\d\.-]+)px\s+([\d\.-]+)px(\s+([\d\.-]+)px)?(\s+([#\w]+))?/);if(g){i.style.filter=(i.style.filter||"")+j(g[1],g[2],g[4],g[6]||"#000000");if("msfilter" in i.style){i.style.msfilter=i.style.filter}if(!h){i.style.backgroundColor="#cccccc"}}}},$setGradients:function(t,s){var z=this,u=xui.browser,f=u.ver,h="0123456789ABCDEF",r=function(B,A){B=parseInt(B*A,10)||0;B=(B>255||B<0)?0:B;return h.charAt((B-B%16)/16)+h.charAt(B%16)},g=function(A){A=A.split("");return h.indexOf(A[0].toUpperCase())*16+h.indexOf(A[1].toUpperCase())};if(!window.btoa){window.btoa=function(G){if(/([^\u0000-\u00ff])/.test(G)){return}var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,F,D,B,A=[];while(C<G.length){F=G.charCodeAt(C);B=(C+1)%3;switch(B){case 1:A.push(E.charAt(F>>2));break;case 2:A.push(E.charAt((D&3)<<4|(F>>4)));break;case 0:A.push(E.charAt((D&15)<<2|(F>>6)));A.push(E.charAt(F&63));break}D=F;C++}if(B==1){A.push(E.charAt((D&3)<<4));A.push("==")}else{if(B==2){A.push(E.charAt((D&15)<<2));A.push("=")}}return A.join("")}}var q=function(P,F,D,A,L,X){var M="xui.s-ie8gdfix";if(!P||P.nodeType!=1||!P.style){return}var O=z.getStyle(P,"overflow"),N=z.getStyle(P,"display");if(O!="hidden"||(N!="block"&&N!="relative")){return}if(!F){var S,W=P.childNodes,Q=W.length;for(S=0;S<Q;S++){if(W[S].nodeType==1&&W[S].id==M){P.removeChild(W[S]);break}}P.style.backgroundColor="";P.style.filter=(P.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"");if("msfilter" in P.style){P.style.msfilter=P.style.filter}}else{X=X||1;var R=D[0].clr,B=D[D.length-1].clr;var V=P.offsetWidth||0,C=P.offsetHeight||0,H=V*X*2,U=C*X*2;if(A=="circle"){H=U=Math.min(H,U)}var Q=-H/2,I=-U/2,G=H,T=U;if(_.isObj(F)){Q=F.left||(Q+"px");I=F.top||(I+"px")}else{switch(F){case"LT":Q=-H/2;I=-U/2;break;case"T":Q=(V-H)/2;I=-U/2;break;case"RT":Q=V-H/2;I=-U/2;break;case"L":Q=-H/2;I=(C-U)/2;break;case"C":Q=(V-H)/2;I=(C-U)/2;break;case"R":Q=V-H/2;I=(C-U)/2;break;case"LB":Q=-H/2;I=C-U/2;break;case"B":Q=(V-H)/2;I=C-U/2;break;case"RB":Q=V-H/2;I=C-U/2;break}Q+="px";I+="px"}var K=document.createElement("div"),J=K.style;K.id=M;J.position="absolute";J.zIndex="0";J.top=I;J.left=Q;J.width=G+"px";J.height=T+"px";J.backgroundColor=R;var E=D[0].opacity?parseFloat(D[0].opacity)*100:100;J.filter=(J.filter||"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+E+", finishopacity=0, style=2)";if("msfilter" in J){J.msfilter=J.filter}if(P.firstChild){P.insertBefore(K,P.firstChild)}else{P.appendChild(K)}P.style.backgroundColor=B;if(D[D.length-1].opacity){P.style.filter=(P.style.filter||"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+(parseFloat(D[D.length-1].opacity)*100)+")";if("msfilter" in P.style){P.style.msfilter=P.style.filter}}}},y=function(N,G,D){var K="xui.s-ie8gdfix";if(!N||N.nodeType!=1||!N.style){return}var M=z.getStyle(N,"overflow"),L=z.getStyle(N,"display");if(M!="hidden"){z.setStyle(N,"overflow","hidden")}if(L!="block"&&L!="relative"){z.setStyle(N,"display","relative")}if(!G){var S,U=N.childNodes,P=U.length;for(S=0;S<P;S++){if(U[S].nodeType==1&&U[S].id==K){N.removeChild(U[S]);break}}N.style.backgroundColor="";N.style.filter=(N.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"");if("msfilter" in N.style){N.style.msfilter=N.style.filter}}else{var Q=D[0].clr,B=D[D.length-1].clr;var T=N.offsetWidth||0,C=N.offsetHeight||0,J=Math.min(T,C),F=0,O=J,R=0,A=J;switch(G){case"LT":F=0;R=0;O=J;A=J;break;case"RT":F=J;R=0;O=0;A=J;break;case"LB":F=0;R=J;O=J;A=0;break;case"RB":F=J;R=J;O=0;A=0;break}var I=document.createElement("div"),H=I.style;I.id=K;H.position="absolute";H.zIndex="0";H.top=0;H.left=0;H.width=T;H.height=C;H.backgroundColor=Q;var E=D[0].opacity?parseFloat(D[0].opacity)*100:100;H.filter=(H.filter||"")+"progid:DXImageTransform.Microsoft.Alpha(style=1, opacity="+E+", finishopacity=0, startX="+F+",finishX="+O+",startY="+R+",finishY="+A+")";if("msfilter" in H){H.msfilter=H.filter}if(N.firstChild){N.insertBefore(I,N.firstChild)}else{N.appendChild(I)}N.style.backgroundColor=B;if(D[D.length-1].opacity){N.style.filter=(N.style.filter||"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+(parseFloat(D[D.length-1].opacity)*100)+")";if("msfilter" in N.style){N.style.msfilter=N.style.filter}}}},m=function(C,E,J){var A="xui.s-ie8gdfix";if(!C||C.nodeType!=1||!C.style){return}if(!E){C.style.filter=(C.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Gradient\([^)]+\)/ig,"");if("msfilter" in C.style){C.style.msfilter=C.style.filter}var F,G=C.childNodes,D=G.length;for(F=0;F<D;F++){if(G[F].nodeType==1&&G[F].id==A){C.removeChild(G[F]);break}}C.style.backgroundColor="";C.style.filter=(C.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"");if("msfilter" in C.style){C.style.msfilter=C.style.filter}}else{var I=J[0].clr,B=J[J.length-1].clr,H=1,K;if(J[0].opacity){I=I.replace("#","#"+r(J[0].opacity,255))}if(J[J.length-1].opacity){B=B.replace("#","#"+r(J[J.length-1].opacity,255))}switch(E){case"LT":case"RT":case"LB":case"RB":y(C,E,J);return;case"L":H=1;break;case"R":H=1;K=I;I=B;B=K;break;case"T":H=0;break;case"B":H=0;K=I;I=B;B=K;break}C.style.filter=(C.style.filter||"")+"progid:DXImageTransform.Microsoft.Gradient(StartColorstr='"+I+"',EndColorstr='"+B+"',GradientType="+H+")";if("msfilter" in C.style){C.style.msfilter=C.style.filter}}},w=function(C,G,L,K,M,J){if(!G){C.style.backgroundImage=""}else{J=J||1;var B="svg:"+_.id(),F="0%",E="0%",A=J*100+"%";if(_.isObj(G)){F=G.left||F;E=G.left||E}else{switch(G){case"T":F="50%";E="0%";break;case"B":F="50%";E="100%";break;case"L":F="0%";E="50%";break;case"R":F="100%";E="50%";break;case"LT":F="0%";E="0%";break;case"RT":F="100%";E="0%";break;case"RB":F="100%";E="100%";break;case"LB":F="0%";E="100%";break;case"C":F="50%";E="50%";break}}var I='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><radialGradient id="'+B+'" gradientUnits="userSpaceOnUse" cx="'+F+'" cy="'+E+'" r="'+A+'">';for(var H=0,D=L.length;H<D;H++){I+='<stop stop-color="'+L[H].clr+'" offset="'+L[H].pos+'" '+(_.isSet(L[H].opacity)?(' stop-opacity="'+L[H].opacity+'"'):"")+" />"}I+='</radialGradient><rect x="-50" y="-50" width="101" height="101" fill="url(#'+B+')" /></svg>';C.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(I)+'")'}},v=function(D,F,K){if(!F){D.style.backgroundImage=""}else{var B="svg"+_.id(),C="0%",J="0%",A="0%",I="100%";switch(F){case"T":C="50%";J="0%";A="50%";I="100%";break;case"B":C="50%";J="100%";A="50%";I="0%";break;case"L":C="0%";J="50%";A="100%";I="50%";break;case"R":C="100%";J="50%";A="0%";I="50%";break;case"LT":C="0%";J="0%";A="100%";I="100%";break;case"RT":C="100%";J="0%";A="0%";I="100%";break;case"RB":A="0%";I="0%";C="100%";J="100%";break;case"LB":C="0%";J="100%";A="100%";I="0%";break;default:}var H='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><linearGradient id="'+B+'" gradientUnits="userSpaceOnUse" x1="'+C+'" y1="'+J+'" x2="'+A+'" y2="'+I+'">';for(var G=0,E=K.length;G<E;G++){H+='<stop stop-color="'+K[G].clr+'" offset="'+K[G].pos+'" '+(_.isSet(K[G].opacity)?(' stop-opacity="'+K[G].opacity+'"'):"")+"/>"}H+='</linearGradient><rect x="0" y="0" width="1" height="1" fill="url(#'+B+')" /></svg>';D.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(H)+'")'}},l=function(B,C,J,F,K,E){var H=[],G=[],A=B.style;_.arr.each(J,function(M){var L=M.clr;if(_.isSet(M.opacity)&&L.charAt(0)=="#"){L=L.slice(1);L="rgba("+g(L.substr(0,2))+","+g(L.substr(2,2))+","+g(L.substr(4,2))+","+parseFloat(M.opacity)+")"}H.push(L+" "+M.pos);if(u.isWebKit){G.push("color-stop("+M.pos+","+L+")")}});if(!C){A.backgroundImage=""}else{var D;if(_.isObj(C)){D=C.left+" "+C.top}else{switch(C){case"LT":D="left top";break;case"T":D="center top";break;case"RT":D="right top";break;case"L":D="left center";break;case"C":D="center center";break;case"R":D="right center";break;case"LB":D="left bottom";break;case"B":D="center bottom";break;case"RB":D="right bottom";break;default:D="left top"}}if(u.isWebKit){A.backgroundImage="-webkit-gradient(radial,"+D+", 0px, "+D+", 100%,"+G.join(",")+")"}var I="radial-gradient("+D+","+F+" "+K+","+H.join(",")+")";if(u.cssTag1){A.backgroundImage=u.cssTag1+I}A.backgroundImage="radial-gradient("+K+" "+F+" at "+D+","+H.join(",")+")"}},k=function(C,E,J){var G=[],F=[],A=C.style;_.arr.each(J,function(L){var K=L.clr;if(_.isSet(L.opacity)&&K.charAt(0)=="#"){K=K.slice(1);K="rgba("+g(K.substr(0,2))+","+g(K.substr(2,2))+","+g(K.substr(4,2))+","+parseFloat(L.opacity)+")"}G.push(K+" "+L.pos);if(u.isWebKit){F.push("color-stop("+L.pos+","+K+")")}});if(!E){A.backgroundImage=""}else{var H="to bottom";var D="top";var B="left top, left bottom";switch(E){case"LT":H="135deg";D="-45deg";B="left top, right bottom";break;case"T":D="top";H="to bottom";B="left top, left bottom";break;case"RT":H=D="-135deg";B="right top, left bottom";break;case"L":D="left";H="to right";B="left top, right top";break;case"R":D="right";H="to left";B="right top, left top";break;case"LB":H=D="45deg";B="left bottom, right top";break;case"B":D="bottom";H="to top";B="left bottom, left top";break;case"RB":H="-45deg";D="135deg";B="right bottom, left top";break;default:H=E;D=E;B="left top, right bottom"}if(u.isWebKit){A.backgroundImage="-webkit-gradient(linear,"+B+", "+F.join(",")+")"}var I="linear-gradient({#},"+G.join(",")+")";if(u.cssTag1){A.backgroundImage=u.cssTag1+I.replace("{#}",D)}A.backgroundImage=I.replace("{#}",H)}};var d=s?(s.type||s||"linear").toLowerCase():null,x=s?(s.rate||1):null,c=s?(s.shape||"circle").toLowerCase():null,p=s?(s.size||"farthest-corner").toLowerCase():null,j=s?s.orient:null,i=s?s.stops:null;if(d!="linear"){d="radial"}if(i){if(i.length>1){_.arr.stableSort(i,function(A,B){A=parseFloat(A.pos);B=parseFloat(B.pos);return A>B?1:A==B?0:-1})}else{return}}if(u.ie&&f>=6&&f<9){if(d=="linear"){m(t,j,i)}else{q(t,j,i,c,p,x)}}else{if((u.ie&&f>=9&&f<10)||(u.opr&&f<11.1)){if(d=="linear"){v(t,j,i)}else{w(t,j,i,c,p,x)}}else{if((u.gek&&f>=3.6)||(u.isChrome&&f>=10)||(u.isSafari&&f>=5.1)||(u.ie&&f>=10)||(u.opr&&f>=11.1)){if(d=="linear"){k(t,j,i)}else{if(u.opr&&f<12){w(t,j,i,c,p,x)}else{l(t,j,i,c,p,x)}}}}}},$adjustCss:function(g,f){var d={nodeType:1,style:{}};xui.Dom.setStyle(d,g);if(f){var c=[];if(xui.browser.ie&&xui.browser.ver==8&&d.style.filter){d.style["-ms-filter"]=d.style.filter}_.each(d.style,function(j,h){c.push(h.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+j)});return c.join(";")}else{return d.style}},setStyle:function(g,d,t){var s=xui.Dom,p=xui.Dom._css3prop,u=xui.browser;if(g.nodeType!=1){return}if(typeof d=="string"){var r=this.getStyle,k=r._c1||(r._c1={}),f=r._r1||(r._r1=/alpha\([^\)]*\)/ig),c=r.map||(r.map={"float":1,cssFloat:1,styleFloat:1});var m,l,j;d=k[d]||(k[d]=d.replace(/\-(\w)/g,function(v,i){return i.toUpperCase()}));var q=d;if(q.indexOf("border")===0){q=q.replace(/[-]?(left|top|right|bottom)/ig,"")}if(d=="$gradient"){return s.$setGradients(g,t)}else{if(d=="opacity"){t=_.isFinite(t)?parseFloat(t)>1?1:parseFloat(t)<=0?0:parseFloat(t):1;t=t>0.9999?"":((!s.css3Support("opacity"))&&u.ie)?"alpha(opacity="+100*t+")":t;if((!s.css3Support("opacity"))&&u.ie){g.style.zoom=1;d="filter";t=(g.style.filter||"").replace(f,"")+t}}else{if(_.arr.indexOf(p,q)!=-1){if(!s.css3Support(d)){if(u.ie&&u.ver<9){switch(d){case"transform":linb.Dom.$transformIE(g,t);break;case"boxShadow":linb.Dom.$textShadowIE(g,t,true);break}}if(d=="textShadow"&&u.ie&&u.ver<10){linb.Dom.$textShadowIE(g,t)}return this}else{if(u.cssTag2){if(d!="textShadow"){m=u.cssTag2+d.charAt(0).toUpperCase()+d.substr(1)}}}}else{if(c[d]){d=u.ie?"styleFloat":"cssFloat"}}}}g.style[d]=t;if(m){g.style[m]=t}if(l){g.style[l]=t}if(j){g.style[j]=t}}else{for(var h in d){arguments.callee.call(this,g,h,d[h])}}},_css3prop:"opacity,textShadow,animationName,columnCount,flexWrap,boxDirection,backgroundSize,perspective,boxShadow,borderImage,borderRadius,boxReflect,transform,transition".split(","),css3Support:function(B){var t=arguments.callee,h=t._c||(t._c={});B=B.replace("$","").replace(/\-(\w)/g,function(k,f){return f.toUpperCase()});if(B in h){return h[B]}var w=document.createElement("div"),p=w.style,j=false,y=xui.browser,z=function(f){f=f.replace(/\-(\w)/g,function(r,k){return k.toUpperCase()});if(p[f]!==undefined){return true}if(xui.browser.cssTag2){f=xui.browser.cssTag2+f.charAt(0).toUpperCase()+f.substr(1);if(p[f]!==undefined){return true}}return false};w.id="xui_css3_"+_();if(B.indexOf("border")===0){B=B.replace(/[-]?(left|top|right|bottom)/ig,"")}switch(B){case"opacity":case"textShadow":j=p[B]==="";break;case"generatedContent":var u="tmp_css3_test"+_.id(),l="#"+w.id+"{line-height:auto;margin:0;padding:0;border:0;font:0/0 a}#"+w.id+":after{content:'a';visibility:hidden;line-height:auto;margin:0;padding:0;border:0;font:3px/1 a}";linb.CSS.addStyleSheet(l,u);xui("body").append(w);var m=w.offsetHeight;linb.CSS.remove("id",u);xui(w.id).remove(w);j=m>=3;break;case"fontFace":if(y.ie&&y.ver>=6){j=true}else{var u="tmp_css3_test"+_.id(),l='@font-face{font-family:"font";src:url("https://")}',p=linb.CSS.addStyleSheet(l,u),A=p.sheet||p.styleSheet,i=A?((A.cssRules&&A.cssRules[0])?A.cssRules[0].cssText:A.cssText||""):"";j=/src/i.test(i)&&i.indexOf("@font-face")===0;linb.CSS.remove("id",u)}break;case"rgba":p.cssText="background-color:rgba(0,0,0,0.1)";j=p.backgroundColor.indexOf("rgba")!=-1;break;case"hsla":p.cssText="background-color:hsla(120,40%,100%,.5)";j=p.backgroundColor.indexOf("hsla")!=-1||p.backgroundColor.indexOf("rgba")!=-1;break;case"multiplebgs":p.cssText="background:url(//:),url(//:),red url(//:)";j=/(url\s*\(.*?){3}/.test(p.background);break;case"gradient":var x="background-image:",g="-webkit-gradient(linear,left top,right bottom,from(#000),to(#fff));",d="linear-gradient(left top,#000,#fff);",c=[x,d];if(xui.browser.cssTag1){c.push(x);c.push(xui.browser.cssTag1+d)}if(xui.browser.isWebKit){c.push(x);c.push(g)}p.cssText=c.join("");j=!!p.backgroundImage;break;case"transform3d":var q=z("perspective");if(q&&"webkitPerspective" in document.documentElement.style){var u="tmp_css3_test"+_.id(),l="@media (transform-3d),(-webkit-transform-3d){#"+w.id+"{font:0/0;line-height:0;margin:0;padding:0;border:0;left:9px;position:absolute;height:3px;}}";linb.CSS.addStyleSheet(l,u);xui("body").append(w);var g=w.offsetLeft,d=w.offsetHeight;linb.CSS.remove("id",u);xui(w.id).remove(w);j=g===9&&d===3}j=q;break;default:j=z(B)}return h[B]=j},_setPxStyle:function(f,c,g){if(f.nodeType!=1){return false}var d=f.style;if(g||g===0){g=((""+parseFloat(g))==(""+g))?(parseInt(g,10)||0)+"px":g+"";if((c=="width"||c=="height")&&g.charAt(0)=="-"){g="0"}if(d[c]!=g){d[c]=g;return true}}return false},_emptyDivId:"xui.empty::",getEmptyDiv:function(h){var j=1,d,g,c,f,p,l=0,m=document,k=m.body,q=function(i){i.id=d;xui([i]).attr("style","position:absolute;visibility:hidden;overflow:visible;left:"+xui.Dom.HIDE_VALUE+";top:"+xui.Dom.HIDE_VALUE+";")};h=h||1;while(1){d=this._emptyDivId+j;if(f=xui.Dom.byId(d)){if(!f.firstChild&&++l==h){return xui([f])}}else{f=m.createElement("div");q(f,d);if(k.firstChild){k.insertBefore(f,k.firstChild)}else{k.appendChild(f)}g=xui([f]);k=f=null;return g}j++}k=f=null},setCover:function(f,j){var i=arguments.callee,c="xui.temp:cover:",k="xui.temp:message:",h=(typeof(f)=="string"||typeof(f)=="function")?f:"",g,d;if((g=xui(c)).isEmpty()){xui("body").prepend(g=xui.create('<div id="'+c+'" class="xui-cover xui-custom" style="position:absolute;display:none;left:0;top:0;"><div id="'+k+'" class="xui-coverlabel xui-custom" style="position:absolute;"></div></div>'));g.setSelectable(false);xui.setNodeData(g.get(0),"zIndexIgnore",1)}if(xui.Dom.byId(k)){d=xui(k)}if(!f){if(typeof i._label=="string"&&i._label!==j){return}if(i._showed){if(d){d.empty(false)}g.css({zIndex:0,cursor:"",display:"none"});i._showed=false}delete i._label}else{if(typeof j=="string"){i._label=j}var l=xui.win;if(!i._showed){g.css({zIndex:xui.Dom.TOP_ZINDEX*10,display:"",width:l.scrollWidth()+"px",height:l.scrollHeight()+"px",cursor:"progress"});i._showed=true}if(h){if(typeof(h)=="function"){h(g,d)}else{if(d){d.html(h+"",false);d.css({left:l.scrollLeft()+l.width()/2-d.width()/2+"px",top:l.scrollTop()+l.height()/2-d.height()/2+"px"})}}}}},byId:function(c){return document.getElementById(c||"")},$hasEventHandler:function(d,c){return xui.getNodeData(d,["eHandlers",c])},submit:function(g,f,i,h,d){f=_.isHash(f)?f:{};f=_.clone(f,function(j){return j!==undefined});i=i||"get";g=g||"";h=h||(g.substring(0,6).toLowerCase()=="mailto"?"_self":"_blank");var c=[];if(!_.isEmpty(f)){if(i.toLowerCase()=="get"){window.open(g+"?"+_.urlEncode(f),h)}else{_.each(f,function(k,j){if(_.isDefined(k)){c.push('<textarea name="'+j+'">'+(typeof k=="object"?_.serialize(k):k)+"</textarea>")}});c.push('<input type="hidden" name="rnd" value="'+_()+'">');c=_.str.toDom('<form target="'+h+'" action="'+g+'" method="'+i+(d?'" enctype="'+d:"")+'">'+c.join("")+"</form>");xui.Dom.getEmptyDiv().append(c);c.get(0).submit();c.remove();c=null}}else{window.open(g,h)}},busy:function(d,c){xui.Dom.setCover(c||true,d)},free:function(c){xui.Dom.setCover(false,c)},animate:function(i,j,m,c,g,d,k,h,l){var f=document.createElement("div");_.merge(i,{position:"absolute",left:this.HIDE_VALUE,zIndex:this.TOP_ZINDEX++});xui.Dom.setStyle(f,i);document.body.appendChild(f);return xui([f]).animate(j,m,function(){_.tryF(c);if(f.parentNode){f.parentNode.removeChild(f)}f=null},g,d,k,h,l)},$enableEvents:function(d){if(!_.isArr(d)){d=[d]}var c=this,g;_.arr.each(d,function(f){g=function(i,k,h){if(typeof i=="function"){return this.$addEvent(f,i,k,h)}else{if(i===null){return this.$removeEvent(f,k,h)}}var j=arguments[1]||{};j.$xuiall=(arguments[0]===true);return this.$fireEvent(f,j)};g.$event$=1;c.plugIn(f,g)})}},After:function(E){var x=this;_.each({parent:["y",false],prev:["x",false],next:["x",true],first:["y",true],last:["y",1]},function(d,c){x.plugIn(c,function(h){return this.$iterator(d[0],d[1],true,h||1)})});_.arr.each(_.toArr("offsetLeft,offsetTop,scrollWidth,scrollHeight"),function(c){x.plugIn(c,function(){var p=this.get(0),m=window,r=document;if(p==m||p==r){if("scrollWidth"==c||"scrollHeight"==c){var l=r.documentElement,h=r.body;return Math.max(l[c],h[c])}else{p=xui.browser.contentBox?r.documentElement:r.body}}return p[c]})});var y="padding",A="margin",G="border",F="inner",z="offset",u="outer",q="width",D="height",f="Width",k="Height",g="Top",j="Left",s="top",C="left",i="Right",v="Bottom";_.arr.each([["_"+y+"H",y+g,y+v],["_"+y+"W",y+j,y+i],["_"+G+"H",G+g+f,G+v+f],["_"+G+"W",G+j+f,G+i+f],["_"+A+"W",A+j,A+i],["_"+A+"H",A+g,A+v]],function(h){var d,c=xui.Dom.getStyle;x.plugIn(h[0],function(){d=this.get(0);return(parseInt(c(d,h[1]),10)+parseInt(c(d,h[2]),10))||0})});_.arr.each([["_W",q,"_"+y+"W","_"+G+"W","_"+A+"W",F+f,z+f],["_H",D,"_"+y+"H","_"+G+"H","_"+A+"H",F+k,z+k]],function(c){x.plugIn(c[0],function(N,w,M){var L,J,H,P=N.style,U=arguments.callee,I=xui.browser.contentBox,O=U.r1||(U.r1=/%$/),m=xui.Dom.getStyle,Q=xui.Dom._setPxStyle,l=typeof M,B;if(l=="undefined"||l=="boolean"){if(M===true){L=(m(N,"display")=="none");if(L){var S=xui.Dom.getEmptyDiv().html("*",false);xui([N]).swap(S);var T,K,R;T=P.visibility,K=P.position,R=P.display;K=K||"";T=T||"";R=R||"";P.visibility="hidden";P.position="absolute";P.display="block"}}H=xui([N]);switch(w){case 1:J=m(N,c[1]);if(isNaN(parseInt(J,10))||O.test(J)){J=U(N,2)-(I?H[c[2]]():0)}J=parseInt(J,10)||0;break;case 2:J=N[c[6]]-H[c[3]]();break;case 3:J=N[c[6]];if(!J){J=U(N,1)+(I?H[c[2]]():0)+H[c[3]]()}break;case 4:J=U(N,3);J+=H[c[4]]();break}if(L){P.display=R;P.position=K;P.visibility=T;H.swap(S);S.empty(false)}return parseInt(J,10)||0}else{switch(w){case 1:if(Q(N,c[1],M)){if(xui.Dom.$hasEventHandler(N,"onsize")){var h={};h[c[1]]=1;xui([N]).onSize(true,h)}}break;case 2:U(N,1,M-(I?xui([N])[c[2]]():0));break;case 3:U(N,1,M-(H=xui([N]))[c[3]]()-(I?H[c[2]]():0));break;case 4:U(N,1,M-(H=xui([N]))[c[4]]()-H[c[3]]()-(I?H[c[2]]():0));break}}})});_.arr.each([[F+f,"_W",2],[z+f,"_W",3],[u+f,"_W",4],[F+k,"_H",2],[z+k,"_H",3],[u+k,"_H",4]],function(c){x.plugIn(c[0],function(h){var d=typeof h;if(d=="undefined"||d=="boolean"){return this[c[1]](this.get(0),c[2])}else{return this.each(function(l){this[c[1]](l,c[2],h)})}})});_.arr.each([[C+"By",C],[s+"By",s],[q+"By",q],[D+"By",D]],function(c){x.plugIn(c[0],function(r,p){if(r===0){return this}var d,l,h=c[1];return this.each(function(m){d=xui.use(m.$xid)[h]();d=(parseInt(d,10)||0)+r;if(h=="width"||h=="height"){d=d>0?d:0}m.style[h]=d+"px";if(p){l={};l[h]=1;var t=xui.Dom.$hasEventHandler;if((h=="left"||h=="top")&&t(m,"onmove")){xui([m]).onMove(true,l)}if((h=="width"||h=="height")&&t(m,"onsize")){xui([m]).onSize(true,l)}}},this)})});_.arr.each(["scrollLeft","scrollTop"],function(c){x.plugIn(c,function(m){var h=document.documentElement,d=document.body;if(m!==undefined){return this.each(function(p){if(p===window||p===document){h[c]=d[c]=m}else{p[c]=m}})}else{var l=this.get(0);if(l===window||l===document){if("scrollTop"==c){return window.pageYOffset||(_.isNumb(h[c])?h[c]:d[c])}if("scrollLeft"==c){return window.pageXOffset||(_.isNumb(h[c])?h[c]:d[c])}}return l[c]}})});_.arr.each("width,height,left,top".split(","),function(c){x.plugIn(c,function(w){var H=this,d=H.get(0),m=xui.browser,l=typeof w,r=document,B;if(!d||d.nodeType==3){return}if(l=="undefined"||l=="boolean"){if((c=="width"&&(B="Width"))||(c=="height"&&(B="Height"))){if(r===d){return Math.max(r.body["scroll"+B],r.body["offset"+B],r.documentElement["scroll"+B],r.documentElement["offset"+B])}if(window===d){return m.opr?Math.max(r.body["client"+B],window["inner"+B]):m.kde?window["inner"+B]:(xui.browser.contentBox&&r.documentElement["client"+B])||r.body["client"+B]}}if(c=="width"){w=parseInt(d.style.width,10)||H._W(d,1,w)}else{if(c=="height"){w=parseInt(d.style.height,10)||H._H(d,1,w)}else{w=xui.Dom.getStyle(d,c)}}return w=="auto"?w:(parseInt(w,10)||0)}else{var h=xui.Dom._setPxStyle,B,p;return H.each(function(t){if(t.nodeType!=1){return}if(t.style[c]!==w){if(c=="width"){H._W(t,1,w)}else{if(c=="height"){H._H(t,1,w)}else{if(h(t,c,w)){if((c=="top"||c=="left")&&xui.Dom.$hasEventHandler(d,"onmove")){p={};p[c]=1;xui([t]).onMove(true,p)}}}}}})}})});_.arr.each(xui.Event._events,function(c){_.arr.each(xui.Event._getEventName(c),function(d){x.$enableEvents(d)})})},Initialize:function(){var c=window,f=document;_.set(xui.$cache.domPurgeData,"!window",{$xid:"!window",element:c});_.set(xui.$cache.domPurgeData,"!document",{$xid:"!document",element:f});xui.win=xui(["!window"],false);xui.doc=xui(["!document"],false);xui.$inlineBlock=xui.browser.gek?xui.browser.ver<3?["-moz-inline-block","-moz-inline-box","inline-block"]:"inline-block":xui.browser.ie6?["inline-block","inline"]:"inline-block",xui.doc.onKeydown(function(i,h,d){xui.Event.$keyboard=xui.Event.getKey(h);var g=xui.Event,k,j=g.getKey(h);if(j){if(j[0].length==1){j[0]=j[0].toLowerCase()}k=xui.$cache.hookKey[j.join(":")];if(k){if(k[3]){if(typeof k[3]=="function"?false===(k[3])():(!xui(k[3]).size())){delete xui.$cache.hookKey[j.join(":")];return}}if(_.tryF(k[0],k[1],k[2])===false){g.stopBubble(h);return false}}}return true},"document").onKeyup(function(h,g){delete xui.Event.$keyboard;var d=xui.Event,j,i=d.getKey(g);if(i){if(i[0].length==1){i[0]=i[0].toLowerCase()}j=xui.$cache.hookKeyUp[i.join(":")];if(j){if(j[3]){if(typeof j[3]=="function"?false===(j[3])():(!xui(j[3]).size())){delete xui.$cache.hookKeyUp[i.join(":")];return}}if(_.tryF(j[0],j[1],j[2])===false){d.stopBubble(g);return false}}}return true},"document");xui.doc.onClick(function(l,k,q){var m=xui.Event.getSrc(k),h=0,d,g;do{if(m.tagName=="A"){d=true;break}if(++h>8){break}}while(m=m.parentNode);if(d){g=_.str.trim(m.href||"").toLowerCase();if(xui.History){var j=location.href.split("#")[0];if(!xui.Event.getKey(k).shiftKey&&xui.Event.getBtn(k)=="left"&&(g.indexOf(j+"#")==0||g.indexOf("#")==0)){xui.History.setFI(m.href.replace(j,""))}}if(xui.browser.ie&&(g.indexOf("javascript:")==0||g.indexOf("#")!==-1)){return false}}},"hookA",0);if(xui.browser.ie&&xui.browser.ver<10&&f.body){f.body.onselectstart=function(g,d){g=event.srcElement;while(g&&g.tagName&&g.tagName!="BODY"&&g.tagName!="HTML"){if(d=xui.getNodeData(g,"_onxuisel")){return d!="false"}if(g.tagName=="INPUT"||g.tagName=="TEXTAREA"){break}g=g.parentNode}return true}}xui.win.afterUnload(function(){c.onresize=null;if(c.removeEventListener){c.removeEventListener("DOMMouseScroll",xui.Event.$eventhandler3,false)}f.onmousewheel=c.onmousewheel=null;if(xui.browser.isTouch){if(f.removeEventListener){f.removeEventListener((xui.browser.ie&&c.PointerEvent)?"pointerdown":(xui.browser.ie&&c.MSPointerEvent)?"MSPointerDown":"touchstart",xui.Event._simulateMousedown,false);f.removeEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",xui.Event._simulateMouseup,false)}else{if(f.detachEvent){f.detachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",xui.Event._simulateMousedown);f.detachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",xui.Event._simulateMouseup)}}}if(xui.browser.ie&&f.body){f.body.onselectstart=null}if("onhashchange" in c){c.onhashchange=null}xui("body").empty();xui([c,f]).$clearEvent();xui.SC.__gc();xui.Thread.__gc();Class.__gc();_.breakO(xui.$cache,2);_.breakO([xui,Class,_],3);c.Namespace=c.Class=c.xui=c.linb=c._=undefined},"window",-1)}});Class("xui.Template","xui.absProfile",{Constructor:function(i,g,f,j){var h=arguments.callee.upper,d=_.toArr(arguments);h.apply(this,d);h=null;var c=this;c.$domId=c.KEY+":"+(c.serialId=c._pickSerialId())+":";c.domId=typeof j=="string"?j:c.$domId;c._links={};c.template={root:[["<div></div>"],[]]};c.properties={};c.events={};c.$template={};c.link(c.constructor._cache,"self").link(xui._pool,"xui");c.box=c.constructor;c.boxing=function(){return this};if(i){c.setTemplate(typeof i=="string"?{root:i}:i)}if(f){c.setEvents(f)}if(g){c.setProperties(g)}return c},Instance:{renderId:null,__gc:function(){var c=this,d=xui.$cache.reclaimId;if(!c.$noReclaim){(d[c.KEY]||(d[c.KEY]=[])).push(c.serialId)}else{delete c.$noReclaim}delete xui.$cache.profileMap[c.domId];delete xui.$cache.profileMap[c.$domId];c.unLinkAll();_.breakO([c.properties,c.event,c],2)},_reg0:/^\w[\w_-]*$/,show:function(c){if(!c){c=xui("body")}c=xui(c);c.append(this);return this},getRootNode:function(){return xui.getNodeData(this.renderId,"element")},getRoot:function(){return xui([this.renderId],false)},setDomId:function(h){var d=this,g=xui.$cache.profileMap,f=d._reg0;if(typeof h=="string"&&f.test(h)&&!document.getElementById(h)){if(d.domId!=d.$domId){delete g[d.domId]}d.domId=h;if(d.renderId){d.getRootNode().id=h}if(g[d.$domId]){g[h]=d}}return d},destroy:function(){if(this.renderId){var c=this.getRootNode();xui.$purgeChildren(c);if(c.parentNode){c.parentNode.removeChild(c)}c=null}else{this.__gc()}},setEvents:function(d,f){var c=this;if(typeof d=="object"){c.events=d}else{c.events[d]=f}return c},setTemplate:function(g,k){var c=this,f=c.template,l=c.$template,j;if(typeof g=="object"){c.template=g;j={};for(var d in g){j[d||"root"]=c._buildTemplate(g[d])}c.$template=j}else{if(typeof k=="string"){l[g]=c._buildTemplate(f[g]=k)}else{l.root=c._buildTemplate(f.root=g)}}return c},setProperties:function(d,f){var c=this;if(typeof d=="object"){c.properties=d}else{c.properties[d]=f}return c},getItem:function(i){var h=xui.getNodeData(i);if(!h){return}var j=h.tpl_evid,d=h.tpl_evkey;if(!j||!d){return}var c=arguments.callee,g=c.f||(c.f=function(p,m,r){var l,q,k,f;for(k in p){q=p[k];if(_.isArr(q)&&(m==k||m.indexOf((p.tpl_evkey||k)+".")===0)){for(l=0;f=q[l];l++){if(f.tpl_evkey==m&&f.id==r){return f}else{if(f=g(f,m,r)){return f}}}}}});return g(this.properties,d,j)},_pickSerialId:function(){var c=xui.$cache.reclaimId[this.KEY];if(c&&c[0]){return c.shift()}return this.constructor._ctrlId.next()},render:function(){var B=this;if(!B.renderId){var d=xui.$getGhostDiv();xui.$cache.profileMap[B.domId]=xui.$cache.profileMap[B.$domId]=this;d.innerHTML=B.toHtml();var c=B.events,s=xui.Event._eventHandler,m=d.getElementsByTagName("*"),q=B.$domId,x=function(){return xui.Event(arguments[0],this,0,q)},w,p,u,r,h,z,g,A,y;if(p=m.length){for(w=0;w<p;w++){if((h=m[w]).nodeType!=1){continue}z=h.getAttribute("tpl_evkey");g=h.getAttribute("tpl_evid");if(z!==null&&g!==null){y=xui.$registerNode(h);y.tpl_evkey=z;y.tpl_evid=g;if(A=c[z]){y=y.eHandlers||(y.eHandlers={});for(u in A){y[u]=x;if(r=s[u]){y[r]=h[r]=x}}}h.removeAttribute("tpl_evkey");h.removeAttribute("tpl_evid")}}if(!d.firstChild.$xid){xui.$registerNode(d.firstChild)}B.renderId=d.firstChild.$xid}h=d=null}return B},refresh:function(){var f=this;if(f.renderId){var d=document.createElement("span"),g=f.getRootNode(),c=xui.$cache.profileMap;delete c[f.domId];delete c[f.$domId];if(g.parentNode){g.parentNode.replaceChild(d,g)}f.destroy();delete f.renderId;f.render();if(d.parentNode){d.parentNode.replaceChild(f.getRootNode(),d)}d=g=null}return f},renderOnto:function(h){var c=this,i,g,f="style",d;if(typeof h=="string"){h=document.getElementById(h)}i=h.id||c.domId;if(!c.renderId){c.render()}g=c.getRootNode();h.parentNode.replaceChild(g,h);if(g.tabIndex!=h.tabIndex){g.tabIndex!=h.tabIndex}if(h.className){g.className+=h.className}if(xui.browser.ie&&(d=h.style.cssText)){g.style.cssText+=d+""}else{if(d=h.getAttribute(f)){g.setAttribute(f,(g.getAttribute(f)||"")+d)}}this.setDomId(i)},toHtml:function(c){var d=_.copy(c||this.properties||{});d.tpl_evkey="root";return this._doTemplate(d)},_reg1:/([^{}]*)\{([\w]+)\}([^{}]*)/g,_reg2:/\[event\]/g,_buildTemplate:function(g){if(typeof g=="string"){var f=[[],[]],d=f[0],c=f[1];g=g.replace(this._reg2,' tpl_evid="{id}" tpl_evkey="{tpl_evkey}" ');g.replace(this._reg1,function(i,h,k,j){if(h){d[d.length]=h}c[d.length]=d[d.length]=k;if(j){d[d.length]=j}return""});return f}else{return g}},_getEV:function(j,d,c,g){var h=xui.getNodeData(g);if(!h){return}var l=this.events,f=h.tpl_evkey,i=(f&&l&&l[f])||l,k=i&&i[c];if(k){j.push(k)}},_reg3:/(^\s*<\w+)(\s|>)(.*)/,_doTemplate:function(k,y,z){if(!k){return""}var v=this,m=arguments.callee,x,u,g,w=_.isArr(k),p=v.$template,q=p[y||"root"],c=!z;z=z||[];if(w){if(typeof q!="function"){q=m}for(var j=0;u=k[j++];){u.tpl_evkey=y;q.call(v,u,y,z)}}else{if(typeof q=="function"){q.call(v,k,y,z)}else{y=y?y+".":"";var f=q[0],d=q[1];for(var j=0,h=f.length;j<h;j++){if(g=d[j]){if(g in k){u=typeof k[g]=="function"?k[g].call(v,g,k):k[g];if(p[x=y+g]){m.call(v,u,x,z)}else{z[z.length]=u}}}else{z[z.length]=f[j]}}}}if(c){return z.join("").replace(v._reg3,'$1 id="'+v.$domId+'" $2$3')}},serialize:function(){var c=this,g=_.serialize,f=xui.absObj.$specialChars,d=_.isEmpty(c.properties)?null:_.clone(c.properties,function(j,h){return !f[(h+"").charAt(0)]});return"new xui.Template("+g(c.template||null)+","+g(d)+","+g(_.isEmpty(c.events)?null:c.events)+","+g(c.$domId!=c.domId?c.domId:null)+")"}},Static:{getFromDom:function(c){if((c=typeof c=="string"?c:(c&&c.id))&&(c=xui.$cache.profileMap[c])&&c["xui.Template"]){return c.boxing()}},_cache:[],_ctrlId:new _.id()}});Class("xui.DragDrop",null,{Static:{_eh:"_dd",_id:"xui.dd:proxy:",_idi:"xui.dd:td:",_type:{blank:1,move:1,shape:1,deep_copy:1,copy:1,icon:1,none:1},_Icons:{none:"0 0",move:"0 -16px",link:"0 -32px",add:"0 -48px"},_profile:{},_left:function(value){with(this._profile){if(magneticDistance>0&&xMagneticLines.length){var l=xMagneticLines.length;while(l--){if(Math.abs(value-xMagneticLines[l])<=magneticDistance){return xMagneticLines[l]}}}if(widthIncrement>1){return Math.floor(value/widthIncrement)*widthIncrement}return value}},_top:function(value){with(this._profile){if(magneticDistance>0&&yMagneticLines.length){var l=yMagneticLines.length;while(l--){if(Math.abs(value-yMagneticLines[l])<=magneticDistance){return yMagneticLines[l]}}}if(heightIncrement>1){return Math.floor(value/heightIncrement)*heightIncrement}return value}},_ini:function(h){var g=this,f=g._profile,c=xui.win;g._box={width:c.width()+c.scrollLeft(),height:c.height()+c.scrollTop()};f.ox=f.x;f.oy=f.y;if(g._proxy=h){g._proxystyle=h.get(0).style;g._profile.curPos=g._cssPos=g._proxy.cssPos();g._cssPos_x=f.x-g._cssPos.left;g._cssPos_y=f.y-g._cssPos.top;f.restrictedLeft=f.x-(f.maxLeftOffset||0);f.restrictedRight=f.x+(f.maxRightOffset||0);f.restrictedTop=f.y-(f.maxTopOffset||0);f.restrictedBottom=f.y+(f.maxBottomOffset||0);g._proxyLeft=g._pre.left=g._cssPos.left;g._proxyTop=g._pre.top=g._cssPos.top;if("move"!==f.dragType){g._proxy.css("zIndex",xui.Dom.TOP_ZINDEX*10);xui.setNodeData(g._proxy.get(0),"zIndexIgnore",1)}}},_reset:function(){var g=this,f=null,c=false;_.tryF(g.$reset);g.setDropFace();g._resetProxy();g.$proxySize=50;g.$mousemove=g.$mouseup=g.$onselectstart=g.$ondragstart="*";g._cursor="";g._pre={};g._proxyLeft=g._proxyTop=g._cssPos_x=g._cssPos_y=0;g._stop=c;if(g._onDrag&&g._onDrag.tasks){g._onDrag.tasks.length=0;delete g._onDrag.tasks}if(g._onDragover&&g._onDragover.tasks){g._onDragover.tasks.length=0;delete g._onDragover.tasks}if(g._c_droppable){g._c_droppable.length=0}g._c_droppable=g._c_dropactive=g._cssPos=g._box=g._dropElement=g._source=g._proxy=g._proxystyle=g._onDrag=g._onDragover=f;g._profile={$id:_()+"",dragType:"shape",dragCursor:"move",targetReposition:true,dragIcon:xui.ini.path+"ondrag.gif",magneticDistance:0,xMagneticLines:[],yMagneticLines:[],widthIncrement:0,heightIncrement:0,dragDefer:0,horizontalOnly:c,verticalOnly:c,maxBottomOffset:f,maxLeftOffset:f,maxRightOffset:f,maxTopOffset:f,targetNode:f,targetCSS:f,dragKey:f,dragData:f,targetLeft:f,targetTop:f,targetWidth:f,targetHeight:f,targetOffsetParent:f,targetCallback:f,tagVar:f,shadowFrom:f,proxyNode:f,x:0,y:0,ox:0,oy:0,curPos:{},offset:{},isWorking:c,restrictedLeft:f,restrictedRight:f,restrictedTop:f,restrictedBottom:f,dropElement:f};g.__touchingfordd=0;return g},abort:function(){this._stop=true},_end:function(){var l=this,j=document,f=j.body,i="onmousedown",k="onmousemove",g="onmouseup",h,c;if(xui.browser.isTouch){h=(xui.browser.ie&&window.PointerEvent)?"onpointermove":(xui.browser.ie&&window.MSPointerEvent)?"onmspointermove":"ontouchmove";c=(xui.browser.ie&&window.PointerEvent)?"onpointerup":(xui.browser.ie&&window.MSPointerEvent)?"onmspointerup":"ontouchend"}if(l._proxy){l._unpack()}if(l.$onselectstart!="*"){f.onselectstart=l.$onselectstart}if(l.$ondragstart!="*"){j.ondragstart=l.$ondragstart}if(l.$mousemove!="*"){j[k]=l.$mousemove}if(l.$mouseup!="*"){j[g]=l.$mouseup}if(xui.browser.isTouch){if(l.$touchmove!="*"){j[h]=l.$touchmove}if(l.$touchend!="*"){j[c]=l.$touchend}}return l},startDrag:function(k,l,f,r,h){var m=this,w;if(m._profile.isWorking){return false}m._end()._reset();m._profile.isWorking=true;m.__touchingfordd=k.type=="xuitouchdown";f=_.isHash(f)?f:{};k=k||window.event;if(xui.Event.getBtn(k)!=="left"){return true}m._source=f.targetNode=xui(l);m._cursor=m._source.css("cursor");if((w=f.targetNode.get(0))&&!w.id){w.id=xui.Dom._pickDomId();w=null}m._defer=f.dragDefer=_.isNumb(f.dragDefer)?f.dragDefer:0;if(true===f.dragCursor){f.dragCursor=m._cursor}if(typeof f.dragIcon=="string"){f.dragType="icon"}var u=document,i=u.body,v=xui.Event.getPos(k),q="onmousedown",g="onmousemove",x="onmouseup",j,s;if(xui.browser.isTouch){j=(xui.browser.ie&&window.PointerEvent)?"onpointermove":(xui.browser.ie&&window.MSPointerEvent)?"onmspointermove":"ontouchmove";s=(xui.browser.ie&&window.PointerEvent)?"onpointerup":(xui.browser.ie&&window.MSPointerEvent)?"onmspointerup":"ontouchend"}f.x=v.left;f.y=v.top;f.dragKey=r||f.dragKey||null;f.dragData=h||f.dragData||null;var c=xui.Event.getSrc(k);m._start=function(z){var y=m._profile;_.merge(y,f,"with");m._source.beforeDragbegin();if(m._stop){m._end()._reset();return false}if(xui.Event&&(w=m._source.get(0))){xui.Event._preDroppable=w.id;w=null}if(y.dragType=="icon"){y.targetReposition=false}m._ini(y.dragType=="none"?null:m._pack(v,y.targetNode));if(f.x>=m._box.width||f.y>=m._box.height){m._end()._reset();return true}m._source.onDragbegin();if(y.dragDefer<1){m.$mousemove=u[g];m.$mouseup=u[x];if(xui.browser.isTouch){m.$touchmove=u[j];m.$touchend=u[s]}}if(xui.browser.ie){_.setTimeout(function(){if(c.releaseCapture){c.releaseCapture()}})}u[g]=m.$onDrag;u[x]=m.$onDrop;if(xui.browser.isTouch){u[j]=m.$onDrag;u[s]=m.$onDrop}m._source.afterDragbegin();if(y.dragDefer>0){m.$onDrag.call(m,z)}if(xui.browser.isTouch&&m.__touchingfordd){m._c_droppable=[];var t=xui.$cache.droppable[y.dragKey],d=[];_.arr.each(t,function(D){if(!xui.use(D).get(0)){d.push(D);return}var C=xui.use(D),E=C.offsetHeight(),A=C.offsetWidth(),B=C.css("visibility"),F;if(A&&E&&B!="hidden"){F=C.offset();F.width=A;F.height=E;F.id=D;m._c_droppable.unshift(F)}});if(d.length){_.arr.each(d,function(A){_.arr.removeValue(t,A)})}}};if(xui.browser.ie){m.$ondragstart=u.ondragstart;m.$onselectstart=i.onselectstart;u.ondragstart=i.onselectstart=null;if(u.selection&&u.selection.empty){u.selection.empty()}}xui.Event.stopBubble(k);if(f.targetNode.get(0)!==u){xui(u).onMousedown(true,xui.Event.getEventPara(k,v))}if(f.dragDefer<1){_.tryF(m._start,[k],m);return false}else{m.$mouseup=u[x];u[x]=function(d){xui.DragDrop._end()._reset();return _.tryF(document.onmouseup,[d],null,true)};if(xui.browser.isTouch){m.$touchend=u[s];u[s]=u[x]}var p={};m.$mousemove=u[g];u[g]=function(t){var d=xui.Event.getPos(t);if(d.left===p.left&&d.top===p.top){return}p=d;if(--m._defer<=0){xui.DragDrop._start(t)}return false};if(xui.browser.isTouch){m.$touchmove=u[j];u[j]=u[g]}}},$onDrag:function(m){var r=xui.DragDrop,c=r._profile;if(r.$SimulateMousemoveInMobileDevice){return false}m=m||window.event;if(!c.isWorking||r._stop){r.$onDrop(m);return true}var t=xui.Event.getPos(m);c.x=t.left;c.y=t.top;if(!c.isWorking){return false}if(r._proxy){if(!c.verticalOnly){r._proxyLeft=Math.floor(r._left(((c.maxLeftOffset!==null&&c.x<=c.restrictedLeft)?c.restrictedLeft:(c.maxRightOffset!==null&&c.x>=c.restrictedRight)?c.restrictedRight:c.x)-r._cssPos_x));if(r._proxyLeft-r._pre.left){r._proxystyle.left=r._proxyLeft+"px"}r._pre.left=r._proxyLeft;c.curPos.left=r._proxyLeft+r.$proxySize}if(!c.horizontalOnly){r._proxyTop=Math.floor(r._top(((c.maxTopOffset!==null&&c.y<=c.restrictedTop)?c.restrictedTop:(c.maxBottomOffset!==null&&c.y>=c.restrictedBottom)?c.restrictedBottom:c.y)-r._cssPos_y));if(r._proxyTop-r._pre.top){r._proxystyle.top=r._proxyTop+"px"}r._pre.top=r._proxyTop;c.curPos.top=r._proxyTop+r.$proxySize}}else{c.curPos.left=c.x;c.curPos.top=c.y}if(r._onDrag!=1){if(r._onDrag){r._onDrag(m,r._source._get(0))}else{r._onDrag=1;r._source.onDrag(true,xui.Event.getEventPara(m,t))}}if(xui.browser.isTouch&&r.__touchingfordd){if(r._c_droppable){for(var h=0,g=r._c_droppable.length;h<g;h++){var f=r._c_droppable[h],q=xui.use(f.id).get(0),k=r._c_dropactive,s=xui.use(k).get(0);if(c.x>=f.left&&c.y>=f.top&&c.x<=(f.left+f.width)&&c.y<=(f.top+f.height)){if(k==f.id){var j=m.changedTouches[0];r.$SimulateMousemoveInMobileDevice=1;xui.Event.simulateEvent(q,"mousemove",{screenX:j.screenX,screenY:j.screenY,clientX:j.clientX,clientY:j.clientY});delete r.$SimulateMousemoveInMobileDevice}else{xui.Event.simulateEvent(q,"mouseover",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top});r._c_dropactive=f.id;if(k&&s){xui.Event.simulateEvent(s,"mouseout",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top})}}break}else{if(k==f.id){if(s){xui.Event.simulateEvent(s,"mouseout",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top})}r._c_dropactive=null;break}}}}}return false},$onDrop:function(h){var i=xui.DragDrop,g=i._profile,c=xui.Event;h=h||window.event;i._end();if(g.isWorking){i.setDropFace();var f=i._source.onDragstop(true,c.getEventPara(h));if(i._dropElement){xui.use(i._dropElement).onDrop(true,c.getEventPara(h))}}i._reset();c.stopBubble(h);_.tryF(document.onmouseup,[h]);return !!f},setDropElement:function(c){this._profile.dropElement=this._dropElement=c;return this},getProfile:function(){var f=this,c=f._profile;c.offset=f._proxy?{x:f._proxyLeft-c.ox+f._cssPos_x,y:f._proxyTop-c.oy+f._cssPos_y}:{x:c.x-c.ox,y:c.y-c.oy};return c},setDropFace:function(k,i){var l=this,h='<div style="position:absolute;z-index:'+xui.Dom.TOP_ZINDEX+";font-size:0;line-height:0;border-",f=":dashed 1px #ff6600;",j=l._Region,c=l._rh,g="backgroundColor";if(j&&j.parent()){j.remove(false)}if(l._R){l._R.css(g,l._RB);delete l._R;delete l._RB}if(k){if(!j||!j.get(0)){j=l._Region=xui.create(h+"top"+f+'left:0;top:0;width:100%;height:0;"></div>'+h+"right"+f+'right:0;top:0;height:100%;width:0;"></div>'+h+"bottom"+f+'bottom:0;left:0;width:100%;height:0;"></div>'+h+'left:solid 2px #ff6600;width:0;left:0;top:0;height:100%;"></div>');c=l._rh=xui([j.get(1),j.get(3)])}k=xui(k);if(xui.browser.ie6){c.height("100%")}if(k.css("display")=="block"){xui.setNodeData(j.get(0),"zIndexIgnore",1);k.append(j);j.top(k.scrollTop()).left(k.scrollLeft());if(xui.browser.ie6&&!c.get(0).offsetHeight){c.height(k.get(0).offsetHeight)}}else{l._RB=k.get(0).style[g];l._R=k;k.css(g,"#FA8072")}l.setDragIcon(i||"move")}else{l.setDragIcon("none")}return l},setDragIcon:function(g){_.resetRun("setDropFace",null);var j=this,h=j._profile,f=h.proxyNode,c=j._Icons;if(f&&h.dragType=="icon"){f.first(4).css(typeof g=="object"?g:{backgroundPosition:(c[g]||g)})}return j},_setProxy:function(k,j){var f,c,i=this,g=i._profile,h=xui.Dom;if(!h.byId(i._id)){xui("body").prepend(xui.create('<div id="'+i._id+'" style="left:0;top:0;border:0;font-size:0;line-height:0;padding:'+i.$proxySize+"px;position:absolute;background:url("+xui.ini.img_bg+') repeat;"><div style="font-size:0;line-height:0;" id="'+i._idi+'">'+(xui.browser.ie6?"&nbsp;":"")+"</div></div>"))}f=xui(i._id);if(g.dragKey){i.$proxySize=0;f.css("padding",0)}else{j.left-=i.$proxySize;j.top-=i.$proxySize;if(!g.targetOffsetParent){h.setCover(true)}}if(c=g.targetOffsetParent){xui(c).append(f)}if(k){xui(i._idi).empty(false).append(k);g.proxyNode=k}else{g.proxyNode=xui(i._idi)}f.css({display:"",zIndex:h.TOP_ZINDEX*10,cursor:g.dragCursor}).offset(j,c);xui.setNodeData(f.get(0),"zIndexIgnore",1);return f},_resetProxy:function(){var m=this,i=m._profile,l=xui.Dom,h=m._id,g=m._idi;if(l.byId(h)){var f,c,j=xui(g),f=xui(h);if(xui.browser.ie6){j.html("&nbsp;")}else{j.empty()}j.attr("style","font-size:0;line-height:0;");xui("body").prepend(f.css({zIndex:0,cursor:"",display:"none",padding:m.$proxySize+"px"}));i.proxyNode=m._proxystyle=null;l.setCover(false)}},_pack:function(k,g){var h,j={},m={},i=this,c=i._profile,l;if(c.targetLeft===null||null===c.targetTop){l=g.offset(null,c.targetOffsetParent)}j.left=null!==c.targetLeft?c.targetLeft:l.left;j.top=null!==c.targetTop?c.targetTop:l.top;switch(c.dragType){case"deep_copy":case"copy":var l;m.width=_.isNumb(c.targetWidth)?c.targetWidth:(g.cssSize().width||0);m.height=_.isNumb(c.targetHeight)?c.targetHeight:(g.cssSize().height||0);var f=g.clone(c.dragType=="deep_copy").css({position:"relative",margin:"0",left:"0",top:"0",right:"",bottom:"",cursor:c.dragCursor,cssFloat:"none"}).cssSize(m).id("",true).css("opacity",0.8);if(c.targetCallback){c.targetCallback(f)}f.query("*").id("",true);if(c.targetCSS){f.css(c.targetCSS)}h=i._setProxy(f,j);break;case"shape":m.width=null!==c.targetWidth?c.targetWidth:g.offsetWidth();m.height=null!==c.targetHeight?c.targetHeight:g.offsetHeight();m.width-=2;m.height-=2;h=i._setProxy(xui.create("div").css({border:"dashed 1px",fontSize:"0",lineHeight:"0"}).cssSize(m),j);break;case"blank":h=i._setProxy(null,j);break;case"icon":j.left=_.isNumb(c.targetLeft)?c.targetLeft:(k.left+16);j.top=_.isNumb(c.targetTop)?c.targetTop:(k.top+16);l='<table border="0" class="xui-node xui-node-table"><tr><td valign="top"><span class="xui-node xui-node-span" style="background:url('+c.dragIcon+") no-repeat left top;width:"+(_.isNumb(c.targetWidth)?c.targetWidth:16)+"px;height:"+(_.isNumb(c.targetHeight)?c.targetHeight:16)+'px;" ></span></td><td id="xui:dd:shadow" '+(c.shadowFrom?'style="border:solid 1px #e5e5e5;background:#fff;font-size:12px;line-height:14px;"':"")+">"+(c.shadowFrom?xui(c.shadowFrom).clone(true).css({left:"auto",top:"auto",position:"relative"}).outerHTML().replace(/\s*id\=[^\s\>]*/g,""):"")+"</td></tr></table>";h=i._setProxy(xui.create(l).css("opacity",0.8),j);break;case"move":i.$proxySize=0;h=g;if(h.css("position")!="absolute"){h.css("position","absolute").offset(j)}h.css("cursor",c.dragCursor)}return h},_unpack:function(){var i=this,h=i._profile,c,g;if(h.targetReposition&&("move"!=h.dragType)){if((c=xui(i._source))){if(!c.isEmpty()){if(c.css("position")!="absolute"){c.css("position","absolute").cssPos(c.offset(null,c.get(0).offsetParent))}if(xui.browser.ie){c.cssRegion({right:"",bottom:""})}c.offset(h.curPos,h.targetOffsetParent||document.body)}}}if("move"==h.dragType){i._source.css("cursor",i._cursor)}},_unRegister:function(g,f){var j=this._eh;xui([g]).$removeEvent("beforeMouseover",j).$removeEvent("beforeMouseout",j).$removeEvent("beforeMousemove",j);var h=xui.getNodeData(g.$xid,["_dropKeys"]),k=xui.$cache.droppable;if(h){for(var d in h){if(k[d]){_.arr.removeValue(k[d],g.$xid)}}}xui.setNodeData(g.$xid,["_dropKeys"])},_register:function(f,r){var j=this._eh;xui(f).beforeMouseover(function(s,l,h){var c=xui.DragDrop,s=c._profile;if(s.dragKey&&xui.getNodeData(h,["_dropKeys",s.dragKey])){c.setDropElement(h);c._onDragover=null;xui.use(h).onDragenter(true);if(c._dropElement){_.resetRun("setDropFace",c.setDropFace,0,[h],c)}}},j).beforeMouseout(function(s,l,h){var c=xui.DragDrop,s=c._profile;if(s.dragKey&&xui.getNodeData(h,["_dropKeys",s.dragKey])){xui.use(h).onDragleave(true);if(c._dropElement==h){c.setDropElement(c._onDragover=null);_.resetRun("setDropFace",c.setDropFace,0,[null],c)}}},j).beforeMousemove(function(c,w,s){var l=xui.DragDrop,u=l._onDragover,v=l._profile;if(u==1){return}if(l._dropElement==s&&v.dragKey&&xui.getNodeData(s,["_dropKeys",v.dragKey])){if(u){u(w,s)}else{l._onDragover=1;xui.use(s).onDragover(true,xui.Event.getEventPara(w))}}},j);var d=xui.getNodeData(f.$xid,["_dropKeys"]),p=xui.$cache.droppable;if(d){for(var k in d){if(p[k]){_.arr.removeValue(p[k],f.$xid)}}}var m={},q=r.split(/[^\w-]+/);for(var k=0,g=q.length;k<g;k++){m[q[k]]=1;p[q[k]]=p[q[k]]||[];p[q[k]].push(f.$xid)}xui.setNodeData(f.$xid,["_dropKeys"],m)}},After:function(){this._reset();_.each({startDrag:function(g,d,c,f){xui.DragDrop.startDrag(g,this.get(0),d,c||"",f||null);return this},draggable:function(d,i,h,l,k){var g=this,k=k?typeof(k)=="function"?_.tryF(getTarget,[],this):xui(k):null,c=xui.DragDrop;if(!k||!k.get(0)){k=g}g.addClass("xui-ui-unselectable");if(d===undefined){d=true}else{if(typeof d=="object"){i=d;d=true}}var j=function(m,f,q){if(xui.getId(xui.Event.getSrc(f))!=q){return true}k.startDrag(f,i,h,l)};if(!!d){g.$addEvent("beforeMousedown",j,c._eh,-1)}else{g.$removeEvent("beforeMousedown",c._eh)}return g},droppable:function(c,f){if(c===undefined){c=true}f=f||"default";var g=xui.DragDrop;return this.each(function(d){if(!!c){g._register(d,f)}else{g._unRegister(d,f)}})}},function(d,c){xui.Dom.plugIn(c,d)})}});Class("xui.Cookies",null,{Static:{set:function(c,g,i,h,f,d){if(c){document.cookie=escape(c)+"="+escape(g)+(i?";expires="+(new Date((new Date()).getTime()+(24*60*60*1000*i))).toGMTString():"")+(h?";path="+h:"")+(f?";domain="+f:"")+(d?";secure":"")}return this},get:function(f){var g,d,c=document.cookie.split("; ");for(g=0;g<c.length;g++){d=c[g].split("=");if(d[0]==escape(f)){return d[1]?unescape(d[1]):""}}return null},remove:function(c){return this.set(c,"",-1).set(c,"/",-1)},clear:function(){_.arr.each(document.cookie.split(";"),function(c){xui.Cookies.remove(_.str.trim(c.split("=")[0]))})}}});Class("xui.History",null,{Static:{_fid:"xui:history",_type:(xui.browser.ie&&(xui.browser.ver<8))?"iframe":("onhashchange" in window)?"event":"timer",setCallback:function(g){var c=this,f=location.hash;if(f){f="#!"+encodeURIComponent((""+decodeURIComponent(f)).replace(/^#!/,""))}else{f="#!"}c._callback=g;if(g){c._lastFI=decodeURIComponent(f);switch(c._type){case"event":window.onhashchange=c._checker;break;case"iframe":document.body.appendChild(document.createElement('<iframe id="'+c._fid+'" src="about:blank" style="display: none;"></iframe>'));var d=document.getElementById(c._fid).contentWindow.document;d.open("javascript:'<html></html>'");d.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+f+"');<\/script></head><body></body></html>");d.close();case"timer":if(c._itimer){clearInterval(c._itimer)}c._itimer=setInterval(c._checker,100);break}c._callback(decodeURIComponent(c._lastFI.replace(/^#!/,"")))}else{if(c._itimer){clearInterval(c._itimer)}}return c},_checker:function(d){var c=xui.History;if(typeof c._callback!="function"){if(c._itimer){clearInterval(c._itimer)}return}switch(c._type){case"iframe":if(_.isSet(d)){location.hash=d}case"event":case"timer":if(decodeURIComponent(location.hash)!=decodeURIComponent(c._lastFI)){c._lastFI=decodeURIComponent(location.hash);c._callback(decodeURIComponent(location.hash.replace(/^#(!)?/,"")))}break}},getFI:function(){return this._lastFI},setFI:function(g,f){var c=this;if(!c._callback){return}if(g){g="#!"+encodeURIComponent((""+decodeURIComponent(g)).replace(/^#!/,""))}else{g="#!"}if(c._lastFI==decodeURIComponent(g)){return false}switch(c._type){case"iframe":var d=document.getElementById(c._fid).contentWindow.document;d.open("javascript:'<html></html>'");d.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+g+"');<\/script></head><body></body></html>");d.close();break;case"event":case"timer":location.hash=c._lastFI=decodeURIComponent(g);if(f!==false){_.tryF(c._callback,[decodeURIComponent(g.replace(/^#!/,""))])}break}}}});Class("xui.Tips",null,{Constructor:function(){return null},Initialize:function(){var d=xui.DragDrop,c=this;if(d){d.$reset=function(){c._pos={left:d._profile.x,top:d._profile.y}}}xui.CSS.addStyleSheet(".xui-tips{font-size:0;line-height:0;position:absolute;overflow:visible;visibility:hidden;left:-10000px;} .xui-tips-i{font-size:12px;overflow:hidden;position:relative;}.xui-tips-i span{display:inline;}.xui-tips-c {border:solid gray 1px;background-color:#FFF8DC;padding:1px 2px 2px 2px;}",this.KEY);xui.doc.afterMousedown(function(){c._cancel()},"$Tips",-1).afterMousemove(function(i,h){if(d.isWorking){return}var f=xui.Event,g,j;if((g=_.resetRun.$cache)&&g["$Tips"]){c._pos=f.getPos(h)}if(c._from){c._pos=f.getPos(h);c._showF();_.resetRun("$Tips3")}else{if(c._showed&&c.MOVABLE){g=f.getPos(h);j=c._Node.style;j.left=(parseInt(j.left,10)||0)+(g.left-c._pos.left)+"px";j.top=(parseInt(j.top,10)||0)+(g.top-c._pos.top)+"px";c._pos=g}}},"$Tips",-1).afterMouseover(function(q,t){var f=xui.Event,k=f.$FALSE,h=f.getSrc(t),g,s,w,p,r=0,x,u=function(i){if(c._markId){c._cancel()}return i};if(!h){return u(k)}try{while((!h.id||h.id==xui.$localeDomId)&&h.parentNode!==document&&r++<10){h=h.parentNode}if(!(g=(typeof h.id=="string"?h.id:null))){h=null;return u(k)}}catch(t){}if((s=f._getProfile(g))&&s.box&&s.KEY=="xui.UIProfile"){if(s.properties.disableTips||s.behavior.disableTips){h=null;return u(false)}var v=s.behavior.NoTips;if(v){for(var m=0,j=v.length;m<j;m++){if(g.indexOf(s.keys[v[m]])===0){return u(false)}}}v=s.behavior.PanelKeys;if(v){for(var m=0,j=v.length;m<j;m++){if(g.indexOf(s.keys[v[m]])===0){return u(false)}}}w=s.onShowTips?g:g.replace(c._reg,":");if(c._markId&&w==c._markId){return k}c._markId=w;c._pos=f.getPos(t);if(c._showed){c._from=s;c._enode=g;c._showF()}else{_.resetRun("$Tips",function(){c._from=s;c._enode=g;_.resetRun("$Tips3",function(){if(c._from){c._showF()}})},c.DELAYTIME)}}else{c._cancel()}h=null;return k},"$Tips",-1).afterMouseout(function(k,j){if(c._markId){var i=xui.Event,l,f,g=0,h=j.toElement||j.relatedTarget;if(!h){f=1}else{try{while((!h.id||h.id==xui.$localeDomId)&&h.parentNode!==document&&g++<10){h=h.parentNode}if(!(l=(typeof h.id=="string"?h.id:null))){h=null;f=1}}catch(j){f=1}}if(f){c._cancel()}return i.$FALSE}},"$Tips",-1).afterMouseup(function(g,f){c._cancel()},"$Tips",-1);this._Types={"default":new function(){this.show=function(t,m,r){if(!m){return}var u=this,i,g,v,q,k;if(!(i=u.node)||!i.get(0)){i=u.node=xui.create('<div class="xui-node xui-node-div xui-tips xui-custom"><div class="xui-node xui-wrapper xui-node-div xui-tips-i xui-custom"></div></div>');g=u._ruler=xui.create('<div class="xui-node xui-wrapper xui-node-div xui-tips xui-custom"><div class="xui-node xui-node-div xui-tips-i xui-custom"></div></div>');u.n=i.first();u._n=g.first();if(xui.Dom.css3Support("boxShadow")){i.css("boxShadow","2px 2px 2px #717C8C");g.css("boxShadow","2px 2px 2px #717C8C")}else{if(typeof i.addShadow=="function"){i.addShadow();g.addShadow()}}xui("body").append(g)}g=u._ruler;if(document.body.lastChild!=i.get(0)){xui("body").append(i,false,true)}v=typeof t=="object"?t[r||xui.Tips.TIPSKEY]:t;if(typeof v=="function"){v=v()}if(v+=""){var j=/^\s*\</.test(v);v=xui.adjustRes(v);xui.Tips._curTips=v;if(!t.transTips||!j){v='<div class="xui-node xui-node-div xui-tips-c xui-custom">'+v+"</div>"}u._n.get(0).innerHTML=v;q=g.get(0).offsetWidth+2;if(!j){q=Math.min(c.MAXWIDTH,q)}var f=i.get(0).style,l=u.n.get(0),p=l.style;f.visibility="hidden";l.innerHTML=v;if(xui.browser.ie){f.width=p.width=q+(q%2)+"px";k=l.offsetHeight;f.height=k-(k%2)+"px"}else{p.width=q+"px"}if(m===true){f.visibility="visible"}else{i.popToTop({left:m.left,top:m.top,region:{left:m.left,top:m.top-12,width:24,height:32}},1)}f=p=l=null}else{i.css("zIndex",0).hide()}};this.hide=function(){this.node.css("zIndex",0).hide()}}}},Static:{_reg:/-[\w]+:/,TIPSKEY:"tips",MAXWIDTH:300,MOVABLE:true,DELAYTIME:400,AUTOHIDETIME:5000,_showF:function(){var d=this,h=d._from,g=xui.Dom.byId(d._enode),k=d._pos,j,i,f,c=false;d._from=d._enode=null;if(!g||!h||!k||!(i=h.box)){return}c=((f=h.CF)&&(f=f.showTips)&&f(h,g,k));if(!c){c=(i._showTips&&i._showTips(h,g,k))}if(!c){if(((f=h)&&f.tips)||(f&&(f=f.properties)&&f.tips)){d.show(k,f);c=true}else{if((f=h)&&(f=f.properties)&&f.autoTips&&("caption" in f)&&f.tips===""){if(f.caption){d.show(k,{tips:f.caption});c=true}}}}if(!c){d.hide()}else{if(!d.MOVABLE){_.resetRun("$Tips2",d.hide,d.AUTOHIDETIME,null,d)}}g=k=h=null},getTips:function(){return this._curTips},setTips:function(c){if(this._curTips&&this._tpl&&this._Node){this._tpl.show(c,true)}},setPos:function(d,c){var f=this;if((f=f._Node)&&(f=f.style)){if(d||d===0){f.left=parseFloat(d)+"px"}if(c||c===0){f.top=parseFloat(c)+"px"}}},show:function(h,g,f){var c=this,d;c._pos=h;if(c._item===g){return}if(typeof g=="string"||(g&&(g[f||xui.Tips.TIPSKEY]))){d=c._tpl=c._Types[g.tipsTemplate]||c._Types["default"];d.show(g,h,f);c._Node=d.node.get(0);c._item=g;c._showed=true}else{c._cancel()}},hide:function(){var c=this;if(c._showed){if(c._tpl){c._tpl.hide()}c._clear()}},_cancel:function(){var c=this;if(c._markId){if(c._showed){c.hide()}else{_.resetRun("$Tips");_.resetRun("$Tips3");c._clear()}}},_clear:function(){var c=this;c._Node=c._curTips=c._markId=c._from=c._tpl=c._item=c._showed=null}}});