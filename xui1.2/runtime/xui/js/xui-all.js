undefined;_=function(){return +new Date()};Namespace=function(f){var d=f.split("."),c=window;return _.get(c,d)||_.set(c,d,{})};Class=function(E,s,m){var d,A=[],q=Class,l=window,z=q._fun,g=q._reg,h,v,y,n,C,c=q._all;m=m||{};if(!q._ignoreNSCache&&(n=_.get(l,E.split(".")))&&typeof(n)=="function"&&n.$xui$){return q._last=n}s=(!s?[]:typeof s=="string"?[s]:s);for(y=0;n=s[y];y++){if(!(A[y]=(_.get(l,n.split("."))||(xui&&xui.SC&&xui.SC(n))))){throw"errNoParent--"+n}}if(m.Dependency){if(typeof m.Dependency=="string"){m.Dependency=[m.Dependency]}for(y=0;n=m.Dependency[y];y++){if(!(_.get(l,n.split("."))||(xui&&xui.SC&&xui.SC(n)))){throw"errNoDependency--"+n}}}h=A[0];d=m.Static||{};n={};for(y in d){if(g[y]){n[y]=1}}for(y in n){delete d[y]}d.Before=m.Before||(h&&h.Before);d.After=m.After||(h&&h.After);d.$End=m.$End||(h&&h.$End);d.__gc=m.__gc||d.__gc||(h&&h.__gc)||function(){Class.__gc(this.$key)};var p=function(){if(typeof this.initialize=="function"){this.initialize()}};if(typeof m.Constructor=="function"){v=z(m.Constructor,"Constructor",E,h||p,"constructor");v.Constructor=String(m.Constructor)}else{if(h){var B=p,r=h.Constructor;if(r){B=new Function(r.slice(r.indexOf("(")+1,r.indexOf(")")).split(","),r.slice(r.indexOf("{")+1,r.lastIndexOf("}")))}v=z(B,"Constructor",E,h.upper,"constructor");v.Constructor=r}else{v=p}}C=_.fun();for(y=A.length-1;n=A[y--];){_.merge(C,n);_.merge(C.prototype,n.prototype)}v.KEY=v.$key=v.prototype.KEY=v.prototype.$key=E;q._wrap(v,d,0,C,"static");if(n=m.Instance){q._wrap(v.prototype,n,1,C.prototype,"instance")}q._inherit(v,C);q._inherit(v.prototype,C.prototype);C=null;if(_.tryF(v.Before,arguments,v)===false){return false}for(y=0;n=A[y];y++){n=(n.$children||(n.$children=[]));for(var x=0,u=n.length,D;x<u;x++){if(n[u]==E){D=true;break}}if(!D){n[n.length]=E}}v.$xui$=1;v.$children=[];v.$parent=A;v.prototype.constructor=v;v.prototype.$xui$=1;v[E]=v.prototype[E]=true;C=n=_.get(l,E.split("."));_.set(l,E.split("."),v);if(Object.prototype.toString.call(C)=="[object Object]"){for(y in C){v[y]=C[y]}}_.tryF(v.After,[],v);_.tryF(m.Initialize,[],v);_.tryF(v.$End,[],v);_.breakO([m.Static,m.Instance,m],2);c[E]=c.length;c.push(E);return q._last=v};linb=xui=function(d,c){return xui.Dom.pack(d,c)};_.merge=function(j,h,d){var c,g;if(typeof d=="function"){g=d;d="fun"}switch(d){case"fun":for(c in h){if(true===g(h[c],c)){j[c]=h[c]}}break;case"all":for(c in h){j[c]=h[c]}break;case"with":for(c in h){if(c in j){j[c]=h[c]}}break;default:for(c in h){if(!(c in j)){j[c]=h[c]}}}return j};new function(){var h=0,j=["ms","moz","webkit","o"],f=window,g=0,d=j.length,c;for(;g<d&&!f.requestAnimationFrame&&(c=j[g++]);){f.requestAnimationFrame=f[c+"RequestAnimationFrame"];f.cancelAnimationFrame=f[c+"CancelAnimationFrame"]||f[c+"CancelRequestAnimationFrame"]}if(!f.requestAnimationFrame){f.requestAnimationFrame=function(n,k){var i=(new Date()).getTime(),l=Math.max(0,16-(i-h)),m=setTimeout(function(){n(i+l)},l);h=i+l;return m}}if(!f.cancelAnimationFrame){f.cancelAnimationFrame=function(i){clearTimeout(i)}}};_.merge(_,{setTimeout:function(d,c){return(c||0)>16?(setTimeout(d,c)*-1):requestAnimationFrame(d)},clearTimeout:function(c){if(c>=0){cancelAnimationFrame(c)}else{clearTimeout(Math.abs(c))}},fun:function(){return function(){}},exec:function(c,k){var i=this,j=document,g=j.getElementsByTagName("head")[0]||j.documentElement,f=j.createElement("script");f.type="text/javascript";if(k){f.id=k}if(xui.browser.ie){f.text=c}else{f.appendChild(j.createTextNode(c))}g.appendChild(f);f.disalbed=true;f.disabled=false;if(!k){g.removeChild(f)}},get:function(g,f){if(!f){return g}if(!_.isSet(g)){return undefined}else{if(typeof f=="string"){return g[f]}else{for(var d=0,c=f.length;d<c;){if(!g||(g=g[f[d++]])===undefined){return}}return g}}},set:function(k,j,h){if(!k){return}if(typeof j!="string"){var d,f=0,c,g=j.length-1;for(;f<g;){d=j[f++];if(k[d]&&((c=typeof k[d])=="object"||c=="function")){k=k[d]}else{k=k[d]={}}}j=j[g]}if(h===undefined){if(k.hasOwnProperty&&k.hasOwnProperty(j)){delete k[j]}else{k[j]=undefined}}else{return k[j]=h}},tryF:function(c,d,f,g){return(c&&typeof c=="function")?c.apply(f||{},d||[]):g},asyRun:function(c,g,d,f){return _.setTimeout(typeof c=="string"?function(){_.exec(c)}:function(){c.apply(f,d||[]);c=d=null},g||0)},asyHTML:function(f,i,g,d){var h=document.createElement("div"),c=document.createDocumentFragment();h.innerHTML=f;(function(){var j=d||10;while(--j&&h.firstChild){c.appendChild(h.firstChild)}if(h.firstChild){_.setTimeout(arguments.callee,g||0)}else{i(c)}})()},isEmpty:function(d){if(d==null){return true}for(var c in d){if(_._has.call(d,c)){return false}}return true},resetRun:function(h,c,l,g,i){var j=arguments.callee,f=h,d=j.$cache||((j.exists=function(m){return this.$cache[m]})&&(j.$cache={}));if(d[f]){_.clearTimeout(d[f])}if(typeof c=="function"){d[f]=_.setTimeout(function(){delete d[f];c.apply(i||null,g||[])},l||0)}else{delete d[f]}},observableRun:function(g,d,f,c){xui.Thread.observableRun(g,d,f,c)},breakO:function(j,k){var m=k||1,c=1+(arguments[2]||0),d=arguments.callee,g="___gc_",f;if(j&&(typeof j=="object"||typeof j=="function")&&j!==window&&j!==document&&j.nodeType!==1){try{if(j.hasOwnProperty(g)){return}else{j[g]=null}}catch(h){return}try{for(f in j){if(j.hasOwnProperty(f)&&j[f]){if(typeof j[f]=="object"||typeof j[f]=="function"){if(c<m){d(j[f],m,c)}}try{j[f]=null}catch(h){}}}}catch(h){return}if(j.length){j.length=0}delete j[g]}},each:function(g,c,f){f=f||g;for(var d in g){if(false===c.call(f,g[d],d,g)){break}}return g},toFixedNumber:function(i,j){if(!_.isSet(j)){j=2}var c=Math.abs(i),h=""+Math.round(c*Math.pow(10,j)),f,g,k,d;if(/\D/.test(h)){f=""+c}else{while(h.length<1+j){h="0"+h}k=h.substring(0,g=(h.length-j));d=h.substring(g);if(d){d="."+d}f=k+d}return parseFloat((i<0?"-":"")+f)},toNumeric:function(g,c,f,d){if(!_.isNumb(g)){g=parseFloat((g+"").replace(/\s*(e\+|[^0-9])/g,function(i,h,j){return h=="e+"||h=="E+"||(j==0&&h=="-")?h:h==d?".":""}))||0}if(_.isSet(c)&&c>=0){g=_.toFixedNumber(g,c)}return g},formatNumeric:function(h,c,g,d,f){if(_.isSet(c)){c=parseInt(c,10)}c=(c||c===0)?c:0;g=_.isSet(g)?g:",";d=d||".";h=""+parseFloat(h);if(h.indexOf("e")==-1){h=_.toFixedNumber(h,c)+"";h=h.split(".");if(f!==false){if((h[1]?h[1].length:0)<c){h[1]=(h[1]||"")+_.str.repeat("0",c-(h[1]?h[1].length:0))}}h[0]=h[0].split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1"+g).split("").reverse().join("");return h.join(d)}else{return h}},copy:function(d,c){return _.clone(d,c,1)},clone:function(g,c,q){var m=arguments[3]||0;if(g&&(_.isHash(g)||_.isArr(g))){if(_.isObj(g)){var n=arguments.callee,f=_.isArr(g),k=f?[]:{},j=0,p,d;if(!q){if(q<=0){return g}else{q=100}}if(f){d=g.length;for(;j<d;j++){if(typeof c=="function"&&false===c.call(g,g[j],j,m+1)){continue}k[k.length]=((p=g[j])&&q&&(_.isHash(p)||_.isArr(p)))?n(p,c,q-1,m+1):p}}else{for(j in g){if(c===true?j.charAt(0)=="_":c===false?(j.charAt(0)=="_"||j.charAt(0)=="$"):typeof c=="function"?false===c.call(g,g[j],j,m+1):0){continue}k[j]=((p=g[j])&&q&&(_.isHash(p)||_.isArr(p)))?n(p,c,q-1,m+1):p}}return k}else{return g}}else{return g}},filter:function(h,d,c){if(!c&&h&&_.isArr(h)){var j,g,m,k=[],f;for(j=0,g=h.length;j<g;j++){k[k.length]=h[j]}h.length=0;for(j=0,g=k.length;j<g;j++){if(typeof d=="function"?false!==d.call(k,k[j],j):1){h[h.length]=k[j]}}}else{var j,n={};for(j in h){if(d===true?j.charAt(0)=="_":d===false?(j.charAt(0)=="_"||j.charAt(0)=="$"):typeof d=="function"?false===d.call(h,h[j],j):0){n[j]=1}}for(j in n){delete h[j]}}return h},toArr:function(h,f){if(!h){return[]}var c=[];if(typeof f=="boolean"){for(var g in h){c[c.length]=f?g:h[g]}}else{if(_.isHash(h)){for(var g in h){c.push({key:g,value:h[g]})}}else{if(typeof h=="string"){c=h.split(f||",")}else{for(var g=0,d=h.length;g<d;++g){c[g]=h[g]}}}}return c},toUTF8:function(c){return c.replace(/[^\x00-\xff]/g,function(f,d){return"\\u"+((d=f.charCodeAt())<16?"000":d<256?"00":d<4096?"0":"")+d.toString(16)})},fromUTF8:function(c){return c.replace(/\\u([0-9a-f]{3})([0-9a-f])/g,function(f,d,g){return String.fromCharCode((parseInt(d,16)*16+parseInt(g,16)))})},urlEncode:function(f){var c=[],d,g;for(d in f){if(_.isDefined(g=f[d])){c.push(encodeURIComponent(d)+"="+encodeURIComponent(typeof g=="string"?g:_.serialize(g)))}}return c.join("&")},urlDecode:function(k,n){if(!k){return n?"":{}}var h,f={},m=k.split("&"),c;for(var g=0,d=m.length;g<d;g++){c=m[g];h=c.split("=");try{f[decodeURIComponent(h[0])]=decodeURIComponent(h[1])}catch(j){f[h[0]]=h[1]}}return n?f[n]:f},preLoadImage:function(h,g,j){if(_.isArr(h)){for(var f=0,c=arr.length;f<c;f++){_.preLoadImage(h[f],g,j)}return c}var d=document.createElement("img");d.style.cssText="position:absolute;left:-999px;top:-999px";d.width=d.height=2;d.onload=function(){if(typeof g=="function"){g.call(this)}this.onload=this.onerror=null;document.body.removeChild(this)};d.onerror=function(){if(typeof j=="function"){j.call(this)}this.onload=this.onerror=null;document.body.removeChild(this)};document.body.appendChild(d);d.src=h;return 1},_to:Object.prototype.toString,_has:Object.prototype.hasOwnProperty,_ht:/^\s*function\s+Object\(\s*\)/,isDefined:function(c){return c!==undefined},isNull:function(c){return c===null},isSet:function(c){return c!==undefined&&c!==null&&c!==NaN},isObj:function(c){return !!c&&(typeof c=="object"||typeof c=="function")},isHash:function(c){return !!c&&_._to.call(c)=="[object Object]"&&c.constructor&&_._ht.test(c.constructor.toString())&&!_._has.call(c,"callee")},isBool:function(c){return typeof c=="boolean"},isNumb:function(c){return typeof c=="number"&&isFinite(c)},isFinite:function(c){return(c||c===0)&&isFinite(c)&&!isNaN(parseFloat(c))},isDate:function(c){return _._to.call(c)==="[object Date]"&&isFinite(+c)},isFun:function(c){return _._to.call(c)==="[object Function]"},isArr:function(c){return _._to.call(c)==="[object Array]"},isReg:function(c){return _._to.call(c)==="[object RegExp]"},isStr:function(c){return _._to.call(c)==="[object String]"},isArguments:function(c){return _._to.call(c)==="[object Arguments]"||_._has.call(c,"callee")},isElem:function(c){!!(c&&c.nodeType===1)},isNaN:function(c){_.isNumb(c)&&c!=+c},str:{startWith:function(d,c){return d.indexOf(c)===0},endWith:function(d,f){var c=d.length-f.length;return c>=0&&d.lastIndexOf(f)===c},repeat:function(d,c){return new Array(c+1).join(d)},initial:function(c){return c.charAt(0).toUpperCase()+c.substring(1)},trim:function(c){return c?c.replace(/^(\s|\uFEFF|\xA0)+|(\s|\uFEFF|\xA0)+$/g,""):c},ltrim:function(c){return c?c.replace(/^(\s|\uFEFF|\xA0)+/,""):c},rtrim:function(c){return c?c.replace(/(\s|\uFEFF|\xA0)+$/,""):c},toDom:function(j){var h=xui.$getGhostDiv(),g=[];h.innerHTML=j;for(var f=0,d=h.childNodes,c=d.length;f<c;f++){g[g.length]=d[f]}h=null;return xui(g)}},arr:{fastSortObject:function(l,k){if(!l||l.length<2){return l}var r=l.length,n=[],m=(r+"").length,d=Object.prototype,f,v,q,u;for(var h=0;h<m;h++){n[h]=new Array(m-h).join("0")}for(var g=0;g<r;g++){v=g+"";q=l[g];if(typeof q=="object"){q._xui_$s$=(_.isSet(u=k.call(q,g))?u:"")+n[v.length-1]+v}}try{f=d.toString;d.toString=function(){return this.hasOwnProperty("_xui_$s$")?(this._xui_$s$):(f.call(this))};l.sort()}finally{d.toString=f;for(var g=0;g<r;g++){if(typeof l[g]=="object"){delete l[g]._xui_$s$}}}return l},stableSort:function(d,j){if(d&&d.length>1){for(var h=0,g=d.length,f=[],c=[];h<g;h++){c[h]=d[f[h]=h]}if(_.isFun(j)){f.sort(function(i,k){return j.call(d,d[i],d[k])||(i>k?1:-1)})}else{f.sort(function(i,k){return d[i]>d[k]?1:d[i]<d[k]?-1:i>k?1:-1})}for(h=0;h<g;h++){d[h]=c[f[h]]}f.length=c.length=0}return d},subIndexOf:function(c,g,h){if(h===undefined){return -1}for(var f=0,d=c.length;f<d;f++){if(c[f]&&c[f][g]===h){return f}}return -1},removeFrom:function(c,d,f){c.splice(d,f||1);return c},removeValue:function(c,g){for(var d=c.length,f=d-1;f>=0;f--){if(c[f]===g){c.splice(f,1)}}return c},insertAny:function(c,i,h,g){var f=c.length;g=(!_.isArr(i))||g;if(h===0){if(g){c.unshift(i)}else{c.unshift.apply(c,i)}}else{var d;if(!h||h<0||h>f){h=f}if(h!=f){d=c.splice(h,f-h)}if(g){c[c.length]=i}else{c.push.apply(c,i)}if(d){c.push.apply(c,d)}}return h},indexOf:function(c,g){for(var f=0,d=c.length;f<d;f++){if(c[f]===g){return f}}return -1},each:function(c,g,j,k){var h,f,d=c;if(!d){return d}if(!_.isArr(d)){if((d=d._nodes)||!_.isArr(d)){throw"errNotArray"}if(k===undefined){k=1}}f=d.length;j=j||c;if(!k){for(h=0;h<f;h++){if(g.call(j,d[h],h,d)===false){break}}}else{for(h=f-1;h>=0;h--){if(g.call(j,d[h],h,d)===false){break}}}return c},removeDuplicate:function(c,h){var f=c.length,d=c.concat();c.length=0;for(var g=f-1;g>=0;g--){if(h?this.subIndexOf(d,h,d[g][h])===g:this.indexOf(d,d[g])===g){c.push(d[g])}}return c.reverse()}}});_.merge(_.fun,{body:function(fun){with(""+fun){return slice(indexOf("{")+1,lastIndexOf("}"))}},args:function(fun){with(""+fun){return slice(indexOf("(")+1,indexOf(")")).split(",")}},clone:function(c){return new Function(_.fun.args(c),_.fun.body(c))}});_.merge(Class,{_reg:{$key:1,$parent:1,$children:1,KEY:1,Static:1,Instance:1,Constructor:1,Initialize:1},_reg2:{nodeType:1,constructor:1,prototype:1,toString:1,valueOf:1,hasOwnProperty:1,isPrototypeOf:1,propertyIsEnumerable:1,toLocaleString:1},_all:[],_fun:function(c,d,f,h,g){c.$name$=d;c.$original$=f;if(g){c.$type$=g}if(h){c.upper=h}return c},_other:["toString","valueOf"],_o:{},_inherit:function(g,j,c){var d,h,f=this._reg;for(d in j){if(d in g||(!c&&f[d])||d.charAt(0)=="$"){continue}h=j[d];if(h&&h.$xui$){continue}g[d]=h}},_wrap:function(u,d,w,v,l){var x=this,p,n,h,m=u.KEY,c=x._reg,g=x._reg2,s=x._fun,q=x._other;for(p in d){if(g[p]||(!w&&c[p])){continue}h=d[p];u[p]=(typeof h!="function")?h:s(h,p,m,typeof v[p]=="function"&&v[p],l)}for(n=0;p=q[n++];){h=d[p];if(h&&(h==x._o[p])){continue}u[p]=(typeof h!="function")?h:s(h,p,m,typeof v[p]=="function"&&v[p],l)}},__gc:function(h){var c=Class._all;if(!h){for(var g=c.length-1;g>0;g--){Class.__gc(c[g])}return}if(typeof h=="object"){h=h.KEY||""}var f=_.get(window,h.split(".")),k,g,d;if(f){if(k=_.get(window,["xui","$cache","SC"])){delete k[h]}if(f.$parent){f.$parent.length=0}if(k=f.$children){for(var g=0,l;l=k[g];g++){if(l=_.get(window,l.split("."))){l.__gc()}}k.length=0}for(g in f){if(g!="upper"&&typeof f[g]=="function"){for(d in f[g]){if(f[g].hasOwnProperty(d)){delete f[g][d]}}}}_.breakO(f);f=f.prototype;for(g in f){if(g!="upper"&&typeof f[g]=="function"){for(d in f[g]){if(f[g].hasOwnProperty(d)){delete f[g][d]}}}}_.breakO(f);_.set(window,h.split("."))}c.splice(c[h],1);delete c[h]},destroy:function(c){Class.__gc(c)}});_.merge(xui,{version:1.2,$DEFAULTHREF:"javascript:;",$IEUNSELECTABLE:function(){return xui.browser.ie?' onselectstart="return false;" ':""},SERIALIZEMAXLAYER:99,SERIALIZEMAXSIZE:9999,$localeKey:"en",$localeDomId:"xlid",$dateFormat:"",debugMode:true,Locale:{},$cache:{thread:{},SC:{},clsByURI:{},hookKey:{},hookKeyUp:{},snipScript:{},subscribes:{},ghostDiv:[],domPurgeData:{},profileMap:{},reclaimId:{},template:{},UIKeyMapEvents:{},droppable:{},unique:{}},subscribe:function(d,g,j,h){if(d===null||d===undefined||g===null||g===undefined||typeof j!="function"){return}var k=xui.$cache.subscribes,f;k[d]=k[d]||[];f=_.arr.subIndexOf(k[d],"id",g);if(f!=-1){_.arr.removeFrom(k[d],f)}return k[d].push({id:g,receiver:j,asy:!!h})},unsubscribe:function(d,g){var h=xui.$cache.subscribes,f;if(!g){if(d===null||d===undefined){h={}}else{delete h[d]}}else{if(h[d]){f=_.arr.subIndexOf(h[d],"id",g);if(f!=-1){_.arr.removeFrom(h[d],f)}}}},publish:function(f,d,h,g){var i=xui.$cache.subscribes;if(f===null||f===undefined){for(var f in i){_.arr.each(i[f],function(c){if(!h||h===c.id||(_.isArr(h)&&_.arr.indexOf(h,c.id)!=-1)){if(c.asy){_.asyRun(c.receiver,0,d,g)}else{return _.tryF(c.receiver,d,g,true)}}})}}else{if(i[f]){_.arr.each(i[f],function(c){if(!h||h===c.id||(_.isArr(h)&&_.arr.indexOf(h,c.id)!=-1)){if(c.asy){_.asyRun(c.receiver,0,d,g)}else{return _.tryF(c.receiver,d,g,true)}}})}}},getSubscribers:function(c){return(c===null||c===undefined)?xui.$cache.subscribes:xui.$cache.subscribes[c]},setDateFormat:function(c){xui.$dateFormat=c},getDateFormat:function(){return xui.$dateFormat},setAppLangKey:function(c){xui.$appLangKey=c},getAppLangKey:function(c){return xui.$appLangKey},getLang:function(){return xui.$localeKey},setLang:function(s,w){var n=xui.getRes,x,u,k,h,p,c,q,r=[],d;xui.$localeKey=s;u=xui.browser.ie?document.all.tags("span"):document.getElementsByTagName("span");for(k=0;x=u[k];k++){if(x.id==xui.$localeDomId){r[r.length]=x}}d=r.length;p=function(){(function(){h=r.splice(0,100);for(k=0;x=h[k];k++){if(x.className&&typeof(u=n(x.className))=="string"){x.innerHTML=u}}if(r.length){_.setTimeout(arguments.callee,0)}_.tryF(w,[r.length,d])}())},q="xui.Locale."+s,c=function(){var f=xui.$appLangKey;if(f){xui.include(q+"."+f,xui.getPath("Locale."+s,".js"),p,p)}else{p()}};xui.include(q+".inline.$_$",xui.getPath(q,".js"),c,c)},getTheme:function(c){try{c=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(d){}finally{return c||"default"}},setTheme:function(k,i,d,c){k=k||"default";var l=xui.getTheme();if(k!=l){if(i!==false){if(k!="default"){var m;try{m=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(h){}finally{if(m==k||k=="default"){_.tryF(d);return}}xui.CSS.includeLink(xui.getPath("xui.appearance."+k,"/theme.css"),"theme:"+k)}if(l!=="default"){var f=xui.CSS.get("id","theme:"+l);if(f){f.disabled=true;f.parentNode.removeChild(f)}var f=xui.CSS.$getCSSValue(".setting-uikey","fontFamily",l);if(f){f.disabled=true;f.parentNode.removeChild(f)}}}if(i!==false){xui.$CSSCACHE={};var g=0,j=function(n){if(g>20){if(false!==_.tryF(c)){throw"errLoadTheme:"+k}}g++;var p;try{p=xui.CSS.$getCSSValue(".setting-uikey","fontFamily")}catch(q){}finally{if(p==k||k=="default"){if(xui.UI){xui.UI.getAll().reLayout(true)}_.tryF(d);j=g=null}else{_.asyRun(j,100*g)}}};j("l")}else{_.tryF(d)}}else{_.tryF(d)}},$CSSCACHE:{},_langParamReg:/\x24(\d+)/g,_langscMark:/[$@{][\S]+/,_langReg:/((\$)([^\w\(]))|((\$)([\w][\w\.-]*[\w]+))|((\$)\(([\w][\w\.]*[^)\n\r]+))\)|((\$)([^\s]))|((\@)([\w][\w\.]*[\w]+)(\@?))|((\@)([^\s])(\@?))|((\{)([~!@#$%^&*+-\/?.|:][\w]*|[\w][\w\.]*[\w]+)(\}))/g,_escapeMap:{"$":"\x01",".":"\x02","-":"\x03",")":"\x04","@":"\x05"},_unescapeMap:{"\x01":"$","\x02":".","\x03":"-","\x04":")","\x05":"@"},getRes:function(h){if(!_.isStr(h)){return h}var c,d,f,i=arguments,g;if(typeof h=="string"){h=h.replace(/\$([$.-])/g,function(k,j){return xui._escapeMap[j]||k});if(h.charAt(0)=="$"){h=h.slice(1)}if(h.indexOf("-")!=-1){f=h.split("-");h=f[0];i=f}c=h.split(".");c[c.length-1]=c[c.length-1].replace(/([\x01\x02\x03\x04])/g,function(j){return xui._unescapeMap[j]})}else{c=h}d=_.get(xui.Locale[xui.$localeKey],c);if((f=typeof d)=="function"){return d.apply(null,i)}else{if(f=="object"){return d}else{d=f=="string"?d.replace(/\$([$.-])/g,function(k,j){return xui._escapeMap[j]||k}):c[c.length-1];g=i.length>1?d.replace(xui._langParamReg,function(l,m,j){j=i[1+ +m];return(j===null||j===undefined)?l:j}):d;return g.replace(/([\x01\x02\x03])/g,function(j){return xui._unescapeMap[j]})}}},wrapRes:function(g){if(!_.isStr(g)){return g}var c=g,d,f;if(c.charAt(0)=="$"){arguments[0]=c.substr(1,c.length-1)}d=g;f=xui.getRes.apply(null,arguments);if(d==f){f=c}return'<span id="'+xui.$localeDomId+'" class="'+d.replace(/([\x01\x02\x03\x04])/g,function(h){return"$"+xui._unescapeMap[h]})+'" '+xui.$IEUNSELECTABLE()+">"+f+"</span>"},adjustRes:function(g,f,d,c){if(!_.isStr(g)){return g}f=f?xui.wrapRes:xui.getRes;g=g.replace(/\$([\$\.\-\)])/g,function(i,h){return xui._escapeMap[h]||i});g=xui._langscMark.test(g)?g.replace(xui._langReg,function(Z,Y,X,W,V,U,T,S,R,Q,P,O,N,M,L,K,J,I,H,G,F,E,D,C,B,A){return X=="$"?c?Z:W:U=="$"?c?Z:f(T):R=="$"?c?Z:f(Q):O=="$"?c?Z:f(N):((d?0:(L=="@"||H=="@"))||D=="{")?((A=xui.SC.get(L=="@"?K:H=="@"?G:C))||(_.isSet(A)?A:"")):Z}):g;return g.replace(/([\x01\x02\x03\x04])/g,function(h){return xui._unescapeMap[h]})},request:function(d,f,h,i,g,c){return((c&&c.proxyType)?(c.proxyType.toLowerCase()=="sajax"?xui.SAjax:c.proxyType.toLowerCase()=="iajax"?xui.IAjax:xui.Ajax):(typeof f=="object"&&((function(k){if(!_.isHash(k)){return 0}for(var j in k){if(k[j]&&k[j].nodeType==1){return 1}}})(f)))?xui.IAjax:(c&&c.method&&c.method.toLowerCase()=="post")?xui.absIO.isCrossDomain(d)?xui.IAjax:xui.Ajax:xui.absIO.isCrossDomain(d)?xui.SAjax:xui.Ajax).apply(null,arguments).start()},getFileSync:function(f,d,g,h,c){return xui.Ajax(f,xui.Ajax._id,g,h,null,_.merge({asy:false,rspType:d||"text"},c,"without")).start()||null},getFileAsync:function(f,d,h,i,g,c){xui.Ajax(f,xui.Ajax._id,h,i,g,_.merge({asy:true,rspType:d||"text"},c,"without")).start()},include:function(i,f,g,h,d,c){if(i&&xui.SC.get(i)){_.tryF(g)}else{c=typeof c=="object"?c:{};if(!d){c.rspType="script";c.checkKey=i;xui.SAjax(f,xui.SAjax._id,g,h,0,c).start()}else{c.asy=!d;xui.Ajax(f,xui.Ajax._id,function(j){try{_.exec(j)}catch(k){_.tryF(h,[k.name+": "+k.message])}_.tryF(g)},h,0,c).start()}}},fetchClass:function(f,h,j,g){var d,i=xui.$cache.clsByURI;if(!g&&(d=i[f])&&d.$xui$){_.tryF(h,[f],d)}else{if(xui.absIO.isCrossDomain(f)){Class._ignoreNSCache=1;Class._last=null;xui.SAjax(f,xui.SAjax._id,function(){if(Class._last){d=i[f]=Class._last}Class._ignoreNSCache=Class._last=null;_.tryF(h,[f],d)},function(){Class._ignoreNSCache=1;Class._last=null;_.tryF(j,_.toArr(arguments))},0,{rspType:"script"}).start()}else{xui.Ajax(f,xui.Ajax._id,function(c){Class._ignoreNSCache=Class._last=null;try{_.exec(c,f)}catch(k){_.tryF(j,[k.name+": "+k.message]);Class._last=null}if(Class._last){d=i[f]=Class._last}Class._last=null;_.tryF(h,[f],d)},function(){Class._last=null;_.tryF(j,_.toArr(arguments))},0,{rspType:"text",asy:false}).start()}}},require:function(c,d,f,g){xui.include(c,xui.getPath(c,".js","js"),f,g,d)},_m:[],main:function(c){xui._m.push(c);if(xui.isDomReady){xui._domReadyFuns()}},getPath:function(j,c,k){j=j.split(".");if(k){var f=[j[0],k];for(var h=1,d=j.length;h<d;h++){f.push(j[h])}j.length=0;j=f}var m,g=xui.ini;if(j[0]=="xui"){m=g.path;j.shift();if(j.length==(k?1:0)){j.push("xui")}}else{m=g.appPath;if(j.length==((k?1:0)+1)&&c==".js"){j.push("index")}if(g.verPath){m+=g.verPath+"/"}if(g.ver){m+=g.ver+"/"}}if(m.slice(-1)!="/"){m+="/"}return m+j.join("/")+(c||"/")},log:_.fun(),echo:_.fun(),message:_.fun(),_pool:[],getObject:function(c){return xui._pool["$"+c]},_ghostDivId:"xui.ghost::",$getGhostDiv:function(){var f=xui.$cache.ghostDiv,d=0,c=f.length,g;do{g=f[d++]}while(d<c&&(g&&g.firstChild));if(!g||g.firstChild){g=document.createElement("div");g.id=xui._ghostDivId;f.push(g)}return g},$xid:0,$registerNode:function(f){var g,d,c=xui.$cache.domPurgeData;if(!(f.$xid&&(d=c[f.$xid])&&d.element==f)){g="!"+xui.$xid++;d=c[g]||(c[g]={});d.element=f;f.$xid=d.$xid=g}f=null;return d},getId:function(c){if(typeof c=="string"){c=document.getElementById(c)}return c?window===c?"!window":document===c?"!document":(c.$xid||""):""},getNode:function(c){return xui.use(c).get(0)},getNodeData:function(c,d){if(!c){return}return _.get(xui.$cache.domPurgeData[typeof c=="string"?c:xui.getId(c)],d)},setNodeData:function(c,f,d){if(!c){return}return _.set(xui.$cache.domPurgeData[typeof c=="string"?c:xui.getId(c)],f,d)},$purgeChildren:function(k){var d=xui.$cache,q=d.profileMap,c=d.UIKeyMapEvents,r=d.domPurgeData,z=xui.Event.$eventhandler,h=(xui.browser.ie&&k.all)?k.all:k.getElementsByTagName("*"),m=h.length,x=[],p,n,g,y,u,s,f;for(p=0;p<m;p++){if(!(u=h[p])){continue}if(y=u.$xid){if(g=r[y]){if(s=g.eHandlers){if(xui.browser.isTouch&&s.onxuitouchdown){if(u.removeEventListener){u.removeEventListener("xuitouchdown",z,false)}else{if(u.detachEvent){u.detachEvent("xuitouchdown",z)}}}for(n in s){u[n]=null}}for(n in g){g[n]=null}delete r[y]}if(xui.browser.ie){u.removeAttribute("$xid")}else{delete u.$xid}}if(f=u.id){if(f in q){g=q[f];if(!g){continue}y=g.renderId;if("!window"===y||"!document"===y){continue}g.__gc();x[x.length]=p;if(g.$domId&&g.$domId!=g.domId){x[x.length]=g.$domId}}}}for(p=0;p<x.length;){delete q[x[p++]]}k.innerHTML=""},create:function(d){var c,m,j,k=arguments.callee,g=k.r1||(k.r1=/</);if(typeof d=="string"){if(j=xui.absBox.$type[d]){c=[];for(var h=1,f=arguments.length;h<f;h++){c[h-1]=arguments[h]}m=new (xui.SC(j))(false);if(m._ini){m._ini.apply(m,c)}}else{if(g.test(d)){m=_.str.toDom(d)}else{m=document.createElement(d);m.id=typeof id=="string"?id:_.id();m=xui(m)}}}else{m=new (xui.SC(d.key))(d)}return m},use:function(d){var g=xui._tempBox||(xui._tempBox=xui()),f=g._nodes;f[0]=d;if(f.length!=1){f.length=1}return g}});new function(){var p=window,r=navigator.userAgent.toLowerCase(),m=document,i=m.documentMode,n=xui.browser={kde:/webkit/.test(r),opr:/opera/.test(r),ie:(/msie/.test(r)&&!/opera/.test(r)),newie:/trident\/.* rv:([0-9]{1,}[.0-9]{0,})/.test(r),gek:/mozilla/.test(r)&&!/(compatible|webkit)/.test(r),isStrict:m.compatMode=="CSS1Compat",isWebKit:/webkit/.test(r),isFF:/firefox/.test(r),isChrome:/chrome/.test(r),isSafari:(!/chrome/.test(r))&&/safari/.test(r),isWin:/(windows|win32)/.test(r),isMac:/(macintosh|mac os x)/.test(r),isAir:/adobeair/.test(r),isLinux:/linux/.test(r),isSecure:location.href.toLowerCase().indexOf("https")==0,isTouch:(("ontouchend" in m)&&!(/hp-tablet/).test(r))||(p.DocumentTouch&&m instanceof DocumentTouch)||p.PointerEvent||p.MSPointerEvent,isIOS:/iphone|ipad|ipod/.test(r),isAndroid:/android/.test(r),isBB:/blackberry/.test(r)||/BB[\d]+;.+\sMobile\s/.test(navigator.userAgent)},q=function(d,f){f=r.split(f)[1].split(".");return d+(n.ver=parseFloat((f.length>0&&isFinite(f[1]))?(f[0]+"."+f[1]):f[0]))};xui.$secureUrl=n.isSecure&&n.ie?'javascript:""':"about:blank";_.filter(n,function(d){return !!d});if(n.newie){n["newie"+(n.ver=i)]=true;n.cssTag1="-ms-";n.cssTag2="ms"}else{if(n.ie){if(_.isNumb(i)){n["ie"+(n.ver=i)]=true}else{n[q("ie","msie ")]=true}if(n.ie6){try{document.execCommand("BackgroundImageCache",false,true)}catch(k){}p.XMLHttpRequest=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}n.cssTag1="-ms-";n.cssTag2="ms"}else{if(n.gek){n[q("gek",/.+\//)]=true;n.cssTag1="-moz-";n.cssTag2="Moz"}else{if(n.opr){n[q("opr","opera/")]=true;n.cssTag1="-o-";n.cssTag2="O"}else{if(n.kde){n[q("kde","webkit/")]=true;if(n.isSafari){if(/applewebkit\/4/.test(r)){n["safari"+(n.ver=2)]=true}else{n[q("safari","version/")]=true}}else{if(n.isChrome){n[q("chrome","chrome/")]=true}}if(n.isWebKit){n.cssTag1="-webkit-";n.cssTag2="Webkit"}else{n.cssTag1="-khtml-";n.cssTag2="Khtml"}}}}}}if(n.isBB&&!n.ver){n.ver=parseFloat(ua.split("/")[1].substring(0,3));n["bb"+n.ver]=true}n.contentBox=function(d){return(n.ie||n.opr)?!/BackCompat|QuirksMode/.test(m.compatMode):(d=(d=d||m.documentElement).style["-moz-box-sizing"]||d.style["box-sizing"])?(d=="content-box"):true}();var y=xui.ini={};if(window.xui_ini){_.merge(y,window.xui_ini)}if(!y.path){var x,h=document.getElementsByTagName("script"),c=/js\/xui(-[\w]+)?\.js$/,g=h.length;while(--g>=0){x=h[g].src;if(x.match(c)){y.path=x.replace(c,"").replace(/\(/g,"%28").replace(/\)/g,"%29");break}}}_.merge(y,{appPath:location.href.split("?")[0].replace(/[^\\\/]+$/,""),img_bg:y.path+"bg.gif",img_busy:y.path+"busy.gif",img_blank:n.ie&&n.ver<=7?(y.path+"bg.gif"):"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",dummy_tag:"$_dummy_$"});if(!y.path){y.path=y.appPath+"/xui/"}if(!y.basePath){y.basePath=y.path.replace(/xui\/$/,"").replace(/runtime\/$/,"")}var j=xui._domReadyFuns=function(){if(!xui.isDomReady){if(m.addEventListener){m.removeEventListener("DOMContentLoaded",j,false);p.removeEventListener("load",j,false)}else{m.detachEvent("onreadystatechange",j);p.detachEvent("onload",j)}}try{if(xui.ini.customStyle&&!_.isEmpty(xui.ini.customStyle)){var f=[],v=xui.ini.customStyle,d;_.each(v,function(z,l){f.push(l+" : "+z+";")});d=".xui-custom{\r\n"+f.join("\r\n")+"\r\n}";xui.CSS.addStyleSheet(d,"xui:css:custom",1)}for(var u=0,s=xui._m.length;u<s;u++){_.tryF(xui._m[u])}xui._m.length=0;xui.isDomReady=true}catch(w){_.asyRun(function(){throw w})}};if(m.addEventListener){m.addEventListener("DOMContentLoaded",j,false);p.addEventListener("load",j,false)}else{m.attachEvent("onreadystatechange",j);p.attachEvent("onload",j);(function(){if(xui.isDomReady){return}try{m.activeElement.id;m.documentElement.doScroll("left");j()}catch(d){_.setTimeout(arguments.callee,9)}})()}(function(){((!xui.isDomReady)&&((!m.readyState)||/in/.test(m.readyState)))?_.setTimeout(arguments.callee,9):j()})()};new function(){xui._uriReg=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/;xui._localReg=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/;xui._curHref=(function(c){try{return location.href}catch(d){c=document.createElement("a");c.href="";return c.href}})(),xui._localParts=xui._uriReg.exec(xui._curHref.toLowerCase())||[]};Class("xui.Thread",null,{Constructor:function(d,f,h,k,l,c,g){var j=arguments.callee.upper;if(j){j.call(this)}j=null;var n=this,i=arguments.callee,m=xui.$cache.thread;if(n.constructor!==i||!!n.id){return new i(d,f,h,k,l,c,g)}if(typeof d!="string"){d="$"+(n.constructor.$xid++)}n.id=d;n.profile=m[d]||(m[d]={id:d,_start:false,time:0,_left:0,_asy:0.1,index:0,tasks:f||[],delay:h||0,callback:k,onStart:l,onEnd:c,cache:{},status:"ini",cycle:!!g})},Instance:{_fun:_.fun(),__gc:function(){var c=xui.$cache.thread,f=c[this.id];if(f){delete c[this.id];f.tasks.length=0;for(var d in f){f[d]=null}}},_task:function(){var c=this,k=c.profile;if(!k||!k.status||!k.tasks){return}k._asy=0.1;var f={},j=k.tasks[k.index],h,d,g=typeof j;if(g=="function"){f.task=j}else{if(g=="object"){for(d in j){f[d]=j[d]}}}if(typeof f.callback!="function"){f.callback=k.callback}if(typeof f.task=="function"){f.args=f.args||[];f.args.push(k.id)}k.index++;k.time=_();if(typeof f.task=="function"){h=_.tryF(f.task,f.args||[k.id],f.scope||c,null)}if(!k.status){return}if(f.id){k.cache[f.id]=h}if(f.callback&&false===_.tryF(f.callback,[k.id],c,true)){return c.abort("callback")}if(k.status!=="run"){return}c.start()},start:function(h){var d=this,g=d.profile,c,f;if(g._start===false){g._start=true;if(false===_.tryF(g.onStart,[g.id],d)){return d.abort("start")}}if(g.status!="run"){g.status="run"}if(!g.tasks.length){return d.abort("empty")}if(g.index>=g.tasks.length){if(g.cycle===true){d.profile.index=0}else{return d.abort("normal")}}c=g.tasks[g.index];f=typeof c=="number"?c:(c&&typeof c.delay=="number")?c.delay:g.delay;g._left=(h||h===0)?h:f;if(g._asy!=0.1){_.clearTimeout(g._asy)}g._asy=_.asyRun(d._task,g._left,[],d);g.time=_();return d},suspend:function(d){var f,c=this.profile;if(c.status=="pause"){return}c.status="pause";if(c._asy!==0.1){_.clearTimeout(c._asy);if(c.index>0){c.index--}}f=c._left-(_()-c.time);c._left=(f>=0?f:0);if((Number(d)||0)){this.resume(d)}return this},resume:function(d){var c=this;if(c.profile.status=="run"){return}d=d===undefined?c.profile._left:d===true?c.profile.delay:d===false?0:(Number(d)||0);c.profile.status="run";c.start(d);return c},abort:function(c){var d=this.profile;d.status="stop";_.clearTimeout(d._asy);_.tryF(d.onEnd,[d.id,c]);this.__gc()},links:function(c){var f=this.profile,d=f.onEnd,g=f.id;f.onEnd=function(){_.tryF(d,[g]);c.start()};return this},insert:function(c,h){var g=this,i=g.profile.tasks,f=i.length,d;if(!_.isArr(c)){c=[c]}h=h||g.profile.index;if(h<0){h=-1}if(h==-1){Array.prototype.push.apply(i,c)}else{if(h>f){h=f}d=i.splice(h,f-h);i.push.apply(i,c);i.push.apply(i,d)}return g},getCache:function(c){return this.profile.cache[c]},setCache:function(c,d){this.profile.cache[c]=d;return this},isAlive:function(){return !!xui.$cache.thread[this.id]},getStatus:function(){return this.profile.status}},After:function(){var g=this,j=function(f){g[f]=function(k){var i;if(xui.$cache.thread[k]){(i=xui.Thread(k))[f].apply(i,Array.prototype.slice.call(arguments,1))}}},d="start,suspend,resume,abort".split(",");for(var h=0,c=d.length;h<c;h++){j(d[h])}},Static:{$asFunction:1,$xid:1,__gc:function(){xui.$cache.thread={}},isAlive:function(c){return !!xui.$cache.thread[c]},observableRun:function(i,f,g,d){var c=xui.Thread,h=xui.Dom;if(!_.isArr(i)){i=[i]}if(xui.$cache.thread[g]){if(typeof f=="function"){i.push(f)}c(g).insert(i)}else{c(g,i,0,null,function(j){if(h){h.busy(j,d)}},function(j){_.tryF(f,arguments,this);if(h){h.free(j)}}).start()}},group:function(d,k,l,m,c){var n={},j=xui.Thread,h=function(s,p,r){if(typeof s=="string"){s=j(s)}if(s){var q=function(){var f=arguments.callee;_.tryF(f.onEnd,arguments,this);f.onEnd=null;delete n[p];_.tryF(l,[p,r],this);if(_.isEmpty(n)){j.resume(r)}};q.onEnd=s.profile.onEnd;s.profile.onEnd=q;s.start()}};for(var g in k){n[g]=1}return j(d,[function(p){if(!_.isEmpty(k)){j.suspend(p);for(var f in k){h(k[f],f,p)}}}],0,null,m,c)},repeat:function(f,d,c,g){return xui.Thread(null,[null],d||0,f,c,g,true).start()}}});Class("xui.absIO",null,{Constructor:function(f,n,k,c,h,s){var q=arguments.callee.upper;if(q){q.call(this)}q=null;if(typeof f=="object"){s=f}else{s=s||{};_.merge(s,{uri:f,query:n,onSuccess:k,onFail:c,threadid:h})}var r=this,m=arguments.callee,d=r.constructor;if((d!==m)||r.id){return new m(s)}_.merge(s,{id:s.id||(""+(d._id++)),uri:s.uri?xui.adjustRes(s.uri,0,1,1):"",username:s.username||undefined,password:s.password||undefined,query:s.query||"",contentType:s.contentType||"",Accept:s.Accept||"",header:s.header||null,asy:s.asy!==false,method:"POST"==(s.method||d.method).toUpperCase()?"POST":"GET"},"all");var p="retry,timeout,reqType,rspType,optimized,customQS".split(",");for(var j=0,g=p.length;j<g;j++){s[p[j]]=(p[j] in s)?s[p[j]]:d[p[j]];if(typeof s[p[j]]=="string"){s[p[j]]=s[p[j]].toLowerCase()}}_.merge(r,s,"all");if(r.reqType=="xml"){r.method="POST"}if(d.events){_.merge(r,d.events)}r.query=r.customQS(r.query);if(typeof r.query=="object"&&r.reqType!="xml"){r.query=_.copy(r.query,function(i){return i!==undefined})}if(!r._useForm&&_.isHash(r.query)&&r.reqType!="xml"){r.query=d._buildQS(r.query,r.reqType=="json",r.method=="POST")}return r},Instance:{_fun:_.fun(),_flag:0,_response:false,_txtresponse:"",_retryNo:0,_time:function(){var d=this,f=d.constructor;d._clear();if(d._retryNo<d.retry){d._retryNo++;_.tryF(d.onRetry,[d._retryNo],d);d.start()}else{if(false!==_.tryF(d.onTimeout,[],d)){d._onError(new Error("Request timeout"))}}},_onEnd:function(){var c=this;if(!c._end){c._end=true;if(c._flag>0){_.clearTimeout(c._flag);c._flag=0}xui.Thread.resume(c.threadid);_.tryF(c.onEnd,[],c);c._clear()}},_onStart:function(){var c=this;xui.Thread.suspend(c.threadid);_.tryF(c.onStart,[],c)},_onResponse:function(){var c=this;if(false!==_.tryF(c.beforeSuccess,[c._response,c.rspType,c.threadid],c)){_.tryF(c.onSuccess,[c._response,c.rspType,c.threadid],c)}c._onEnd()},_onError:function(d){var c=this;if(false!==_.tryF(c.beforeFail,[d,c.threadid],c)){_.tryF(c.onFail,[d.name?(d.name+": "+d.message):d,c.rspType,c.threadid,d],c)}c._onEnd()},isAlive:function(){return !this._end},abort:function(){this._onEnd()}},Static:{$abstract:true,_id:1,method:"GET",retry:0,timeout:60000,reqType:"form",rspType:"json",optimized:false,callback:"callback",_buildQS:function(f,c,d){return c?((c=_.serialize(f))&&(d?c:encodeURIComponent(c))):_.urlEncode(f)},customQS:function(c){return c},_if:function(h,j,f){var c=xui.browser.ie&&xui.browser.ver<9,g=c?("<iframe "+(j?("name='xui_IAajax_"+j+"'"):"")+(f?(" onload='xui.IAjax._o(\""+j+"\")'"):"")+">"):"iframe";var i=h.createElement(g),d;if(j){i.id=i.name="xui_IAajax_"+j}if(!c&&f){i.onload=f}i.style.display="none";h.body.appendChild(i);d=frames[frames.length-1].window;return[i,d,d.document]},isCrossDomain:function(f){var c=xui._localParts;f=f.replace(/#.*$/,"").replace(/^\/\//,c[1]+"//");var d=xui._uriReg.exec((f||"").toLowerCase());return !!(d&&(d[1]!==c[1]||d[2]!==c[2]||(d[3]||(d[1]==="http:"?80:443))!==(c[3]||(c[1]==="http:"?80:443))))},groupCall:function(k,l,c,d,j){var g,h=function(n,f,m){m[f]=xui.Thread(null,[function(i){n.threadid=i;n.start()}])};for(g in k){h(k[g],g,k)}return xui.Thread.group(null,k,l,function(){xui.Thread(j).suspend();_.tryF(c,arguments,this)},function(){_.tryF(d,arguments,this);xui.Thread(j).resume()}).start()}}});Class("xui.Ajax","xui.absIO",{Instance:{_XML:null,_unsafeHeader:"Accept-Charset,Accept-Encoding,Access-Control-Request-Headers,Access-Control-Request-Method,Connection,Content-Length,Cookie,Cookie2,Date,DNT,Expect,Host,Keep-Alive,Origin,Referer,TE,Trailer,Transfer-Encoding,Upgrade,User-Agent,Via".toLowerCase().split(","),_isunsafe:function(c){return xui.browser.isWebKit&&(_.str.startWith("Proxy-",c)||_.str.startWith("Sec-",c)||_.arr.indexOf(this._unsafeHeader,c.toLowerCase())!==-1)},_header:function(d,c){if(!this._isunsafe(d)){if(this._XML){this._XML.setRequestHeader(d,c)}}},start:function(){var self=this;if(false===_.tryF(self.beforeStart,[],self)){self._onEnd();return}if(!self._retryNo){self._onStart()}try{with(self){self._XML=new window.XMLHttpRequest();if(asy){self._XML.onreadystatechange=function(){if(self&&self._XML&&self._XML.readyState==4){self._complete.apply(self);self._clear()}}}if(!_retryNo&&method!="POST"){if(query){uri=uri.split("?")[0]+"?"+query}query=null}if(username&&password){self._XML.open(method,uri,asy,username,password)}else{self._XML.open(method,uri,asy)}self._header("Accept",Accept?Accept:(rspType=="json"?"application/json,text/javascript,*/*;q=0.01":rspType=="xml"?"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8":"*/*"));self._header("Content-type",contentType?contentType:((reqType=="xml"?"text/xml; ":reqType=="json"?"application/json; ":method=="POST"?"application/x-www-form-urlencoded; ":"")+"charset="+(self.charset||"UTF-8")));self._header("X-Requested-With","XMLHttpRequest");if(optimized){try{self._header("User-Agent",null);self._header("Accept-Language",null);self._header("Connection","keep-alive");self._header("Keep-Alive",null);self._header("Cookie",null);self._header("Cookie","")}catch(e){}}try{if(_.isHash(header)){_.each(header,function(o,i){self._header(i,o)})}}catch(e){}if(false===_.tryF(self.beforeSend,[self._XML],self)){self._onEnd();return}try{self._XML.send(query)}catch(e){}if(asy){if(self._XML&&timeout>0){_flag=_.asyRun(function(){if(self&&!self._end){self._time()}},self.timeout)}}else{return _complete()}}}catch(e){self._onError(e)}return self},abort:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML.abort();c._XML=null}arguments.callee.upper.call(c)},_clear:function(){var c=this;if(c._XML){c._XML.onreadystatechange=c._fun;c._XML=null}},_complete:function(){with(this){var ns=this,obj,status=ns._XML.status;_txtresponse=rspType=="xml"?ns._XML.responseXML:ns._XML.responseText;_response=rspType=="json"?((obj=_.unserialize(_txtresponse))===false?_txtresponse:obj):_txtresponse;if(!status&&xui._localReg.test(xui._localParts[1])){status=ns._XML.responseText?200:404}if(status==1223){status=204}if(status>=200&&status<300||status==304){_onResponse()}else{if(status===undefined||status<10){_onError(new Error("Network problems--"+status))}else{_onError(new Error("XMLHTTP returns--"+status))}}}return this._response}},Static:{$asFunction:1}});Class("xui.SAjax","xui.absIO",{Instance:{start:function(){var m=this,d,h=m.constructor,l,g,i=false;if(false===_.tryF(m.beforeStart,[],m)){m._onEnd();return}if(!m._retryNo){m._onStart()}if(m.rspType=="script"){m.retry=0}d=m.id;if(h._pool[d]){h._pool[d].push(m)}else{h._pool[d]=[m]}h.No["_"+d]=function(c){h.$response(c,d)};var j=document,k=function(){if(!i){i=true;if(m.rspType=="script"){if(typeof m.checkKey=="string"){_.asyRun(function(){_.exec("if(xui.SC.get('"+m.checkKey+"'))xui.SAjax._pool['"+d+"'][0]._onResponse();else xui.SAjax._pool['"+d+"'][0]._loaded();")})}else{m._onResponse()}}else{m._loaded()}}};g=m.node=j.createElement("script");var f=m.uri;if(m.query){f=f.split("?")[0]+"?"+m.query}g.src=f;g.type="text/javascript";g.charset=m.charset||"UTF-8";g.onload=g.onreadystatechange=function(){if(i){return}var c=this.readyState;if(!c||c=="loaded"||c=="complete"){k()}if(c=="interactive"&&xui.browser.opr){xui.Thread.repeat(function(){if(i){return false}if(/loaded|complete/.test(document.readyState)){k();return false}},50)}};if("onerror" in g){g.onerror=function(c){m._clear();m._onError(new Error("Not Found - "+f));m=null;return}}(j.body||j.getElementsByTagName("head")[0]).appendChild(g);g=null;if(m.timeout>0){m._flag=_.asyRun(function(){if(m&&!m._end){m._time()}},m.timeout)}},_clear:function(){var f=this,j=f.node,i=f.constructor,h=f.id,d=i._pool;if(d[h]){d[h].length=0;delete d[h]}delete i.No["_"+h];if(j){f.node=j.onload=j.onreadystatechange=j.onerror=null;var g=document.createElement("div");g.appendChild(j.parentNode&&j.parentNode.removeChild(j)||j);if(xui.browser.ie){_.asyRun(function(){g.innerHTML=j.outerHTML="";if(_.isEmpty(d)){i._id=1}d=i=j=g=null})}else{_.asyRun(function(){g.innerHTML="";j=g=null;if(_.isEmpty(d)){i._id=1}})}}else{if(_.isEmpty(d)){i._id=1}}},_loaded:function(){var c=this;_.asyRun(function(){if(c.id&&c.constructor._pool[c.id]){c._onError(new Error("SAjax return script doesn't match"))}},500)}},Static:{$asFunction:1,_pool:{},No:{},$response:function(g,h){var d=this;if(g&&(o=d._pool[h])){for(var f=0,c=o.length;f<c;f++){o[f]._response=g;o[f]._onResponse()}}else{d._onError(new Error("SAjax return value formatting error--"+g))}},customQS:function(g){var h=this.constructor,d=h.callback,f=(this.rspType!="script");if(typeof g=="string"){return(g||"")+(f?("&"+d+"=xui.SAjax.No._"+this.id):"")}else{if(f){g[d]="xui.SAjax.No._"+this.id}return g}}}});Class("xui.IAjax","xui.absIO",{Instance:{_useForm:true,start:function(){var v=this,q=v.constructor,p,f,u,j,m,g,r,d,l;if(false===_.tryF(v.beforeStart,[],v)){v._onEnd();return}if(!v._retryNo){v._onStart()}f=v.id;if(q._pool[f]){q._pool[f].push(v)}else{q._pool[f]=[v]}v._onload=l=function(A){if(v.OK){return}if(!v.node){return}var k=v.node.contentWindow,z=xui.IAjax,y,n;if(xui.browser.opr){try{if(k.location=="about:blank"){return}}catch(x){}}v.OK=1;var i=0;try{if(k.name===undefined){i=1}}catch(x){i=1}if(i){k.location.replace(z._getDummy()+"#"+xui.ini.dummy_tag)}(function(){var w=0;try{if(k.name===undefined){w=1}}catch(D){w=1}if(w){return _.asyRun(arguments.callee)}var C;if(("xui_IAajax_"+v.id)==k.name){v._clear();v._onError(new Error("IAjax no return value"));return}else{C=k.name}if(C&&(y=_.unserialize(C))&&(n=z._pool[v.id])){for(var B=0,c=n.length;B<c;B++){n[B]._response=y;n[B]._onResponse()}}else{v._clear();v._onError(new Error("IAjax return value formatting error, or no matched 'id'-- "+C))}})()};var s=q._if(document,f,l);v.node=s[0];v.frm=s[1];d=v.form=document.createElement("form");d.style.display="none";var h=v.uri;if(v.method!="POST"){h=h.split("?")[0]}d.action=v.uri;d.method=v.method;d.target="xui_IAajax_"+f;m=v.query||{};for(p in m){if(m[p]&&m[p].nodeType==1){m[p].id=m[p].name=p;d.appendChild(m[p]);r=true}else{if(_.isDefined(m[p])){u=document.createElement("textarea");u.id=u.name=p;u.value=typeof m[p]=="string"?m[p]:_.serialize(m[p],function(c){return c!==undefined});d.appendChild(u)}}}if(v.method=="POST"&&r){d.enctype="multipart/form-data";if(d.encoding){d.encoding=d.enctype}}document.body.appendChild(d);d.submit();u=d=null;if(v.timeout>0){v._flag=_.asyRun(function(){if(v&&!v._end){v._time()}},v.timeout)}},_clear:function(){var q=this,i=q.node,k=q.form,p=q.constructor,g=document.createElement("div"),h=q.id,j=p._pool;if(j[h]){j[h].length=0;delete j[h]}if(xui.browser.gek&&i){try{i.onload=null;var m=i.contentWindow.document;m.write(" ");m.close()}catch(l){}}q.form=q.node=q.frm=null;if(i){g.appendChild(i.parentNode.removeChild(i))}if(k){g.appendChild(k.parentNode.removeChild(k))}g.innerHTML="";if(_.isEmpty(j)){p._id=1}k=g=null}},Static:{$asFunction:1,method:"POST",_pool:{},_o:function(g){var c=this,d=c._pool[g],f=d[d.length-1];_.tryF(f._onload)},_getDummy:function(l){l=l||window;var q=this,k,c,p=l.document,s=xui.ini,r=xui.browser,m=q.isCrossDomain;if(q.dummy){return q.dummy}if(s.dummy){return q.dummy=s.dummy}if(!m(s.path)){if(!p.getElementById("xui:img:bg")){c=p.createElement("img");c.id="xui:img:bg";c.src=s.img_bg;c.style.display="none";p.body.appendChild(c);c=null}}if(c=p.getElementById("xui:img:bg")){return q.dummy=c.src.split("#")[0]}else{k=p.getElementsByTagName("img");for(var h=0,g=k.length;h<g;h++){c=k[h];if(c.src&&!m(c.src)){return q.dummy=c.src.split("#")[0]}}if(r.gek){k=p.getElementsByTagName("link");for(var h=0,g=k.length;h<g;h++){c=k[h];if(c.rel=="stylesheet"&&!m(c.href)){return q.dummy=c.href.split("#")[0]}}}}try{if(l!=l.parent){if((l=l.parent)&&!m(""+l.document.location.href)){return q._getDummy(l)}}}catch(n){}return"/favicon.ico"},customQS:function(g){var f=this,h=f.constructor,d=h.callback;g[d]="window.name";return g}}});Class("xui.SC",null,{Constructor:function(j,k,c,i,d){var f=arguments.callee.upper;if(f){f.call(this)}f=null;var h=xui.$cache.SC,g;if(g=h[j]||(h[j]=_.get(window,j.split(".")))){_.tryF(k,[j,null,i],g)}else{d=d||{};d.$cb=k;if(c){d.threadid=i}g=h[j]=xui.SC._call(j||"",d,c)}return g},Static:{$asFunction:1,__gc:function(c){xui.$cache.SC={}},get:function(d,c){return _.get(c||window,(d||"").split("."))},_call:function(u,v,m){m=!!m;var h,p,c,g,l=[],q=xui.SC.get,j=xui.$cache.snipScript,k=function(s,w,r){var f=this;if(s){if(!q(u)){if(f.$p){(f.$cache||j)[f.$tag]=s}else{try{_.exec(s)}catch(i){throw i.name+": "+i.message+" "+f.$tag}}}}_.tryF(f.$cb,[f.$tag,s,r],q(u)||{})},d=function(i){var f=this;_.tryF(f.$cb,[null,null,f.threadid],f)};if(!(c=q(u))){if(p=j[u]){m=false;k.call({$cb:v.$cb},p);delete j[u]}if(!(c=q(u))){g=xui.getPath(u,".js","js");v=v||{};v.$tag=u;var n;if(m&&!v.$p){v.rspType="script";n=xui.SAjax}else{v.asy=m;n=xui.Ajax}n(g,{rand:_()},k,d,null,v).start();if(!m){c=q(u)}}}else{if(v.$cb){k.call(v)}}return c},loadSnips:function(j,d,k,c,g){if(!j||!j.length){_.tryF(c,[g]);return}var m={},p={$p:1,$cache:d||xui.$cache.snipScript};for(var h=0,f=j.length;h<f;h++){m[j[h]]=1}if(k||c){p.$cb=function(i){if(k){_.tryF(k,arguments,this)}delete m[i||this.$tag];if(_.isEmpty(m)){_.tryF(c,[g]);c=null;xui.Thread.resume(g)}}}xui.Thread.suspend(g);for(var h=0,n;n=j[h++];){this._call(n,_.merge({$tag:n},p),true)}},runInBG:function(h,k,l,c){var f=0,d,m,n=this,g=function(i){while(h.length>f&&(m=n.get(d=h[f++]))){}if(!m){n._call(d,{threadid:i},true)}if(h.length<f){xui.Thread(i).abort()}if(h.length==f){f++}};xui.Thread(null,[g],1000,k,l,c,true).start()},execSnips:function(c){var d,f=c||xui.$cache.snipScript;for(d in f){try{_.exec(f[d])}catch(g){throw g}}f={}},groupCall:function(f,h,d,g){if(f){var c=this;c.execSnips();xui.Thread.suspend(g);c.loadSnips(f,0,h,function(){c.execSnips();_.tryF(d,[g]);d=null;xui.Thread.resume(g)})}else{_.tryF(d,[g])}}}});new function(){var M={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","/":"\\/","\x0B":"\\u000b"},H={"@window":"window","@this":"this"},A1=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/:/[\\\"\x00-\x1f\x7f-\xff]/,A2=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,D=/^(-\d+|\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?((?:[+-](\d{2})(\d{2}))|Z)?$/,E=function(t,i,a,v,m,n,p){for(i in t){if((a=typeof(v=t[i]))=="string"&&(v=D.exec(v))){m=v[8]&&v[8].charAt(0);if(m!="Z"){n=(m=="-"?-1:1)*((+v[9]||0)*60)+(+v[10]||0)}else{n=0}m=new Date(+v[1],+v[2]-1,+v[3],+v[4],+v[5],+v[6],+v[7]||0);n+=m.getTimezoneOffset();if(n){m.setTime(m.getTime()+n*60000)}t[i]=m}else{if(a=="object"&&t[i]&&(_.isObj(t[i])||_.isArr(t[i]))){E(t[i])}}}return t},R=function(n){return n<10?"0"+n:n},F="function",N="number",L="boolean",S="string",O="object",T={},MS=function(x,s){return"."+((s=x[s]())?s<10?"00"+s:s<100?"0"+s:s:"000")},Z=(function(a,b){a=-(new Date).getTimezoneOffset()/60;b=a>0?"+":"-";a=""+Math.abs(a);return b+(a.length==1?"0":"")+a+"00"})();T["undefined"]=function(){return"null"};T[L]=function(x){return String(x)};T[N]=function(x){return((x||x===0)&&isFinite(x))?String(x):"null"};T[S]=function(x){return H[x]||'"'+(A1.test(x)?x.replace(A2,function(a,b){if(b=M[a]){return b}return"\\u"+((b=a.charCodeAt())<16?"000":b<256?"00":b<4096?"0":"")+b.toString(16)}):x)+'"'};T[O]=function(x,filter,dateformat,deep,max){var me=arguments.callee,map=me.map||(me.map={prototype:1,constructor:1,toString:1,valueOf:1});deep=deep||1;max=max||0;if(deep>xui.SERIALIZEMAXLAYER||max>xui.SERIALIZEMAXSIZE){return'"too much recursion!"'}max++;if(x){var a=[],b=[],f,i,l,v;if(x===window){return"window"}if(x===document){return"document"}if((typeof x==O||typeof x==F)&&!_.isFun(x.constructor)){return x.nodeType?"document.getElementById('"+x.id+"')":"$alien"}else{if(_.isArr(x)){a[0]="[";l=x.length;for(i=0;i<l;++i){if(typeof filter=="function"&&false==filter.call(x,x[i],i)){continue}if(f=T[typeof(v=x[i])]){if(typeof(v=f(v,filter,dateformat,deep+1,max))==S){b[b.length]=v}}}a[2]="]"}else{if(_.isDate(x)){if(dateformat=="utc"){return'"'+x.getUTCFullYear()+"-"+R(x.getUTCMonth()+1)+"-"+R(x.getUTCDate())+"T"+R(x.getUTCHours())+":"+R(x.getUTCMinutes())+":"+R(x.getUTCSeconds())+MS(x,"getUTCMilliseconds")+'Z"'}else{if(dateformat=="gmt"){return'"'+x.getFullYear()+"-"+R(x.getMonth()+1)+"-"+R(x.getDate())+"T"+R(x.getHours())+":"+R(x.getMinutes())+":"+R(x.getSeconds())+MS(x,"getMilliseconds")+Z+'"'}else{return"new Date("+[x.getFullYear(),x.getMonth(),x.getDate(),x.getHours(),x.getMinutes(),x.getSeconds(),x.getMilliseconds()].join(",")+")"}}}else{if(_.isReg(x)){return String(x)}else{if(typeof x.serialize==F){x=x.serialize()}if(typeof x==O){if(x.nodeType){return"document.getElementById('"+x.id+"')"}else{a[0]="{";for(i in x){if(map[i]||(filter===true?i.charAt(0)=="_":typeof filter=="function"?false===filter.call(x,x[i],i):0)){continue}if(f=T[typeof(v=x[i])]){if(typeof(v=f(v,filter,dateformat,deep+1,max))==S){b[b.length]=T.string(i)+":"+v}}}a[2]="}"}}else{return String(x)}}}}}a[1]=b.join(", ");return a[0]+a[1]+a[2]}return"null"};T[F]=function(x){return x.$path?x.$path:String(x)};_.serialize=function(obj,filter,dateformat){return T[typeof obj](obj,filter,dateformat||(xui&&xui.$dateFormat))||""};_.stringify=function(obj,filter,dateformat){return _.fromUTF8(_.serialize(obj,filter,dateformat))};_.unserialize=function(str,dateformat){try{str="({_:"+str+"})";str=eval(str);if(dateformat||(xui&&xui.$dateFormat)){E(str)}str=str._;return str}catch(e){return false}}};_.id=function(){var c=this,d=arguments.callee;if(c.constructor!==d||c.a){return(d._||(d._=new d)).next()}c.a=[-1];c.b=[""];c.value=""};_.id.prototype={constructor:_.id,_chars:"abcdefghijklmnopqrstuvwxyz".split(""),next:function(i){with(this){i=(i||i===0)?i:b.length-1;var m,k,l;if((m=a[i])>=25){m=0;if(i===0){a.splice(0,0,1);b.splice(0,0,"a");l=a.length;for(k=1;k<l;++k){a[k]=0;b[k]="0"}++i}else{next(i-1)}}else{++m}a[i]=m;b[i]=_chars[m];return value=b.join("")}}};Class("xui.absBox",null,{Constructor:function(){var c=arguments.callee.upper;if(c){c.call(this)}c=null;this._nodes=[]},Before:function(d){var c=xui.absBox;if(c){(c=c.$type)[d.replace("xui.","")]=c[d]=d}},Instance:{__gc:function(){this.each(function(c){_.tryF(c.__gc)});this._nodes=0},_get:function(c){var d=this._nodes;return _.isNumb(c)?d[c]:d},_empty:function(){this._nodes.length=0;return this},get:function(c){return this._get(c)},size:function(){return this._nodes.length},_each:function(d,k,m){var f=this,g=f._nodes,c=g.length,h,p;if(m){for(h=c;h>=0;h--){if(p=g[h]){if(false===d.call(k||f,p,h)){break}}}}else{for(h=0;h<c;h++){if(p=g[h]){if(false===d.call(k||f,p,h)){break}}}}p=null;return f},each:function(c,d,f){return this._each(c,d,f)},isEmpty:function(){return !this._nodes.length},merge:function(h){if(this==xui.win||this==xui.doc||this==xui("body")){return this}var d=this,k=d.constructor,h=h._nodes,g=0,f,j=d._nodes;if(h.length){for(;f=h[g++];){j[j.length]=f}d._nodes=k._unique(j)}return d},reBoxing:function(g,c){var d=this,f=xui.absBox.$type[g||"Dom"];if(!f){return xui.UI.pack([])}if(f==d.KEY){return d}if(f=xui.SC(f)){return f.pack(d._nodes,c)}}},Static:{$abstract:true,$type:{},pack:function(c,d){var f=new this(false);f._nodes=!c?[]:d===false?_.isArr(c)?c:[c]:typeof this._ensureValues=="function"?this._ensureValues(c):_.isArr(c)?c:[c];return f},_unique:function(c){var l={},d=[],j=0,g,f;for(;g=c[j++];){f=typeof g=="string"?g:g.$xid;if(!l[f]){l[f]=1;d[d.length]=g}}return d},plugIn:function(d,c){this.prototype[d]=c;return this}}});Class("xui.absProfile",null,{Constructor:function(){var c=arguments.callee.upper;if(c){c.call(this)}c=null;if(!this.$xid){this.$xid=xui.absProfile.$xid.next()}},Instance:{getId:function(){return this.$xid},link:function(h,i,g,d){var c=this,f="$"+c.$xid;g=g||c;if(h[f]){c.unLink(i)}h[f]=g;if(_.isArr(h)){_.arr.insertAny(h,g,d,true)}c._links[i]=h;return c},unLink:function(g){var c=this,f,d="$"+c.$xid;if(!c._links){return}if(!(f=c._links[g])){return}if(_.isArr(f)){_.arr.removeValue(f,f[d])}delete f[d];delete c._links[g];return c},unLinkAll:function(){var d=this,h="$"+d.$xid,c=d._links,g,f;for(f in c){g=c[f];if(_.isArr(g)){_.arr.removeValue(g,g[h])}delete g[h]}d._links={};return d}},Static:{$xid:new _.id,$abstract:true}});Class("xui.Profile","xui.absProfile",{Constructor:function(k,i,d,c,g,l,m){var h=arguments.callee.upper,f=_.toArr(arguments);h.apply(this,f);h=null;var j=this;_.merge(j,m);j.key=i||j.key||"";j.alias=d||j.alias||"",j.properties=g?_.copy(g):(j.properties||{});j.events=l?_.copy(l):(j.events||{});j.host=k||j.host||j;j.box=c||j.box||j.constructor;if(j.events){j.setEvents(j.events);delete j.events}j._links={}},Instance:{setEvents:function(d,f){var c=this.box.$EventHandlers;if(_.isHash(d)){return _.merge(this,d,"all",function(h,g){return c[g]})}else{if(c[d]){this[d]=f}}},getEvents:function(f){if(f){return this[f]}else{var c=this,d,g={};_.each(c.box.$EventHandlers,function(j,h){if(c[h]){g[h]=c[h]}});return g}},getProperties:function(c){var d=this.properties;return c?d[c]:_.copy(d)},setProperties:function(c,d){if(_.isHash(c)){this.properties=c}else{this.properties[c]=d}},_applySetAction:function(c,d){return c.call(this,d)},__gc:function(){var c=this;if(c.$beforeDestroy){_.each(c.$beforeDestroy,function(g){_.tryF(g,[],c)});delete c.$beforeDestroy}_.tryF(c.$ondestory,[],c);if(c.onDestroy){c.boxing().onDestroy()}if(c.destroyTrigger){c.destroyTrigger()}var d;if(c.alias&&c.host&&(d=c.host[c.alias])&&(d=d._nodes)&&d.length===1){delete c.host[c.alias]}c.unLinkAll();_.tryF(c.clearCache,[],c);var d=_.get(c,["box","_namePool"]);if(d){delete d[c.alias]}c.destroyed=true;if(c.$afterDestroy){_.each(c.$afterDestroy,function(g){_.tryF(g,[],c)});delete c.$afterDestroy}if(c.afterDestroy){c.boxing().afterDestroy(c)}_.breakO([c.properties,c.events,c],2);c.destroyed=true},boxing:function(){var c=this,d;if(!c.box){return null}if(!((d=c._cacheInstance)&&d.get(0)==c&&d._nodes.length==1)){d=c._cacheInstance=c.box.pack([c],false)}return d},serialize:function(k,n){var l,m=this,h=(l=m.box._beforeSerialized)?l(m):m,d={alias:h.alias,key:h.key,host:h.host};if(d.host===m){delete d.host}else{if(h.host&&!n){if(k!==false){d.host="@this"}else{delete d.host}}}var j={},g=h.box.$DataStruct,f=xui.absObj.$specialChars;_.merge(j,h.properties,function(p,c){return(c in g)&&g[c]!==p&&!f[c.charAt(0)]});if(!_.isEmpty(j)){d.properties=j}if(!_.isEmpty(l=this.getEvents())){d.events=l}var i=h.box.$EventHandlers;_.filter(d.events,function(p,c){return p!=i[c]});if(_.isEmpty(d.events)){delete d.events}return k===false?d:_.serialize(d)}}});Class("xui.absObj","xui.absBox",{Constructor:function(){var d=arguments.callee.upper,c=_.toArr(arguments);d.apply(this,c);d=null;if(c[0]!==false&&typeof this._ini=="function"){return this._ini.apply(this,c)}},Before:function(d,c,f){xui.absBox.$type[d]=d;return true},After:function(){var z=this,q=arguments.callee,x,y,g,w,d,p,h,f,s,c,r;z._nameId=0;z._namePool={};z._nameTag=z.$nameTag||("ctl_"+(y=z.KEY.split("."))[y.length-1].toLowerCase());z._cache=[];d=q.a1||(q.a1=_.toArr("$Keys,$DataStruct,$EventHandlers,$DataModel"));for(h=0;s=d[h++];){g={};if((y=z.$parent)&&(p=y.length)){while(p--){_.merge(g,y[p][s])}}z[s]=g}z.setDataModel(z.DataModel);delete z.DataModel;z.setEventHandlers(z.EventHandlers);delete z.EventHandlers;d=q.a5||(q.a5=_.toArr("RenderTrigger,LayoutTrigger"));for(h=0;s=d[h++];){x=[];if((y=z.$parent)&&(f=y.length)){for(p=0;p<f;p++){w=y[p];if(w=w["$"+s]){x.push.apply(x,w)}}}if(z[s]){x.push(z[s])}z["$"+s]=x;delete z[s]}},Static:{$abstract:true,$specialChars:{_:1,$:1},_objectProp:{tagVar:1},DataModel:{tag:"",desc:"",tagVar:{ini:{}}},getAll:function(){return this.pack(this._cache)},pickAlias:function(){var d,f=this._namePool,c=this._nameTag;while(f[d=(c+(++this._nameId))]){}return d},setDataModel:function(p){var w=this,u=xui.absObj.$specialChars,h=w.$DataStruct,s=w.$DataModel,d=w.prototype,q,l,v,f,g,k,c;for(q in p){if(!s[q]){s[q]={}}f=p[q];if(null===f||undefined===f){c=_.str.initial(q);delete h[q];delete s[q];if(d[l="get"+c]&&d[l].$auto$){delete d[l]}if(d[l="set"+c]&&d[l].$auto$){delete d[l]}}else{v=typeof f;if(v!="object"||f.constructor!=Object){f={ini:f}}h[q]=("ini" in f)?f.ini:(q in h)?h[q]:"";v=s[q];for(l in v){if(!(l in f)){f[l]=v[l]}}s[q]=f}}_.each(p,function(r,m){if(null===r||undefined===r||u[m.charAt(0)]){return}c=_.str.initial(m);g="set"+c;if(!(r&&(r.readonly||r.inner))){var j=r.set;k=d[g];d[g]=(typeof j!="function"&&typeof k=="function")?k:Class._fun(function(x,i){return this.each(function(z){if(!z.properties){return}if(z.properties[m]===x&&!i){return}var A=z.properties[m];if(z.beforePropertyChanged&&false===z.boxing().beforePropertyChanged(z,m,x,A)){return}if(typeof j=="function"){j.call(z,x,A)}else{var y=_.get(z.box.$DataModel,[m,"action"]);z.properties[m]=x;if(typeof y=="function"&&z._applySetAction(y,x,A)===false){z.properties[m]=A}}if(z.afterPropertyChanged){z.boxing().afterPropertyChanged(z,m,x,A)}})},g,w.KEY,null,"instance");delete r.set;if(d[g]!==k){d[g].$auto$=1}}else{delete d[g]}g="get"+c;if(!(r&&r.inner)){var n=r.get;k=d[g];d[g]=(typeof n!="function"&&typeof k=="function")?k:Class._fun(function(){if(typeof n=="function"){return n.apply(this.get(0),arguments)}else{return this.get(0).properties[m]}},g,w.KEY,null,"instance");delete r.get;if(d[g]!==k){d[g].$auto$=1}}else{delete d[g]}});return w},setEventHandlers:function(d){var c=this;_.each(d,function(j,g){if(null===j){delete c.$EventHandlers[g];delete c.prototype[g]}else{c.$EventHandlers[g]=j;var h=function(i){var f=arguments.length;if(f==1&&(typeof i=="function"||typeof i=="string")){return this.each(function(k){if(k.renderId){k.clearCache()}if(k.box._addEventHanlder){k.box._addEventHanlder(k,g,i)}k[g]=i;i=null})}else{if(f==1&&null===i){return this.each(function(k){k.clearCache();if(k.box._removeEventHanlder){k.box._removeEventHanlder(k,g,k[g])}delete k[g]})}else{var q=[],n=this.get(0),r=n[g],m=n.host||n,p;if(n.$inDesign){return}if(arguments[0]!=n){q[0]=n}for(p=0;p<f;p++){q[q.length]=arguments[p]}n.$lastEvent=g;if(typeof r=="string"){r=m[r]}if(typeof r=="function"){return _.tryF(r,q,m)}}}};h.$event$=1;h.$original$=j.$original$||c.KEY;h.$name$=g;h.$type$="event";c.plugIn(g,h)}});return c},unserialize:function(g,h){if(typeof g=="string"){g=_.unserialize(g)}var d=function(f){if(_.isArr(f)){f=f[0]}delete f.serialId;if(f.children){_.arr.each(f.children,d)}},c=[];_.arr.each(g,function(f){if(!h){d(f)}c.push((new (xui.SC(f.key))(f)).get(0))});return this.pack(c,false)}},Instance:{clone:function(){var c=[],g=arguments,d=function(h){delete h.alias;for(var f=0;f<g.length;f++){delete h[g[f]]}if(h.children){for(var f=0,j;j=h.children[f];f++){d(j[0])}}};this.each(function(f){f=f.serialize(false,true);d(f);c.push(f)});return this.constructor.unserialize(c)},serialize:function(d,f){var c=[];this.each(function(g){c[c.length]=g.serialize(false,f)});return d===false?c:c.length==1?" new "+c[0].key+"("+_.serialize(c[0])+")":"xui.UI.unserialize("+_.serialize(c)+")"},setAlias:function(h){var d=this,f=this.get(0),c;if(c=f.alias){if(f.host&&f.host!==f){try{delete f.host[c]}catch(g){f.host[c]=undefined}if(f.host._ctrlpool){delete f.host._ctrlpool[c]}}delete d.constructor._namePool[c]}d.constructor._namePool[f.alias=h]=1;if(f.host&&f.host!==f){f.host[h]=d;if(f.host._ctrlpool){f.host._ctrlpool[h]=d.get(0)}}if(f.box&&f.box._syncAlias){f.box._syncAlias(f,c,h)}return d},getAlias:function(){return this.get(0).alias},getProperties:function(d){var f={},g=this.get(0),j=g.properties,i;if(d===true){return _.copy(j)}else{if(typeof d=="string"){return j[d]}else{for(var c in j){i="get"+_.str.initial(c);if(typeof this[i]=="function"){f[c]=this[i].call(this)}}return f}}},setProperties:function(c,g,f){if(typeof c=="string"){var d={};d[c]=g;c=d}return this.each(function(h){_.each(c,function(j,i){var m="set"+_.str.initial(i),l=h.boxing();if(l&&typeof l[m]=="function"){l[m].call(l,j,!!f)}else{h.properties[i]=j}})})},getEvents:function(c){return this.get(0).getEvents(c)},setEvents:function(c,f){if(typeof c=="string"){var d={};d[c]=f;c=d}return this.each(function(h){var g=h.boxing();_.each(c,function(j,i){if(typeof g[i]=="function"){g[i].call(g,j)}})})},alias:function(c){return c?this.setAlias(c):this.getAlias()},host:function(d,c){return d?this.setHost(d,c):this.getHost()},setHost:function(f,d){var c=this;c.get(0).host=f;if(d){c.setAlias(d)}return c},getHost:function(){return this.get(0).host}}});Class("xui.DataBinder","xui.absObj",{Instance:{_ini:function(h,n,m){var p=this,j=p.constructor,d,q,k=j._namePool,g,l;if(h&&h["xui.Profile"]){d=h;g=d.alias||j.pickAlias()}else{if(h&&h.key&&xui.absBox.$type[h.key]){q=h;h=null;g=q.alias;g=(g&&!k[g])?g:j.pickAlias()}else{g=j.pickAlias()}d=new xui.Profile(m,p.$key,g,j,h,n,q)}k[g]=1;d._n=d._n||[];for(var f in (l=j.$DataStruct)){if(!(f in d.properties)){d.properties[f]=typeof l[f]=="object"?_.copy(l[f]):l[f]}}d.link(j._cache,"self").link(xui._pool,"xui");p._nodes.push(d);d._cacheInstance=p;if(!d.name){p.setName(g)}return p},destroy:function(){this.each(function(d){var f=d.box,c=d.properties.name;_.arr.each(d._n,function(g){if(g){f._unBind(c,g)}});delete f._pool[c];d.__gc()})},getUI:function(c){var d;if(!c){d=xui.UI.pack(this.get(0)._n,false)}else{_.arr.each(this.get(0)._n,function(f){if(f.properties.dataField==c){d=f.boxing();return false}})}return d},checkValid:function(){return xui.absValue.pack(this.get(0)._n,false).checkValid()},getUIValue:function(h,g){var c=this,d=c.get(0),f={};_.arr.each(d._n,function(k){var l=k.properties,i=k.boxing(),j=i.getUIValue();if(!g||(j+" ")!==(i.getValue()+" ")){if(h&&i.getCaption){f[l.dataField]={value:j,caption:i.getCaption()}}else{f[l.dataField]=j}}});return f},isDirtied:function(){var h=this.get(0);for(var f=0,c=h._n.length;f<c;f++){var g=h._n[f],d=g.boxing();if((d.getUIValue()+" ")!==(d.getValue()+" ")){return true}}return false},getDirtied:function(c){return this.getUIValue(c,true)},updateValue:function(){xui.absValue.pack(this.get(0)._n,false).updateValue();return this},updateDataFromUI:function(j,k,g,i){var d=this,f=d.get(0),h={},c;_.arr.each(f._n,function(q){var r=q.properties,l=q.boxing(),m=l.getValue(_.isBool(g)?g:q.__returnArray),n=l.getUIValue(_.isBool(g)?g:q.__returnArray);if(k&&l.getCaption){h[r.dataField]={value:n,caption:l.getCaption()}}else{h[r.dataField]=n}if(j!==false&&q.renderId){l.updateValue()}});if(i){h=_.tryF(i,[h,f],this)}if(f.afterUpdateDataFromUI){c=this.afterUpdateDataFromUI(f,h);if(_.isHash(c)){h=c}c=null}_.merge(f.properties.data,h,"all");return d},updateDataToUI:function(k,d){var s,h,q,l,n,m=this,i=m.get(0),g=i.properties,f={},j,r={};_.merge(f,g.data,function(c,p){return !d||d===p||(_.isArr(d)?_.arr.indexOf(d,p)!=-1:false)});if(k){f=_.tryF(k,[f,i],m)}if(i.beforeUpdateDataToUI){j=m.beforeUpdateDataToUI(i,f);if(_.isHash(j)){f=j}j=null}_.arr.each(i._n,function(c){h=c.properties;s=h.dataField;if(!d||d===s||(_.isArr(d)?_.arr.indexOf(d,s)!=-1:false)){q=(f&&s in f)?f[s]:"";r[s]=q;l=null;n=c.boxing();if(_.isHash(q)){l=_.isSet(q.caption)?q.caption:null;q=q.value}n.resetValue(q);c.__returnArray=_.isArr(q);if(_.isSet(l)&&_.isFun(n.setCaption)){_.tryF(n.setCaption,[l,true],n)}}});_.merge(g.data,r,"all");return m},setHost:function(f,d){var c=this;if(f&&d){c.setName(d)}return arguments.callee.upper.apply(c,arguments)},invoke:function(m,c,z,n,u,q,i){var B=this,l=B.constructor,x=B.get(0),h=x.properties,w=h.dataSourceType,g=h.responseType,d=h.requestType,j=_.isSet(h.queryModel)&&h.queryModel!=="",p=(j?(((h.queryURL.lastIndexOf("/")!=h.queryURL.length-1)?(h.queryURL+"/"):h.queryURL)+h.queryModel):h.queryURL),A=h.queryUserName;queryPasswrod=h.queryPasswrod;queryArgs=_.copy(h.queryArgs),queryOptions=_.copy(h.queryOptions);if(w!="remoting"){return}if(x.beforeInvoke&&false===x.boxing().beforeInvoke(x)){return}var r,k={};if(g=="SOAP"||d=="SOAP"){if(!l.WDSLCache){l.WDSLCache={}}if(!l.WDSLCache[p]){var f=xui.SOAP.getWsdl(p,function(C){if(x.afterInvoke){x.boxing().afterInvoke(x,C)}_.tryF(c,arguments,this);_.tryF(n,arguments,this)});if(f){l.WDSLCache[p]=f}else{return}}}switch(g){case"JSON":k.rspType="json";break;case"XML":r="ajax";k.rspType="xml";break;case"SOAP":r="ajax";k.rspType="xml";var s=xui.SOAP.getNameSpace(l.WDSLCache[p]),y=((s.lastIndexOf("/")!=s.length-1)?s+"/":s)+(queryArgs.methodName||"");k.header=k.header||{};k.header.SOAPAction=y;break}switch(d){case"HTTP":queryArgs=typeof queryArgs=="string"?_.unserialize(queryArgs):queryArgs;break;case"JSON":k.reqType="json";if(h.queryMethod=="auto"){k.method="POST"}queryArgs=typeof queryArgs=="string"?queryArgs:_.serialize(queryArgs);break;case"XML":k.reqType="xml";r="ajax";k.method="POST";if(A&&queryPassword){k.username=A;k.password=queryPassword;k.header=k.header||{};k.header.Authorization="Basic "+l._toBase64(A+":"+queryPassword)}queryArgs=typeof queryArgs=="string"?queryArgs:xui.XMLRPC.wrapRequest(queryArgs);break;case"SOAP":k.reqType="xml";r="ajax";k.method="POST";if(A&&queryPassword){k.username=A;k.password=queryPassword;k.header=k.header||{};k.header.Authorization="Basic "+l._toBase64(A+":"+queryPassword)}queryArgs=typeof queryArgs=="string"?queryArgs:xui.SOAP.wrapRequest(queryArgs,l.WDSLCache[p]);break}if(!r&&h.proxyType!="auto"){r=h.proxyType}if(r!="ajax"){k.asy=true}if(r=="sajax"){k.method="GET"}if(r){r=r.toLowerCase()}i=i||{};if(!("asy" in i)){i.asy=!!h.queryAsync}if(!("method" in i)&&h.queryMethod!="auto"){i.method=h.queryMethod}if(!("onEnd" in i)){i.onEnd=n}if(!("onStart" in i)){i.onStart=z}_.merge(i,queryOptions);_.merge(i,k,"all");var v=(r?(r=="sajax"?xui.SAjax:r=="iajax"?xui.IAjax:xui.Ajax):((function(D){if(!_.isHash(D)){return 0}for(var C in D){if(D[C]&&D[C].nodeType==1){return 1}}})(queryArgs))?xui.IAjax:(i&&i.method&&i.method.toLowerCase()=="post")?xui.absIO.isCrossDomain(p)?xui.IAjax:xui.Ajax:xui.absIO.isCrossDomain(p)?xui.SAjax:xui.Ajax).apply(null,[p,queryArgs,function(D){var C;if(x.afterInvoke){C=x.boxing().afterInvoke(x,D);if(_.isSet(C)){D=C}C=null}if(w=="remoting"&&!_.isHash(D)&&!_.isStr(D)){if(g=="XML"){D=xui.XMLRPC.parseResponse(D)}else{if(g=="SOAP"){D=xui.SOAP.parseResponse(D,queryArgs.methodName,l.WDSLCache[p])}}}_.tryF(m,arguments,this)},function(C){if(x.afterInvoke){x.boxing().afterInvoke(x,C)}_.tryF(c,arguments,this)},q,i]);if(u=="busy"){_.observableRun(function(C){v.start()})}else{if(u=="return"){return v}else{v.start()}}},read:function(k,f,n,c,j,h,p,i){var m=this,g=m.get(0),d=g.properties,l=d.dataSourceType;if(l=="none"||l=="memory"){return}if(g.beforeRead&&false===g.boxing().beforeRead(g)){return}return m.invoke(function(r){var q;if(g.afterRead){q=g.boxing().afterRead(g,r);if(_.isSet(q)){r=q}q=null}if(_.isHash(r)){g.boxing().setData(r).updateDataToUI(i)}_.tryF(k,arguments,this)},f,n,c,j,h,p)},write:function(i,d,l,c,h,g,m){var k=this,f=k.get(0),j=f.properties.dataSourceType;if(j=="none"||j=="memory"){return}if(f.beforeWrite&&false===f.boxing().beforeWrite(f)){return}return k.invoke(function(p){var n;if(f.afterWrite){n=f.boxing().afterWrite(f,p);if(_.isSet(n)){p=n}n=null}_.tryF(i,arguments,this)},d,l,c,h,g,m)},getData:function(c){var f=this.get(0),d=f.properties.data;return _.isSet(c)?d[c]:d},setData:function(c,d){var f=this.get(0).properties;if(c===false){_.each(f.data,function(h,g){f.data[g]=null})}else{if(!_.isSet(c)){f.data={}}else{if(_.isHash(c)){f.data=c}else{f.data[c]=d}}}return this}},Static:{WDSLCache:{},$nameTag:"databinder_",_pool:{},destroyAll:function(){this.pack(_.toArr(this._pool,false),false).destroy();this._pool={}},getFromName:function(c){var d=this._pool[c];return d&&d.boxing()},_toBase64:function(n){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j=[],h=0,g,f,d,p,m,l,k;do{g=n.charCodeAt(h++);f=n.charCodeAt(h++);d=n.charCodeAt(h++);p=g>>2;m=((g&3)<<4)|(f>>4);l=((f&15)<<2)|(d>>6);k=d&63;if(isNaN(f)){l=k=64}else{if(isNaN(d)){k=64}}j.push(c.charAt(p)+c.charAt(m)+c.charAt(l)+c.charAt(k))}while(h<n.length);return j.join("")},_bind:function(f,i){var m,l,h=this._pool[f];if(!h){h=new xui.DataBinder();h.setName(f);h=h.get(0)}var d=h.properties.data;if(i){if(_.arr.indexOf(h._n,i)==-1){i.link(h._n,"databinder."+f)}var g=i.properties,j,k;if(m=g.dataField){l=(d&&m in d)?d[m]:(g.value||"");d[m]=l;j=null;k=i.boxing();if(_.isHash(l)){j=_.isSet(l.caption)?l.caption:null;l=l.value}k.resetValue(l);if(!_.isSet(g.caption)&&k.setCaption){_.tryF(k.setCaption,[j,true],k)}}}},_unBind:function(c,d){if(d&&d.box&&this._pool[c]){d.unLink("databinder."+c)}},_beforeSerialized:function(c){var f={};_.merge(f,c,"all");var d=f.properties=_.clone(c.properties,true);if(d.dataSourceType!="memory"){delete d.data}if(d.dataSourceType=="none"&&d.dataSourceType=="memory"){delete d.queryURL;delete d.queryUserName;delete d.queryPassword;delete d.queryModel;delete d.queryArgs;delete d.queryOptions;delete d.proxyType;delete d.queryAsync;delete d.queryMethod;delete d.requestType;delete d.responseType}if(d.data&&_.isEmpty(d.data)){delete d.data}if(d.queryArgs&&_.isEmpty(d.queryArgs)){delete d.queryArgs}if(d.queryOptions&&_.isEmpty(d.queryOptions)){delete d.queryOptions}return f},DataModel:{data:{ini:{}},dataSourceType:{ini:"none",listbox:["none","memory","remoting"]},queryURL:{ini:""},queryUserName:{ini:""},queryPassword:{ini:""},queryModel:"",queryMethod:{ini:"auto",listbox:["auto","GET","POST"]},queryAsync:true,requestType:{ini:"HTTP",listbox:["HTTP","JSON","XML","SOAP"]},responseType:{ini:"JSON",listbox:["JSON","XML","SOAP"]},queryArgs:{ini:{}},queryOptions:{ini:{}},proxyType:{ini:"auto",listbox:["auto","Ajax","SAjax","IAjax"]},name:{set:function(i,j){var k=this,l=xui.DataBinder,d=l._pool,f=d[j],g=d[i],h;d[k.properties.name=i]=k;if(f&&!g&&k._n.length){h=xui.absValue.pack(_.copy(k._n));_.arr.each(k._n,function(c){l._unBind(j,c)});h.setDataBinder(i)}if(g&&!f){k._n=g._n}if(f){delete d[j]}}}},EventHandlers:{beforeUpdateDataToUI:function(d,c){},afterUpdateDataFromUI:function(d,c){},beforeInvoke:function(c){},afterInvoke:function(d,c){},beforeRead:function(c){},afterRead:function(d,c){},beforeWrite:function(c){},afterWrite:function(d,c){}}}});(xui.Locale.en||(xui.Locale.en={})).inline={$_$:1,ok:"O K",cancel:"Cancel",set:"SET",today:"Today",now:"Now",yes:"Yes",no:"No",noFlash:"No Flash PlugIn!",transparent:"transparent"};xui.Locale.en.date={WEEKS:{"0":"Su","1":"Mo","2":"Tu","3":"We","4":"Th","5":"Fr","6":"Sa","7":"WK"},VIEWS:{"10 ms":"10 millisecond","100 ms":"100 milliseconds","1 s":"1 second","10 s":"10 seconds","1 n":"1 minute","5 n":"5 minutes","10 n":"10 minutes","30 n":"30 minutes","1 h":"1 hour","2 h":"2 hours","6 h":"6 hours","1 d":"1 day","1 w":"1 week","15 d":"15 days","1 m":"1 month","1 q":"1 quarter","1 y":"1 year","1 de":"10 years","1 c":"1 century"},MONTHS:{"1":"Jan.","2":"Feb.","3":"Mar.","4":"Apr.","5":"May.","6":"Jun.","7":"Jul.","8":"Aug.","9":"Sep.","10":"Oct.","11":"Nov.","12":"Dec."},MS:"ms",S:"s",N:"n",H:"h",D:"d",W:"w",M:"m",Q:"q",Y:"y",DE:"de",C:"c",HN:function(f,d,c){return(d.length==1?"0":"")+d+":"+(c.length==1?"0":"")+c},DHN:function(h,f,d,g){return f+"th "+(d.length==1?"0":"")+d+":"+(g.length==1?"0":"")+g},MDHN:function(j,g,f,i,h){return f+"th "+xui.getRes("date.MONTHS."+g)+" "+(i.length==1?"0":"")+i+":"+(h.length==1?"0":"")+h},HNS:function(h,f,d,g){return(f.length==1?"0":"")+f+":"+(d.length==1?"0":"")+d+":"+(g.length==1?"0":"")+g},HNSMS:function(j,g,f,i,h){return(g.length==1?"0":"")+g+":"+(f.length==1?"0":"")+f+":"+(i.length==1?"0":"")+i+" "+(h.length==1?"00":h.length==2?"0":"")+h},YM:function(f,d,c){return xui.getRes("date.MONTHS."+c)+" "+d},YQ:function(f,d,c){return c+"Q "+d},YMD:function(h,f,d,g){return f+"-"+(d.length==1?"0":"")+d+"-"+(g.length==1?"0":"")+g},YMD2:function(h,f,d,g){return xui.getRes("date.MONTHS."+d)+" "+g+", "+f},MD:function(f,d,c){return xui.getRes("date.MONTHS."+d)+" "+c},YMDH:function(j,g,f,i,h){return g+"-"+(f.length==1?"0":"")+f+"-"+(i.length==1?"0":"")+i+" "+(h.length==1?"0":"")+h+":00"},YMDHN:function(k,g,f,j,i,h){return g+"-"+(f.length==1?"0":"")+f+"-"+(j.length==1?"0":"")+j+" "+(i.length==1?"0":"")+i+":"+(h.length==1?"0":"")+h},YMDHNS:function(m,h,g,l,k,j,i){return h+"-"+(g.length==1?"0":"")+g+"-"+(l.length==1?"0":"")+l+" "+(k.length==1?"0":"")+k+":"+(j.length==1?"0":"")+j+":"+(i.length==1?"0":"")+i},ALL:function(q,i,h,p,m,l,k,j){return i+"-"+(h.length==1?"0":"")+h+"-"+(p.length==1?"0":"")+p+" "+(m.length==1?"0":"")+m+":"+(l.length==1?"0":"")+l+":"+(k.length==1?"0":"")+k+" "+(j.length==1?"00":j.length==2?"0":"")+j}};xui.Locale.en.color={LIST:{FFFFFF:"White",FFFFF0:"Ivory",FFFFE0:"Light Yellow",FFFF00:"Yellow",FFFAFA:"Snow",FFFAF0:"Floral White",FFFACD:"Lemon Chiffon",FFF8DC:"Cornislk",FFF5EE:"Sea Shell",FFF0F5:"Lavender Blush",FFEFD5:"Papaya Whip",FFEBCD:"Blanched Almond",FFE4E1:"Misty Rose",FFE4C4:"Bisque",FFE4B5:"Moccasin",FFDEAD:"Navajo White",FFDAB9:"Peach Puff",FFD700:"Gold",FFC0CB:"Pink","FFB6C1 ":"Light Pink",FFA500:"Orange",FFA07A:"Light Salmon",FF8C00:"Dark Orange",FF7F50:"Coral",FF69B4:"Hot Pink",FF6347:"Tomato",FF4500:"Orange Red",FF1493:"Deep Pink",FF00FF:"Magenta",FF00FF:"Fuchsia",FF0000:"Red",FDF5E6:"Old Lace",FAFAD2:"Light Goldenrod Yellow",FAF0E6:"Linen",FAEBD7:"Antique White",FA8072:"Salmon",F8F8FF:"Ghost White",F5FFFA:"Medium Spring Green",F5F5F5:"White Smoke",F5DEB3:"Wheat",F4A460:"Sandy Brown",F0FFFF:"Azure",F0FFF0:"Honeydew",F0F8FF:"Alice Blue",F0E68C:"Khaki",F08080:"Light Coral",EEE8AA:"Pale Godenrod",EE82EE:"Violet",E9967A:"Dark Salmon",E6E6FA:"Lavender",E1FFFF:"Light Cyan",DEB887:"Bruly Wood",DDA0DD:"plum",DCDCDC:"Gainsboro",DC143C:"Crimson",DB7093:"Pale Violet Red",DAA520:"Gold Enrod",DA70D6:"Orchid",D8BFD8:"Thistle",D3D3D3:"Light Grey",D2B48C:"Tan",D2691E:"Chocolate",CD853F:"Peru",CD5C5C:"Indian Red",C71585:"Medium Violet Red",C0C0C0:"Silver",BDB76B:"Dark Khaki",BC8F8F:"Rosy Brown",BA55D3:"Medium Orchid",B22222:"Fire Brick",B0E0E6:"Pow Der Blue",B0C4DE:"Light Steel Blue",AFEEEE:"Pale Turquoise",ADFF2F:"Green Yellow",ADD8E6:"Light BLue",A9A9A9:"Dark Gray",A52A2A:"Brown",A0522D:"Sienna","9932CC":"Dark Orchid","98FB98":"Pale Green","9400D3":"Dark Voilet","9370DB":"Medium Purple","90EE90":"Light Green","8FBC8F":"Dark Sea Green","8B4513":"Saddle Brown","8B008B":"Dark Magenta","8B0000":"Dark Red","8A2BE2":"Blue Violet","87CEFA":"Light Sky Blue","87CEEB":"Sky Blue","808080":"Gray","808000":"Olive","800080":"Purple","800000":"Maroon","7FFFAA":"Auqamarin","7FFF00":"Chartreuse","7CFC00":"Lawn Green","7B68EE":"Medium Slate Blue","778899":"Light Slate Gray","708090":"Slate Gray","6B8E23":"Beige","6A5ACD":"Slate Blue","696969":"Dim Gray","6495ED":"Cornflower Blue","5F9EA0":"Cadet Blue","556B2F":"Olive Drab","4B0082":"Indigo","48D1CC":"Medium Turquoise","483D8B":"Dark Slate Blue","4682B4":"Steel Blue","4169E1":"Royal Blue","40E0D0":"Turquoise","3CB371":"Spring Green","32CD32":"Lime Green","2F4F4F":"Dark Slate Gray","2E8B57":"Sea Green","228B22":"Forest Green","20B2AA":"Light Sea Green","1E90FF":"Doder Blue","191970":"Midnight Blue","00FFFF":"Cyan","00FFFF":"Aqua","00FF7F":"Mint Cream","00FF00":"Lime","00FA9A":"Medium Aquamarine","00CED1":"Dark Turquoise","00BFFF":"Deep Sky Blue","008B8B":"Dark Cyan","008080":"Teal","008000":"Green","006400":"Dark Green","0000FF":"Blue","0000CD":"Medium Blue","00008B":"Dark Blue","000080":"Navy","000000":"Black"}};xui.Locale.en.editor={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",forecolor:"Font Color",bgcolor:"Background Color",left:"Align Left",center:"Align Center",right:"Align Right",justify:"Justify",indent:"Indent",outdent:"Outdent",ol:"Ordered List",ul:"Unordered List",hr:"Insert Horizontal Rule",unlink:"Remove Link",removeformat:"Remove Formatting",html:"HTML Editor",insertimage:"Insert Image",insertimage2:"Image URL:",createlink:"Insert Link",createlink2:"Link URL:",fontsize:"Font Size",fontname:"Font Family",formatblock:"Font Block",fontsizeList:"1,1(8pt);2,2(10pt);3,3(12pt);4,4(14pt);5,5(18pt);6,6(24pt);...,...",fontnameList:"Arial;Arial Black;Comic Sans MS;Courier New;Impact;Tahoma;Times New Roman;Trebuchet MS;Verdana;...",formatblockList:"p,Normal;h1,Heading1;h2,Heading2;h3,Heading3;h4,Heading4;h5,Heading5;h6,Heading6;...,..."};Class("xui.Event",null,{Constructor:function(A,x,c,C){var q=xui.Event,l=window,E=document,G=0,v,n,k=xui.DragDrop,i,u,m;if(!(A=A||l.event)||!(i=x)){i=x=null;return false}x=null;var g=A.type,H=A.$xuievent,s=A.$xuitype,y=A.$xuiall;if(g=="xuitouchdown"){g="mousedown";H=1;y=0;s="beforeMousedown"}if("mouseover"==g||"mouseout"==g){G=(k&&k._profile.isWorking)?1:2;if(G!=1&&c){i=null;return q.$FALSE}if(!q._handleMouseHover(A,i,G==1)){i=null;return q.$FALSE}if(G==1){u=k&&k._dropElement}}else{if((m=q._tabHookStack).length&&q._kb[g]&&(A.$key||A.keyCode||A.charCode)==9&&false===q._handleTabHook(q.getSrc(A),m=m[m.length-1])){i=null;return}}v=C||q.getId(i);if(m=q._getProfile(v)){if(g=="DOMMouseScroll"){g="mousewheel"}if(g=="mousedown"||g=="mousewheel"){_.tryF(xui.Dom._blurTrigger,[m,A])}else{if(g=="resize"){g="size";if(xui.browser.ie&&l===i){var l=xui.browser.contentBox&&E.documentElement.clientWidth||E.body.clientWidth,B=xui.browser.contentBox&&E.documentElement.clientHeight||E.body.clientHeight;if(m._w==l&&m._h==B){i=null;return}else{m._w=l;m._h=B}}}}var z,D,I,p=true,F=[];for(z=0;z<=2;++z){if(G==1&&z!==0&&!A.$force){break}if(G==2&&z===0){continue}I=q._type[g+z]||(q._type[g+z]=q._getEventName(g,z));if(!H||y||(I===s)){m._getEV(F,v,I,i.$xid)}}D=function(f,d){for(var j=0,h;h=arguments.callee.tasks[j++];){if(false===h(m,f,d)){return false}}return true};D.tasks=F;p=D(A,i.$xid);if(l===i&&g=="size"){_.asyRun(function(){D(A,i.$xid);D.tasks.length=0;delete D.tasks;D=i=null},150)}if(k){if(g=="drag"){k._onDrag=D}else{if(g=="dragover"){k._onDragover=D}}}else{if(g!=="size"){D.tasks.length=0;delete D.tasks;D=null}}if(G==1){if("mouseover"==g&&k._dropElement==i.$xid&&u&&u!=i.$xid){n=xui.use(u).get(0);q({type:"mouseout",target:n,$xui:true,$xuitype:"beforeMouseout",preventDefault:function(d){xui.Event.stopDefault(d)},stopPropagation:function(d){xui.Event.stopBubble(d)}},n);k.setDropElement(i.$xid)}if("mouseout"==g&&!k._dropElement&&u&&u==i.$xid){q._preDroppable=v;_.asyRun(function(){delete xui.Event._preDroppable})}if(i.$xid==k._dropElement){p=false}}if(p===false){q.stopBubble(A)}return p}},Static:{$FALSE:xui.browser.opr?undefined:false,_type:{},_kb:{keydown:1,keypress:1,keyup:1},_reg:/(-[\w]+)|([\w]+$)/g,$eventhandler:function(){return xui.Event(arguments[0],this)},$eventhandler2:function(){return xui.Event(arguments[0],this,1)},$eventhandler3:function(){return xui.Event(arguments[0],xui.Event.getSrc(arguments[0]||window.event))},$lastMouseupTime:0,$dblcInterval:500,$lastClickFunMark:0,_events:("mouseover,mouseout,mousedown,mouseup,mousemove,mousewheel,click,dblclick,contextmenu,keydown,keypress,keyup,scroll,blur,focus,load,unload,beforeunload,abort,change,select,submit,reset,error,move,size,dragbegin,drag,dragstop,dragleave,dragenter,dragover,drop,touchstart,touchmove,touchend,touchcancel,mspointerdown,mspointermove,mspointerup,mspointercancel,pointerdown,pointermove,pointerup,pointercancel").split(","),simulateEvent:function(f,d,c,g){c=c||{};if(f[0]){f=f[0]}_.tryF(xui.Event.$eventsforSimulation[g||d],[f,d,c])},_getEventName:function(c,d){return(c=this._map1[c])&&((d===0||d==1||d==2)?c[d]:c)},_getProfile:function(f,d,c){return f&&(typeof f=="string")&&((d=(c=xui.$cache.profileMap)[f])?d["xui.UIProfile"]?d:(c=c[f.replace(this._reg,"")])?c:d:c[f.replace(this._reg,"")])},_handleTabHook:function(h,g){if(h===document){return true}var f=h,d,c=f.tabIndex;do{if(xui.getId(f)==g[0]){f=h=null;return true}}while(f&&(f=f.parentNode)&&f!==document&&f!==window);d=_.tryF(g[1],[g[0],c],h);f=h=null;return false},_handleMouseHover:function(c,h,k){if(h==document){h=null;return true}var f=(c.type=="mouseover"?c.fromElement:c.toElement)||c.relatedTarget;if(k&&c.type=="mouseover"&&this._preDroppable){try{do{if(f&&f.id&&f.id==this._preDroppable){h=f=null;return true}}while(f&&(f=f.parentNode)&&f!==document&&f!==window)}catch(j){}}if(xui.browser.gek){try{do{if(f==h){h=f=null;return false}}while(f&&(f=f.parentNode))}catch(j){var i=this.getPos(c),f=xui([h]),d=f.offset(),l=f.cssSize(),g=(i.left<d.left||i.left>d.left+l.width||i.top<d.top||i.top>d.top+l.height);h=f=null;return c.type=="mouseover"?!g:g}}else{do{if(f==h){h=f=null;return false}}while(f&&(f=f.parentNode))}h=f=null;return true},_tabHookStack:[],pushTabOutTrigger:function(d,c){this._tabHookStack.push([xui(d)._nodes[0],c]);return this},popTabOutTrigger:function(c){if(c){this._tabHookStack=[]}else{this._tabHookStack.pop()}return this},getSrc:function(d){var c;return((c=d.target||d.srcElement||null)&&xui.browser.kde&&c.nodeType==3)?c.parentNode:c},getId:function(c){return window===c?"!window":document===c?"!document":c.id},getBtn:function(c){return xui.browser.ie?c.button==4?"middle":c.button==2?"right":"left":c.which==2?"middle":c.which==3?"right":"left"},getPos:function(i){i=i||window.event;if(xui.browser.isTouch&&i.changedTouches&&i.changedTouches[0]){i=i.changedTouches[0]}if("pageX" in i){return{left:i.pageX,top:i.pageY}}else{var k=document,j=k.documentElement,c=k.body,g,f=(_.isSet(g=j&&j.scrollLeft)?g:_.isSet(g=c&&c.scrollLeft)?g:0)-(_.isSet(g=j.clientLeft)?g:0),h=(_.isSet(g=j&&j.scrollTop)?g:_.isSet(g=c&&c.scrollTop)?g:0)-(_.isSet(g=j.clientTop)?g:0);return{left:i.clientX+f,top:i.clientY+h}}},getKey:function(c){c=c||window.event;var j=[],p,f=c.$key||c.keyCode||c.charCode||0;if(typeof f=="string"){j[0]=f}else{var n=String.fromCharCode(f),m=c.type;if((m=="keypress"&&f>=33&&f<=128)||((f>=48&&f<=57)||(f>=65&&f<=90))){j[0]=n}else{if(!(p=arguments.callee.map)){p=arguments.callee.map={};var f,h=("3,enter,8,backspace,9,tab,12,numlock,13,enter,19,pause,20,capslock,27,esc,32, ,33,pageup,34,pagedown,35,end,36,home,37,left,38,up,39,right,40,down,44,printscreen,45,insert,46,delete,50,down,52,left,54,right,56,up,91,win,92,win,93,apps,96,0,97,1,98,2,99,3,100,4,101,5,102,6,103,7,104,8,105,9,106,*,107,+,109,-,110,.,111,/,112,f1,113,f2,114,f3,115,f4,116,f5,117,f6,118,f7,119,f8,120,f9,121,f10,122,f11,123,f12,144,numlock,145,scroll,186,;,187,=,189,-,190,.,191,/,192,`,219,[,220,\\,221,],222,',224,meta,63289,numlock,63276,pageup,63277,pagedown,63275,end,63273,home,63234,left,63232,up,63235,right,63233,down,63272,delete,63302,insert,63236,f1,63237,f2,63238,f3,63239,f4,63240,f5,63241,f6,63242,f7,63243,f8,63244,f9,63245,f10,63246,f11,63247,f12,63248,print").split(",");for(var g=1,d=h.length;g<d;g=g+2){p[h[g-1]]=h[g]}h.length=0;p[188]=","}j[0]=p[f]||n}}if((c.modifiers)?(c.modifiers&Event.CONTROL_MASK):(c.ctrlKey||c.ctrlLeft||f==17||f==57391)){if(f==17||f==57391){j[0]=""}j.push("1")}else{j.push("")}if((c.modifiers)?(c.modifiers&Event.SHIFT_MASK):(c.shiftKey||c.shiftLeft||f==16||f==57390)){if(f==16||f==57390){j[0]=""}j.push("1")}else{j.push("")}if((c.modifiers)?false:(c.altKey||c.altLeft||f==18||f==57388)){if(f==18||f==57388){j[0]=""}j.push("1")}else{j.push("")}j[0]=j[0];j.key=j[0];j.type=m;j.ctrlKey=!!j[1];j.shiftKey=!!j[2];j.altKey=!!j[3];if(m=="keypress"){if(this.$keydownchar&&this.$keydownchar.length>1){j.key=this.$keydownchar}}else{if(m=="keydown"){if(j[0].length>1){this.$keydownchar=j[0]}else{if(this.$keydownchar){this.$keydownchar=null}}}else{if(m=="keyup"){if(this.$keydownchar){this.$keydownchar=null}}}}return j},getEventPara:function(j,c){if(!c){c=xui.Event.getPos(j)}var g=this.getKey(j),f={pageX:c&&c.left,pageY:c&&c.top,keyCode:g.key,ctrlKey:g.ctrlKey,shiftKey:g.shiftKey,altKey:g[3].altKey};for(var d in j){if(d.charAt(0)=="$"){f[d]=j[d]}}return f},stopBubble:function(c){c=c||window.event;if(c.stopPropagation){c.stopPropagation()}if("cancelBubble" in c){c.cancelBubble=true}this.stopDefault(c)},stopDefault:function(c){c=c||window.event;if(c.preventDefault){c.preventDefault()}else{if("returnValue" in c){c.returnValue=false}}},keyboardHook:function(l,c,f,h,j,i,n,m){if(l){var d=xui.$cache.hookKey,g=(l||"").toLowerCase()+":"+(c?"1":"")+":"+(f?"1":"")+":"+(h?"1":"");if(typeof j!="function"){delete d[g]}else{d[g]=[j,i,n,m]}}return this},keyboardHookUp:function(l,c,f,h,j,i,n,m){if(l){var d=xui.$cache.hookKeyUp,g=(l||"").toLowerCase()+":"+(c?"1":"")+":"+(f?"1":"")+":"+(h?"1":"");if(typeof j!="function"){delete d[g]}else{d[g]=[j,i,n,m]}}return this},getWheelDelta:function(c){return c.wheelDelta?c.wheelDelta/120:-c.detail/3},$TAGNAMES:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},_supportCache:{},isSupported:function(d,h){var g=this,j=g._supportCache,i=(h?h.tagName.toLowerCase():"div")+":"+d;if(i in j){return j[i]}h=h||document.createElement(g.$TAGNAMES[d]||"div");d="on"+d;var f=(d in h);if(!f){if(!h.setAttribute){h=document.createElement("div")}if(h.setAttribute){h.setAttribute(d,"");f=typeof h[d]=="function";if(typeof h[d]!="undefined"){h[d]=undefined}h.removeAttribute(d)}}h=null;return j[i]=f},_simulateMousedown:function(c){if(!c.touches){return true}var d=xui.Event,f=c.changedTouches,g=f[0];if(c.touches.length>1){return true}d.__simulatedMousedownNode=g.target;if(!d.isSupported("mousedown")){d.simulateEvent(g.target,"mousedown",{screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY})}else{d._xuitouchdowntime=_.setTimeout(function(){d._xuitouchdowntime=0;d.simulateEvent(g.target,"xuitouchdown",{screenX:g.screenX,screenY:g.screenY,clientX:g.clientX,clientY:g.clientY},"mousedown")},100)}return true},_simulateMouseup:function(f){if(!f.touches){return true}var g=xui.Event,d=(new Date).getTime(),c=d-g.$lastMouseupTime,h=f.changedTouches,i=h[0];if(g._xuitouchdowntime){_.clearTimeout(g._xuitouchdowntime)}g.__simulatedMouseupNode=i.target;if(!g.isSupported("mouseup")){g.simulateEvent(i.target,"mouseup",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY})}if(g.__simulatedMouseupNode===g.__simulatedMousedownNode){if(!g.isSupported("click")){g.simulateEvent(i.target,"click",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY})}if(c<=g.$dblcInterval){_.asyRun(function(){g.$lastMouseupTime=0;g.simulateEvent(i.target,"dblclick",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY})})}}g.__simulatedMouseupNode=g.__simulatedMousedownNode=null;g.$lastMouseupTime=d;return true},stopPageTouchmove:function(){document.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointermove":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerMove":"touchmove",function(c){c.preventDefault()})}},Initialize:function(){var n=this,p=window,l=document,q={move:null,size:null,drag:null,dragstop:null,dragover:null,mousewheel:null,dragbegin:"onmousedown",dragenter:"onmouseover",dragleave:"onmouseout",drop:"onmouseup"},f=["before","on","after"],j,i,r;j=n._map1={};_.arr.each(n._events,function(d){r=_.str.initial(d);j[d]=[f[0]+r,f[1]+r,f[2]+r]});j=n._eventMap={};i=n._eventHandler={};_.arr.each(n._events,function(d){r=_.str.initial(d);j[d]=j[f[1]+d]=j[f[0]+r]=j[f[1]+r]=j[f[2]+r]=d;i[d]=i[f[1]+d]=i[f[0]+r]=i[f[1]+r]=i[f[2]+r]=(d in q)?q[d]:("on"+d)});p.onresize=n.$eventhandler;if(p.addEventListener){p.addEventListener("DOMMouseScroll",n.$eventhandler3,false)}if(xui.browser.isTouch){if(l.addEventListener){l.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",n._simulateMousedown,false);l.addEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",n._simulateMouseup,false);l.addEventListener("xuitouchdown",n.$eventhandler,false)}else{if(l.attachEvent){l.attachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",n._simulateMousedown);l.attachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",n._simulateMouseup);l.attachEvent("xuitouchdown",n.$eventhandler)}}}l.onmousewheel=p.onmousewheel=n.$eventhandler3;var k=function(x,C,G){switch(C){case"textevent":C="keypress";break;case"keyup":case"keydown":case"keypress":break}_.merge(G,{bubbles:true,cancelable:true,view:p,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,keyCode:0,charCode:0},"without");var w=G.bubbles,u=G.cancelable,D=G.view,s=G.ctrlKey,d=G.altKey,B=G.shiftKey,z=G.metaKey,F=G.keyCode,E=G.charCode;var A=null;if(l.createEvent){try{A=l.createEvent("KeyEvents");A.initKeyEvent(C,w,u,D,s,d,B,z,F,E)}catch(y){try{A=l.createEvent("Events")}catch(v){A=l.createEvent("UIEvents")}finally{A.initEvent(C,w,u);A.view=D;A.altKey=d;A.ctrlKey=s;A.shiftKey=B;A.metaKey=z;A.keyCode=F;A.charCode=E}}x.dispatchEvent(A)}else{if(l.createEventObject){A=l.createEventObject();A.bubbles=w;A.cancelable=u;A.view=D;A.ctrlKey=s;A.altKey=d;A.shiftKey=B;A.metaKey=z;A.keyCode=(E>0)?E:F;x.fireEvent("on"+C,A)}else{throw C+" cant be simulated in "+navigator.userAgent}}},c=function(H,y,x){x=x||{};_.merge(x,{bubbles:true,cancelable:true,view:p,detail:1,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,screenX:0,screenY:0,clientX:0,clientY:0,button:0,relatedTarget:null},"without");var A=x.bubbles,I=x.cancelable,C=x.view,G=x.detail,v=x.ctrlKey,u=x.altKey,D=x.shiftKey,w=x.metaKey,d=x.screenX,J=x.screenY,F=x.clientX,E=x.clientY,s=x.button,z=x.relatedTarget;var B=null;if(l.createEvent){B=l.createEvent("MouseEvents");if(B.initMouseEvent){B.initMouseEvent(y,A,I,C,G,d,J,F,E,v,u,D,w,s,z)}else{B=l.createEvent("UIEvents");B.initEvent(y,A,I);B.view=C;B.detail=G;B.screenX=d;B.screenY=J;B.clientX=F;B.clientY=E;B.ctrlKey=v;B.altKey=u;B.metaKey=w;B.shiftKey=D;B.button=s;B.relatedTarget=z}if(z&&!B.relatedTarget){if(y==="mouseout"){B.toElement=z}else{if(y==="mouseover"){B.fromElement=z}}}H.dispatchEvent(B)}else{if(l.createEventObject){B=l.createEventObject();B.bubbles=A;B.cancelable=I;B.view=C;B.detail=G;B.screenX=d;B.screenY=J;B.clientX=F;B.clientY=E;B.ctrlKey=v;B.altKey=u;B.metaKey=w;B.shiftKey=D;switch(s){case 0:B.button=1;break;case 1:B.button=4;break;case 2:break;default:B.button=0}B.relatedTarget=z;H.fireEvent("on"+y,B)}else{throw y+" cant be simulated in "+navigator.userAgent}}},h=function(z,y,v){_.merge(v,{bubbles:true,cancelable:(y==="submit"),view:p,detail:1},"without");var u=v.bubbles,s=v.cancelable,d=v.view,x=v.detail;var w=null;if(l.createEvent){w=l.createEvent("UIEvents");w.initUIEvent(y,u,s,d,x);z.dispatchEvent(w)}else{if(l.createEventObject){w=l.createEventObject();w.bubbles=u;w.cancelable=s;w.view=d;w.detail=x;z.fireEvent("on"+y,w)}else{throw y+" cant be simulated in "+navigator.userAgent}}},m=function(y,C,F){_.merge(F,{bubbles:true,cancelable:true,detail:2,view:p,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,scale:1,rotation:0},"without");var w=F.bubbles,u=F.cancelable,x=F.detail,D=F.view,s=F.ctrlKey,d=F.altKey,B=F.shiftKey,z=F.metaKey,v=F.scale,E=F.rotation;var A;A=l.createEvent("GestureEvent");A.initGestureEvent(C,w,u,D,x,screenX,screenY,clientX,clientY,s,d,B,z,y,v,E);y.dispatchEvent(A)},g=function(J,y,w){if(y==="touchstart"||y==="touchmove"){if(!w.touches||!w.touches.length){throw"No touch object in touches."}}else{if(y==="touchend"){if(!w.changedTouches||!w.changedTouches.length){throw"No touch object in changedTouches."}}}_.merge(w,{bubbles:true,cancelable:(y!=="touchcancel"),detail:1,view:p,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false,screenX:0,screenY:0,clientX:0,clientY:0,scale:1,rotation:0},"without");var z=w.bubbles,L=w.cancelable,I=w.detail,B=w.view,K=w.scale,G=w.rotation,C=w.touches,H=w.targetTouches,x=w.changedTouches,u=w.ctrlKey,s=w.altKey,D=w.shiftKey,v=w.metaKey,d=w.screenX,M=w.screenY,F=w.clientX,E=w.clientY,L=y=="touchcancel"?false:w.cancelable;var A;if(l.createEvent){if(xui.browser.isAndroid){if(xui.browser.ver<4){A=l.createEvent("MouseEvents");A.initMouseEvent(y,z,L,B,I,d,M,F,E,u,s,D,v,0,J);A.touches=C;A.targetTouches=H;A.changedTouches=x}else{A=l.createEvent("TouchEvent");A.initTouchEvent(C,H,x,y,B,d,M,F,E,u,s,D,v)}}else{if(xui.browser.isIOS){if(xui.browser.ver>=2){A=l.createEvent("TouchEvent");A.initTouchEvent(y,z,L,B,I,d,M,F,E,u,s,D,v,C,H,x,K,G)}else{throw y+" cant be simulated in "+navigator.userAgent}}else{throw y+" cant be simulated in "+navigator.userAgent}}J.dispatchEvent(A)}else{throw y+" cant be simulated in "+navigator.userAgent}};n.$eventsforSimulation={click:c,dblclick:c,mouseover:c,mouseout:c,mouseenter:c,mouseleave:c,mousedown:c,mouseup:c,mousemove:c,pointerover:c,pointerout:c,pointerdown:c,pointerup:c,pointermove:c,MSPointerOver:c,MSPointerOut:c,MSPointerDown:c,MSPointerUp:c,MSPointerMove:c,keydown:k,keyup:k,keypress:k,submit:h,blur:h,change:h,focus:h,resize:h,scroll:h,select:h,touchstart:g,touchmove:g,touchend:g,touchcancel:g,gesturestart:m,gesturechange:m,gestureend:m}}});Class("xui.Date",null,{Initialize:function(){var g=this;g._mapKeys(g.$TIMEUNIT);var f=g._key1,c=g._key2,h=g.$UNIT={};for(var j=0,d=f.length;j<d;j++){h[f[j]]=1}for(var j=0,d=c.length;j<d;j++){h[c[j]]=1}h.w=1},Static:{_key1:"MILLISECOND,SECOND,MINUTE,HOUR,DAY,WEEK,MONTH,QUARTER,YEAR,DECADE,CENTURY".split(","),_key2:"ms,s,n,h,d,ww,m,q,y,de,c".split(","),$TIMEUNIT:{MILLISECOND:1,SECOND:1000,MINUTE:60000,HOUR:3600000,DAY:86400000,WEEK:604800000,MONTH:2592000000,QUARTER:7776000000,YEAR:31557600000,DECADE:315576000000,CENTURY:3155760000000},$TEXTFORMAT:{utciso:function(h,c,g){g=xui.Date._fix;return h.getUTCFullYear()+"-"+g(h.getUTCMonth()+1)+"-"+g(h.getUTCDate())+"T"+g(h.getUTCHours())+":"+g(h.getUTCMinutes())+":"+g(h.getUTCSeconds())+"Z"},iso:function(h,c,g){g=xui.Date._fix;return h.getFullYear()+"-"+g(h.getMonth()+1)+"-"+g(h.getDate())+"T"+g(h.getHours())+":"+g(h.getMinutes())+":"+g(h.getSeconds())},ms:function(f,c){return xui.Date._fix(f.getMilliseconds(),3)+(c?"":xui.wrapRes("date.MS"))},s:function(f,c){return f.getSeconds()+(c?"":xui.wrapRes("date.S"))},ss:function(f,c){return xui.Date._fix(f.getSeconds())+(c?"":xui.wrapRes("date.S"))},n:function(f,c){return f.getMinutes()+(c?"":xui.wrapRes("date.N"))},nn:function(f,c){return xui.Date._fix(f.getMinutes())+(c?"":xui.wrapRes("date.N"))},h:function(f,c){return f.getHours()+(c?"":xui.wrapRes("date.H"))},hh:function(f,c){return xui.Date._fix(f.getHours())+(c?"":xui.wrapRes("date.H"))},d:function(f,c){return f.getDate()+(c?"":xui.wrapRes("date.D"))},dd:function(f,c){return xui.Date._fix(f.getDate())+(c?"":xui.wrapRes("date.D"))},w:function(h,f,g){var c=(h.getDay()-g+7)%7;return f?c:xui.wrapRes("date.WEEKS."+c)},ww:function(g,c,f){return xui.Date.getWeek(g,f)+(c?"":xui.wrapRes("date.W"))},m:function(f,c){return(f.getMonth()+1)+(c?"":xui.wrapRes("date.M"))},mm:function(f,c){return xui.Date._fix(f.getMonth()+1)+(c?"":xui.wrapRes("date.M"))},q:function(f,c){return(parseInt((f.getMonth()+3)/3-1,10)+1)+(c?"":xui.wrapRes("date.Q"))},y:function(f,c){return f.getYear()+(c?"":xui.wrapRes("date.Y"))},yyyy:function(f,c){return f.getFullYear()+(c?"":xui.wrapRes("date.Y"))},de:function(f,c){return parseInt(f.getFullYear()/10,10)+(c?"":xui.wrapRes("date.DE"))},c:function(f,c){return parseInt(f.getFullYear()/100,10)+(c?"":xui.wrapRes("date.C"))},hn:function(f,c){return xui.wrapRes("date.HN-"+f.getHours()+"-"+f.getMinutes())},dhn:function(f,c){return xui.wrapRes("date.DHN-"+f.getDate()+"-"+f.getHours()+"-"+f.getMinutes())},mdhn:function(f,c){return xui.wrapRes("date.MDHN-"+(f.getMonth()+1)+"-"+f.getDate()+"-"+f.getHours()+"-"+f.getMinutes())},hns:function(f,c){return xui.wrapRes("date.HNS-"+f.getHours()+"-"+f.getMinutes()+"-"+f.getSeconds())},hnsms:function(f,c){return xui.wrapRes("date.HNSMS-"+f.getHours()+"-"+f.getMinutes()+"-"+f.getSeconds()+"-"+f.getMilliseconds())},yq:function(f,c){return xui.wrapRes("date.YQ-"+f.getFullYear()+"-"+(parseInt((f.getMonth()+3)/3-1,10)+1))},ym:function(f,c){return xui.wrapRes("date.YM-"+f.getFullYear()+"-"+(f.getMonth()+1))},md:function(f,c){return xui.wrapRes("date.MD-"+(f.getMonth()+1)+"-"+f.getDate())},ymd:function(f,c){return xui.wrapRes("date.YMD-"+f.getFullYear()+"-"+(f.getMonth()+1)+"-"+f.getDate())},ymd2:function(f,c){return xui.wrapRes("date.YMD2-"+f.getFullYear()+"-"+(f.getMonth()+1)+"-"+f.getDate())},ymdh:function(f,c){return xui.wrapRes("date.YMDH-"+f.getFullYear()+"-"+(f.getMonth()+1)+"-"+f.getDate()+"-"+f.getHours())},ymdhn:function(f,c){return xui.wrapRes("date.YMDHN-"+f.getFullYear()+"-"+(f.getMonth()+1)+"-"+f.getDate()+"-"+f.getHours()+"-"+f.getMinutes())},ymdhns:function(f,c){return xui.wrapRes("date.YMDHNS-"+f.getFullYear()+"-"+(f.getMonth()+1)+"-"+f.getDate()+"-"+f.getHours()+"-"+f.getMinutes()+"-"+f.getSeconds())},all:function(f,c){return xui.wrapRes("date.ALL-"+f.getFullYear()+"-"+(f.getMonth()+1)+"-"+f.getDate()+"-"+f.getHours()+"-"+f.getMinutes()+"-"+f.getSeconds()+"-"+f.getMilliseconds())}},$TIMEZONE:[{id:"Asia(East,North)",sub:[{id:"Brunei",v:"+0800"},{id:"Burma",v:"+0630"},{id:"Cambodia",v:"+0700"},{id:"China",v:"+0800"},{id:"China(HK,Macau)",v:"+0800"},{id:"China(TaiWan)",v:"+0800"},{id:"China(Urumchi)",v:"+0700"},{id:"East Timor",v:"+0800"},{id:"Indonesia",v:"+0700"},{id:"Japan",v:"+0900"},{id:"Kazakhstan(Aqtau)",v:"+0400"},{id:"Kazakhstan(Aqtobe)",v:"+0500"},{id:"Kazakhstan(Astana)",v:"+0600"},{id:"Kirghizia",v:"+0500"},{id:"Korea",v:"+0900"},{id:"Laos",v:"+0700"},{id:"Malaysia",v:"+0800"},{id:"Mongolia",v:"+0800",tag:"03L03|09L03"},{id:"Philippines",v:"+0800"},{id:"Russia(Anadyr)",v:"+1300",tag:"03L03|10L03"},{id:"Russia(Kamchatka)",v:"+1200",tag:"03L03|10L03"},{id:"Russia(Magadan)",v:"+1100",tag:"03L03|10L03"},{id:"Russia(Vladivostok)",v:"+1000",tag:"03L03|10L03"},{id:"Russia(Yakutsk)",v:"+0900",tag:"03L03|10L03"},{id:"Singapore",v:"+0800"},{id:"Thailand",v:"+0700"},{id:"Vietnam",v:"+0700"}]},{id:"Asia(South,West)",sub:[{id:"Afghanistan",v:"+0430"},{id:"Arab Emirates",v:"+0400"},{id:"Bahrain",v:"+0300"},{id:"Bangladesh",v:"+0600"},{id:"Bhutan",v:"+0600"},{id:"Cyprus",v:"+0200"},{id:"Georgia",v:"+0500"},{id:"India",v:"+0530"},{id:"Iran",v:"+0330",tag:"04 13|10 13"},{id:"Iraq",v:"+0300",tag:"04 13|10 13"},{id:"Israel",v:"+0200",tag:"04F53|09F53"},{id:"Jordan",v:"+0200"},{id:"Kuwait",v:"+0300"},{id:"Lebanon",v:"+0200",tag:"03L03|10L03"},{id:"Maldives",v:"+0500"},{id:"Nepal",v:"+0545"},{id:"Oman",v:"+0400"},{id:"Pakistan",v:"+0500"},{id:"Palestine",v:"+0200"},{id:"Qatar",v:"+0300"},{id:"Saudi Arabia",v:"+0300"},{id:"Sri Lanka",v:"+0600"},{id:"Syria",v:"+0200",tag:"04 13|10 13"},{id:"Tajikistan",v:"+0500"},{id:"Turkey",v:"+0200"},{id:"Turkmenistan",v:"+0500"},{id:"Uzbekistan",v:"+0500"},{id:"Yemen",v:"+0300"}]},{id:"North Europe",sub:[{id:"Denmark",v:"+0100",tag:"04F03|10L03"},{id:"Faroe Is.(DK)",v:"+0100"},{id:"Finland",v:"+0200",tag:"03L01|10L01"},{id:"Iceland",v:"+0000"},{id:"Jan Mayen(Norway)",v:"-0100"},{id:"Norwegian",v:"+0100"},{id:"Svalbard(NORWAY)",v:"+0100"},{id:"Sweden",v:"+0100",tag:"03L01|10L01"}]},{id:"Eastern Europe",sub:[{id:"Armenia",v:"+0400"},{id:"Austria",v:"+0100",tag:"03L01|10L01"},{id:"Azerbaijan",v:"+0400"},{id:"Belarus",v:"+0200",tag:"03L03|10L03"},{id:"Czech",v:"+0100"},{id:"Estonia",v:"+0200"},{id:"Georgia",v:"+0500"},{id:"Germany",v:"+0100",tag:"03L01|10L01"},{id:"Hungarian",v:"+0100"},{id:"Latvia",v:"+0200"},{id:"Liechtenstein",v:"+0100"},{id:"Lithuania",v:"+0200"},{id:"Moldova",v:"+0200"},{id:"Poland",v:"+0100"},{id:"Rumania",v:"+0200"},{id:"Russia(Moscow)",v:"+0300",tag:"03L03|10L03"},{id:"Slovakia",v:"+0100"},{id:"Switzerland",v:"+0100",tag:"03L01|10L01"},{id:"Ukraine",v:"+0200"},{id:"Ukraine(Simferopol)",v:"+0300"}]},{id:"Western Europe",sub:[{id:"Andorra",v:"+0100",tag:"03L01|10L01"},{id:"Belgium",v:"+0100",tag:"03L01|10L01"},{id:"Channel Is.(UK)",v:"+0000",tag:"03L01|10L01"},{id:"France",v:"+0100",tag:"03L01|10L01"},{id:"Gibraltar(UK)",v:"+0100",tag:"03L01|10L01"},{id:"Ireland",v:"+0000",tag:"03L01|10L01"},{id:"Isle of Man(UK)",v:"+0000",tag:"03L01|10L01"},{id:"Luxembourg",v:"+0100",tag:"03L01|10L01"},{id:"Monaco",v:"+0100"},{id:"Netherlands",v:"+0100",tag:"03L01|10L01"},{id:"United Kingdom",v:"+0000",tag:"03L01|10L01"}]},{id:"South Europe",sub:[{id:"Albania",v:"+0100"},{id:"Bosnia",v:"+0100"},{id:"Bulgaria",v:"+0200"},{id:"Croatia",v:"+0100"},{id:"Greece",v:"+0200",tag:"03L01|10L01"},{id:"Holy See",v:"+0100"},{id:"Italy",v:"+0100",tag:"03L01|10L01"},{id:"Macedonia",v:"+0100"},{id:"Malta",v:"+0100"},{id:"Montenegro",v:"+0100"},{id:"Portugal",v:"+0000",tag:"03L01|10L01"},{id:"San Marino",v:"+0100"},{id:"Serbia",v:"+0100"},{id:"Slovenia",v:"+0100"},{id:"Span",v:"+0100",tag:"03L01|10L01"}]},{id:"North America",sub:[{id:"Canada(AST)",v:"-0400",tag:"04F02|10L02"},{id:"Canada(CST)",v:"-0600",tag:"04F02|10L02"},{id:"Canada(EST)",v:"-0500",tag:"04F02|10L02"},{id:"Canada(MST)",v:"-0700",tag:"04F02|10L02"},{id:"Canada(NST)",v:"-0330",tag:"04F02|10L02"},{id:"Canada(PST)",v:"-0800",tag:"04F02|10L02"},{id:"Greenland(DK)",v:"-0300"},{id:"US(Central)",v:"-0600",tag:"03S02|11F02"},{id:"US(Eastern)",v:"-0500",tag:"03S02|11F02"},{id:"US(Mountain)",v:"-0700",tag:"03S02|11F02"},{id:"US(Pacific)",v:"-0800",tag:"03S02|11F02"},{id:"US(Alaska)",v:"-0900"},{id:"US(Arizona)",v:"-0700"}]},{id:"South America",sub:[{id:"Anguilla(UK)",v:"-0400"},{id:"Antigua&amp;Barbuda",v:"-0400"},{id:"Antilles(NL)",v:"-0400"},{id:"Argentina",v:"-0300"},{id:"Aruba(NL)",v:"-0400"},{id:"Bahamas",v:"-0500"},{id:"Barbados",v:"-0400"},{id:"Belize",v:"-0600"},{id:"Bolivia",v:"-0400"},{id:"Brazil(AST)",v:"-0500",tag:"10F03|02L03"},{id:"Brazil(EST)",v:"-0300",tag:"10F03|02L03"},{id:"Brazil(FST)",v:"-0200",tag:"10F03|02L03"},{id:"Brazil(WST)",v:"-0400",tag:"10F03|02L03"},{id:"British Virgin Is.(UK)",v:"-0400"},{id:"Cayman Is.(UK)",v:"-0500"},{id:"Chilean",v:"-0300",tag:"10F03|03F03"},{id:"Chilean(Hanga Roa)",v:"-0500",tag:"10F03|03F03"},{id:"Colombia",v:"-0500"},{id:"Costa Rica",v:"-0600"},{id:"Cuba",v:"-0500",tag:"04 13|10L03"},{id:"Dominican",v:"-0400"},{id:"Ecuador",v:"-0500"},{id:"El Salvador",v:"-0600"},{id:"Falklands",v:"-0300",tag:"09F03|04F03"},{id:"Grenada",v:"-0400"},{id:"Guadeloupe(FR)",v:"-0400"},{id:"Guatemala",v:"-0600"},{id:"Guiana(FR)",v:"-0300"},{id:"Guyana",v:"-0400"},{id:"Haiti",v:"-0500"},{id:"Honduras",v:"-0600"},{id:"Jamaica",v:"-0500"},{id:"Martinique(FR)",v:"-0400"},{id:"Mexico(Mazatlan)",v:"-0700"},{id:"Mexico(Tijuana)",v:"-0800"},{id:"Mexico(Mexico)",v:"-0600"},{id:"Montserrat(UK)",v:"-0400"},{id:"Nicaragua",v:"-0500"},{id:"Panama",v:"-0500"},{id:"Paraguay",v:"-0400",tag:"10F03|02L03"},{id:"Peru",v:"-0500"},{id:"Puerto Rico(US)",v:"-0400"},{id:"So. Georgia&amp;So. Sandwich Is.(UK)",v:"-0200"},{id:"St. Kitts&amp;Nevis",v:"-0400"},{id:"St. Lucia",v:"-0400"},{id:"St. Vincent&amp;Grenadines",v:"-0400"},{id:"Suriname",v:"-0300"},{id:"Trinidad&amp;Tobago",v:"-0400"},{id:"Turks&amp;Caicos Is.(UK)",v:"-0500"},{id:"Uruguay",v:"-0300"},{id:"Venezuela",v:"-0400"},{id:"Virgin Is.(US)",v:"-0400"}]},{id:"Africa(North)",sub:[{id:"Algeria",v:"+0100"},{id:"Egypt",v:"+0200",tag:"04L53|09L43"},{id:"Libyan",v:"+0200"},{id:"Morocco",v:"+0000"},{id:"Sudan",v:"+0200"},{id:"Tunisia",v:"+0100"}]},{id:"Africa(Western)",sub:[{id:"Benin",v:"+0100"},{id:"Burkina Faso",v:"+0000"},{id:"Canary Is.(SP)",v:"-0100"},{id:"Cape Verde",v:"-0100"},{id:"Chad",v:"+0100"},{id:"Gambia",v:"+0000"},{id:"Ghana",v:"+0000"},{id:"Guinea",v:"+0000"},{id:"Guinea-Bissau",v:"+0000"},{id:"Ivory Coast",v:"+0000"},{id:"Liberia",v:"+0000"},{id:"Mali",v:"+0000"},{id:"Mauritania",v:"+0000"},{id:"Niger",v:"+0100"},{id:"Nigeria",v:"+0100"},{id:"Senegal",v:"+0000"},{id:"Sierra Leone",v:"+0000"},{id:"Togo",v:"+0000"},{id:"Western Sahara",v:"+0000"}]},{id:"Africa(Central)",sub:[{id:"Cameroon",v:"+0100"},{id:"Cen.African Rep.",v:"+0100"},{id:"Congo,Democratic",v:"+0100"},{id:"Congo,Republic",v:"+0100"},{id:"Equatorial Guinea",v:"+0100"},{id:"Gabon",v:"+0100"},{id:"Sao Tome&amp;Principe",v:"+0000"}]},{id:"Africa(East)",sub:[{id:"Burundi",v:"+0200"},{id:"Comoros",v:"+0300"},{id:"Djibouti",v:"+0300"},{id:"Eritrea",v:"+0300"},{id:"Ethiopia",v:"+0300"},{id:"Kenya",v:"+0300"},{id:"Madagascar",v:"+0300"},{id:"Malawi",v:"+0200"},{id:"Mauritius",v:"+0400"},{id:"Mayotte(FR)",v:"+0300"},{id:"Mozambique",v:"+0200"},{id:"Reunion(FR)",v:"+0400"},{id:"Rwanda",v:"+0200"},{id:"Seychelles",v:"+0300"},{id:"Somalia",v:"+0300"},{id:"Tanzania",v:"+0300"},{id:"Uganda",v:"+0300"}]},{id:"Africa(South)",sub:[{id:"Angola",v:"+0100"},{id:"Botswana",v:"+0200"},{id:"Lesotho",v:"+0200"},{id:"Namibia",v:"+0200",tag:"09F03|04F03"},{id:"Saint Helena(UK)",v:"-0100"},{id:"South Africa",v:"+0200"},{id:"Swaziland",v:"+0200"},{id:"Zambia",v:"+0200"},{id:"Zimbabwe",v:"+0200"}]},{id:"Oceania",sub:[{id:"American Samoa(US)",v:"-1100"},{id:"Australia(Adelaide)",v:"+0930",sub:"10L03|03L03"},{id:"Australia(Brisbane)",v:"+1000"},{id:"Australia(Darwin)",v:"+0930"},{id:"Australia(Hobart)",v:"+1000",sub:"10L03|03L03"},{id:"Australia(Perth)",v:"+0800"},{id:"Australia(Sydney)",v:"+1000",sub:"10L03|03L03"},{id:"Cook Islands(NZ)",v:"-1000"},{id:"Eniwetok",v:"-1200"},{id:"Fiji",v:"+1200",sub:"11F03|02L03"},{id:"Guam",v:"+1000"},{id:"Hawaii(US)",v:"-1000"},{id:"Kiribati",v:"+1100"},{id:"Marshall Is.",v:"+1200"},{id:"Micronesia",v:"+1000"},{id:"Midway Is.(US)",v:"-1100"},{id:"Nauru Rep.",v:"+1200"},{id:"New Calednia(FR)",v:"+1100"},{id:"New Zealand",v:"+1200",sub:"10F03|04F63"},{id:"New Zealand(CHADT)",v:"+1245",sub:"10F03|04F63"},{id:"Niue(NZ)",v:"-1100"},{id:"Nor. Mariana Is.",v:"+1000"},{id:"Palau",v:"+0900"},{id:"Papua New Guinea",v:"+1000"},{id:"Pitcairn Is.(UK)",v:"-0830"},{id:"Polynesia(FR)",v:"-1000"},{id:"Solomon Is.",v:"+1100"},{id:"Tahiti",v:"-1000"},{id:"Tokelau(NZ)",v:"-1100"},{id:"Tonga",v:"+1300",tag:"10F63|04F63"},{id:"Tuvalu",v:"+1200"},{id:"Vanuatu",v:"+1100"},{id:"Western Samoa",v:"-1100"},{id:"Data Line",v:"-1200"}]}],_mapKeys:function(j){var f=this,h=f._key2,c=f._key1;for(var g=0,d=c.length;g<d;g++){j[h[g]]=j[c[g]]}},_validUnit:function(c){return this.$UNIT[c]?c:"d"},_date:function(c,d){return _.isDate(c)?c:((c||c===0)&&isFinite(c))?new Date(parseInt(c,10)):_.isDate(d)?d:new Date},_isNumb:function(c){return typeof c=="number"&&isFinite(c)},_numb:function(c,d){return this._isNumb(c)?c:this._isNumb(d)?d:0},_timeZone:-((new Date).getTimezoneOffset()/60),get:function(f,g,d){var c=this;f=c._date(f);g=c._validUnit(g);d=c._numb(d);var h=arguments.callee.map||(arguments.callee.map={ms:function(i){return i.getMilliseconds()},s:function(i){return i.getSeconds()},n:function(i){return i.getMinutes()},h:function(i){return i.getHours()},d:function(i){return i.getDate()},ww:function(j,i){return xui.Date.getWeek(j,i)},w:function(j,i){return(7+j.getDay()-i)%7},m:function(i){return i.getMonth()},q:function(i){return parseInt((i.getMonth()+3)/3-1,10)},y:function(i){return i.getFullYear()},de:function(i){return parseInt(i.getFullYear()/10,10)},c:function(i){return parseInt(i.getFullYear()/100,10)}});return h[g](f,d)},_fix:function(g,c,f){c=c||2;f=f||"0";g+="";if(g.length<c){for(var d=g.length;d<c;d++){g=f+g}}return g},add:function(d,g,h){var c=this,f=c.$TIMEUNIT,j,i;d=c._date(d);g=c._validUnit(g);if(!(j=arguments.callee.map)){j=arguments.callee.map={MILLISECOND:function(k,l){k.setTime(k.getTime()+l*f.ms)},SECOND:function(k,l){k.setTime(k.getTime()+l*f.s)},MINUTE:function(k,l){k.setTime(k.getTime()+l*f.n)},HOUR:function(k,l){k.setTime(k.getTime()+l*f.h)},DAY:function(k,l){k.setTime(k.getTime()+l*f.d)},WEEK:function(k,l){k.setTime(k.getTime()+l*f.ww)},MONTH:function(m,n){var l=m.getDate(),k;n=m.getMonth()+n;this.YEAR(m,Math.floor(n/12));m.setMonth((n%12+12)%12);if((k=m.getDate())!=l){this.DAY(m,-k)}},QUARTER:function(k,l){this.MONTH(k,l*3)},YEAR:function(m,n){var l=m.getDate(),k;m.setFullYear(m.getFullYear()+n);if((k=m.getDate())!=l){this.DAY(m,-k)}},DECADE:function(k,l){this.YEAR(k,10*l)},CENTURY:function(k,l){this.YEAR(k,100*l)}};c._mapKeys(j)}j[g](i=new Date(d),h);return i},diff:function(g,c,i,f){var d=this;g=d._date(g);c=d._date(c);i=d._validUnit(i);f=d._numb(f);var h=d.$TIMEUNIT,j;if(!(j=arguments.callee.map)){j=arguments.callee.map={MILLISECOND:function(l,k){return k.getTime()-l.getTime()},SECOND:function(l,k){var l=d.getTimSpanStart(l,"s"),k=d.getTimSpanStart(k,"s"),m=k.getTime()-l.getTime();return m/h.s},MINUTE:function(l,k){var l=d.getTimSpanStart(l,"n"),k=d.getTimSpanStart(k,"n"),m=k.getTime()-l.getTime();return m/h.n},HOUR:function(l,k){var l=d.getTimSpanStart(l,"h"),k=d.getTimSpanStart(k,"h"),m=k.getTime()-l.getTime();return m/h.h},DAY:function(l,k){var l=d.getTimSpanStart(l,"d",1),k=d.getTimSpanStart(k,"d",1),m=k.getTime()-l.getTime();return m/h.d},WEEK:function(m,k,l){var m=d.getTimSpanStart(m,"ww",1,l),k=d.getTimSpanStart(k,"ww",1,l),n=k.getTime()-m.getTime();return n/h.ww},MONTH:function(l,k){return(k.getFullYear()-l.getFullYear())*12+(k.getMonth()-l.getMonth())},QUARTER:function(l,k){return(k.getFullYear()-l.getFullYear())*4+parseInt((k.getMonth()-l.getMonth())/3,10)},YEAR:function(l,k){return parseInt((k.getFullYear()-l.getFullYear()),10)},DECADE:function(l,k){return parseInt((k.getFullYear()-l.getFullYear())/10,10)},CENTURY:function(l,k){return parseInt((k.getFullYear()-l.getFullYear())/100,10)}};d._mapKeys(j)}return j[i](new Date(g),new Date(c),f)},getTimSpanStart:function(f,j,i,c){var m=this,k=m.$TIMEUNIT,d,l;f=m._date(f);j=m._validUnit(j);c=m._numb(c);i=m._numb(i,1);if(!(d=arguments.callee.map)){var h=function(n){n.setMilliseconds(0);n.setSeconds(0);n.setMinutes(0);n.setHours(0)},g=function(n){h(n);n.setDate(1);n.setMonth(0)};d=arguments.callee.map={MILLISECOND:function(p,q){var n=p.getMilliseconds();p.setMilliseconds(n-(n%q))},SECOND:function(p,q){p.setMilliseconds(0);var n=p.getSeconds();p.setSeconds(n-(n%q))},MINUTE:function(p,q){p.setMilliseconds(0);p.setSeconds(0);var n=p.getMinutes();p.setTime(p.getTime()-(n%q)*k.n)},HOUR:function(p,q){p.setMilliseconds(0);p.setSeconds(0);p.setMinutes(0);var n=p.getHours();p.setHours(n-(n%q))},DAY:function(p,q){h(p);var n=p.getDate();p.setDate(n-(n%q))},WEEK:function(r,s,q){h(r);var v=(r.getDay()+7-q)%7,u,n,p=new Date();r.setTime(r.getTime()-v*k.d);g(p);p.setFullYear(r.getFullYear());u=(p.getDay()+7-q)%7;p.setTime(p.getTime()-u*k.d);n=(r.getTime()-p.getTime())/k.d/7;r.setTime(r.getTime()-(n%s)*k.ww)},MONTH:function(p,q){h(p);p.setDate(1);var n=p.getMonth();p.setMonth(n-(n%q))},QUARTER:function(n,p){p=m._numb(p,1);return this.MONTH(n,p*3)},YEAR:function(p,q){g(p);var n=p.getFullYear();p.setFullYear(n-(n%q))},DECADE:function(n,p){g(n);n.setFullYear(Math.floor(n.getFullYear()/10)*10)},CENTURY:function(n,p){g(n);n.setFullYear(Math.floor(n.getFullYear()/100)*100)}};m._mapKeys(d)}d[j](l=new Date(f),i,c);return l},getTimSpanEnd:function(f,g,h,d){var c=this;f=c._date(f);g=c._validUnit(g);d=c._numb(d);h=c._numb(h,1);var j=f.getTime(),i=c.getTimSpanStart(f,g,h,d);if(i.getTime()<j){i=c.add(i,g,h)}return i},offsetTimeZone:function(f,g,d){var c=this;f=c._date(f);return new Date(f.getTime()+(d?-1:1)*(g-c._timeZone)*c.$TIMEUNIT.h)},getWeek:function(f,d){var c=this,g,h;f=c._date(f);d=c._numb(d),h=f.getFullYear();f=c.add(c.getTimSpanStart(f,"ww",1,d),"d",6);if(f.getFullYear()!=h){return 1}g=c.getTimSpanStart(f,"y",1);g=c.add(c.getTimSpanStart(g,"ww",1,d),"d",6);return c.diff(g,f,"ww")+1},parse:function(u,z){var q;if(_.isDate(u)){q=u}else{u+="";if(isFinite(u)){q=new Date(parseInt(u,10))}else{if(typeof z=="string"){var y=z.split(/[^ymdhns]+/),w=u.split(/[^0-9]+/),d={y:0,m:0,d:0,h:0,n:0,s:0,ms:0};if(y.length&&y.length===w.length){for(var k=0;k<y.length;k++){if(y[k].length){d[y[k]=="ms"?"ms":y[k].charAt(0)]=parseInt(w[k].replace(/^0*/,""),10)}}q=new Date(d.y,d.m-1,d.d,d.h,d.n,d.s,d.ms)}else{q=null}}else{var B=this,x,s=arguments.callee,j=s.dp||(s.dp={FullYear:2,Month:4,Date:6,Hours:8,Minutes:10,Seconds:12,Milliseconds:14}),p=u.match(s.iso||(s.iso=/^((-\d+|\d{4,})(-(\d{2})(-(\d{2}))?)?)?T((\d{2})(:(\d{2})(:(\d{2})(\.(\d{1,3})(\d)?\d*)?)?)?)?(([+-])(\d{2})((\d{2}))?|Z)?$/)),g=new Date(0);if(p){if(p[4]){p[4]--}if(p[15]>=5){p[14]++}x=p[16]||p[18]?"UTC":"";for(var k in j){var A=p[j[k]];if(!A){continue}g["set"+x+k](A);if(g["get"+x+k]()!=p[j[k]]){q=null}}if(p[18]){var l=Number(p[17]+p[18]),f=Number(p[17]+(p[20]||0));g.setUTCMinutes(g.getUTCMinutes()+(l*60)+f)}q=g}else{if(/^((-\d+|\d{4,})(-(\d{1,2})(-(\d{1,2}))))/.test(u)){u=u.replace(/-/g,"/")}var c=Date.parse(u);q=c?g.setTime(c)&&g:null}}}}return q===null?null:isFinite(+q)?q:null},getText:function(f,g,d){var c=this,h=c.$TEXTFORMAT;f=c._date(f);d=c._numb(d);return h[g]?h[g](f,false,d):g},format:function(f,h,d){var c=this,g=c.$TEXTFORMAT;f=c._date(f);d=c._numb(d);return h.replace(/(utciso|iso|yyyy|mm|ww|dd|hh|nn|ss|ms|de|c|y|q|m|w|d|h|n|s)/g,function(j,i){return g[i]?g[i](f,true,d):i})}}});Class("xui.CSS",null,{Static:{_r:xui.browser.ie?"rules":"cssRules",_baseid:"xui:css:base",_firstid:"xui:css:first",_lastid:"xui:css:last",_reg1:/\.(\w+)\[CLASS~="\1"\]/g,_reg2:/\[ID"([^"]+)"\]/g,_reg3:/\*([.#])/g,_reg4:/\s+/g,_reg5:/\*\|/g,_reg6:/(\s*,\s*)/g,_rep:function(d){var c=this;return d.replace(c._reg1,".$1").replace(c._reg2,"#$1").replace(c._reg3,"$1").replace(c._reg4," ").replace(c._reg5,"").replace(c._reg6,",").toLowerCase()},_appendSS:function(d,c,h){var f=document.createElement("style");f.type="text/css";if(h){f.id=h}if(xui.browser.ie&&f.styleSheet&&"cssText" in f.styleSheet){f.styleSheet.cssText=c||""}else{try{f.appendChild(document.createTextNode(c||""))}catch(g){f.styleSheet.cssText=c||""}}d.appendChild(f);return f},_createCss:function(f,i,n){var l=this,m=this._getHead(),h=l._firstid,j=l._lastid,g,k;g=document.createElement("style");g.type="text/css";g.id=f;if(i){if(xui.browser.ie&&g.styleSheet&&"cssText" in g.styleSheet){g.styleSheet.cssText=i||""}else{try{g.appendChild(document.createTextNode(i||""))}catch(d){g.styleSheet.cssText=i||""}}}if(!n){k=document.getElementById(h)||m.firstChild;while((k=k.nextSibling)&&!/^(script|link|style)$/i.test(""+k.tagName)){}if(k){m.insertBefore(g,k)}else{if(k=document.getElementById(j)){m.insertBefore(g,k)}else{m.appendChild(g)}}}else{m.appendChild(g)}return g},_getCss:function(f,c,d){return document.getElementById(f)||this._createCss(f,c,d)},_getBase:function(){return this._getCss(this._baseid)},_getFirst:function(){return this._getCss(this._firstid)},_getLast:function(){return this._getCss(this._lastid,null,true)},_getHead:function(){return this._head||(this._head=document.getElementsByTagName("head")[0]||document.documentElement)},_check:function(){if(!xui.browser.ie){return}var h=0;for(var g=this._getHead(),f=0,d=g.childNodes,c;c=d[f++];){if(c.type=="text/css"){h++}}return h>20},get:function(j,h){for(var g=this._getHead(),f=0,d=g.childNodes,c;c=d[f++];){if(c.type=="text/css"&&j in c&&c[j]==h){return c}}},addStyleSheet:function(c,k,d){var i,g=this,f=g._getHead(),h=function(l,r,m){var q=document.createElement("style");q.type="text/css";if(r){q.id=r}if(xui.browser.ie&&q.styleSheet&&"cssText" in q.styleSheet){q.styleSheet.cssText=l||""}else{try{q.appendChild(document.createTextNode(l||""))}catch(n){q.styleSheet.cssText=l||""}}if(m===-1){if(f.firstChild){f.insertBefore(q,f.firstChild)}else{f.appendChild(q)}}else{if(m===1){f.appendChild(q)}else{f.insertBefore(q,m?g._getLast():g._getBase())}}q.disabled=true;q.disabled=false;return q},j=function(l,m){var n=m?g._getLast():g._getBase();n.styleSheet.cssText+=l;return n};if(k&&(k=k.replace(/[^\w\-\_\.\:]/g,"_"))&&(i=g.get("id",k))){return i}if(g._check()){return j(c,d)}else{return h(c,k,d)}},includeLink:function(d,j,h,c){var i,g=this,f=g._getHead();if(d&&(i=g.get("href",d))){}else{i=document.createElement("link");i.type="text/css";i.rel="stylesheet";i.href=d;if(j){i.id=j}i.media="all";_.each(c,function(l,k){i.setAttribute(k,l)})}f.insertBefore(i,h?g._getBase():g._getLast());i.disabled=true;i.disabled=false;return i},remove:function(f,d){var c=this._getHead();if(d=this.get(f,d)){d.disabled=true;c.removeChild(d)}},replaceLink:function(c,l,h,d){var i=this,j=i._getHead(),g={},f,k;g[l]=d;f=i.includeLink(c,null,false,g);if(k=i.get(l,h)){j.replaceChild(f,k)}f.disabled=true;f.disabled=false},_build:function(c,g,d){var f="";_.each(g,function(j,h){f+=h.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+j+";"});return d?f:c+"{"+f+"}"},setStyleRules:function(g,n,d){var m=this,s=true,f=document.styleSheets,l,i,c,q,j,k,r,p;g=_.str.trim(g.replace(/\s+/g," "));if(!(n&&d)){q=g.toLowerCase();_.arr.each(_.toArr(f),function(u){try{u[m._r]}catch(h){return}_.arr.each(_.toArr(u[m._r]),function(w,x){if(!w.selectorText){return}if(w.disabled){return}c=m._rep(w.selectorText);p=c.split(",");if(!n){s=false;if(_.arr.indexOf(p,q)!=-1&&p.length>1){p=_.arr.removeFrom(p,_.arr.indexOf(p,q)).join(",");r=w.cssText.slice(w.cssText.indexOf("{")+1,w.cssText.lastIndexOf("}"));if(u.insertRule){u.insertRule(p+"{"+r+"}",u[m._r].length)}else{if(u.addRule){u.addRule(p,r||"{}")}}if(u.deleteRule){u.deleteRule(x)}else{u.removeRule(x)}u.disabled=true;u.disabled=false}else{if(c==q){if(u.deleteRule){u.deleteRule(x)}else{u.removeRule(x)}u.disabled=true;u.disabled=false}}}else{if(c==q){l=w;return false}if(_.arr.indexOf(p,q)!=-1){i=w;return false}}},null,true);if(l){s=false;try{_.each(n,function(w,v){v=v.replace(/(-[a-z])/gi,function(x,y){return y.charAt(1).toUpperCase()});l.style[v]=typeof w=="function"?w(l.style[v]):w})}catch(h){}u.disabled=true;u.disabled=false;return false}else{if(i){s=false;u.insertRule(m._build(g,n),u[m._r].length);u.disabled=true;u.disabled=false;return false}}},null,true)}if(d||s){m._addRules(g,n)}return m},$getCSSValue:function(p,h,u){var x=this,q=x._r,f=document.styleSheets,n=f.length,g,d,y,s,r,c;p=_.str.trim(p.replace(/\s+/g," "));for(s=n-1;s>=0;s--){try{d=f[s][q]}catch(w){continue}if(!f[s].disabled){g=(d=f[s][q]).length;for(r=g-1;r>=0;r--){if((y=d[r]).selectorText&&!y.disabled){c=x._rep(y.selectorText);if(_.arr.indexOf(c.split(/\s*,\s*/g),p)!=-1){if(!u){return(y.style[h]||"").replace(/^\"|\"$/g,"")}else{if(u===y.style[h]){return f[s].ownerNode||f[s].owningElement}}}}}}}},_addRules:function(c,f){var d=this,g=d._getLast(),h=g.sheet||g.styleSheet;if(h.insertRule){h.insertRule(d._build(c,f),h[d._r].length)}else{if(h.addRule){h.addRule(c,d._build(c,f,true)||"{}")}}g.disabled=true;g.disabled=false;return d},resetCSS:function(){var c=xui.browser,d="html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,ar{font-style:normal;font-weight:normal;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}sup{vertical-align:text-top;}sub{vertical-align:text-bottom;}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit;}input,textarea,select{*font-size:100%;}"+(c.isWebKit?"input,textarea,select{-webkit-user-select: auto;}":"")+"legend{color:#000;}span{outline-offset:-1px;"+(c.gek?c.ver<3?((c.ver<3?"-moz-outline-offset:-1px !important;":"")+"display:-moz-inline-block;display:-moz-inline-box;display:inline-block;"):"display:inline-block;":c.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(c.ie?"zoom:1;":"")+"}";this.addStyleSheet(d,"xui.CSSreset")}},Initialize:function(){var c=xui.browser,d=".xui-node{margin:0;padding:0;line-height:1.22em;}.xui-wrapper{color:#000;font-family:arial,helvetica,clean,sans-serif;font-style:normal;font-weight:normal;font-size:12px;vertical-align:middle;}.xui-cover{cursor:wait;background:url("+xui.ini.img_bg+") transparent repeat;font-size:12px;}.xui-node-table{border-collapse:collapse;border-spacing:0;empty-cells:show;font-size:inherit;"+(c.ie?"font:100%;":"")+"}.xui-node-fieldset,.xui-node-img{border:0;}.xui-node-ol,.xui-node-ul,.xui-node-li{list-style:none;}.xui-node-caption,.xui-node-th{text-align:left;}.xui-node-th{font-weight:normal;}.xui-node-q:before,.xui-node-q:after{content:'';}.xui-node-abbr,.xui-node-acronym{border:0;font-variant:normal;}.xui-node-sup{vertical-align:text-top;}.xui-node-sub{vertical-align:text-bottom;}.xui-node-input,.xui-node-textarea,.xui-node-select{cursor:text;font-family:inherit;font-size:inherit;font-weight:inherit;"+(c.ie?"font-size:100%;":"")+"}.xui-node-del,.xui-node-ins{text-decoration:none;}.xui-node-pre,.xui-node-code,.xui-node-kbd,.xui-node-samp,.xui-node-tt{font-family:monospace;"+(c.ie?"font-size:108%;":"")+"line-height:100%;}.xui-node-select,.xui-node-input,.xui-node-button,.xui-node-textarea{font:99% arial,helvetica,clean,sans-serif;border-width:1px;}.xui-node-a{cursor:pointer;color:#0000ee;text-decoration:none;}.xui-node-a:hover{color:red}"+(c.gek?(".xui-node-a:focus{outline-offset:-1px;"+(c.ver<3?"-moz-outline-offset:-1px !important":"")+"}"):"")+".xui-node-span, .xui-node-div{border:0;font-size:12px;}.xui-node-span, .xui-wrapper span{outline-offset:-1px;"+(c.gek?c.ver<3?((c.ver<3?"-moz-outline-offset:-1px !important;":"")+"display:-moz-inline-block;display:-moz-inline-box;display:inline-block;"):"display:inline-block;":c.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(c.ie?"zoom:1;":"")+"}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6{font-size:100%;font-weight:normal;}.xui-node-h1{font-size:138.5%;}.xui-node-h2{font-size:123.1%;}.xui-node-h3{font-size:108%;}.xui-node-h1,.xui-node-h2,.xui-node-h3{margin:1em 0;}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6,.xui-node-strong{font-weight:bold;}.xui-node-em{font-style:italic;}.xui-node-legend{color:#000;}"+(c.ie6?("#"+xui.$localeDomId+"{vertical-align:baseline;}"):"")+".xui-nooutline:focus{outline:0;}.xui-busy{background-image:url(data:image/gif;base64,R0lGODlhEAAQAOMAAAQCBHx+fLy+vOTm5ERCRMTGxISGhAQGBISChMTCxOzq7FRSVMzKzP7+/gAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQANACwAAAAAEAAQAAAESrDJSau9OOvNe1VFonCFIBRcIiQJp7BjNySDxRjMNAQBUk+FAwCAaiR6gURhsUgYhgCEZIDgDRYEwqIALTZmNay2UTB4KwKmwBIBACH5BAkJAA8ALAAAAAAQABAAgwQCBHx+fLy+vERCRKSmpOTi5BQWFNTW1KyurIyKjMTCxERGRPTy9BwaHLSytP7+/gRE8MlJq7046827n47RIJwBAEZ5phsikg9TMNZBHBMj7PR0DEDco7ATFA6JhA04IEh0AgUjEQgomcLY7EG1PmzZClJpiQAAIfkECQkADQAsAAAAABAAEAAABEewyUmrtcywWxn4BTcZH4CIUlGGaFMYbOsuSywuBLHIuC4LNEFrkBjIBoEAwmhRFBKKRDKQuBQEgsIAoWRWEoJEleitRKGWCAAh+QQJCQAPACwAAAAAEAAQAIMEAgR8fny8vrxEQkSkpqTk4uQUFhTU1tSsrqyMiozEwsRERkT08vQcGhy0srT+/v4ERfDJ6UxDM2sDgHkHcWgT5x1DOpKIhRDpQJAaqtK1iJNHkqy7RyIQSAQlw+IR5APiGAXGkiGoSoOFqqBwpAoU1yA0vJxEAAAh+QQJCQANACwAAAAAEAAQAAAES7DJWdYqMzdmWFsEsTRDMkwMoFbhMgQBcjaGCiCCJQhwkEgFG2YyQMRmjYJhmCkhNVBFoqCAQgu7nzWTECS0W4k0UQ2bz+i0en2OAAAh+QQJCQAPACwAAAAAEAAQAIMEAgR8fny8vrxEQkSkpqTk4uQUFhTU1tSsrqyMiozEwsRERkT08vQcGhy0srT+/v4ERfDJeVI6M79DcApB8jAFQy3DUIEJI7zmQ6RDZx3FKxTSQWMTl0AR23Q0o5LEYWggkEgDAGCAaqRUawbRfGq/4LB4TC5DIwAh+QQJCQANACwAAAAAEAAQAAAER7DJqUpSM7eRRkuCUGjSgAQIJyQJ+QXwxWLkAKeuxnm5VCyLVk+yIBAWQ6IRmRQABclJwcCIMg4AwGhoyAIQyYJ3O5ySo9EIACH5BAkJAA8ALAAAAAAQABAAgwQCBHx+fLy+vERCRKSmpOTi5BQWFNTW1KyurIyKjMTCxERGRPTy9BwaHLSytP7+/gRG8MlJ62SFWcuE19tUeEIRXp4Cng+2hkeSHKyUBEFSP3e+x7Od5ECg1Q6LwcB4IigHBETD4NgcngcDAGCAFR9a7g5hMCAsEQA7);background-repeat:no-repeat;background-position:center center;}.xui-err{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAAJdnBBZwAAABAAAAAQAFzGrcMAAADdSURBVCjPfdGxTsJQGIbhpw20GgN1IZQBDQnGxvu/FEU3IjEBB5SKUsGkdTiCYeGb/pw803uixum1iMJ1KZdp40dpYQWNqBERuXItRY1YrPJspmm0wNAYlZkvdPR1jTVmtJAZgUhliaWFQs9IqYwxkKhUUnf64NuTD6kBMTK8mKgkigNZaGQBJGqfVh6PyFotCWC/NxMbiUL+/xhjJ9Y5kEriVk9HbBdAKZI7A+8ebLQVhigDmNvqKg7k3kZbamceOpSmbvSkXq1xIfSfKh2lPlf/pWa7Tx3A6c86vV+v4FNOkQDWwAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMC0wMi0xMVQxMTo1MDowOC0wNjowMNYQZfsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMDYtMDUtMDVUMTM6MjI6NDAtMDU6MDC/5P4aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-position:center center;}.xui-cls-wordwrap{white-space: pre-wrap;"+(c.gek?"white-space: -moz-pre-wrap;":"")+(c.opr?"white-space: -pre-wrap;":"")+(c.opr?"white-space: -o-pre-wrap;":"")+(c.ie?"word-wrap: break-word;":"")+"}";this.addStyleSheet(d,"xui.CSS")}});Class("xui.DomProfile","xui.absProfile",{Constructor:function(d){var c=arguments.callee.upper;if(c){c.call(this)}c=null;xui.$cache.profileMap[this.domId=d]=this},Instance:{__gc:function(){delete xui.$cache.profileMap[this.domId]},_getEV:function(d,j,f){var h=xui.$cache.profileMap[j];if(h&&(h=h.events)&&(h=h[f])){for(var g=0,c=h.length;g<c;g++){if(typeof h[h[g]]=="function"){d[d.length]=h[h[g]]}}}}},Static:{get:function(c){return xui.$cache.profileMap[c]},$abstract:true}});Class("xui.Dom","xui.absBox",{Instance:{get:function(g){var f=xui.$cache.domPurgeData,j=this._nodes,k;if(_.isNumb(g)){return(k=j[g])&&(k=f[k])&&k.element}else{var d=[],c=j.length;for(var h=0;h<c;h++){d[d.length]=(k=f[j[h]])&&k.element}return d}},each:function(d){var k=this,f=xui.$cache.domPurgeData,m;for(var h=0,g=k._nodes,c=g.length;h<c;h++){if((m=f[g[h]])&&(m=m.element)){if(false===d.call(k,m,h)){break}}}m=null;return k},serialize:function(){var c=[];this.each(function(d){c[c.length]=d.id});return"xui(['"+c.join("','")+"'])"},xid:function(){return xui.getId(this.get(0))},id:function(g,h){var f,d,c=xui.$cache.profileMap;if(typeof g=="string"){return this.each(function(i){if((d=i.id)!==g){if(!h&&(f=c[d])){c[g]=f;delete c[d]}i.id=g}})}else{return this.get(0).id}},$sum:function(d,f){var c=[],h,g;this.each(function(i){h=d.apply(i,f||[]);if(h){if(_.isArr(h)){for(g=0;i=h[g];g++){c[c.length]=i}}else{c[c.length]=h}}});return xui(c)},children:function(){return this.$sum(function(){return _.toArr(this.childNodes)})},clone:function(c){return this.$sum(function(){var j=this.cloneNode(c?true:false),f=j.getElementsByTagName("*"),h=xui.browser.ie&&xui.browser.ver<9,d=0,g;if(h){j.removeAttribute("$xid")}else{delete j.$xid}for(;g=f[d];d++){if(h){g.removeAttribute("$xid")}else{delete g.$xid}}return j},arguments)},$iterator:function(f,d,h,c,g){return this.$sum(function(r,k,v,s,u){var x=arguments.callee;if(typeof s!="function"){var l=s||0;s=function(y,m){return m==l}}var p=0,j,i=this,q=0,w;while(i){if(i.nodeType==1){if(s(i,p++)===true){break}}if(r=="x"){i=k?i.nextSibling:i.previousSibling}else{if(r=="y"){i=k?x.call(k===1?i.lastChild:i.firstChild,"x",(k!==1),true,0,u):i.parentNode}else{v=_.isBool(v)?v:true;j=null;i=k?(w=v&&i.firstChild)?w:(w=i.nextSibling)?w:(j=i.parentNode):(w=v&&i.lastChild)?w:(w=i.previousSibling)?w:(j=i.parentNode);if(j){while(!(j=k?i.nextSibling:i.previousSibling)){i=i.parentNode;if(!i){if(q){return null}else{q=true;j=k?document.body.firstChild:document.body.lastChild;break}}}i=j}v=true}}}return i},arguments)},query:function(d,n,m){d=d||"*";var k="getElementsByTagName",l=arguments.callee,j=l.f1||(l.f1=function(q,p,u){var s=this[k](q),f=[];if(u.test(this[p])){f[f.length]=this}for(var v,r=0;v=s[r];r++){if(u.test(v[p])){f[f.length]=v}}return f}),i=l.f2||(l.f2=function(q,p,u){var s=this[k](q),f=[];if(this[p]==u){f[f.length]=this}for(var v,r=0;v=s[r];r++){if(v[p]==u){f[f.length]=v}}return f}),h=l.f3||(l.f3=function(q,p,u){var s=this[k](q),f=[];if(this[p]){f[f.length]=this}for(var v,r=0;v=s[r];r++){if(v[p]){f[f.length]=v}}return f}),g=l.f4||(l.f4=function(f){return _.toArr(this[k](f))}),c=l.f5||(l.f5=function(q,p){var s=this[k](q),f=[];if(p(this)){f[f.length]=this}for(var u,r=0;u=s[r];r++){if(p(u)){f[f.length]=u}}return f});return this.$sum(n?typeof n=="function"?c:m?_.isReg(m)?j:i:h:g,[d,n,m])},$add:function(s,q,l){if(_.isHash(q)||_.isStr(q)){q=xui.create(q)}if(l){l=xui(q);q=this}else{q=xui(q);l=this}if(q._nodes.length){var n=l.get(0),u=q.get(),h=xui.Dom,c=xui.$cache.profileMap,r,x,d,k,f,g,w,x,m=[];q.each(function(i){x=(d=i.id)&&(d=c[d])&&d.LayoutTrigger&&(n===xui("body").get(0)||h.getStyle(n,"display")!="none")&&d.LayoutTrigger;if(x){m.push([x,d])}});if(u.length==1){r=u[0]}else{r=document.createDocumentFragment();for(k=0;f=u[k];k++){r.appendChild(f)}}s.call(n,r);for(k=0;f=m[k];k++){for(g=0;w=f[0][g];g++){w.call(f[1])}if(f[1].onLayout){f[1].boxing().onLayout(f[1])}}m.length=0;n=f=r=null}return this},prepend:function(c,d){return this.$add(function(f){if(this.previousSibling!=f){if(this.firstChild){this.insertBefore(f,this.firstChild)}else{this.appendChild(f)}}},c,d)},append:function(d,f,c){return this.$add(function(g){if(c||this!=g.parentNode){this.appendChild(g)}},d,f)},addPrev:function(c,d){return this.$add(function(f){if(this.firstChild!=f){this.parentNode.insertBefore(f,this)}},c,d)},addNext:function(c,d){return this.$add(function(f){if(this.nextSibling!=f){if(this.nextSibling){this.parentNode.insertBefore(f,this.nextSibling)}else{this.parentNode.appendChild(f)}}},c,d)},replace:function(k,j){if(_.isHash(k)||_.isStr(k)){k=xui.create(k)}k=xui(k);var f,g,m=this.get(0),h=k.get(),d=h.length;if(d>0&&(f=h[d-1])){m.parentNode.replaceChild(f,m);for(g=0;g<d-1;g++){f.parentNode.insertBefore(h[g],f)}if(j){this.remove()}}m=f=null;return k},swap:function(f){var c=this,d=xui.Dom.getEmptyDiv().html("*",false);if(_.isHash(f)||_.isStr(f)){f=xui.create(f)}f=xui(f);c.replace(d,false);f.replace(c,false);d.replace(f,false);d.get(0).innerHTML="";document.body.insertBefore(d.get(0),document.body.firstChild);return c},remove:function(d){var f=xui.$getGhostDiv();if(d===false){this.each(function(g,c){if(g.raphael&&g.remove){g.remove()}else{if(g.parentNode){g.parentNode.removeChild(g)}}})}else{this.each(function(c){f.appendChild(c)});xui.$purgeChildren(f);f.innerHTML="";f=null}return this},empty:function(c){return this.each(function(d){xui([d]).html("",c)})},html:function(n,d,l){var q="",p,h=this.get(0);d=d!==false;if(n!==undefined){if(h){if(h.nodeType==3){h.nodeValue=n}else{if(!h.firstChild&&n===""){return this}if(d){xui.$purgeChildren(h)}var k;if(l){var j=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,i=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,g=/\ssrc=([\'\"])(.*?)\1/i,f,m,c;k=[];while((f=j.exec(n))){m=f[1];c=m?m.match(g):false;if(c&&c[2]){k.push([1,c[2]])}else{if(f[2]&&f[2].length>0){k.push([2,f[2]])}}}n=n.replace(i,"")}h.innerHTML=n;if(k&&k.length>0){_.arr.each(k,function(r){if(r[0]==1){xui.include(null,r[1])}else{_.exec(r[1])}})}}h=null}return this}else{if(h){q=(h.nodeType==3)?h.nodeValue:h.innerHTML;h=null}return q}},loadHtml:function(f,c,d){var g=this;if(typeof f=="string"){f={url:f}}_.tryF(c);xui.Ajax(f.url,f.query,function(h){var i=xui.create("div");i.html(h,false,true);g.append(i.children());_.tryF(d)},function(h){g.append("<div>"+h+"</div>");_.tryF(d)},null,f.options).start()},loadIframe:function(c,g){if(typeof c=="string"){c={url:c}}var i=g||("aiframe_"+_()),d;if(d=xui.Dom.byId(g)){xui(d).remove()}var f=xui.browser.ie&&xui.browser.ver<9,h=document.createElement(f?"<iframe name='"+i+"'>":"iframe");h.id=h.name=i;h.src=c.url;h.frameBorder="0";h.marginWidth="0";h.marginHeight="0";h.vspace="0";h.hspace="0";h.allowTransparency="true";h.width="100%";h.height="100%";this.append(h);xui.Dom.submit(c.url,c.query,c.method,h.name,c.enctype)},outerHTML:function(i,c){var k=this,j,l="",f=k.get(0),d=f.id;if(i!==undefined){var g=k.replace(_.str.toDom(i),false);k._nodes[0]=g._nodes[0];xui([f]).remove(c);return k}else{if(xui.browser.gek){var h=xui.$getGhostDiv();h.appendChild(k.get(0).cloneNode(true));l=h.innerHTML;h.innerHTML="";h=null}else{l=f.outerHTML}f=null;return l}},text:function(f){if(f!==undefined){var d=this,c=[];d.each(function(h){var g=h.firstChild;if(g&&g.nodeType!=1){g.nodeValue=f}else{c[c.length]=h}});if(c.length){xui(c).empty().each(function(g){g.appendChild(document.createTextNode(f))})}return d}else{return(function(n){if(!n){return""}var j,h=n.childNodes,g=h.length,m="",k=arguments.callee;for(j=0;j<g;j++){if(h[j].nodeType!=8){m+=(h[j].nodeType!=1)?h[j].nodeValue:k(h[j])}}return m})(this.get(0))}},attr:function(d,m){var p=this,l=arguments.callee,j=l.map1||(l.map1={"class":"className",readonly:"readOnly",tabindex:"tabIndex","for":"htmlFor",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",value:"value"}),h=l.map2||(l.map2={href:1,src:1,style:1});if(typeof d=="object"){for(var g in d){l.call(p,g,d[g])}return p}var n=xui.browser.ie&&d=="style",k=!h[d=j[d]||d];if(m!==undefined){return p.each(function(q){if(m===null){if(n){q.style.cssText=""}else{if(k){try{q[d]=null;if(q.nodeType==1){q.removeAttribute(d)}}catch(i){}}}}else{if(n){q.style.cssText=""+m}else{if(k){q[d]=m;if(q.nodeType==1&&d!="value"&&typeof m=="string"){q.setAttribute(d,m)}}else{q.setAttribute(d,m)}}}})}else{var c,f=p.get(0);if(n){return f.style.cssText}if(d=="selected"&&xui.browser.kde){return f.parentNode.selectedIndex}c=((d in f)&&k)?f[d]:f.getAttribute(d,xui.browser.ie&&!k?2:undefined);f=null;return c}},$touchscroll:function(h){if(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){var i={x:1,y:1,xy:1},c=0,j=0,g=null,d=null,f=this._nodes;if(!i[h]){h=null}xui(f).onTouchstart(i[h]?function(n,m,q){if(xui.DragDrop._profile.isWorking){return true}var l=m.touches[0],k=xui(q).get(0);if(k){if(h=="xy"||h=="x"){c=l.pageX}if(h=="xy"||h=="y"){j=l.pageY}}return true}:null);xui(f).onTouchmove(i[h]?function(r,q,v){if(xui.DragDrop._profile.isWorking){return true}var n=q.touches[0],l=xui(v).get(0),k,m,u;if(l){k=l.scrollLeft;m=l.scrollTop;if(h=="xy"||h=="x"){if(g===null){u=1;g=l.scrollLeft+n.pageX+(c==n.pageX?0:c>n.pageX?1:-1)*10}l.scrollLeft=g-n.pageX}if(h=="xy"||h=="y"){if(d===null){u=1;d=l.scrollTop+n.pageY+(j==n.pageY?0:j>n.pageY?1:-1)*10}l.scrollTop=d-n.pageY}return(!u)&&k==l.scrollLeft&&m==l.scrollTop}}:null);xui(f).onTouchend(i[h]?function(l,k,m){if(xui.DragDrop._profile.isWorking){return true}g=d=null}:null)}return this},isScrollBarShowed:function(c){c=c=="x"?"scrollLeft":"scrollTop";if(this[c]()!==0){return true}this[c](1);if(this[c]()===0){return false}this[c](0);return true},scrollIntoView:function(){if(this.get(0)){this.get(0).scrollIntoView()}return this},css:function(c,d){if(typeof c=="object"||d!==undefined){this.each(function(f){xui.Dom.setStyle(f,c,d)});if(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){if(c=="overflow"||c=="overflow-x"||c=="overflow-y"){if(d=="auto"||d=="scroll"){this.$touchscroll(c=="overflow"?"xy":c=="overflow-x"?"x":"y")}else{this.$touchscroll(null)}}}return this}else{return xui.Dom.getStyle(this.get(0),c)}},rotate:function(d){if(_.isSet(d)){if(_.isFinite(d)){d+="deg"}return this.each(function(g){var f=g.style.transform||"";if(/rotate\([^)]*\)/i.test(f)){f=f.replace(/(rotate\()([^)]+)/i,"$1"+d)}else{f+=" rotate("+d+")"}xui.Dom.setStyle(g,"transform",f)})}else{var c=/rotate\(([-\d.]+)/i.exec(this.get(0).style.transform);return c?parseFloat(c[1]||0):0}},scaleX:function(d){if(_.isSet(d)){return this.each(function(g){var f=g.style.transform||"";if(/(scale\()([^,]+),([^)]+)/i.test(f)){f=f.replace(/(scale\()([^,]+),([^)]+)/i,"$1"+d+",$3")}else{if(/scale\([-\d.]*\)/i.test(f)){f=f.replace(/scale\([-\d.]*\)/i,"scale("+d+",1)")}else{f+=" scale("+d+",1)"}}xui.Dom.setStyle(g,"transform",f)})}else{var c=/(scale\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);if(c){return parseFloat(c[2]||1)}else{c=/scale\(([-\d.]*)\)/i.exec(this.get(0).style.transform);return c?c[1]:1}}},scaleY:function(d){if(_.isSet(d)){return this.each(function(g){var f=g.style.transform||"";if(/(scale\()([^,]+),([^)]+)/i.test(f)){f=f.replace(/(scale\()([^,]+),([^)]+)/i,"$1$2,"+d)}else{if(/scale\([-\d.]*\)/i.test(f)){f=f.replace(/scale\([-\d.]*\)/i,"scale(1,"+d+")")}else{f+=" scale(1,"+d+")"}}xui.Dom.setStyle(g,"transform",f)})}else{var c=/(scale\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);if(c){return parseFloat(c[3]||1)}else{c=/scale\(([-\d.]*)\)/i.exec(this.get(0).style.transform);return c?c[1]:1}}},translateX:function(d){if(_.isSet(d)){if(_.isFinite(d)){d+="px"}return this.each(function(g){var f=g.style.transform||"";if(/translate\([^)]*\)/i.test(f)){f=f.replace(/(translate\()([^,]+),([^)]+)/i,"$1"+d+",$3")}else{f+=" translate("+d+",0)"}xui.Dom.setStyle(g,"transform",f)})}else{var c=/(translate\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?(c[2]||"").replace(/\s/g,""):""}},translateY:function(d){if(_.isSet(d)){if(_.isFinite(d)){d+="px"}return this.each(function(g){var f=g.style.transform||"";if(/translate\([^)]*\)/i.test(f)){f=f.replace(/(translate\()([^,]+),([^)]+)/i,"$1$2,"+d)}else{f+=" translate(0,"+d+")"}xui.Dom.setStyle(g,"transform",f)})}else{var c=/(translate\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?(c[3]||"").replace(/\s/g,""):""}},skewX:function(d){if(_.isSet(d)){if(_.isFinite(d)){d+="deg"}return this.each(function(g){var f=g.style.transform||"";if(/skew\([^)]*\)/i.test(f)){f=f.replace(/(skew\()([^,]+),([^)]+)/i,"$1"+d+",$3")}else{f+=" skew("+d+",0deg)"}xui.Dom.setStyle(g,"transform",f)})}else{var c=/(skew\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?parseFloat(c[2]||0):0}},skewY:function(d){if(_.isSet(d)){if(_.isFinite(d)){d+="deg"}return this.each(function(g){var f=g.style.transform||"";if(/skew\([^)]*\)/i.test(f)){f=f.replace(/(skew\()([^,]+),([^)]+)/i,"$1$2,"+d)}else{f+=" skew(0deg,"+d+")"}xui.Dom.setStyle(g,"transform",f)})}else{var c=/(skew\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return c?parseFloat(c[3]||0):0}},caret:function(g,k){var w=this.get(0),y=w.tagName.toLowerCase(),s=typeof g,f=xui.browser.ie,u;if(!/^(input|textarea)$/i.test(y)){return}if(y=="input"&&w.type.toLowerCase()!="text"&&w.type.toLowerCase()!="password"){return}w.focus();if(s=="number"){if(f){var c=w.createTextRange();c.collapse(true);c.moveEnd("character",k);c.moveStart("character",g);c.select()}else{w.setSelectionRange(g,k)}return this}else{if(s=="string"){var c=this.caret(),j=0,i=0,q,x=w.value,h=/\r/g;if(f){j=x.substr(0,c[0]).match(h);j=(j&&j.length)||0;i=g.match(h);i=(i&&i.length)||0}if(xui.browser.opr){j=g.match(/\n/g);j=(j&&j.length)||0;i=g.match(/\r\n/g);i=(i&&i.length)||0;i=j-i;j=0}w.value=x.substr(0,c[0])+g+x.substr(c[1],x.length);q=c[0]-j+i+g.length;this.caret(q,q);return q}else{if(f){var c=document.selection.createRange(),n=c.text,j=n.length,p,i;if(y.toLowerCase()=="input"){c.moveStart("character",-w.value.length);p=c.text.length;return[p-j,p]}else{var d=c.duplicate();d.moveToElementText(w);d.setEndPoint("EndToEnd",c);p=d.text.length;return[p-j,p]}}else{return[w.selectionStart,w.selectionEnd]}}}},show:function(d,g,j,l,f){var c,k,i=xui.Dom.HIDE_VALUE,h;return this.each(function(n){if(n.nodeType!=1){return}var m=xui.getNodeData(n,"_inthread");if(m){xui.Thread(m).abort("force");xui.setNodeData(n,"_inthread")}c=n.style;h=xui.getNodeData(n);if(h._xuihide){if(k=h._left){if(c.left!=k){c.left=k}}if(k=h._top){if(c.top!=k){c.top=k}}if(k=h._position){if(c.position!=k){c.position=k}}if(c.visibility!="visible"){c.visibility="visible"}h._xuihide=0}if(_.isSet(d)){c.left=d}if(_.isSet(g)){c.top=g}l=f?null:l?l:_.get(xui.UIProfile.getFromDom(n),["properties","showEffects"]);if(l){l=xui.Dom._getEffects(l,1)}if(l){xui.Dom._vAnimate(n,true,l,j)}else{if(j){j()}}})},hide:function(h,g,c){var d,f;return this.each(function(k){if(k.nodeType!=1){return}var j=xui.getNodeData(k,"_inthread");if(j){xui.Thread(j).abort("force");xui.setNodeData(k,"_inthread")}d=k.style;f=xui.getNodeData(k);var i=function(){if(f._xuihide!==1){f._position=d.position;f._visibility=d.visibility;f._top=d.top;f._left=d.left;f._xuihide=1}if(d.position!="absolute"){d.position="absolute"}d.visibility="hidden";d.top=d.left=xui.Dom.HIDE_VALUE;if(h){h()}};g=c?null:g?g:_.get(xui.UIProfile.getFromDom(k),["properties","hideEffects"]);if(g){g=xui.Dom._getEffects(g,0)}if(g){xui.Dom._vAnimate(k,false,g,i)}else{i()}})},cssRegion:function(s,u){var x=this;if(typeof s=="object"){var n,w,g,d=x.get(0),l=xui.Dom,p=l._setPxStyle,g={};for(var k=0,q=l._boxArr;n=q[k++];){g[n]=((n in s)&&s[n]!==null)?p(d,n,s[n]):false}if(u){var p=l.$hasEventHandler;if(p(d,"onsize")&&(g.width||g.height)){x.onSize(true,{width:g.width,height:g.height})}if(p(d,"onmove")&&(g.left||g.top)){x.onMove(true,{left:g.left,top:g.top})}}return x}else{var h=s,v=u,r=h?x.offset(null,v):x.cssPos(),y=x.cssSize();return{left:r.left,top:r.top,width:y.width,height:y.height}}},cssSize:function(n,j){var m=this,d=m.get(0),c,g=xui.Dom,h=g._setPxStyle,k,i;if(n){var l;k=n.width!==null?h(d,"width",n.width):false;i=n.height!==null?h(d,"height",n.height):false;if(j&&(k||i)&&g.$hasEventHandler(d,"onsize")){m.onSize(true,{width:k,height:i})}c=m}else{c={width:m._W(d,1)||0,height:m._H(d,1)}}return c},cssPos:function(i,k){var d=this.get(0),g=xui.Dom,h=g._setPxStyle,l,j,c;if(i){var m;l=i.left!=null?h(d,"left",i.left):false;j=i.top!==null?h(d,"top",i.top):false;if(k&&(l||j)&&g.$hasEventHandler(d,"onmove")){this.onMove(true,{left:l,top:j})}c=this}else{h=g.getStyle;c={left:parseInt(h(d,"left"),10)||0,top:parseInt(h(d,"top"),10)||0}}d=null;return c},offset:function(i,u){var n,l,z=xui.browser,D=this,q=D.get(0),w=q,k=q.parentNode,j=q.offsetParent,C=q.ownerDocument,y=C.documentElement,A=C.body,f=/^inline|table.*$/i,h=xui.Dom.getStyle,g=h(q,"position")=="fixed",B=arguments.callee,m=B.add||(B.add=function(E,d,r){E.left+=parseInt(d,10)||0;E.top+=parseInt(r,10)||0}),s=B.border||(B.border=function(d,r){m(r,h(d,"borderLeftWidth"),h(d,"borderTopWidth"))}),p=B.TTAG||(B.TTAG={TABLE:1,TD:1,TH:1}),v=B.HTAG||(B.HTAG={BODY:1,HTML:1}),c=B.posDiff||(B.posDiff=function(F,E){var r=F.cssPos(),d=F.offset(null,E);return{left:d.left-r.left,top:d.top-r.top}});u=u?xui(u).get(0):C;if(i){if(i.left===null&&i.top===null){return D}var x=c(D,u);D.cssPos({left:i.left===null?null:(i.left-x.left),top:i.top===null?null:(i.top-x.top)});n=D}else{if(!(xui.browser.gek&&q===document.body)&&q.getBoundingClientRect){l=q.getBoundingClientRect();i={left:l.left,top:l.top};if(u.nodeType==1&&u!==document.body){m(i,-(l=u.getBoundingClientRect()).left+u.scrollLeft,-l.top+u.scrollTop)}else{m(i,(_.isNumb(y.scrollLeft)?y.scrollLeft:A.scrollLeft)-y.clientLeft,(_.isNumb(y.scrollTop)?y.scrollTop:A.scrollTop)-y.clientTop)}}else{i={left:0,top:0};m(i,q.offsetLeft,q.offsetTop);while(j&&j!=u&&j!=u.offsetParent){m(i,j.offsetLeft,j.offsetTop);if(z.kde||(z.gek&&!p[j.tagName])){s(j,i)}if(!g&&h(j,"position")=="fixed"){g=true}if(j.tagName!="BODY"){w=j.tagName=="BODY"?w:j}j=j.offsetParent}while(k&&k.tagName&&k!=u&&!v[k.tagName]){if(!f.test(h(k,"display"))){m(i,-k.scrollLeft,-k.scrollTop)}if(z.gek&&h(k,"overflow")!="visible"){s(k,i)}k=k.parentNode}if((z.gek&&h(w,"position")!="absolute")){m(i,-A.offsetLeft,-A.offsetTop)}if(g){m(i,_.isNumb(y.scrollLeft)?y.scrollLeft:A.scrollLeft,_.isNumb(y.scrollTop)?y.scrollTop:A.scrollTop)}}n=i}return n},hasClass:function(d){var c=xui.Dom._getClass(this.get(0)).split(/\s+/);return _.arr.indexOf(c,d)!=-1},addClass:function(d){var c,f,h=arguments.callee,g=(h.reg||(h.reg=/\s+/));return this.each(function(i){c=(f=xui.Dom._getClass(i)).split(g);if(_.arr.indexOf(c,d)==-1){xui.Dom._setClass(i,f+" "+d)}})},removeClass:function(c){var h,g,f,k,n,m=typeof c=="string",j=arguments.callee,d=(j.reg||(j.reg=/\s+/));return this.each(function(i){h=xui.Dom._getClass(i).split(d);f=h.length;k=[];for(g=0;n=h[g];g++){if(m?(n!=c):(!c.test(String(n)))){k[k.length]=n}}if(f!=k.length){xui.Dom._setClass(i,k.join(" "))}})},replaceClass:function(f,c){var g,d;return this.each(function(h){d=(g=xui.Dom._getClass(h)).replace(f,c);if(g!=d){xui.Dom._setClass(h,d)}})},tagClass:function(c,h){var g=this,i=arguments.callee,f=i["_r1_"+c]||(i["_r1_"+c]=new RegExp("([-\\w]+"+c+"[-\\w]*)")),d=i._r2||(i._r2=/([-\w]+)/g);g.removeClass(f);return(false===h)?g:g.replaceClass(d,"$1 $1"+c)},$addEventHandler:function(c){var g=xui.Event,f,d=g.$eventhandler;return this.each(function(h){if(h.nodeType==3){return}xui.setNodeData(h,["eHandlers","on"+g._eventMap[c]],d);if(f=g._eventHandler[c]){h[f]=d;xui.setNodeData(h,["eHandlers",f],d);if(xui.browser.isTouch&&f=="onmousedown"){xui.setNodeData(h,["eHandlers","onxuitouchdown"],d);if(h.addEventListener){h.addEventListener("xuitouchdown",d,false)}else{if(h.attachEvent){h.attachEvent("xuitouchdown",d)}}}}})},$removeEventHandler:function(c){var g=xui.Event,f=g.$eventhandler,d;return this.each(function(h){if(d=g._eventHandler[c]){h[d]=null;if(xui.browser.isTouch&&d=="onmousedown"){if(h.removeEventListener){h.removeEventListener("xuitouchdown",f,false)}else{if(h.detachEvent){h.detachEvent("xuitouchdown",f)}}}}if(h=xui.getNodeData(h,"eHandlers")){d="on"+g._eventMap[c];delete h[d];if(xui.browser.isTouch&&d=="onmousedown"){delete h.onxuitouchdown}}})},$addEvent:function(f,l,n,j){var r=this,d=xui.Event,i=_.arr.removeValue,p=_.arr.insertAny,g,k,q,h;if(!j&&j!==0){j=-1}if(typeof n=="string"){n="$"+n}else{n=undefined}r.$addEventHandler(f).each(function(c){if(c.nodeType==3){return}if(!(g=d.getId(c))){g=c.id=xui.Dom._pickDomId()}if(!(k=xui.$cache.profileMap[g])){k=new xui.DomProfile(g)}q=k.events||(k.events={});h=q[f]||(q[f]=[]);if(n===undefined){h.length=0;h=q[f]=[];j=-1;n="_"}h[n]=l;i(h,n);if(j==-1){h[h.length]=n}else{p(h,n,j)}if(xui.Event&&(k=xui.Event._getProfile(g))&&k.clearCache){k.clearCache()}});return r},$removeEvent:function(f,q,h){var s=this,p,r,j,g,m,n,d=xui.Event,l=xui.$cache.profileMap,n=d._eventMap[f];s.each(function(c){if(!(g=d.getId(c))){return}if(!(p=l[g])){return}if(!(r=p.events)){return}if(h){_.arr.each(d._getEventName(n),function(i){delete r[i]})}else{if(typeof q=="string"){q="$"+q;if(j=r[f]){if(_.arr.indexOf(j,q)!=-1){_.arr.removeValue(j,q)}delete j[q]}}else{delete r[f]}}if(xui.Event&&(p=xui.Event._getProfile(g))&&p.clearCache){p.clearCache()}});return s},$getEvent:function(f,d){var h;if(!(h=xui.Event.getId(this.get(0)))){return}if(d){return _.get(xui.$cache.profileMap,[h,"events",f,"$"+d])}else{var g=[],c=_.get(xui.$cache.profileMap,[h,"events",f]);_.arr.each(c,function(k,j){g[g.length]={o:c[k]}});return g}},$clearEvent:function(){return this.each(function(d,c){if(!(c=xui.Event.getId(d))){return}if(!(c=xui.$cache.profileMap[c])){return}_.breakO(c.events,2);delete c.events;_.arr.each(xui.Event._events,function(f){if(d["on"+f]){d["on"+f]=null}})})},$fireEvent:function(c,j){var l=xui.Event._eventMap[c],n,p="on"+l,m,h,k=arguments.callee,i=xui.Event.$eventhandler,g=k.f1||(k.f1=function(){this.returnValue=false}),d=k.f2||(k.f2=function(){this.cancelBubble=true});return this.each(function(q){if(!(m=xui.getNodeData(q,["eHandlers",p]))){return}if("blur"==l||"focus"==l){try{q[l]()}catch(f){}}else{h=_.copy(j);_.merge(h,{type:l,target:q,button:1,$xuievent:true,$xuitype:c,preventDefault:g,stopPropagation:d},"all");m.call(q,h)}})},nativeEvent:function(c){return this.each(function(f){if(f.nodeType===3||f.nodeType===8){return}try{f[c]()}catch(d){}})},$canFocus:function(){var g=arguments.callee,c=xui.Dom.getStyle,h=g.map||(g.map={a:1,input:1,select:1,textarea:1,button:1,object:1}),d,f;return !!((f=this.get(0))&&f.focus&&(((d=h[f.tagName.toLowerCase()])&&!(parseInt(f.tabIndex,10)<=-1))||(!d&&parseInt(f.tabIndex,10)>=(xui.browser.ie?1:0)))&&c(f,"display")!="none"&&c(f,"visibility")!="hidden"&&f.offsetWidth>0&&f.offsetHeight>0)},focus:function(d){var c=this;if(d||c.$canFocus()){try{c.get(0).focus()}catch(f){}}return c},setSelectable:function(f){var d=arguments.callee,c;this.removeClass("xui-ui-selectable").removeClass("xui-ui-unselectable");this.addClass(f?"xui-ui-selectable":"xui-ui-unselectable");return this.each(function(g){if(xui.browser.ie&&xui.browser.ver<10){xui.setNodeData(g,"_onxuisel",f?"true":"false")}})},setInlineBlock:function(){var c=this;if(xui.browser.gek){if(xui.browser.ver<3){c.css("display","-moz-inline-block").css("display","-moz-inline-box").css("display","inline-block")}else{c.css("display","inline-block")}}else{if(xui.browser.ie6){c.css("display","inline-block").css({display:"inline",zoom:"1"})}else{c.css("display","inline-block")}}return c},topZindex:function(c){var h=1000,f=0,d,l=this.get(0),m=l.offsetParent,g,n;if(xui.browser.ie&&(!m||(m.tagName+"").toUpperCase()=="HTML")){m=xui("body").get(0)}if(l.nodeType!=1||!m){return 1}g=m.childNodes;for(d=0;n=g[d];d++){if(n==l||n.nodeType!=1||!n.$xid||n.style.display=="none"||n.style.visibility=="hidden"||xui.getNodeData(n,"zIndexIgnore")){continue}f=parseInt(n.style&&n.style.zIndex,10)||0;h=h>f?h:f}h++;if(h>=xui.Dom.TOP_ZINDEX){xui.Dom.TOP_ZINDEX=h+1}if(c){l.style.zIndex=h}else{f=parseInt(l.style.zIndex,10)||0;return h>f?h:f}return this},nextFocus:function(g,f,d){g=_.isBool(g)?g:true;var c=this.get(0),h=this.$iterator("",g,f,function(i){return i!==c&&xui([i]).$canFocus()});if(!h.isEmpty()&&d!==false){h.focus()}c=null;return h},animate:function(k,s,c,l,f,p,h,r){var n=arguments.callee,d={linear:function(w,v,y,x){return y*w/x+v},quadIn:function(w,v,y,x){return y*(w/=x)*w+v},quadOut:function(w,v,y,x){return -y*(w/=x)*(w-2)+v},quadInOut:function(w,v,y,x){if((w/=x/2)<1){return y/2*w*w+v}return -y/2*((--w)*(w-2)-1)+v},cubicIn:function(w,v,y,x){return y*(w/=x)*w*w+v},cubicOut:function(w,v,y,x){return y*((w=w/x-1)*w*w+1)+v},cubicInOut:function(w,v,y,x){if((w/=x/2)<1){return y/2*w*w*w+v}return y/2*((w-=2)*w*w+2)+v},easeIn:function(w,v,y,x){return y*(w/=x)*w*w+v},easeOut:function(w,v,y,x){return y*((w=w/x-1)*w*w+1)+v},easeInOut:function(w,v,y,x){if((w/=x/2)<1){return y/2*w*w*w+v}return y/2*((w-=2)*w*w+2)+v},quartIn:function(w,v,y,x){return y*(w/=x)*w*w*w+v},quartOut:function(w,v,y,x){return -y*((w=w/x-1)*w*w*w-1)+v},quartInOut:function(w,v,y,x){if((w/=x/2)<1){return y/2*w*w*w*w+v}return -y/2*((w-=2)*w*w*w-2)+v},quintIn:function(w,v,y,x){return y*(w/=x)*w*w*w*w+v},quintOut:function(w,v,y,x){return y*((w=w/x-1)*w*w*w*w+1)+v},quintInOut:function(w,v,y,x){if((w/=x/2)<1){return y/2*w*w*w*w*w+v}return y/2*((w-=2)*w*w*w*w+2)+v},sineIn:function(w,v,y,x){return -y*Math.cos(w/x*(Math.PI/2))+y+v},sineOut:function(w,v,y,x){return y*Math.sin(w/x*(Math.PI/2))+v},sineInOut:function(w,v,y,x){return -y/2*(Math.cos(Math.PI*w/x)-1)+v},expoIn:function(w,v,y,x){return(w===0)?v:y*Math.pow(2,10*(w/x-1))+v},expoOut:function(w,v,y,x){return(w===x)?v+y:y*(-Math.pow(2,-10*w/x)+1)+v},expoInOut:function(w,v,y,x){if(w===0){return v}if(w===x){return v+y}if((w/=x/2)<1){return y/2*Math.pow(2,10*(w-1))+v}return y/2*(-Math.pow(2,-10*--w)+2)+v},circIn:function(w,v,y,x){return -y*(Math.sqrt(1-(w/=x)*w)-1)+v},circOut:function(w,v,y,x){return y*Math.sqrt(1-(w=w/x-1)*w)+v},circInOut:function(w,v,y,x){if((w/=x/2)<1){return -y/2*(Math.sqrt(1-w*w)-1)+v}return y/2*(Math.sqrt(1-(w-=2)*w)+1)+v},bounceIn:function(w,v,y,x){return y-d.bounceOut(x-w,0,y,x)+v},bounceOut:function(w,v,y,x){if((w/=x)<(1/2.75)){return y*(7.5625*w*w)+v}else{if(w<(2/2.75)){return y*(7.5625*(w-=(1.5/2.75))*w+0.75)+v}else{if(w<(2.5/2.75)){return y*(7.5625*(w-=(2.25/2.75))*w+0.9375)+v}else{return y*(7.5625*(w-=(2.625/2.75))*w+0.984375)+v}}}},bounceInOut:function(w,v,y,x){if(w<x/2){return d.bounceIn(w*2,0,y,x)*0.5+v}return d.bounceOut(w*2-x,0,y,x)*0.5+y*0.5+v},elasticIn:function(x,v,B,A,w,z){if(x===0){return v}if((x/=A)===1){return v+B}if(!z){z=A*0.3}if(!w){w=1}var y=0;if(w<Math.abs(B)){w=B;y=z/4}else{y=z/(2*Math.PI)*Math.asin(B/w)}return -(w*Math.pow(2,10*(x-=1))*Math.sin((x*A-y)*(2*Math.PI)/z))+v},elasticOut:function(x,v,B,A,w,z){if(x===0){return v}if((x/=A)===1){return v+B}if(!z){z=A*0.3}if(!w){w=1}var y=0;if(w<Math.abs(B)){w=B;y=z/4}else{y=z/(2*Math.PI)*Math.asin(B/w)}return w*Math.pow(2,-10*x)*Math.sin((x*A-y)*(2*Math.PI)/z)+B+v},elasticInOut:function(x,v,B,A,w,z){if(x===0){return v}if((x/=A/2)===2){return v+B}if(!z){z=A*(0.3*1.5)}if(!w){w=1}var y=0;if(w<Math.abs(B)){w=B;y=z/4}else{y=z/(2*Math.PI)*Math.asin(B/w)}if(x<1){return -0.5*(w*Math.pow(2,10*(x-=1))*Math.sin((x*A-y)*(2*Math.PI)/z))+v}return w*Math.pow(2,-10*(x-=1))*Math.sin((x*A-y)*(2*Math.PI)/z)*0.5+B+v}},j=n.color||(n.color=function(B,A,w){if(typeof B!="string"||typeof A!="string"){return"#fff"}if(w<0){return B}if(w>1){return A}var x,v,z,y;x=function(C){return(C.charAt(0)!="#")?("#"+C):C};B=x(B);A=x(A);v=function(E,D,C){return parseInt(E.slice(D,C),16)||0};z=function(C){return{red:v(C,1,3),green:v(C,3,5),blue:v(C,5,7)}};B=z(B);A=z(A);y=function(G,F,D,E){var C=G[E]+Math.round(D*(F[E]-G[E]));return(C<16?"0":"")+C.toString(16)};return"#"+y(B,A,w,"red")+y(B,A,w,"green")+y(B,A,w,"blue")});if(!k){if(c){_.tryF(c)}return}if((f||0)>0){l=f*16}else{l=l||200}p=d[p]!==undefined?p:"expoIn";var q,g=this.get(0),u=xui(g),m=[function(z){var A=_()-q,v,w,x,y;if(A>=l){A=l}_.each(k,function(C,B){x=C[0];y=C[1];w=C[3];v=d[p](A,0,1,l);if(typeof C=="function"){C.call(u,v)}else{if(_.str.endWith(B.toLowerCase(),"color")){v=j(x,y,v)}else{if(!_.isFinite(y)){w=y.replace(/[-\d.]*/,"");x=parseFloat(x);y=parseFloat(y)}v=x+(y-x)*v}v+=w||r||"";(u[B])?(u[B](v)):(u.css(B,v))}});if(A==l){xui.Thread(z).abort("normal");return false}}];var i=xui.getNodeData(g,"_inthread");if(i&&xui.Thread.isAlive(i)){xui.Thread(i).abort("force");xui.setNodeData(g,"_inthread",null)}return xui.Thread(h||_.id(),m,0,null,function(v){xui.setNodeData(g,"_inthread",v);q=_();_.tryF(s,arguments,this)},function(w,v){if("force"!=v){_.tryF(c,arguments,this)}if(g&&g.$xid){xui.setNodeData(g,"_inthread",null)}},true)},popToTop:function(k,j,p,q,u,d){var l,i=this,r;p=xui(p);if(p.isEmpty()){p=xui("body")}i.css({position:"absolute",left:xui.Dom.HIDE_VALUE,top:xui.Dom.HIDE_VALUE,display:"block",zIndex:xui.Dom.TOP_ZINDEX++});if(k["xui.Dom"]||k.nodeType==1||typeof k=="string"){if(typeof(j)!="function"){j=(j||12)+""}var c=xui(k),s=c.offset(null,p);l={left:s.left,top:s.top,width:c.offsetWidth(),height:c.offsetHeight()}}else{if(typeof(j)!="function"){j=j?"3":"0"}r=j=="0"?0:8;l=k.region||{left:k.left-r,top:k.top-r,width:r*2,height:r*2}}k={left:0,top:0};var r=(p.get(0)===document.body||p.get(0)===document||p.get(0)===window)?xui.win:p,g={};i.cssPos(k).css({visibility:"hidden",display:"block"});p.append(i);g.left=r.scrollLeft();g.top=r.scrollTop();g.width=r.width()+g.left;g.height=r.height()+g.top;if(typeof(j)=="function"){k=j(l,g,i,r)}else{var n=i.offsetWidth(),f=i.offsetHeight(),m=function(w){var v,h;switch(w){case"1":v=false;h=true;break;case"2":v=true;h=false;break;case"3":v=h=false;break;case"4":v=h=true;break}if(v){if(l.top+f<g.height){k.top=l.top}else{k.top=l.top+l.height-f}}else{if(l.top+l.height+f<g.height){k.top=l.top+l.height}else{k.top=l.top-f}}if(h){if(l.left+n<g.width){k.left=l.left}else{k.left=l.left+l.width-n}}else{if(l.left+l.width+n<g.width){k.left=l.left+l.width}else{k.left=l.left-n}}};if(j=="12"){m("1");if(k.top+f>g.height||k.top<g.top){m("2")}}else{m(j)}if(k.left+n>g.width){k.left=g.width-n}if(k.left<g.left){k.left=g.left}if(k.top+f>g.height){k.top=g.height-f}if(k.top<g.top){k.top=g.top}}i.cssPos(k).css({visibility:"visible"});u=d?null:u?u:_.get(xui.UIProfile.getFromDom(i),["properties","showEffects"]);if(u){u=xui.Dom._getEffects(u,1)}if(u){xui.Dom._vAnimate(i,true,u,q)}else{if(q){q()}}return this},setHoverPop:function(f,j,g,p,m,n,l){var i=this.get(0),h=xui(i);if(f["xui.UI"]){f=f.getRoot()}else{if(f["xui.UIProfile"]||f["xui.Template"]){f=f.boxing()}else{if(typeof(f)=="string"&&f.chartAt(0)=="!"){f=xui(f)}}}if(n){n=xui.Dom._getEffects(n,1)}if(l){l=xui.Dom._getEffects(l,0)}if(!_.isDefined(j)){j="12"}var k=i.getRoot().xid(),d=k+":"+f.xid();h.onMouseover(j===null?null:function(c,q,r){_.resetRun(d,null);var s=xui.getNodeData(k,"$ui.hover.pop");if(!g||false!==g(profile,f,q,r,item,s)){if(!s){f.popToTop(r,j,m,n);xui.setNodeData(k,"$ui.hover.pop",1)}}},d).onMouseout(j===null?null:function(c,q,r){_.resetRun(d,function(){if(!p||false!==p(c,f,q,r,"host")){f.hide(null,l);xui.setNodeData(k,"$ui.hover.pop",0)}})},d);f.onMouseover(j===null?null:function(){_.resetRun(d,null)},d).onMouseout(j===null?null:function(){_.resetRun(d,function(){if(!p||false!==p(profile,f,e,src,"pop")){f.hide(null,l);xui.setNodeData(k,"$ui.hover.pop",0)}})},d);return this},setBlurTrigger:function(c,g,m,n,d){var k=this,l=document,f="$blur_triggers$",j=xui.Dom._blurTrigger||(xui.Dom._blurTrigger=function(q,u){var q=xui.Event.getPos(u),s=arguments.callee.arr,C=xui.Event.getSrc(u),z=_.copy(s),y,x,A,r,B;_.arr.each(z,function(p){y=true;if(!(B=s[p].target)){y=false}else{B.each(function(v){if(!xui.Dom.byId(v.id)){return y=false}})}if(!y){_.arr.removeValue(s,p);delete s[p]}});z=_.copy(s);_.arr.each(z,function(v){B=s[v];y=true;var p=function(){var w=B.target.get();while(C&&C.tagName&&C.tagName!="BODY"&&C.tagName!="HTML"){if(_.arr.indexOf(w,C)!=-1){return true}C=C.parentNode}};if(!B.checkChild||p()){B.target.each(function(w){if(w.parentNode&&(A=w.offsetWidth)&&(r=w.offsetHeight)){x=xui([w]).offset();if(q.left>=x.left&&q.top>=x.top&&q.left<=(x.left+A)&&q.top<=(x.top+r)){return y=false}}})}p=null;if(!y&&!_.isFun(B.trigger)){return false}if(y){_.tryF(B.trigger,[q,u],B.target);_.arr.removeValue(s,v);delete s[v]}else{if(B.stopNext){return false}}},null,true);C=null;z.length=0}),h=j.arr||(j.arr=[]),i;if(h[c]){_.arr.removeValue(h,c);delete h[c]}if(g){if(m){if(m["xui.Dom"]){i=m}else{if(_.isArr(m)){i=xui();i._nodes=m}}}else{i=k}i.each(function(p){if(!p.id){p.id=xui.Dom._pickDomId()}});h[c]={trigger:g,target:i,checkChild:!!n,stopNext:!d};h.push(c);if(!l.onmousedown){l.onmousedown=xui.Event.$eventhandler}l=j=null}return this},$firfox2:function(){if(!xui.browser.gek2){return this}var c=this;c.css("overflow","hidden");_.asyRun(function(){c.css("overflow","auto")});return c},ieRemedy:function(){if(xui.browser.ie){var f=this.get(),c=[],d=f.length;_.asyRun(function(){for(var g=0;g<d;g++){if((c[g]=f[g].style.WordWrap)=="break-word"){f[g].style.WordWrap="normal"}else{f[g].style.WordWrap="break-word"}}});_.asyRun(function(){for(var g=0;g<d;g++){f[g].style.WordWrap=c[g]}f.length=c.length=0})}return this},fixPng:function(c){if(xui.browser.ie6){c=c||"crop";return this.each(function(g){if(g.tagName=="IMG"&&/\.png$/i.test(g.src)){g.style.height=g.height;g.style.width=g.width;g.style.filter=((g.style.filter?(g.style.filter+","):"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+g.src+", sizingMethod="+c+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in g.style){g.style.msfilter=g.style.filter}g.src=xui.ini.img_bg}var f=g.currentStyle.backgroundImage||g.style.backgroundImage,d=f.match(/^url[("']+(.*\.png[^\)"']*)[\)"']+[^\)]*$/i);if(d){g.style.backgroundImage="url("+xui.ini.img_bg+")";g.style.filter=((g.style.filter?(g.style.filter+","):"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+d[1]+", sizingMethod="+c+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in g.style){g.style.msfilter=g.style.filter}}})}}},Static:{HIDE_VALUE:"-10000px",TOP_ZINDEX:10000,_boxArr:_.toArr("width,height,left,top,right,bottom"),_cursor:{},_pickDomId:function(){var c;do{c="xui_"+_.id()}while(document.getElementById(c));return c},_map:{html:1,head:1,body:1},_getTag:function(c){return c?c.$xid?c.$xid:c.nodeType==1?xui.$registerNode(c).$xid:0:0},_ensureValues:function(j){var g,f,h=this._map,d=[],c=j===window?["!window"]:j===document?["!document"]:_.isArr(j)?j:j["xui.Dom"]?j._nodes:j._toDomElems?j._toDomElems():typeof j=="function"?j():[j];for(f=0;f<c.length;f++){if(g=!(g=c[f])?0:g===window?"!window":g===document?"!document":(typeof g=="string"||(g["xui.DomProfile"]&&(g=g.domId)))?g.charAt(0)=="!"?g:this._getTag(h[g]?document.getElementsByTagName(g)[0]:document.getElementById(g)):((g=c[f])["xui.UIProfile"]||g["xui.Template"])?g.renderId?g.renderId:(g.boxing().render()&&g.renderId):this._getTag(g)){d[d.length]=g}}return d.length<=1?d:this._unique(d)},_scrollBarSize:0,_getClass:function(c){return(typeof c.className=="string"&&c.className)||(typeof c.className.baseVal=="string"&&c.className.baseVal)||(typeof c.getAttribute!=="undefined"&&c.getAttribute("class"))||""},_setClass:function(d,c){if(typeof d.className=="string"){d.className=c}else{if(typeof d.className.baseVal=="string"){d.className.baseVal=c}else{if(typeof d.getAttribute!="undefined"){d.setAttribute(c)}}}},getScrollBarSize:function(d){var c=this;if(d||!c._scrollBarSize){var f;xui("body").append(f=xui.create('<div style="width:50px;height:50px;visibility:hidden;position:absolute;margin:0;padding:0;left:-10000px;overflow:scroll;"></div>'));c._scrollBarSize=f.get(0).offsetWidth-f.get(0).clientWidth;f.remove()}return c._scrollBarSize},getStyle:function(f,d){if(!f||f.nodeType!=1){return""}var r=xui.Dom,m=xui.Dom._css3prop;var u,s;if(d=="opacity"&&(!r.css3Support("opacity"))&&xui.browser.ie){s=d="filter"}u=f.style[d];if(!u){var q=arguments.callee,v,p=xui.browser,c=q.map||(q.map={"float":1,cssFloat:1,styleFloat:1}),j=q._c1||(q._c1={}),h=q._c2||(q._c2={}),g=q._c3||(q._c3={}),d=j[d]||(j[d]=d.replace(/\-(\w)/g,function(x,w){return w.toUpperCase()})),l=h[d]||(h[d]=d.replace(/([A-Z])/g,"-$1").toLowerCase()),k,i;var n=d;if(n.indexOf("border")===0){n=n.replace(/[-]?(left|top|right|bottom)/ig,"")}if(_.arr.indexOf(m,n)!=-1){if(!r.css3Support(d)){return""}else{if(d!="textShadow"){k=p.cssTag2+l.charAt(0).toUpperCase()+l.substr(1);i=p.cssTag1+l}}}if(c[d]){d=xui.browser.ie?"styleFloat":"cssFloat"}u=((v=document.defaultView)&&v.getComputedStyle)?(v=v.getComputedStyle(f,null))?(v.getPropertyValue(l)||(i&&v.getPropertyValue(i))):"":f.currentStyle?(f.currentStyle[d]||f.currentStyle[l]||(k&&(f.currentStyle[k]||f.currentStyle[i]))):((f.style&&(f.style[d]||(k&&f.style[k])))||"")}return s?u?(parseFloat(u.match(/alpha\(opacity=(.*)\)/)[1])||0)/100:1:(u||"")},$transformIE:function(s,q){var p,v,y,x,k,j,d,c,m=function(h){return h*(Math.PI/180)};if(!q){s.style.filter=(s.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Matrix\([^)]+\)/ig,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in s.style){s.style.msfilter=s.style.filter}s.style.marginTop=s.style.marginLeft=""}else{p=q.match(/(rotate)\(\s*([\d.-]+)deg\s*\)/);if(p&&p.length==3){v=p[2]}p=q.match(/(scale)\(\s*([\d.-]+)\s*,\s*([\d.-]+)\)/);if(p&&p.length==4){y=p[2];x=p[3]}p=q.match(/(skew)\(\s*([\d.-]+)deg\s*,\s*([\d.-]+)deg\s*\)/);if(p&&p.length==4){k=p[2];j=p[3]}p=q.match(/(translate)\(\s*([\d.-]+)px\s*,\s*([\d.-]+)px\s*\)/);if(p&&p.length==4){d=p[2];c=p[3]}v=parseFloat(v)||0;y=parseFloat(y)||1;x=parseFloat(x)||1;k=parseFloat(k)||0;j=parseFloat(j)||0;d=parseFloat(d)||0;c=parseFloat(c)||0;s.style.filter=(s.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Matrix\([^)]+\)/ig,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in s.style){s.style.msfilter=s.style.filter}s.style.marginTop=s.style.marginLeft="";var f=s.offsetWidth,n=s.offsetHeight;var A=1,i=0,z=0,g=1;if(v){var B=m(v);A=Math.cos(B);i=Math.sin(B);z=-1*Math.sin(B);g=Math.cos(B)}if(y!=1){A*=y;i*=y}if(x!=1){z*=x;g*=x}if(k){z+=Math.tan(m(k))}if(j){i+=Math.tan(m(j))}s.style.filter=((s.style.filter?(s.style.filter+","):"")+"progid:DXImageTransform.Microsoft.Matrix(M11="+A+",M12="+z+",M21="+i+",M22="+g+",SizingMethod='auto expand')").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in s.style){s.style.msfilter=s.style.filter}var l=s.offsetWidth,u=s.offsetHeight;if(l!=f||d){s.style.marginLeft=-(l-f)/2+d+"px"}if(u!=n||c){s.style.marginTop=-(u-n)/2+c+"px"}s.style.transform=q}},$textShadowIE:function(h,j,g){if(!j){var i=function(f){return(f||"").replace(/progid\:DXImageTransform\.Microsoft\.(Chroma|DropShadow|Glow)\([^)]+\)/ig,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "))},c=h.style.filter;if(c){h.style.filter=i(c)}if("msfilter" in h.style){h.style.msfilter=i(c)}if(!g){h.style.backgroundColor=""}}else{var i=function(f,m,k,l){return(g?"":"progid:DXImageTransform.Microsoft.Chroma(Color=#cccccc) ")+"progid:DXImageTransform.Microsoft.DropShadow(Color="+l+", OffX="+f+", OffY="+m+") "+(parseFloat(k)>0?"progid:DXImageTransform.Microsoft.Glow(Strength="+k+", Color="+l+")":"")},d=j.match(/([\d\.-]+)px\s+([\d\.-]+)px(\s+([\d\.-]+)px)?(\s+([#\w]+))?/);if(d){h.style.filter=((h.style.filter?(h.style.filter+","):"")+i(d[1],d[2],d[4],d[6]||"#000000")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in h.style){h.style.msfilter=h.style.filter}if(!g){h.style.backgroundColor="#cccccc"}}}},$setGradients:function(s,r){var z=this,u=xui.browser,f=u.ver,h="0123456789ABCDEF",q=function(B,A){B=parseInt(B*A,10)||0;B=(B>255||B<0)?0:B;return h.charAt((B-B%16)/16)+h.charAt(B%16)},g=function(A){A=A.split("");return h.indexOf(A[0].toUpperCase())*16+h.indexOf(A[1].toUpperCase())};if(!window.btoa){window.btoa=function(G){if(/([^\u0000-\u00ff])/.test(G)){return}var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,F,D,B,A=[];while(C<G.length){F=G.charCodeAt(C);B=(C+1)%3;switch(B){case 1:A.push(E.charAt(F>>2));break;case 2:A.push(E.charAt((D&3)<<4|(F>>4)));break;case 0:A.push(E.charAt((D&15)<<2|(F>>6)));A.push(E.charAt(F&63));break}D=F;C++}if(B==1){A.push(E.charAt((D&3)<<4));A.push("==")}else{if(B==2){A.push(E.charAt((D&15)<<2));A.push("=")}}return A.join("")}}var p=function(P,F,D,A,L,X){var M="xui.s-ie8gdfix";if(!P||P.nodeType!=1||!P.style){return}var O=z.getStyle(P,"overflow"),N=z.getStyle(P,"display");if(O!="hidden"||(N!="block"&&N!="relative")){return}if(!F){var S,W=P.childNodes,Q=W.length;for(S=0;S<Q;S++){if(W[S].nodeType==1&&W[S].id==M){P.removeChild(W[S]);break}}P.style.backgroundColor="";P.style.filter=((P.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in P.style){P.style.msfilter=P.style.filter}}else{X=X||1;var R=D[0].clr,B=D[D.length-1].clr;var V=P.offsetWidth||0,C=P.offsetHeight||0,H=V*X*2,U=C*X*2;if(A=="circle"){H=U=Math.min(H,U)}var Q=-H/2,I=-U/2,G=H,T=U;if(_.isObj(F)){Q=F.left||(Q+"px");I=F.top||(I+"px")}else{switch(F){case"LT":Q=-H/2;I=-U/2;break;case"T":Q=(V-H)/2;I=-U/2;break;case"RT":Q=V-H/2;I=-U/2;break;case"L":Q=-H/2;I=(C-U)/2;break;case"C":Q=(V-H)/2;I=(C-U)/2;break;case"R":Q=V-H/2;I=(C-U)/2;break;case"LB":Q=-H/2;I=C-U/2;break;case"B":Q=(V-H)/2;I=C-U/2;break;case"RB":Q=V-H/2;I=C-U/2;break}Q+="px";I+="px"}var K=document.createElement("div"),J=K.style;K.id=M;J.position="absolute";J.zIndex="0";J.top=I;J.left=Q;J.width=G+"px";J.height=T+"px";J.backgroundColor=R;var E=D[0].opacity?parseFloat(D[0].opacity)*100:100;J.filter=((J.filter?(J.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+E+", finishopacity=0, style=2)").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in J){J.msfilter=J.filter}if(P.firstChild){P.insertBefore(K,P.firstChild)}else{P.appendChild(K)}P.style.backgroundColor=B;if(D[D.length-1].opacity){P.style.filter=((P.style.filter?(P.style.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+(parseFloat(D[D.length-1].opacity)*100)+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in P.style){P.style.msfilter=P.style.filter}}}},y=function(N,G,D){var K="xui.s-ie8gdfix";if(!N||N.nodeType!=1||!N.style){return}var M=z.getStyle(N,"overflow"),L=z.getStyle(N,"display");if(M!="hidden"){z.setStyle(N,"overflow","hidden")}if(L!="block"&&L!="relative"){z.setStyle(N,"display","relative")}if(!G){var S,U=N.childNodes,P=U.length;for(S=0;S<P;S++){if(U[S].nodeType==1&&U[S].id==K){N.removeChild(U[S]);break}}N.style.backgroundColor="";N.style.filter=(N.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in N.style){N.style.msfilter=N.style.filter}}else{var Q=D[0].clr,B=D[D.length-1].clr;var T=N.offsetWidth||0,C=N.offsetHeight||0,J=Math.min(T,C),F=0,O=J,R=0,A=J;switch(G){case"LT":F=0;R=0;O=J;A=J;break;case"RT":F=J;R=0;O=0;A=J;break;case"LB":F=0;R=J;O=J;A=0;break;case"RB":F=J;R=J;O=0;A=0;break}var I=document.createElement("div"),H=I.style;I.id=K;H.position="absolute";H.zIndex="0";H.top=0;H.left=0;H.width=T;H.height=C;H.backgroundColor=Q;var E=D[0].opacity?parseFloat(D[0].opacity)*100:100;H.filter=((H.filter?(H.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(style=1, opacity="+E+", finishopacity=0, startX="+F+",finishX="+O+",startY="+R+",finishY="+A+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in H){H.msfilter=H.filter}if(N.firstChild){N.insertBefore(I,N.firstChild)}else{N.appendChild(I)}N.style.backgroundColor=B;if(D[D.length-1].opacity){N.style.filter=((N.style.filter?(N.style.filter+","):"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+(parseFloat(D[D.length-1].opacity)*100)+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in N.style){N.style.msfilter=N.style.filter}}}},m=function(C,E,J){var A="xui.s-ie8gdfix";if(!C||C.nodeType!=1||!C.style){return}if(!E){C.style.filter=((C.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Gradient\([^)]+\)/ig,"")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in C.style){C.style.msfilter=C.style.filter}var F,G=C.childNodes,D=G.length;for(F=0;F<D;F++){if(G[F].nodeType==1&&G[F].id==A){C.removeChild(G[F]);break}}C.style.backgroundColor="";C.style.filter=((C.style.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/ig,"")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in C.style){C.style.msfilter=C.style.filter}}else{var I=J[0].clr,B=J[J.length-1].clr,H=1,K;if(J[0].opacity){I=I.replace("#","#"+q(J[0].opacity,255))}if(J[J.length-1].opacity){B=B.replace("#","#"+q(J[J.length-1].opacity,255))}switch(E){case"LT":case"RT":case"LB":case"RB":y(C,E,J);return;case"L":H=1;break;case"R":H=1;K=I;I=B;B=K;break;case"T":H=0;break;case"B":H=0;K=I;I=B;B=K;break}C.style.filter=((C.style.filter?(C.style.filter+","):"")+"progid:DXImageTransform.Microsoft.Gradient(StartColorstr='"+I+"',EndColorstr='"+B+"',GradientType="+H+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "));if("msfilter" in C.style){C.style.msfilter=C.style.filter}}},w=function(C,G,L,K,M,J){if(!G){C.style.backgroundImage=""}else{J=J||1;var B="svg:"+_.id(),F="0%",E="0%",A=J*100+"%";if(_.isObj(G)){F=G.left||F;E=G.left||E}else{switch(G){case"T":F="50%";E="0%";break;case"B":F="50%";E="100%";break;case"L":F="0%";E="50%";break;case"R":F="100%";E="50%";break;case"LT":F="0%";E="0%";break;case"RT":F="100%";E="0%";break;case"RB":F="100%";E="100%";break;case"LB":F="0%";E="100%";break;case"C":F="50%";E="50%";break}}var I='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><radialGradient id="'+B+'" gradientUnits="userSpaceOnUse" cx="'+F+'" cy="'+E+'" r="'+A+'">';for(var H=0,D=L.length;H<D;H++){I+='<stop stop-color="'+L[H].clr+'" offset="'+L[H].pos+'" '+(_.isSet(L[H].opacity)?(' stop-opacity="'+L[H].opacity+'"'):"")+" />"}I+='</radialGradient><rect x="-50" y="-50" width="101" height="101" fill="url(#'+B+')" /></svg>';C.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(I)+'")'}},v=function(D,F,K){if(!F){D.style.backgroundImage=""}else{var B="svg"+_.id(),C="0%",J="0%",A="0%",I="100%";switch(F){case"T":C="50%";J="0%";A="50%";I="100%";break;case"B":C="50%";J="100%";A="50%";I="0%";break;case"L":C="0%";J="50%";A="100%";I="50%";break;case"R":C="100%";J="50%";A="0%";I="50%";break;case"LT":C="0%";J="0%";A="100%";I="100%";break;case"RT":C="100%";J="0%";A="0%";I="100%";break;case"RB":A="0%";I="0%";C="100%";J="100%";break;case"LB":C="0%";J="100%";A="100%";I="0%";break;default:}var H='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><linearGradient id="'+B+'" gradientUnits="userSpaceOnUse" x1="'+C+'" y1="'+J+'" x2="'+A+'" y2="'+I+'">';for(var G=0,E=K.length;G<E;G++){H+='<stop stop-color="'+K[G].clr+'" offset="'+K[G].pos+'" '+(_.isSet(K[G].opacity)?(' stop-opacity="'+K[G].opacity+'"'):"")+"/>"}H+='</linearGradient><rect x="0" y="0" width="1" height="1" fill="url(#'+B+')" /></svg>';D.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(H)+'")'}},l=function(B,C,J,F,K,E){var H=[],G=[],A=B.style;_.arr.each(J,function(M){var L=M.clr;if(_.isSet(M.opacity)&&L.charAt(0)=="#"){L=L.slice(1);L="rgba("+g(L.substr(0,2))+","+g(L.substr(2,2))+","+g(L.substr(4,2))+","+parseFloat(M.opacity)+")"}H.push(L+" "+M.pos);if(u.isWebKit){G.push("color-stop("+M.pos+","+L+")")}});if(!C){A.backgroundImage=""}else{var D;if(_.isObj(C)){D=C.left+" "+C.top}else{switch(C){case"LT":D="left top";break;case"T":D="center top";break;case"RT":D="right top";break;case"L":D="left center";break;case"C":D="center center";break;case"R":D="right center";break;case"LB":D="left bottom";break;case"B":D="center bottom";break;case"RB":D="right bottom";break;default:D="left top"}}if(u.isWebKit){A.backgroundImage="-webkit-gradient(radial,"+D+", 0px, "+D+", 100%,"+G.join(",")+")"}var I="radial-gradient("+D+","+F+" "+K+","+H.join(",")+")";if(u.cssTag1){A.backgroundImage=u.cssTag1+I}A.backgroundImage="radial-gradient("+K+" "+F+" at "+D+","+H.join(",")+")"}},k=function(C,E,J){var G=[],F=[],A=C.style;_.arr.each(J,function(L){var K=L.clr;if(_.isSet(L.opacity)&&K.charAt(0)=="#"){K=K.slice(1);K="rgba("+g(K.substr(0,2))+","+g(K.substr(2,2))+","+g(K.substr(4,2))+","+parseFloat(L.opacity)+")"}G.push(K+" "+L.pos);if(u.isWebKit){F.push("color-stop("+L.pos+","+K+")")}});if(!E){A.backgroundImage=""}else{var H="to bottom";var D="top";var B="left top, left bottom";switch(E){case"LT":H="135deg";D="-45deg";B="left top, right bottom";break;case"T":D="top";H="to bottom";B="left top, left bottom";break;case"RT":H=D="-135deg";B="right top, left bottom";break;case"L":D="left";H="to right";B="left top, right top";break;case"R":D="right";H="to left";B="right top, left top";break;case"LB":H=D="45deg";B="left bottom, right top";break;case"B":D="bottom";H="to top";B="left bottom, left top";break;case"RB":H="-45deg";D="135deg";B="right bottom, left top";break;default:H=E;D=E;B="left top, right bottom"}if(u.isWebKit){A.backgroundImage="-webkit-gradient(linear,"+B+", "+F.join(",")+")"}var I="linear-gradient({#},"+G.join(",")+")";if(u.cssTag1){A.backgroundImage=u.cssTag1+I.replace("{#}",D)}A.backgroundImage=I.replace("{#}",H)}};var d=r?(r.type||r||"linear").toLowerCase():null,x=r?(r.rate||1):null,c=r?(r.shape||"circle").toLowerCase():null,n=r?(r.size||"farthest-corner").toLowerCase():null,j=r?r.orient:null,i=r?r.stops:null;if(d!="linear"){d="radial"}if(i){if(i.length>1){_.arr.stableSort(i,function(A,B){A=parseFloat(A.pos);B=parseFloat(B.pos);return A>B?1:A==B?0:-1})}else{return}}if(u.ie&&f>=6&&f<9){if(d=="linear"){m(s,j,i)}else{p(s,j,i,c,n,x)}}else{if((u.ie&&f>=9&&f<10)||(u.opr&&f<11.1)){if(d=="linear"){v(s,j,i)}else{w(s,j,i,c,n,x)}}else{if((u.gek&&f>=3.6)||(u.isChrome&&f>=10)||(u.isSafari&&f>=5.1)||(u.ie&&f>=10)||(u.opr&&f>=11.1)){if(d=="linear"){k(s,j,i)}else{if(u.opr&&f<12){w(s,j,i,c,n,x)}else{l(s,j,i,c,n,x)}}}}}},_vAnimate:function(f,g,c,i){if(!c||!c.params||_.isEmpty(c.params)){if(i){_.tryF(i)}return}var h=c.params,d={};f=xui(f);_.each(h,function(k,j){d[j]=k[0]});f.animate(h,function(j){if(g){f.css(d)}},function(j){if(!g){f.css(d)}if(i){_.tryF(i)}},c.duration,0,c.type).start()},$adjustCss:function(g,f){var d={nodeType:1,style:{}};xui.Dom.setStyle(d,g);if(f){var c=[];if(xui.browser.ie&&xui.browser.ver==8&&d.style.filter){d.style["-ms-filter"]=d.style.filter}_.each(d.style,function(j,h){c.push(h.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+j)});return c.join(";")}else{return d.style}},_cssfake:{rotate:1,scaleX:1,scaleY:1,translateX:1,translateY:1,skewX:1,skewY:1},setStyle:function(h,d,u){var s=xui.Dom,p=xui.Dom._css3prop,w=xui.browser,v=s._cssfake;if(h.nodeType!=1){return}if(typeof d=="string"){if(v[d]){xui(h)[d](u)}else{var r=this.getStyle,l=r._c1||(r._c1={}),f=r._r1||(r._r1=/alpha\([^\)]*\)/ig),c=r.map||(r.map={"float":1,cssFloat:1,styleFloat:1});var n,m,k;d=l[d]||(l[d]=d.replace(/\-(\w)/g,function(x,i){return i.toUpperCase()}));var q=d;if(q.indexOf("border")===0){q=q.replace(/[-]?(left|top|right|bottom)/ig,"")}if(d=="$gradient"){return s.$setGradients(h,u)}else{if(d=="opacity"){u=_.isFinite(u)?parseFloat(u)>1?1:parseFloat(u)<=0?0:parseFloat(u):1;u=u>0.9999?"":u;if((!s.css3Support("opacity"))&&w.ie){if(u===""){u=1}h.style.opacity=u;h.style.zoom=1;u="alpha(opacity="+100*u+")";var g=(h.style.filter||"").replace(f,"");u=(g?(g+","):"")+u;d="filter";if(w.ver==8){n="msfilter"}}}else{if(_.arr.indexOf(p,q)!=-1){if(!s.css3Support(d)){if(w.ie&&w.ver<9){switch(d){case"transform":linb.Dom.$transformIE(h,u);break;case"boxShadow":linb.Dom.$textShadowIE(h,u,true);break}}if(d=="textShadow"&&w.ie&&w.ver<10){linb.Dom.$textShadowIE(h,u)}return this}else{if(w.cssTag2){if(d!="textShadow"){n=w.cssTag2+d.charAt(0).toUpperCase()+d.substr(1)}}}}else{if(c[d]){d=w.ie?"styleFloat":"cssFloat"}}}}if(d=="filter"){u=u.replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,","+(xui.browser.ver==8?"":" "))}h.style[d]=u;if(n){h.style[n]=u}if(m){h.style[m]=u}if(k){h.style[k]=u}}}else{for(var j in d){arguments.callee.call(this,h,j,d[j])}}},_css3prop:"opacity,textShadow,animationName,columnCount,flexWrap,boxDirection,backgroundSize,perspective,boxShadow,borderImage,borderRadius,boxReflect,transform,transition".split(","),css3Support:function(C){var u=arguments.callee,h=u._c||(u._c={});C=C.replace("$","").replace(/\-(\w)/g,function(k,f){return f.toUpperCase()});if(C in h){return h[C]}var x=document.createElement("div"),p=x.style,j=false,z=xui.browser,A=function(f){f=f.replace(/\-(\w)/g,function(n,k){return k.toUpperCase()});if(p[f]!==undefined){return true}if(xui.browser.cssTag2){f=xui.browser.cssTag2+f.charAt(0).toUpperCase()+f.substr(1);if(p[f]!==undefined){return true}}return false};x.id="xui_css3_"+_();if(C.indexOf("border")===0){C=C.replace(/[-]?(left|top|right|bottom)/ig,"")}switch(C){case"opacity":case"textShadow":j=p[C]==="";break;case"generatedContent":var w="tmp_css3_test"+_.id(),l="#"+x.id+"{line-height:auto;margin:0;padding:0;border:0;font:0/0 a}#"+x.id+":after{content:'a';visibility:hidden;line-height:auto;margin:0;padding:0;border:0;font:3px/1 a}";linb.CSS.addStyleSheet(l,w);xui("body").append(x);var m=x.offsetHeight;linb.CSS.remove("id",w);xui(x.id).remove(x);j=m>=3;break;case"fontFace":if(z.ie&&z.ver>=6){j=true}else{var w="tmp_css3_test"+_.id(),l='@font-face{font-family:"font";src:url("https://")}',p=linb.CSS.addStyleSheet(l,w),B=p.sheet||p.styleSheet,i=B?((B.cssRules&&B.cssRules[0])?B.cssRules[0].cssText:B.cssText||""):"";j=/src/i.test(i)&&i.indexOf("@font-face")===0;linb.CSS.remove("id",w)}break;case"rgba":p.cssText="background-color:rgba(0,0,0,0.1)";j=p.backgroundColor.indexOf("rgba")!=-1;break;case"hsla":p.cssText="background-color:hsla(120,40%,100%,.5)";j=p.backgroundColor.indexOf("hsla")!=-1||p.backgroundColor.indexOf("rgba")!=-1;break;case"multiplebgs":p.cssText="background:url(//:),url(//:),red url(//:)";j=/(url\s*\(.*?){3}/.test(p.background);break;case"gradient":var y="background-image:",g="-webkit-gradient(linear,left top,right bottom,from(#000),to(#fff));",d="linear-gradient(left top,#000,#fff);",c=[y,d];if(xui.browser.cssTag1){c.push(y);c.push(xui.browser.cssTag1+d)}if(xui.browser.isWebKit){c.push(y);c.push(g)}p.cssText=c.join("");j=!!p.backgroundImage;break;case"transform3d":var q=A("perspective");if(q&&"webkitPerspective" in document.documentElement.style){var w="tmp_css3_test"+_.id(),l="@media (transform-3d),(-webkit-transform-3d){#"+x.id+"{font:0/0;line-height:0;margin:0;padding:0;border:0;left:9px;position:absolute;height:3px;}}";linb.CSS.addStyleSheet(l,w);xui("body").append(x);var g=x.offsetLeft,d=x.offsetHeight;linb.CSS.remove("id",w);xui(x.id).remove(x);j=g===9&&d===3}j=q;break;default:j=A(C)}return h[C]=j},$preDefinedEffects:{Classic:[{type:"easeOut",duration:200,params:{opacity:[0,1],scaleX:[0.75,1],scaleY:[0.75,1]}},{type:"easeIn",duration:200,params:{opacity:[1,0],scaleX:[1,0.75],scaleY:[1,0.75]}}],Blur:[{type:"easeOut",duration:200,params:{opacity:[0,1]}},{type:"easeIn",duration:200,params:{opacity:[1,0]}}],Drop:[{type:"easeOut",duration:200,params:{opacity:[0,1],translateY:["-25%","0%"],scaleY:[0.5,1]}},{type:"easeIn",duration:200,params:{opacity:[1,0],translateY:["0%","-25%"],scaleY:[1,0.5]}}],"From Below":[{type:"easeOut",duration:200,params:{opacity:[0,1],scaleX:[0,1],scaleY:[0,1]}},{type:"easeIn",duration:200,params:{opacity:[1,0],scaleX:[1,0],scaleY:[1,0]}}],"From Above":[{type:"easeOut",duration:200,params:{opacity:[0,1],scaleX:[2,1],scaleY:[2,1]}},{type:"easeIn",duration:200,params:{opacity:[1,0],scaleX:[1,2],scaleY:[1,2]}}],"Slide In LR":[{type:"easeOut",duration:200,params:{opacity:[0,1],translateX:["-150%","0%"],scaleX:[0.2,1],scaleY:[0.2,1]}},{type:"easeIn",duration:200,params:{opacity:[1,0],translateX:["0%","150%"],scaleX:[1,0.2],scaleY:[1,0.2]}}],"Slide In TB":[{type:"easeOut",duration:200,params:{opacity:[0,1],translateY:["-150%","0%"],scaleX:[0.2,1],scaleY:[0.2,1]}},{type:"easeIn",duration:200,params:{opacity:[1,0],translateY:["0%","150%"],scaleX:[1,0.2],scaleY:[1,0.2]}}],"Flip V":[{type:"easeOut",duration:200,params:{opacity:[0,1],scaleY:[0,1]}},{type:"easeIn",duration:200,params:{opacity:[1,0],scaleY:[1,0]}}],"Flip H":[{type:"easeOut",duration:200,params:{opacity:[0,1],scaleX:[0,1]}},{type:"easeIn",duration:200,params:{opacity:[1,0],scaleX:[1,0]}}]},_getEffects:function(c,d){if(c&&typeof(c)=="string"){c=this.$preDefinedEffects[c];c=c?d?c[0]:c[1]:null}if(c&&xui.browser.ie&&xui.browser.ver<=8){_.filter(c,function(g,f){return !xui.Dom._cssfake[f]})}return c},_setPxStyle:function(f,c,g){if(f.nodeType!=1){return false}var d=f.style;if(g||g===0){g=((""+parseFloat(g))==(""+g))?(parseInt(g,10)||0)+"px":g+"";if((c=="width"||c=="height")&&g.charAt(0)=="-"){g="0"}if(d[c]!=g){d[c]=g;return true}}return false},_emptyDivId:"xui.empty::",getEmptyDiv:function(h){var j=1,d,g,c,f,n,l=0,m=document,k=m.body,p=function(i){i.id=d;xui([i]).attr("style","position:absolute;visibility:hidden;overflow:visible;left:"+xui.Dom.HIDE_VALUE+";top:"+xui.Dom.HIDE_VALUE+";")};h=h||1;while(1){d=this._emptyDivId+j;if(f=xui.Dom.byId(d)){if(!f.firstChild&&++l==h){return xui([f])}}else{f=m.createElement("div");p(f,d);if(k.firstChild){k.insertBefore(f,k.firstChild)}else{k.appendChild(f)}g=xui([f]);k=f=null;return g}j++}k=f=null},setCover:function(f,j){var i=arguments.callee,c="xui.temp:cover:",k="xui.temp:message:",h=(typeof(f)=="string"||typeof(f)=="function")?f:"",g,d;if((g=xui(c)).isEmpty()){xui("body").prepend(g=xui.create('<div id="'+c+'" class="xui-cover xui-custom" style="position:absolute;display:none;left:0;top:0;"><div id="'+k+'" class="xui-coverlabel xui-custom" style="position:absolute;"></div></div>'));g.setSelectable(false);xui.setNodeData(g.get(0),"zIndexIgnore",1)}if(xui.Dom.byId(k)){d=xui(k)}if(!f){if(typeof i._label=="string"&&i._label!==j){return}if(i._showed){if(d){d.empty(false)}g.css({zIndex:0,cursor:"",display:"none"});i._showed=false}delete i._label}else{if(typeof j=="string"){i._label=j}var l=xui.win;if(!i._showed){g.css({zIndex:xui.Dom.TOP_ZINDEX*10,display:"",width:l.scrollWidth()+"px",height:l.scrollHeight()+"px",cursor:"progress"});i._showed=true}if(h){if(typeof(h)=="function"){h(g,d)}else{if(d){d.html(h+"",false);d.css({left:l.scrollLeft()+l.width()/2-d.width()/2+"px",top:l.scrollTop()+l.height()/2-d.height()/2+"px"})}}}}},byId:function(c){return document.getElementById(c||"")},$hasEventHandler:function(d,c){return xui.getNodeData(d,["eHandlers",c])},submit:function(g,f,i,h,d){f=_.isHash(f)?f:{};f=_.clone(f,function(j){return j!==undefined});i=i||"get";g=g||"";h=h||(g.substring(0,6).toLowerCase()=="mailto"?"_self":"_blank");var c=[];if(!_.isEmpty(f)){if(i.toLowerCase()=="get"){window.open(g+"?"+_.urlEncode(f),h)}else{_.each(f,function(k,j){if(_.isDefined(k)){c.push('<textarea name="'+j+'">'+(typeof k=="object"?_.serialize(k):k)+"</textarea>")}});c.push('<input type="hidden" name="rnd" value="'+_()+'">');c=_.str.toDom('<form target="'+h+'" action="'+g+'" method="'+i+(d?'" enctype="'+d:"")+'">'+c.join("")+"</form>");xui.Dom.getEmptyDiv().append(c);c.get(0).submit();c.remove();c=null}}else{window.open(g,h)}},busy:function(d,c){xui.Dom.setCover(c||true,d)},free:function(c){xui.Dom.setCover(false,c)},animate:function(j,h,m,c,i,d,k,g,l){var f=document.createElement("div");_.merge(j,{position:"absolute",left:this.HIDE_VALUE,zIndex:this.TOP_ZINDEX++});xui.Dom.setStyle(f,j);document.body.appendChild(f);return xui([f]).animate(h,m,function(){_.tryF(c);if(f.parentNode){f.parentNode.removeChild(f)}f=null},i,d,k,g,l)},$enableEvents:function(d){if(!_.isArr(d)){d=[d]}var c=this,g;_.arr.each(d,function(f){g=function(i,k,h){if(typeof i=="function"){return this.$addEvent(f,i,k,h)}else{if(i===null){return this.$removeEvent(f,k,h)}}var j=arguments[1]||{};j.$xuiall=(arguments[0]===true);return this.$fireEvent(f,j)};g.$event$=1;c.plugIn(f,g)})}},After:function(D){var v=this;_.each({parent:["y",false],prev:["x",false],next:["x",true],first:["y",true],last:["y",1]},function(d,c){v.plugIn(c,function(h){return this.$iterator(d[0],d[1],true,h||1)})});_.arr.each(_.toArr("offsetLeft,offsetTop,scrollWidth,scrollHeight"),function(c){v.plugIn(c,function(){var p=this.get(0),m=window,r=document;if(p==m||p==r){if("scrollWidth"==c||"scrollHeight"==c){var l=r.documentElement,h=r.body;return Math.max(l[c],h[c])}else{p=xui.browser.contentBox?r.documentElement:r.body}}return p[c]})});var x="padding",z="margin",F="border",E="inner",y="offset",s="outer",n="width",C="height",f="Width",k="Height",g="Top",j="Left",q="top",A="left",i="Right",u="Bottom";_.arr.each([["_"+x+"H",x+g,x+u],["_"+x+"W",x+j,x+i],["_"+F+"H",F+g+f,F+u+f],["_"+F+"W",F+j+f,F+i+f],["_"+z+"W",z+j,z+i],["_"+z+"H",z+g,z+u]],function(h){var d,c=xui.Dom.getStyle;v.plugIn(h[0],function(){d=this.get(0);return(parseInt(c(d,h[1]),10)+parseInt(c(d,h[2]),10))||0})});_.arr.each([["_W",n,"_"+x+"W","_"+F+"W","_"+z+"W",E+f,y+f],["_H",C,"_"+x+"H","_"+F+"H","_"+z+"H",E+k,y+k]],function(c){v.plugIn(c[0],function(M,w,L){var K,I,G,O=M.style,T=arguments.callee,H=xui.browser.contentBox,N=T.r1||(T.r1=/%$/),m=xui.Dom.getStyle,P=xui.Dom._setPxStyle,l=typeof L,B;if(l=="undefined"||l=="boolean"){if(L===true){K=(m(M,"display")=="none");if(K){var R=xui.Dom.getEmptyDiv().html("*",false);xui([M]).swap(R);var S,J,Q;S=O.visibility,J=O.position,Q=O.display;J=J||"";S=S||"";Q=Q||"";O.visibility="hidden";O.position="absolute";O.display="block"}}G=xui([M]);switch(w){case 1:I=m(M,c[1]);if(isNaN(parseInt(I,10))||N.test(I)){I=T(M,2)-(H?G[c[2]]():0)}I=parseInt(I,10)||0;break;case 2:I=M[c[6]]-G[c[3]]();break;case 3:I=M[c[6]];if(!I){I=T(M,1)+(H?G[c[2]]():0)+G[c[3]]()}break;case 4:I=T(M,3);I+=G[c[4]]();break}if(K){O.display=Q;O.position=J;O.visibility=S;G.swap(R);R.empty(false)}return parseInt(I,10)||0}else{switch(w){case 1:if(P(M,c[1],L)){if(xui.Dom.$hasEventHandler(M,"onsize")){var h={};h[c[1]]=1;xui([M]).onSize(true,h)}}break;case 2:T(M,1,L-(H?xui([M])[c[2]]():0));break;case 3:T(M,1,L-(G=xui([M]))[c[3]]()-(H?G[c[2]]():0));break;case 4:T(M,1,L-(G=xui([M]))[c[4]]()-G[c[3]]()-(H?G[c[2]]():0));break}}})});_.arr.each([[E+f,"_W",2],[y+f,"_W",3],[s+f,"_W",4],[E+k,"_H",2],[y+k,"_H",3],[s+k,"_H",4]],function(c){v.plugIn(c[0],function(h){var d=typeof h;if(d=="undefined"||d=="boolean"){return this[c[1]](this.get(0),c[2])}else{return this.each(function(l){this[c[1]](l,c[2],h)})}})});_.arr.each([[A+"By",A],[q+"By",q],[n+"By",n],[C+"By",C]],function(c){v.plugIn(c[0],function(r,p){if(r===0){return this}var d,l,h=c[1];return this.each(function(m){d=xui.use(m.$xid)[h]();d=(parseInt(d,10)||0)+r;if(h=="width"||h=="height"){d=d>0?d:0}m.style[h]=d+"px";if(p){l={};l[h]=1;var w=xui.Dom.$hasEventHandler;if((h=="left"||h=="top")&&w(m,"onmove")){xui([m]).onMove(true,l)}if((h=="width"||h=="height")&&w(m,"onsize")){xui([m]).onSize(true,l)}}},this)})});_.arr.each(["scrollLeft","scrollTop"],function(c){v.plugIn(c,function(m){var h=document.documentElement,d=document.body;if(m!==undefined){return this.each(function(p){if(p===window||p===document){h[c]=d[c]=m}else{p[c]=m}})}else{var l=this.get(0);if(l===window||l===document){if("scrollTop"==c){return window.pageYOffset||(_.isNumb(h[c])?h[c]:d[c])}if("scrollLeft"==c){return window.pageXOffset||(_.isNumb(h[c])?h[c]:d[c])}}return l[c]}})});_.arr.each("width,height,left,top".split(","),function(c){v.plugIn(c,function(w){var G=this,d=G.get(0),m=xui.browser,l=typeof w,r=document,B;if(!d||d.nodeType==3){return}if(l=="undefined"||l=="boolean"){if((c=="width"&&(B="Width"))||(c=="height"&&(B="Height"))){if(r===d){return Math.max(r.body["scroll"+B],r.body["offset"+B],r.documentElement["scroll"+B],r.documentElement["offset"+B])}if(window===d){return m.opr?Math.max(r.body["client"+B],window["inner"+B]):m.kde?window["inner"+B]:(xui.browser.contentBox&&r.documentElement["client"+B])||r.body["client"+B]}}if(c=="width"){w=parseInt(d.style.width,10)||G._W(d,1,w)}else{if(c=="height"){w=parseInt(d.style.height,10)||G._H(d,1,w)}else{w=xui.Dom.getStyle(d,c)}}return w=="auto"?w:(parseInt(w,10)||0)}else{var h=xui.Dom._setPxStyle,B,p;return G.each(function(H){if(H.nodeType!=1){return}if(H.style[c]!==w){if(c=="width"){G._W(H,1,w)}else{if(c=="height"){G._H(H,1,w)}else{if(h(H,c,w)){if((c=="top"||c=="left")&&xui.Dom.$hasEventHandler(d,"onmove")){p={};p[c]=1;xui([H]).onMove(true,p)}}}}}})}})});_.arr.each(xui.Event._events,function(c){_.arr.each(xui.Event._getEventName(c),function(d){v.$enableEvents(d)})})},Initialize:function(){var c=window,f=document;_.set(xui.$cache.domPurgeData,"!window",{$xid:"!window",element:c});_.set(xui.$cache.domPurgeData,"!document",{$xid:"!document",element:f});xui.win=xui(["!window"],false);xui.doc=xui(["!document"],false);xui.$inlineBlock=xui.browser.gek?xui.browser.ver<3?["-moz-inline-block","-moz-inline-box","inline-block"]:"inline-block":xui.browser.ie6?["inline-block","inline"]:"inline-block",xui.doc.onKeydown(function(i,h,d){xui.Event.$keyboard=xui.Event.getKey(h);var g=xui.Event,k,j=g.getKey(h);if(j){if(j[0].length==1){j[0]=j[0].toLowerCase()}k=xui.$cache.hookKey[j.join(":")];if(k){if(k[3]){if(typeof k[3]=="function"?false===(k[3])():(!xui(k[3]).size())){delete xui.$cache.hookKey[j.join(":")];return}}if(_.tryF(k[0],k[1],k[2])===false){g.stopBubble(h);return false}}}return true},"document").onKeyup(function(h,g){delete xui.Event.$keyboard;var d=xui.Event,j,i=d.getKey(g);if(i){if(i[0].length==1){i[0]=i[0].toLowerCase()}j=xui.$cache.hookKeyUp[i.join(":")];if(j){if(j[3]){if(typeof j[3]=="function"?false===(j[3])():(!xui(j[3]).size())){delete xui.$cache.hookKeyUp[i.join(":")];return}}if(_.tryF(j[0],j[1],j[2])===false){d.stopBubble(g);return false}}}return true},"document");xui.doc.onClick(function(l,k,n){var m=xui.Event.getSrc(k),h=0,d,g;do{if(m.tagName=="A"){d=true;break}if(++h>8){break}}while(m=m.parentNode);if(d){g=_.str.trim(m.href||"").toLowerCase();if(xui.History){var j=location.href.split("#")[0];if(!xui.Event.getKey(k).shiftKey&&xui.Event.getBtn(k)=="left"&&(g.indexOf(j+"#")==0||g.indexOf("#")==0)){xui.History.setFI(m.href.replace(j,""))}}if(xui.browser.ie&&(g.indexOf("javascript:")==0||g.indexOf("#")!==-1)){return false}}},"hookA",0);if(xui.browser.ie&&xui.browser.ver<10&&f.body){f.body.onselectstart=function(g,d){g=event.srcElement;while(g&&g.tagName&&g.tagName!="BODY"&&g.tagName!="HTML"){if(d=xui.getNodeData(g,"_onxuisel")){return d!="false"}if(g.tagName=="INPUT"||g.tagName=="TEXTAREA"){break}g=g.parentNode}return true}}xui.win.afterUnload(function(){c.onresize=null;if(c.removeEventListener){c.removeEventListener("DOMMouseScroll",xui.Event.$eventhandler3,false)}f.onmousewheel=c.onmousewheel=null;if(xui.browser.isTouch){if(f.removeEventListener){f.removeEventListener((xui.browser.ie&&c.PointerEvent)?"pointerdown":(xui.browser.ie&&c.MSPointerEvent)?"MSPointerDown":"touchstart",xui.Event._simulateMousedown,false);f.removeEventListener((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",xui.Event._simulateMouseup,false)}else{if(f.detachEvent){f.detachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerdown":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerDown":"touchstart",xui.Event._simulateMousedown);f.detachEvent((xui.browser.ie&&xui.browser.ver>=11)?"pointerup":(xui.browser.ie&&xui.browser.ver>=10)?"MSPointerUp":"touchend",xui.Event._simulateMouseup)}}}if(xui.browser.ie&&f.body){f.body.onselectstart=null}if("onhashchange" in c){c.onhashchange=null}xui("body").empty();xui([c,f]).$clearEvent();xui.SC.__gc();xui.Thread.__gc();Class.__gc();_.breakO(xui.$cache,2);_.breakO([xui,Class,_],3);c.Namespace=c.Class=c.xui=c.linb=c._=undefined},"window",-1)}});Class("xui.Template","xui.absProfile",{Constructor:function(i,g,f,j){var h=arguments.callee.upper,d=_.toArr(arguments);h.apply(this,d);h=null;var c=this;c.$domId=c.KEY+":"+(c.serialId=c._pickSerialId())+":";c.domId=typeof j=="string"?j:c.$domId;c._links={};c.template={root:[["<div></div>"],[]]};c.properties={};c.events={};c.$template={};c.link(c.constructor._cache,"self").link(xui._pool,"xui");c.box=c.constructor;c.boxing=function(){return this};if(i){c.setTemplate(typeof i=="string"?{root:i}:i)}if(f){c.setEvents(f)}if(g){c.setProperties(g)}return c},Instance:{renderId:null,__gc:function(){var c=this,d=xui.$cache.reclaimId;if(!c.$noReclaim){(d[c.KEY]||(d[c.KEY]=[])).push(c.serialId)}else{delete c.$noReclaim}delete xui.$cache.profileMap[c.domId];delete xui.$cache.profileMap[c.$domId];c.unLinkAll();_.breakO([c.properties,c.event,c],2)},_reg0:/^\w[\w_-]*$/,show:function(c){if(!c){c=xui("body")}c=xui(c);c.append(this);return this},getRootNode:function(){return xui.getNodeData(this.renderId,"element")},getRoot:function(){return xui([this.renderId],false)},setDomId:function(h){var d=this,g=xui.$cache.profileMap,f=d._reg0;if(typeof h=="string"&&f.test(h)&&!document.getElementById(h)){if(d.domId!=d.$domId){delete g[d.domId]}d.domId=h;if(d.renderId){d.getRootNode().id=h}if(g[d.$domId]){g[h]=d}}return d},destroy:function(){if(this.renderId){var c=this.getRootNode();xui.$purgeChildren(c);if(c.parentNode){c.parentNode.removeChild(c)}c=null}else{this.__gc()}},setEvents:function(d,f){var c=this;if(typeof d=="object"){c.events=d}else{c.events[d]=f}return c},setTemplate:function(g,k){var c=this,f=c.template,l=c.$template,j;if(typeof g=="object"){c.template=g;j={};for(var d in g){j[d||"root"]=c._buildTemplate(g[d])}c.$template=j}else{if(typeof k=="string"){l[g]=c._buildTemplate(f[g]=k)}else{l.root=c._buildTemplate(f.root=g)}}return c},setProperties:function(d,f){var c=this;if(typeof d=="object"){c.properties=d}else{c.properties[d]=f}return c},getItem:function(i){var h=xui.getNodeData(i);if(!h){return}var j=h.tpl_evid,d=h.tpl_evkey;if(!j||!d){return}var c=arguments.callee,g=c.f||(c.f=function(n,m,q){var l,p,k,f;for(k in n){p=n[k];if(_.isArr(p)&&(m==k||m.indexOf((n.tpl_evkey||k)+".")===0)){for(l=0;f=p[l];l++){if(f.tpl_evkey==m&&f.id==q){return f}else{if(f=g(f,m,q)){return f}}}}}});return g(this.properties,d,j)},_pickSerialId:function(){var c=xui.$cache.reclaimId[this.KEY];if(c&&c[0]){return c.shift()}return this.constructor._ctrlId.next()},render:function(){var A=this;if(!A.renderId){var d=xui.$getGhostDiv();xui.$cache.profileMap[A.domId]=xui.$cache.profileMap[A.$domId]=this;d.innerHTML=A.toHtml();var c=A.events,r=xui.Event._eventHandler,m=d.getElementsByTagName("*"),p=A.$domId,w=function(){return xui.Event(arguments[0],this,0,p)},u,n,s,q,h,y,g,z,x;if(n=m.length){for(u=0;u<n;u++){if((h=m[u]).nodeType!=1){continue}y=h.getAttribute("tpl_evkey");g=h.getAttribute("tpl_evid");if(y!==null&&g!==null){x=xui.$registerNode(h);x.tpl_evkey=y;x.tpl_evid=g;if(z=c[y]){x=x.eHandlers||(x.eHandlers={});for(s in z){x[s]=w;if(q=r[s]){x[q]=h[q]=w}}}h.removeAttribute("tpl_evkey");h.removeAttribute("tpl_evid")}}if(!d.firstChild.$xid){xui.$registerNode(d.firstChild)}A.renderId=d.firstChild.$xid}h=d=null}return A},refresh:function(){var f=this;if(f.renderId){var d=document.createElement("span"),g=f.getRootNode(),c=xui.$cache.profileMap;delete c[f.domId];delete c[f.$domId];if(g.parentNode){g.parentNode.replaceChild(d,g)}f.destroy();delete f.renderId;f.render();if(d.parentNode){d.parentNode.replaceChild(f.getRootNode(),d)}d=g=null}return f},renderOnto:function(h){var c=this,i,g,f="style",d;if(typeof h=="string"){h=document.getElementById(h)}i=h.id||c.domId;if(!c.renderId){c.render()}g=c.getRootNode();h.parentNode.replaceChild(g,h);if(g.tabIndex!=h.tabIndex){g.tabIndex!=h.tabIndex}if(h.className){g.className+=h.className}if(xui.browser.ie&&(d=h.style.cssText)){g.style.cssText+=d+""}else{if(d=h.getAttribute(f)){g.setAttribute(f,(g.getAttribute(f)||"")+d)}}this.setDomId(i)},toHtml:function(c){var d=_.copy(c||this.properties||{});d.tpl_evkey="root";return this._doTemplate(d)},_reg1:/([^{}]*)\{([\w]+)\}([^{}]*)/g,_reg2:/\[event\]/g,_buildTemplate:function(g){if(typeof g=="string"){var f=[[],[]],d=f[0],c=f[1];g=g.replace(this._reg2,' tpl_evid="{id}" tpl_evkey="{tpl_evkey}" ');g.replace(this._reg1,function(i,h,k,j){if(h){d[d.length]=h}c[d.length]=d[d.length]=k;if(j){d[d.length]=j}return""});return f}else{return g}},_getEV:function(j,d,c,g){var h=xui.getNodeData(g);if(!h){return}var l=this.events,f=h.tpl_evkey,i=(f&&l&&l[f])||l,k=i&&i[c];if(k){j.push(k)}},_reg3:/(^\s*<\w+)(\s|>)(.*)/,_doTemplate:function(k,y,z){if(!k){return""}var v=this,m=arguments.callee,x,u,g,w=_.isArr(k),p=v.$template,q=p[y||"root"],c=!z;z=z||[];if(w){if(typeof q!="function"){q=m}for(var j=0;u=k[j++];){u.tpl_evkey=y;q.call(v,u,y,z)}}else{if(typeof q=="function"){q.call(v,k,y,z)}else{y=y?y+".":"";var f=q[0],d=q[1];for(var j=0,h=f.length;j<h;j++){if(g=d[j]){if(g in k){u=typeof k[g]=="function"?k[g].call(v,g,k):k[g];if(p[x=y+g]){m.call(v,u,x,z)}else{z[z.length]=u}}}else{z[z.length]=f[j]}}}}if(c){return z.join("").replace(v._reg3,'$1 id="'+v.$domId+'" $2$3')}},serialize:function(){var c=this,g=_.serialize,f=xui.absObj.$specialChars,d=_.isEmpty(c.properties)?null:_.clone(c.properties,function(j,h){return !f[(h+"").charAt(0)]});return"new xui.Template("+g(c.template||null)+","+g(d)+","+g(_.isEmpty(c.events)?null:c.events)+","+g(c.$domId!=c.domId?c.domId:null)+")"}},Static:{getFromDom:function(c){if((c=typeof c=="string"?c:(c&&c.id))&&(c=xui.$cache.profileMap[c])&&c["xui.Template"]){return c.boxing()}},_cache:[],_ctrlId:new _.id()}});Class("xui.Com",null,{Initialize:function(){var c=this;xui.launch=function(d,f,i,h,g){c.load.apply(c,arguments)}},After:function(){this._pool={}},Constructor:function(f,d,g){var c=this;c._nodes=[];c.host=g||c;c.$xid=c.constructor._ctrlId.next();c.constructor._pool[c.$xid]=xui.Com._pool[c.$xid]=c;c.properties=f||(c.properties?_.clone(c.properties):{});c.events=_.copy(c.events)||{};if(d){_.merge(c.events,d,"all")}c._ctrlpool={};c._innerCall("initialize")},Instance:{autoDestroy:true,dataBindLoadType:"sync",background:"",_toDomElems:function(){var c=this;if(!c.created){c.create(null,false)}c.render();return c.getUIComponents()._toDomElems()},setAlias:function(g){var d=this,c=d.alias;if(c&&d.host&&d.host!==d){try{delete d.host[c]}catch(f){d.host[c]=undefined}}if(d.host&&d.host!==d){d.host[g]=d}return d},getAlias:function(){return this.alias},setHost:function(f,d){var c=this;c.host=f;if(d){c.setAlias(d)}return c},getHost:function(){return this.host},setProperties:function(d,f){var c=this;if(!d){c.properties={}}else{if(typeof d=="string"){c.properties[d]=f}else{_.merge(c.properties,d,"all")}}return c},getProperties:function(c){return c?this.properties[c]:this.properties},setEvents:function(d,f){var c=this;if(!d){c.events={}}else{if(typeof d=="string"){c.events[d]=f}else{_.merge(c.events,d,"all")}}return c},getEvents:function(c){return c?this.events[c]:this.events},fireEvent:function(f,d,h){var g,c=this;if(c.events&&(g=c.events[f])){if(typeof g=="string"){g=c[g]}if(typeof g=="function"){return g.apply(h||c.host||c,d||[])}}},_fireEvent:function(f,d){var g,c=this;if(c.events&&(g=c.events[f])){if(typeof g=="string"){g=c[g]}c.$lastEvent=f;if(typeof g=="function"){d=d||[];d.splice(0,0,c,c.threadid);return g.apply(c.host||c,d)}}},_innerCall:function(d){var c=this;return _.tryF(c[d],[c,c.threadid],c)},customAppend:function(d,c,h,g,f){return false},show:function(g,h,d,l,k,j){var c=this,i=function(){var n=c.customStyle;if(n&&!_.isEmpty(n)){var m=[];_.each(n,function(q,p){m.push(p+" : "+q+";")});var f=".xui-com-"+c.$xid+"{\r\n"+m.join("\r\n")+"\r\n}";xui.CSS.addStyleSheet(f,"xui:css:com-"+c.$xid,1)}if(c.getUIComponents().isEmpty()){_.tryF(c.customAppend,[h,d,k,j,l],c);_.tryF(g,[null,c,l],c.host)}else{if(!(h&&h["xui.UI"]&&!h.get(0).renderId)){c.render()}if(false===_.tryF(c.customAppend,[h,d,k,j,l],c)){(h||xui("body")).append(c.getUIComponents(false),d);c.getUIComponents(true).show(h||xui("body"),d).each(function(q){if(q.KEY=="xui.UIProfile"&&_.get(q,["properties","defaultFocus"])){try{_.asyRun(function(){q.boxing().activate()})}catch(p){}}})}_.tryF(g,[null,c,l],c.host)}};c.threadid=l;if(c.created){i()}else{c.create(i,l)}return c},render:function(d){var c=this;if(c.renderId!="ok"){c.getUIComponents().render(d);c._fireEvent("onRender");c.renderId="ok"}return c},create:function(h,j){var g=this;if(g.created){_.tryF(h,[null,g,j],g.host);return}var i,f=[];g.threadid=j;if(false===g._fireEvent("beforeCreated")){return}f.push(function(k){if(k){g.threadid=k}g._fireEvent("onCreated")});if(g.dataBindLoadType!="none"){var c=g.getDataBinders();if(c&&c.length){var d=function(l){var k={};_.arr.each(c,function(p,m){var n=p.boxing().read(null,null,null,null,"return");if(n){k[m]=n}});if(!_.isEmpty(k)){xui.absIO.groupCall(k,null,null,null,l)}c.length=0;k=c=null};if(g.dataBindLoadType=="sync"){f.push(d)}else{d()}}}if((i=g.base)&&i.length){f.push(function(k){xui.SC.groupCall(g.base,function(l){g._fireEvent("onLoadBaseClass",[l])},null,k)})}if((i=g.required)&&i.length){f.push(function(k){xui.SC.groupCall(g.required,function(l){g._fireEvent("onLoadReqiredClass",[l])},null,k)})}if(g.iniComponents){f.push(function(){g._createInnerComs()})}if(g.iniResource){f.push(function(){g._fireEvent("onIniResource");g._innerCall("iniResource")})}if(g.iniExComs){f.push(function(){g._innerCall("iniExComs")})}f.push(function(k){if(g.background){xui.SC.runInBG(g.background)}g._fireEvent("onReady")});f.push(function(k){g.created=true;_.tryF(h,[null,g,k],g.host)});if(j===false){_.arr.each(f,function(k){k.call()})}else{xui.Thread.observableRun(f,null,j)}return g},_createInnerComs:function(){var c=this;if(c._innerComsCreated){return}if(false===c._fireEvent("beforeIniComponents")){return}Array.prototype.push.apply(c._nodes,c._innerCall("iniComponents")||[]);if(c.autoDestroy){_.arr.each(c._nodes,function(d){if(d.box&&d.box["xui.UI"]&&!d.box.$initRootHidden){(d.$afterDestroy=(d.$afterDestroy||{}))["comDestroyTrigger"]=function(){if(c.autoDestroy&&!c.destroyed){c.destroy()}c=null};return false}})}c._fireEvent("afterIniComponents");c._innerComsCreated=true},iniComponents:function(){},getAllComponents:function(){if(!this._innerComsCreated){this._createInnerComs()}var c=[];_.each(this._ctrlpool,function(d){c.push(d)});return xui.absObj.pack(c,false)},getData:function(){var c={};this.getAllComponents().each(function(f){var g=f.properties,d=c[f.alias]={};_.arr.each(["src","html","items","lsitKey","header","rows","target","toggle","attr","JSONData","XMLData","JSONUrl","XMLUrl","dateStart","value","labelCaption"],function(h){if(h in g){d[h]=g[h]}});if("caption" in g&&_.isSet(g.caption)){d.caption=g.caption}});return c},setData:function(c){this.getAllComponents().each(function(g){var h=g.properties,d=g.boxing(),f=c[g.alias];if(f&&_.isHash(f)&&!_.isEmpty(f)){_.arr.each(["src","html","items","lsitKey","header","rows","target","toggle","attr","JSONData","XMLData","JSONUrl","XMLUrl","dateStart","value","labelCaption","caption"],function(i){if(i in h&&i in f){d["set"+_.str.initial(i)](f[i])}})}});return this},getValue:function(){var c={};this.getAllComponents().each(function(d){if("value" in d.properties){c[d.alias]=d.properties.value}});return c},setValue:function(c){if(!_.isEmpty(c)){this.getAllComponents().each(function(d){if("value" in d.properties&&d.alias in c){d.boxing().setValue(c[d.alias])}})}return this},getUIValue:function(){var c={};this.getAllComponents().each(function(d){if("$UIvalue" in d.properties){c[d.alias]=d.properties.$UIvalue}});return c},setUIValue:function(c){if(!_.isEmpty(c)){this.getAllComponents().each(function(d){if("value" in d.properties&&d.alias in c){d.boxing().setUIValue(c[d.alias])}})}return this},getDataBinders:function(){if(!this._innerComsCreated){this._createInnerComs()}var d=_.copy(this._nodes),f,c="xui.DataBinder";_.filter(d,function(g){return !!(g.box[c])});return d},getUIComponents:function(c){if(!this._innerComsCreated){this._createInnerComs()}var f=_.copy(this._nodes),g,d="xui.UI",h="$initRootHidden";_.filter(f,function(i){return !!(i.box[d])&&(c===true?!i.box[h]:c===false?i.box[h]:true)});return xui.UI.pack(f,false)},getComponents:function(){if(!this._innerComsCreated){this._createInnerComs()}return xui.absObj.pack(_.copy(this._nodes),false)},setComponents:function(f){var c=this,d;_.arr.each(c._nodes,function(g){if((d=c[g.alias])&&d.get(0)==g){delete c[g.alias]}});_.arr.each(c._nodes=f.get(),function(g){g.boxing().setHost(c,g.alias)});return c},AddComponents:function(f){var c=this,d=c._nodes;_.arr.each(f.get(),function(g){g.boxing().setHost(c,g.alias);c._nodes.push(g)});return c},isDestroyed:function(){return !!this.destroyed},destroy:function(){var c=this,d=c._nodes;c._fireEvent("onDestroy");c.destroyed=true;if(d&&d.length){_.arr.each(d,function(f){if(f&&f.box){f.boxing().destroy()}},null,true)}if(d&&d.length){c._nodes.length=0}c._ctrlpool=null;delete c.constructor._pool[c.$xid];delete xui.Com._pool[c.$xid];_.breakO(c);c.destroy=function(){};c.destroyed=true}},Static:{_ctrlId:new _.id(),getClsFromDom:function(d){var c=xui.UIProfile.getFromDom(d);if(c&&(c=c.host)){return c.KEY}},getAllInstance:function(){return this._pool},destroyAll:function(){_.each(this._pool,function(c){if(!c.destroyed){c.destroy()}})},load:function(d,f,j,i,g){if(!d){var h=new Error("No cls");_.tryF(f,[h,null]);throw h}if(typeof i=="function"){thowUI=i}var c=function(){var k=function(p){if(p){try{_.each(this.viewStyles,function(r,q){xui("html").css(q,xui.adjustRes(r))})}catch(n){}var l=this,m=function(){if(!_.isFun(l)){throw"'"+d+"' is not a constructor"}var q=new l();if(g!==false){q.show(f)}else{_.tryF(f,[null,q],q)}};if(i&&i!="default"){xui.setTheme(i,true,function(){if(j){xui.setLang(j,m)}else{m()}})}else{if(j){xui.setLang(j,m)}else{m()}}}else{var n=new Error("No class name");_.tryF(f,[n,null]);throw n}};if(typeof(d)=="function"&&d.$xui$){k(ok)}else{d=d+""}if(/\.js$/i.test(d)){xui.fetchClass(d,k,function(l){_.tryF(f,[l,null])})}else{xui.SC(d,k,true,null,{retry:0,onFail:function(l){_.tryF(f,[l,null])}})}};if(xui.isDomReady){c()}else{xui.main(c)}},$EventHandlers:{beforeCreated:function(c,d){},onLoadBaseClass:function(c,f,d){},onIniResource:function(c,d){},beforeIniComponents:function(c,d){},afterIniComponents:function(c,d){},onLoadRequiredClass:function(c,f,d){},onReady:function(c,d){},onRender:function(c,d){},onDestroy:function(c){}}}});Class("xui.Cookies",null,{Static:{set:function(c,g,i,h,f,d){if(c){document.cookie=escape(c)+"="+escape(g)+(i?";expires="+(new Date((new Date()).getTime()+(24*60*60*1000*i))).toGMTString():"")+(h?";path="+h:"")+(f?";domain="+f:"")+(d?";secure":"")}return this},get:function(f){var g,d,c=document.cookie.split("; ");for(g=0;g<c.length;g++){d=c[g].split("=");if(d[0]==escape(f)){return d[1]?unescape(d[1]):""}}return null},remove:function(c){return this.set(c,"",-1).set(c,"/",-1)},clear:function(){_.arr.each(document.cookie.split(";"),function(c){xui.Cookies.remove(_.str.trim(c.split("=")[0]))})}}});Class("xui.MessageService",null,{Instance:{initialize:function(){this.$subscribers={}},subscribe:function(d,g,j,h){if(d===null||d===undefined||g===null||g===undefined||typeof j!="function"){return}var k=this.$subscribers,f;k[d]=k[d]||[];f=_.arr.subIndexOf(k[d],"id",g);if(f!=-1){_.arr.removeFrom(k[d],f)}return k[d].push({id:g,receiver:j,asy:!!h})},unsubscribe:function(d,g){var h=this.$subscribers,f;if(!g){if(d===null||d===undefined){h={}}else{delete h[d]}}else{if(h[d]){f=_.arr.subIndexOf(h[d],"id",g);if(f!=-1){_.arr.removeFrom(h[d],f)}}}},publish:function(f,d,g){var h=this.$subscribers;if(f===null||f===undefined){for(var f in h){_.arr.each(h[f],function(c){if(c.asy){_.asyRun(c.receiver,0,d,g)}else{return _.tryF(c.receiver,d,g,true)}})}}else{if(h[f]){_.arr.each(h[f],function(c){if(c.asy){_.asyRun(c.receiver,0,d,g)}else{return _.tryF(c.receiver,d,g,true)}})}}},getSubscribers:function(c){return(c===null||c===undefined)?this.$subscribers:this.$subscribers[c]}}});Class("xui.XML",null,{Static:{json2xml:function(j,f,d){var c=[],h=function(q,r,m){if(typeof r=="object"){if(_.isArr(r)){if(r.length){for(var p=0,n=r.length;p<n;p++){m.push(h(q,r[p],m))}}else{m.push("<"+(f?f(q):q)+">__[]__</"+(f?f(q):q)+">")}}else{var k;m.push("<"+(f?f(q):q));for(var p in r){if(p.charAt(0)=="@"){m.push(" "+p.substr(1)+'="'+(d?d(r[p]):r[p])+'"')}else{k=1}}m.push(k?">":"/>");if(k){for(var p in r){if(p=="#text"){m.push((d?d(r[p]):r[p]))}else{if(p=="#cdata"){m.push("<![CDATA["+(d?d(r[p]):r[p])+"]]>")}else{if(p.charAt(0)!="@"){m.push(h(p,r[p],m))}}}}m.push("</"+(f?f(q):q)+">")}}}else{m.push("<"+(f?f(q):q)+">"+(d?d(r):r)+"</"+(f?f(q):q)+">")}};for(var g in j){h(g,j[g],c)}return'<?xml version="1.0" encoding="UTF-8" ?>'+c.join("")},xml2json:function(i){if(i.nodeType==9){i=i.documentElement}var c={},j={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},f=/^-?(\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/,d={"__[]__":[],"null":null,"false":false,"true":true},h=function(m){return m.replace(/[\s\S]/g,function(p,n){return(n=j[p])?n:p})},k=function(p){var q,m;p.normalize();for(q=p.firstChild;q;){m=q;if(q.nodeType==1){k(q)}q=q.nextSibling;if(m.nodeType==3&&!m.nodeValue.match(/\S/)){p.removeChild(m)}}return p},l=function(u){if("innerHTML" in u){u=u.innerHTML;u=u in d?d[u]:f.test(u)?parseFloat(u):u}else{var q=[],r,s=function(y){if(y.nodeType==1){q.push("<"+y.nodeName);var v=y.attributes;for(var x=0,w=v.length;x<w;x++){q.push(" "+v[x].nodeName+'="'+(v[x].nodeValue||"")+'"')}if(y.firstChild){q.push(">");for(v=y.firstChild;v;v=v.nextSibling){q.push(s(v))}q.push("</"+y.nodeName+">")}else{q.push("/>")}}else{if(y.nodeType==3){y=y.nodeValue;q.push(y in d?d[y]:f.test(y)?parseFloat(y):y)}else{if(y.nodeType==4){q.push("<![CDATA["+y.nodeValue+"]]>")}}}};for(var p=u.firstChild;p;p=p.nextSibling){s(p)}u=(q.length==1?q[0]:q.join(""))}return typeof u=="string"?h(u):u},g=function(u){var p=null,y,v;if(u.nodeType==1&&((y=u.attributes).length||u.firstChild)){p={};if(y.length){for(var s=0,r=y.length;s<r;s++){p["@"+y[s].nodeName]=(y[s].nodeValue||"")+""}}if(u.firstChild){var x=0,w=0,m=0,q;for(q=u.firstChild;q;q=q.nextSibling){v=q.nodeType;if(v==1){m++}else{if(v==3){x++}else{if(v==4){w++}}}}if(m){if(x<2&&w<2){for(q=u.firstChild;q;q=q.nextSibling){if(q.nodeType==3){p["#text"]=h(q.nodeValue)}else{if(q.nodeType==4){p["#cdata"]=h(q.nodeValue)}else{if(p[v=q.nodeName]){if(p[v] instanceof Array){p[v][p[v].length]=g(q)}else{p[v]=[p[v],g(q)]}}else{p[v]=g(q)}}}}}else{if(!y.length){p=l(u)}else{p["#text"]=l(u)}}}else{if(x){if(!y.length){p=l(u)}else{p["#text"]=l(u)}}else{if(w){if(w>1){p=l(u)}else{for(q=u.firstChild;q;q=q.nextSibling){p["#cdata"]=h(q.nodeValue)}}}}}}}return p};c[i.nodeName]=g(k(i));return c},parseXML:function(c){var g=null;if(typeof DOMParser=="undefined"){try{g=new ActiveXObject("Microsoft.XMLDOM");g.async=false;g.loadXML(c||"")}catch(f){g=null}}else{try{var d=new DOMParser();g=d.parseFromString(c||"","text/xml")}catch(f){g=null}finally{d=null}}return g}}});Class("xui.XMLRPC",null,{Static:{wrapRequest:function(c,k){if(typeof c=="object"){k=c.params;c=c.methodName}if(!c){return null}if(k&&!k instanceof Array){return null}var h=this,f=['<?xml version="1.0"?><methodCall><methodName>'+c+"</methodName>"];if(k){f.push("<params>");for(var g=0,d=k.length;g<d;g++){f.push("<param>"+h._wrapParam(k[g])+"</param>")}f.push("</params>")}f.push("</methodCall>");return f.join("")},parseResponse:function(h){if(!h||!h.documentElement){return null}var i=h.documentElement;if(i.nodeName!="methodResponse"){return null}var d=this,c={},g,f;f=i.getElementsByTagName("value")[0];if(f.parentNode.nodeName=="param"&&f.parentNode.parentNode.nodeName=="params"){c.result=d._parseElem(f)}else{if(f.parentNode.nodeName=="fault"){g=d._parseElem(f);c.error={code:g.faultCode,message:g.faultString}}else{return null}}if(!c.result&&!c.error){return null}return c},_dateMatcher:/^(?:(\d\d\d\d)-(\d\d)(?:-(\d\d)(?:T(\d\d)(?::(\d\d)(?::(\d\d)(?:\.(\d+))?)?)?)?)?)$/,_parseElem:function(h){var s=this,d=h.childNodes,v,w,c,u,r;if(d.length==1&&d.item(0).nodeType==3){return d.item(0).nodeValue}for(var q=0,m=d.length;q<m;q++){if(d.item(q).nodeType==1){v=d.item(q);switch(v.nodeName.toLowerCase()){case"i4":case"int":u=parseInt(v.firstChild.nodeValue,10);return isNaN(u)?null:u;case"double":u=parseFloat(v.firstChild.nodeValue);return isNaN(u)?null:u;case"boolean":return Boolean(parseInt(v.firstChild.nodeValue,10)!==0);case"string":return v.firstChild?v.firstChild.nodeValue:"";case"datetime.iso8601":if(r=v.firstChild.nodeValue.match(s._dateMatcher)){u=new Date;if(r[1]){u.setUTCFullYear(parseInt(r[1],10))}if(r[2]){u.setUTCMonth(parseInt(r[2]-1,10))}if(r[3]){u.setUTCDate(parseInt(r[3],10))}if(r[4]){u.setUTCHours(parseInt(r[4],10))}if(r[5]){u.setUTCMinutes(parseInt(r[5],10))}if(r[6]){u.setUTCSeconds(parseInt(r[6],10))}if(r[7]){u.setUTCMilliseconds(parseInt(r[7],10))}return u}return null;case"base64":return null;case"nil":return null;case"struct":u={};for(var f,p=0;f=v.childNodes.item(p);p++){if(f.nodeType==1&&f.nodeName=="member"){c="";h=null;for(var g,n=0;g=f.childNodes.item(n);n++){if(g.nodeType==1){if(g.nodeName=="name"){c=g.firstChild.nodeValue}else{if(g.nodeName=="value"){h=g}}}}if(c&&h){u[c]=s._parseElem(h)}}}return u;case"array":u=[];w=v.firstChild;while(w&&(w.nodeType!=1||w.nodeName!="data")){w=w.nextSibling}if(!w){return null}h=w.firstChild;while(h){if(h.nodeType==1){u.push(h.nodeName=="value"?s._parseElem(h):null)}h=h.nextSibling}return u;default:return null}}}return null},_map:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},_date2utc:function(g){var c=this,f=this._zeroPad;return g.getUTCFullYear()+"-"+f(g.getUTCMonth()+1)+"-"+f(g.getUTCDate())+"T"+f(g.getUTCHours())+":"+f(g.getUTCMinutes())+":"+f(g.getUTCSeconds())+"."+f(g.getUTCMilliseconds(),3)},_zeroPad:function(d,c){if(!c){c=2}d=((!d&&d!==0)?"":(""+d));while(d.length<c){d="0"+d}return d},_wrapParam:function(l){var k=this,m=k._map,f=["<value>"],c;switch(typeof l){case"number":f.push(!isFinite(l)?"<nil/>":parseInt(l,10)===Math.ceil(l)?("<int>"+l+"</int>"):("<double>"+l+"</double>"));break;case"boolean":f.push("<boolean>"+(l?"1":"0")+"</boolean>");break;case"string":f.push("<string>"+l.replace(/[<>&"']/g,function(i){return m[i]})+"</string>");break;case"undefined":f.push("<nil/>");case"function":f.push("<string>"+(""+l).replace(/[<>&"']/g,function(i){return m[i]})+"</string>");case"object":c=Object.prototype.toString.call(l);if(l===null){f.push("<nil/>")}else{if(c==="[object Array]"){f.push("<array><data>");for(var h=0,d=l.length;h<d;h++){f.push(k._wrapParam(l[h]))}f.push("</data></array>")}else{if(c==="[object Date]"&&isFinite(+l)){f.push("<dateTime.iso8601>"+k._date2utc(l)+"</dateTime.iso8601>")}else{f.push("<struct>");for(var g in l){if(l.hasOwnProperty(g)){f.push("<member><name>"+g+"</name>"+k._wrapParam(l[g])+"</member>")}}f.push("</struct>")}}}break}f.push("</value>");return f.join("")}}});Class("xui.SOAP",null,{Static:{RESULT_NODE_NAME:"return",getNameSpace:function(c){var d=c.documentElement.attributes.targetNamespace;return d===undefined?c.documentElement.attributes.getNamedItem("targetNamespace").nodeValue:d.value},getWsdl:function(c,f){var d=false;xui.Ajax(c+"?wsdl",null,function(g){d=g},function(g){_.tryF(f,[g],this)},null,{method:"GET",rspType:"xml",asy:false}).start();return d},wrapRequest:function(d,h,c){if(typeof d=="object"){c=h;h=d.params;d=d.methodName}var g=this,f=g.getNameSpace(c);return'<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Body><'+d+' xmlns="'+f+'">'+g._wrapParams(h)+"</"+d+"></soap:Body></soap:Envelope>"},parseResponse:function(g,d,c){if(typeof d=="object"){d=d.methodName}var f=this,h={},i=g.getElementsByTagName(d+"Result");if(!i.length){i=g.getElementsByTagName(f.RESULT_NODE_NAME)}if(!i.length){h.fault={faultcode:g.getElementsByTagName("faultcode")[0].childNodes[0].nodeValue,faultstring:g.getElementsByTagName("faultstring")[0].childNodes[0].nodeValue}}else{h.result=f._rsp2Obj(i[0],c)}return h},_rsp2Obj:function(f,c){var g=this,d=g._getTypesFromWsdl(c);return g._node2obj(f,d)},_getTypesFromWsdl:function(d){var h=[],c,j;c=d.getElementsByTagName("s:element");if(c.length){j=true}else{c=d.getElementsByTagName("element");j=false}for(var g=0,f=c.length;g<f;g++){if(j){if(c[g].attributes.getNamedItem("name")!=null&&c[g].attributes.getNamedItem("type")!=null){h[c[g].attributes.getNamedItem("name").nodeValue]=c[g].attributes.getNamedItem("type").nodeValue}}else{if(c[g].attributes.name!=null&&c[g].attributes.type!=null){h[c[g].attributes.name.value]=c[g].attributes.type.value}}}return h},_getTypeFromWsdl:function(c,d){return d[c]==undefined?"":d[c]},_node2obj:function(q,k){if(q==null){return null}var n=this,p,g;if(q.nodeType==3||q.nodeType==4){p=q.nodeValue;switch(n._getTypeFromWsdl(q.parentNode.nodeName,k).toLowerCase()){case"s:boolean":return p+""=="true";case"s:int":case"s:long":return p===null?0:parseInt(p+"",10);case"s:double":return p===null?0:parseFloat(p+"");case"s:datetime":if(p==null){return null}else{if(g=p.match(n._dateMatcher)){var m=new Date;if(g[1]){m.setUTCFullYear(parseInt(g[1],10))}if(g[2]){m.setUTCMonth(parseInt(g[2]-1,10))}if(g[3]){m.setUTCDate(parseInt(g[3],10))}if(g[4]){m.setUTCHours(parseInt(g[4],10))}if(g[5]){m.setUTCMinutes(parseInt(g[5],10))}if(g[6]){m.setUTCSeconds(parseInt(g[6],10))}if(g[7]){m.setUTCMilliseconds(parseInt(g[7],10))}return m}return null}default:return p===null?"":(p+"")}}else{if(q.childNodes.length==1&&(q.childNodes[0].nodeType==3||q.childNodes[0].nodeType==4)){return n._node2obj(q.childNodes[0],k)}else{if(n._getTypeFromWsdl(q.nodeName,k).toLowerCase().indexOf("arrayof")==-1){var f=q.hasChildNodes()?{}:null;for(var h=0,c=q.childNodes.length;h<c;h++){f[q.childNodes[h].nodeName]=n._node2obj(q.childNodes[h],k)}return f}else{var j=[];for(var h=0,c=q.childNodes.length;h<c;h++){j.push(n._node2obj(q.childNodes[h],k))}return j}}}return null},_wrapParams:function(g){var d=this,c=[];for(var f in g){switch(typeof(g[f])){case"string":case"number":case"boolean":case"object":c.push("<"+f+">"+d._wrapParam(g[f])+"</"+f+">");break;default:break}}return c.join("")},_map:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&apos;"},_wrapParam:function(g){var j=this,l="",c=j._map,f,h,i,k;switch(typeof(g)){case"string":l+=g.replace(/[<>&"']/g,function(m){return c[m]});break;case"number":case"boolean":l+=g+"";break;case"object":f=Object.prototype.toString.call(g);if(f==="[object Date]"&&isFinite(+g)){l+=j._date2utc(g)}else{if(f==="[object Array]"){for(var d in g){k=g[d];switch(typeof k){case"number":i=parseInt(k,10)===Math.ceil(k)?"int":"double";break;case"boolean":i="bool";break;case"string":i="string";break;case"object":h=Object.prototype.toString.call(k);if(h==="[object Array]"){i="Array"}else{if(h==="[object Date]"&&isFinite(+k)){i="DateTime"}else{i="object"}}break}l+="<"+i+">"+j._wrapParam(g[d])+"</"+i+">"}}else{for(var d in g){if(g.hasOwnProperty(d)){l+="<"+d+">"+j._wrapParam(g[d])+"</"+d+">"}}}}break}return l},_date2utc:function(g){var c=this,f=this._zeroPad;return g.getUTCFullYear()+"-"+f(g.getUTCMonth()+1)+"-"+f(g.getUTCDate())+"T"+f(g.getUTCHours())+":"+f(g.getUTCMinutes())+":"+f(g.getUTCSeconds())+"."+f(g.getUTCMilliseconds(),3)},_zeroPad:function(d,c){if(!c){c=2}d=((!d&&d!==0)?"":(""+d));while(d.length<c){d="0"+d}return d}}});Class("xui.DragDrop",null,{Static:{_eh:"_dd",_id:"xui.dd:proxy:",_idi:"xui.dd:td:",_type:{blank:1,move:1,shape:1,deep_copy:1,copy:1,icon:1,none:1},_Icons:{none:"0 0",move:"0 -16px",link:"0 -32px",add:"0 -48px"},_profile:{},_left:function(value){with(this._profile){if(magneticDistance>0&&xMagneticLines.length){var l=xMagneticLines.length;while(l--){if(Math.abs(value-xMagneticLines[l])<=magneticDistance){return xMagneticLines[l]}}}if(widthIncrement>1){return Math.floor(value/widthIncrement)*widthIncrement}return value}},_top:function(value){with(this._profile){if(magneticDistance>0&&yMagneticLines.length){var l=yMagneticLines.length;while(l--){if(Math.abs(value-yMagneticLines[l])<=magneticDistance){return yMagneticLines[l]}}}if(heightIncrement>1){return Math.floor(value/heightIncrement)*heightIncrement}return value}},_ini:function(h){var g=this,f=g._profile,c=xui.win;g._box={width:c.width()+c.scrollLeft(),height:c.height()+c.scrollTop()};f.ox=f.x;f.oy=f.y;if(g._proxy=h){g._proxystyle=h.get(0).style;g._profile.curPos=g._cssPos=g._proxy.cssPos();g._cssPos_x=f.x-g._cssPos.left;g._cssPos_y=f.y-g._cssPos.top;f.restrictedLeft=f.x-(f.maxLeftOffset||0);f.restrictedRight=f.x+(f.maxRightOffset||0);f.restrictedTop=f.y-(f.maxTopOffset||0);f.restrictedBottom=f.y+(f.maxBottomOffset||0);g._proxyLeft=g._pre.left=g._cssPos.left;g._proxyTop=g._pre.top=g._cssPos.top;if("move"!==f.dragType){g._proxy.css("zIndex",xui.Dom.TOP_ZINDEX*10);xui.setNodeData(g._proxy.get(0),"zIndexIgnore",1)}}},_reset:function(){var g=this,f=null,c=false;_.tryF(g.$reset);g.setDropFace();g._resetProxy();g.$proxySize=50;g.$mousemove=g.$mouseup=g.$onselectstart=g.$ondragstart="*";g._cursor="";g._pre={};g._proxyLeft=g._proxyTop=g._cssPos_x=g._cssPos_y=0;g._stop=c;if(g._onDrag&&g._onDrag.tasks){g._onDrag.tasks.length=0;delete g._onDrag.tasks}if(g._onDragover&&g._onDragover.tasks){g._onDragover.tasks.length=0;delete g._onDragover.tasks}if(g._c_droppable){g._c_droppable.length=0}g._c_droppable=g._c_dropactive=g._cssPos=g._box=g._dropElement=g._source=g._proxy=g._proxystyle=g._onDrag=g._onDragover=f;g._profile={$id:_()+"",dragType:"shape",dragCursor:"move",targetReposition:true,dragIcon:xui.ini.path+"ondrag.gif",magneticDistance:0,xMagneticLines:[],yMagneticLines:[],widthIncrement:0,heightIncrement:0,dragDefer:0,horizontalOnly:c,verticalOnly:c,maxBottomOffset:f,maxLeftOffset:f,maxRightOffset:f,maxTopOffset:f,targetNode:f,targetCSS:f,dragKey:f,dragData:f,targetLeft:f,targetTop:f,targetWidth:f,targetHeight:f,targetOffsetParent:f,targetCallback:f,tagVar:f,shadowFrom:f,proxyNode:f,x:0,y:0,ox:0,oy:0,curPos:{},offset:{},isWorking:c,restrictedLeft:f,restrictedRight:f,restrictedTop:f,restrictedBottom:f,dropElement:f};g.__touchingfordd=0;return g},abort:function(){this._stop=true},_end:function(){var l=this,j=document,f=j.body,i="onmousedown",k="onmousemove",g="onmouseup",h,c;if(xui.browser.isTouch){h=(xui.browser.ie&&window.PointerEvent)?"onpointermove":(xui.browser.ie&&window.MSPointerEvent)?"onmspointermove":"ontouchmove";c=(xui.browser.ie&&window.PointerEvent)?"onpointerup":(xui.browser.ie&&window.MSPointerEvent)?"onmspointerup":"ontouchend"}if(l._proxy){l._unpack()}if(l.$onselectstart!="*"){f.onselectstart=l.$onselectstart}if(l.$ondragstart!="*"){j.ondragstart=l.$ondragstart}if(l.$mousemove!="*"){j[k]=l.$mousemove}if(l.$mouseup!="*"){j[g]=l.$mouseup}if(xui.browser.isTouch){if(l.$touchmove!="*"){j[h]=l.$touchmove}if(l.$touchend!="*"){j[c]=l.$touchend}}return l},startDrag:function(k,l,f,q,h){var m=this,v;if(m._profile.isWorking){return false}m._end()._reset();m._profile.isWorking=true;m.__touchingfordd=k.type=="xuitouchdown";f=_.isHash(f)?f:{};k=k||window.event;if(xui.Event.getBtn(k)!=="left"){return true}m._source=f.targetNode=xui(l);m._cursor=m._source.css("cursor");if((v=f.targetNode.get(0))&&!v.id){v.id=xui.Dom._pickDomId();v=null}m._defer=f.dragDefer=_.isNumb(f.dragDefer)?f.dragDefer:0;if(true===f.dragCursor){f.dragCursor=m._cursor}if(typeof f.dragIcon=="string"){f.dragType="icon"}var s=document,i=s.body,u=xui.Event.getPos(k),p="onmousedown",g="onmousemove",w="onmouseup",j,r;if(xui.browser.isTouch){j=(xui.browser.ie&&window.PointerEvent)?"onpointermove":(xui.browser.ie&&window.MSPointerEvent)?"onmspointermove":"ontouchmove";r=(xui.browser.ie&&window.PointerEvent)?"onpointerup":(xui.browser.ie&&window.MSPointerEvent)?"onmspointerup":"ontouchend"}f.x=u.left;f.y=u.top;f.dragKey=q||f.dragKey||null;f.dragData=h||f.dragData||null;var c=xui.Event.getSrc(k);m._start=function(z){var y=m._profile;_.merge(y,f,"with");m._source.beforeDragbegin();if(m._stop){m._end()._reset();return false}if(xui.Event&&(v=m._source.get(0))){xui.Event._preDroppable=v.id;v=null}if(y.dragType=="icon"){y.targetReposition=false}m._ini(y.dragType=="none"?null:m._pack(u,y.targetNode));if(f.x>=m._box.width||f.y>=m._box.height){m._end()._reset();return true}m._source.onDragbegin();if(y.dragDefer<1){m.$mousemove=s[g];m.$mouseup=s[w];if(xui.browser.isTouch){m.$touchmove=s[j];m.$touchend=s[r]}}if(xui.browser.ie){_.setTimeout(function(){if(c.releaseCapture){c.releaseCapture()}})}s[g]=m.$onDrag;s[w]=m.$onDrop;if(xui.browser.isTouch){s[j]=m.$onDrag;s[r]=m.$onDrop}m._source.afterDragbegin();if(y.dragDefer>0){m.$onDrag.call(m,z)}if(xui.browser.isTouch&&m.__touchingfordd){m._c_droppable=[];var x=xui.$cache.droppable[y.dragKey],d=[];_.arr.each(x,function(D){if(!xui.use(D).get(0)){d.push(D);return}var C=xui.use(D),E=C.offsetHeight(),A=C.offsetWidth(),B=C.css("visibility"),F;if(A&&E&&B!="hidden"){F=C.offset();F.width=A;F.height=E;F.id=D;m._c_droppable.unshift(F)}});if(d.length){_.arr.each(d,function(A){_.arr.removeValue(x,A)})}}};if(xui.browser.ie){m.$ondragstart=s.ondragstart;m.$onselectstart=i.onselectstart;s.ondragstart=i.onselectstart=null;if(s.selection&&s.selection.empty){s.selection.empty()}}xui.Event.stopBubble(k);if(f.targetNode.get(0)!==s){xui(s).onMousedown(true,xui.Event.getEventPara(k,u))}if(f.dragDefer<1){_.tryF(m._start,[k],m);return false}else{m.$mouseup=s[w];s[w]=function(d){xui.DragDrop._end()._reset();return _.tryF(document.onmouseup,[d],null,true)};if(xui.browser.isTouch){m.$touchend=s[r];s[r]=s[w]}var n={};m.$mousemove=s[g];s[g]=function(x){var d=xui.Event.getPos(x);if(d.left===n.left&&d.top===n.top){return}n=d;if(--m._defer<=0){xui.DragDrop._start(x)}return false};if(xui.browser.isTouch){m.$touchmove=s[j];s[j]=s[g]}}},$onDrag:function(m){var q=xui.DragDrop,c=q._profile;if(q.$SimulateMousemoveInMobileDevice){return false}m=m||window.event;if(!c.isWorking||q._stop){q.$onDrop(m);return true}var s=xui.Event.getPos(m);c.x=s.left;c.y=s.top;if(!c.isWorking){return false}if(q._proxy){if(!c.verticalOnly){q._proxyLeft=Math.floor(q._left(((c.maxLeftOffset!==null&&c.x<=c.restrictedLeft)?c.restrictedLeft:(c.maxRightOffset!==null&&c.x>=c.restrictedRight)?c.restrictedRight:c.x)-q._cssPos_x));if(q._proxyLeft-q._pre.left){q._proxystyle.left=q._proxyLeft+"px"}q._pre.left=q._proxyLeft;c.curPos.left=q._proxyLeft+q.$proxySize}if(!c.horizontalOnly){q._proxyTop=Math.floor(q._top(((c.maxTopOffset!==null&&c.y<=c.restrictedTop)?c.restrictedTop:(c.maxBottomOffset!==null&&c.y>=c.restrictedBottom)?c.restrictedBottom:c.y)-q._cssPos_y));if(q._proxyTop-q._pre.top){q._proxystyle.top=q._proxyTop+"px"}q._pre.top=q._proxyTop;c.curPos.top=q._proxyTop+q.$proxySize}}else{c.curPos.left=c.x;c.curPos.top=c.y}if(q._onDrag!=1){if(q._onDrag){q._onDrag(m,q._source._get(0))}else{q._onDrag=1;q._source.onDrag(true,xui.Event.getEventPara(m,s))}}if(xui.browser.isTouch&&q.__touchingfordd){if(q._c_droppable){for(var h=0,g=q._c_droppable.length;h<g;h++){var f=q._c_droppable[h],n=xui.use(f.id).get(0),k=q._c_dropactive,r=xui.use(k).get(0);if(c.x>=f.left&&c.y>=f.top&&c.x<=(f.left+f.width)&&c.y<=(f.top+f.height)){if(k==f.id){var j=m.changedTouches[0];q.$SimulateMousemoveInMobileDevice=1;xui.Event.simulateEvent(n,"mousemove",{screenX:j.screenX,screenY:j.screenY,clientX:j.clientX,clientY:j.clientY});delete q.$SimulateMousemoveInMobileDevice}else{xui.Event.simulateEvent(n,"mouseover",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top});q._c_dropactive=f.id;if(k&&r){xui.Event.simulateEvent(r,"mouseout",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top})}}break}else{if(k==f.id){if(r){xui.Event.simulateEvent(r,"mouseout",{screenX:c.left,screenY:c.top,clientX:c.left,clientY:c.top})}q._c_dropactive=null;break}}}}}return false},$onDrop:function(h){var i=xui.DragDrop,g=i._profile,c=xui.Event;h=h||window.event;i._end();if(g.isWorking){i.setDropFace();var f=i._source.onDragstop(true,c.getEventPara(h));if(i._dropElement){xui.use(i._dropElement).onDrop(true,c.getEventPara(h))}}i._reset();c.stopBubble(h);_.tryF(document.onmouseup,[h]);return !!f},setDropElement:function(c){this._profile.dropElement=this._dropElement=c;return this},getProfile:function(){var f=this,c=f._profile;c.offset=f._proxy?{x:f._proxyLeft-c.ox+f._cssPos_x,y:f._proxyTop-c.oy+f._cssPos_y}:{x:c.x-c.ox,y:c.y-c.oy};return c},setDropFace:function(k,i){var l=this,h='<div style="position:absolute;z-index:'+xui.Dom.TOP_ZINDEX+";font-size:0;line-height:0;border-",f=":dashed 1px #ff6600;",j=l._Region,c=l._rh,g="backgroundColor";if(j&&j.parent()){j.remove(false)}if(l._R){l._R.css(g,l._RB);delete l._R;delete l._RB}if(k){if(!j||!j.get(0)){j=l._Region=xui.create(h+"top"+f+'left:0;top:0;width:100%;height:0;"></div>'+h+"right"+f+'right:0;top:0;height:100%;width:0;"></div>'+h+"bottom"+f+'bottom:0;left:0;width:100%;height:0;"></div>'+h+'left:solid 2px #ff6600;width:0;left:0;top:0;height:100%;"></div>');c=l._rh=xui([j.get(1),j.get(3)])}k=xui(k);if(xui.browser.ie6){c.height("100%")}if(k.css("display")=="block"){xui.setNodeData(j.get(0),"zIndexIgnore",1);k.append(j);j.top(k.scrollTop()).left(k.scrollLeft());if(xui.browser.ie6&&!c.get(0).offsetHeight){c.height(k.get(0).offsetHeight)}}else{l._RB=k.get(0).style[g];l._R=k;k.css(g,"#FA8072")}l.setDragIcon(i||"move")}else{l.setDragIcon("none")}return l},setDragIcon:function(g){_.resetRun("setDropFace",null);var j=this,h=j._profile,f=h.proxyNode,c=j._Icons;if(f&&h.dragType=="icon"){f.first(4).css(typeof g=="object"?g:{backgroundPosition:(c[g]||g)})}return j},_setProxy:function(k,j){var f,c,i=this,g=i._profile,h=xui.Dom;if(!h.byId(i._id)){xui("body").prepend(xui.create('<div id="'+i._id+'" style="left:0;top:0;border:0;font-size:0;line-height:0;padding:'+i.$proxySize+"px;position:absolute;background:url("+xui.ini.img_bg+') repeat;"><div style="font-size:0;line-height:0;" id="'+i._idi+'">'+(xui.browser.ie6?"&nbsp;":"")+"</div></div>"))}f=xui(i._id);if(g.dragKey){i.$proxySize=0;f.css("padding",0)}else{j.left-=i.$proxySize;j.top-=i.$proxySize;if(!g.targetOffsetParent){h.setCover(true)}}if(c=g.targetOffsetParent){xui(c).append(f)}if(k){xui(i._idi).empty(false).append(k);g.proxyNode=k}else{g.proxyNode=xui(i._idi)}f.css({display:"",zIndex:h.TOP_ZINDEX*10,cursor:g.dragCursor}).offset(j,c);xui.setNodeData(f.get(0),"zIndexIgnore",1);return f},_resetProxy:function(){var m=this,i=m._profile,l=xui.Dom,h=m._id,g=m._idi;if(l.byId(h)){var f,c,j=xui(g),f=xui(h);if(xui.browser.ie6){j.html("&nbsp;")}else{j.empty()}j.attr("style","font-size:0;line-height:0;");xui("body").prepend(f.css({zIndex:0,cursor:"",display:"none",padding:m.$proxySize+"px"}));i.proxyNode=m._proxystyle=null;l.setCover(false)}},_pack:function(k,g){var h,j={},m={},i=this,c=i._profile,l;if(c.targetLeft===null||null===c.targetTop){l=g.offset(null,c.targetOffsetParent)}j.left=null!==c.targetLeft?c.targetLeft:l.left;j.top=null!==c.targetTop?c.targetTop:l.top;switch(c.dragType){case"deep_copy":case"copy":var l;m.width=_.isNumb(c.targetWidth)?c.targetWidth:(g.cssSize().width||0);m.height=_.isNumb(c.targetHeight)?c.targetHeight:(g.cssSize().height||0);var f=g.clone(c.dragType=="deep_copy").css({position:"relative",margin:"0",left:"0",top:"0",right:"",bottom:"",cursor:c.dragCursor,cssFloat:"none"}).cssSize(m).id("",true).css("opacity",0.8);if(c.targetCallback){c.targetCallback(f)}f.query("*").id("",true);if(c.targetCSS){f.css(c.targetCSS)}h=i._setProxy(f,j);break;case"shape":m.width=null!==c.targetWidth?c.targetWidth:g.offsetWidth();m.height=null!==c.targetHeight?c.targetHeight:g.offsetHeight();m.width-=2;m.height-=2;h=i._setProxy(xui.create("div").css({border:"dashed 1px",fontSize:"0",lineHeight:"0"}).cssSize(m),j);break;case"blank":h=i._setProxy(null,j);break;case"icon":j.left=_.isNumb(c.targetLeft)?c.targetLeft:(k.left+16);j.top=_.isNumb(c.targetTop)?c.targetTop:(k.top+16);l='<table border="0" class="xui-node xui-node-table"><tr><td valign="top"><span class="xui-node xui-node-span" style="background:url('+c.dragIcon+") no-repeat left top;width:"+(_.isNumb(c.targetWidth)?c.targetWidth:16)+"px;height:"+(_.isNumb(c.targetHeight)?c.targetHeight:16)+'px;" ></span></td><td id="xui:dd:shadow" '+(c.shadowFrom?'style="border:solid 1px #e5e5e5;background:#fff;font-size:12px;line-height:14px;"':"")+">"+(c.shadowFrom?xui(c.shadowFrom).clone(true).css({left:"auto",top:"auto",position:"relative"}).outerHTML().replace(/\s*id\=[^\s\>]*/g,""):"")+"</td></tr></table>";h=i._setProxy(xui.create(l).css("opacity",0.8),j);break;case"move":i.$proxySize=0;h=g;if(h.css("position")!="absolute"){h.css("position","absolute").offset(j)}h.css("cursor",c.dragCursor)}return h},_unpack:function(){var i=this,h=i._profile,c,g;if(h.targetReposition&&("move"!=h.dragType)){if((c=xui(i._source))){if(!c.isEmpty()){if(c.css("position")!="absolute"){c.css("position","absolute").cssPos(c.offset(null,c.get(0).offsetParent))}if(xui.browser.ie){c.cssRegion({right:"",bottom:""})}c.offset(h.curPos,h.targetOffsetParent||document.body)}}}if("move"==h.dragType){i._source.css("cursor",i._cursor)}},_unRegister:function(g,f){var j=this._eh;xui([g]).$removeEvent("beforeMouseover",j).$removeEvent("beforeMouseout",j).$removeEvent("beforeMousemove",j);var h=xui.getNodeData(g.$xid,["_dropKeys"]),k=xui.$cache.droppable;if(h){for(var d in h){if(k[d]){_.arr.removeValue(k[d],g.$xid)}}}xui.setNodeData(g.$xid,["_dropKeys"])},_register:function(f,q){var j=this._eh;xui(f).beforeMouseover(function(r,l,h){var c=xui.DragDrop,r=c._profile;if(r.dragKey&&xui.getNodeData(h,["_dropKeys",r.dragKey])){c.setDropElement(h);c._onDragover=null;xui.use(h).onDragenter(true);if(c._dropElement){_.resetRun("setDropFace",c.setDropFace,0,[h],c)}}},j).beforeMouseout(function(r,l,h){var c=xui.DragDrop,r=c._profile;if(r.dragKey&&xui.getNodeData(h,["_dropKeys",r.dragKey])){xui.use(h).onDragleave(true);if(c._dropElement==h){c.setDropElement(c._onDragover=null);_.resetRun("setDropFace",c.setDropFace,0,[null],c)}}},j).beforeMousemove(function(c,v,r){var l=xui.DragDrop,s=l._onDragover,u=l._profile;if(s==1){return}if(l._dropElement==r&&u.dragKey&&xui.getNodeData(r,["_dropKeys",u.dragKey])){if(s){s(v,r)}else{l._onDragover=1;xui.use(r).onDragover(true,xui.Event.getEventPara(v))}}},j);var d=xui.getNodeData(f.$xid,["_dropKeys"]),n=xui.$cache.droppable;if(d){for(var k in d){if(n[k]){_.arr.removeValue(n[k],f.$xid)}}}var m={},p=q.split(/[^\w-]+/);for(var k=0,g=p.length;k<g;k++){m[p[k]]=1;n[p[k]]=n[p[k]]||[];n[p[k]].push(f.$xid)}xui.setNodeData(f.$xid,["_dropKeys"],m)}},After:function(){this._reset();_.each({startDrag:function(g,d,c,f){xui.DragDrop.startDrag(g,this.get(0),d,c||"",f||null);return this},draggable:function(d,i,h,l,k){var g=this,k=k?typeof(k)=="function"?_.tryF(getTarget,[],this):xui(k):null,c=xui.DragDrop;if(!k||!k.get(0)){k=g}g.addClass("xui-ui-unselectable");if(d===undefined){d=true}else{if(typeof d=="object"){i=d;d=true}}var j=function(m,f,n){if(xui.getId(xui.Event.getSrc(f))!=n){return true}k.startDrag(f,i,h,l)};if(!!d){g.$addEvent("beforeMousedown",j,c._eh,-1)}else{g.$removeEvent("beforeMousedown",c._eh)}return g},droppable:function(c,f){if(c===undefined){c=true}f=f||"default";var g=xui.DragDrop;return this.each(function(d){if(!!c){g._register(d,f)}else{g._unRegister(d,f)}})}},function(d,c){xui.Dom.plugIn(c,d)})}});Class("xui.Tips",null,{Constructor:function(){return null},Initialize:function(){var d=xui.DragDrop,c=this;if(d){d.$reset=function(){c._pos={left:d._profile.x,top:d._profile.y}}}xui.CSS.addStyleSheet(".xui-tips{font-size:0;line-height:0;position:absolute;overflow:visible;visibility:hidden;left:-10000px;} .xui-tips-i{font-size:12px;overflow:hidden;position:relative;}.xui-tips-i span{display:inline;}.xui-tips-c {border:solid gray 1px;background-color:#FFF8DC;padding:1px 2px 2px 2px;}",this.KEY);xui.doc.afterMousedown(function(){c._cancel()},"$Tips",-1).afterMousemove(function(i,h){if(d.isWorking){return}var f=xui.Event,g,j;if((g=_.resetRun.$cache)&&g["$Tips"]){c._pos=f.getPos(h)}if(c._from){c._pos=f.getPos(h);c._showF();_.resetRun("$Tips3")}else{if(c._showed&&c.MOVABLE){g=f.getPos(h);j=c._Node.style;j.left=(parseInt(j.left,10)||0)+(g.left-c._pos.left)+"px";j.top=(parseInt(j.top,10)||0)+(g.top-c._pos.top)+"px";c._pos=g}}},"$Tips",-1).afterMouseover(function(p,s){var f=xui.Event,k=f.$FALSE,h=f.getSrc(s),g,r,w,n,q=0,x,u=function(i){if(c._markId){c._cancel()}return i};if(!h){return u(k)}try{while((!h.id||h.id==xui.$localeDomId)&&h.parentNode!==document&&q++<10){h=h.parentNode}if(!(g=(typeof h.id=="string"?h.id:null))){h=null;return u(k)}}catch(s){}if((r=f._getProfile(g))&&r.box&&r.KEY=="xui.UIProfile"){if(r.properties.disableTips||r.behavior.disableTips){h=null;return u(false)}var v=r.behavior.NoTips;if(v){for(var m=0,j=v.length;m<j;m++){if(g.indexOf(r.keys[v[m]])===0){return u(false)}}}v=r.behavior.PanelKeys;if(v){for(var m=0,j=v.length;m<j;m++){if(g.indexOf(r.keys[v[m]])===0){return u(false)}}}w=r.onShowTips?g:g.replace(c._reg,":");if(c._markId&&w==c._markId){return k}c._markId=w;c._pos=f.getPos(s);if(c._showed){c._from=r;c._enode=g;c._showF()}else{_.resetRun("$Tips",function(){c._from=r;c._enode=g;_.resetRun("$Tips3",function(){if(c._from){c._showF()}})},c.DELAYTIME)}}else{c._cancel()}h=null;return k},"$Tips",-1).afterMouseout(function(k,j){if(c._markId){var i=xui.Event,l,f,g=0,h=j.toElement||j.relatedTarget;if(!h){f=1}else{try{while((!h.id||h.id==xui.$localeDomId)&&h.parentNode!==document&&g++<10){h=h.parentNode}if(!(l=(typeof h.id=="string"?h.id:null))){h=null;f=1}}catch(j){f=1}}if(f){c._cancel()}return i.$FALSE}},"$Tips",-1).afterMouseup(function(g,f){c._cancel()},"$Tips",-1);this._Types={"default":new function(){this.show=function(r,m,q){if(!m){return}var u=this,i,g,v,p,k;if(!(i=u.node)||!i.get(0)){i=u.node=xui.create('<div class="xui-node xui-node-div xui-tips xui-custom"><div class="xui-node xui-wrapper xui-node-div xui-tips-i xui-custom"></div></div>');g=u._ruler=xui.create('<div class="xui-node xui-wrapper xui-node-div xui-tips xui-custom"><div class="xui-node xui-node-div xui-tips-i xui-custom"></div></div>');u.n=i.first();u._n=g.first();if(xui.Dom.css3Support("boxShadow")){i.css("boxShadow","2px 2px 2px #717C8C");g.css("boxShadow","2px 2px 2px #717C8C")}else{if(typeof i.addShadow=="function"){i.addShadow();g.addShadow()}}xui("body").append(g)}g=u._ruler;if(document.body.lastChild!=i.get(0)){xui("body").append(i,false,true)}v=typeof r=="object"?r[q||xui.Tips.TIPSKEY]:r;if(typeof v=="function"){v=v()}if(v+=""){var j=/^\s*\</.test(v);v=xui.adjustRes(v);xui.Tips._curTips=v;if(!r.transTips||!j){v='<div class="xui-node xui-node-div xui-tips-c xui-custom">'+v+"</div>"}u._n.get(0).innerHTML=v;p=g.get(0).offsetWidth+2;if(!j){p=Math.min(c.MAXWIDTH,p)}var f=i.get(0).style,l=u.n.get(0),n=l.style;f.visibility="hidden";l.innerHTML=v;if(xui.browser.ie){f.width=n.width=p+(p%2)+"px";k=l.offsetHeight;f.height=k-(k%2)+"px"}else{n.width=p+"px"}if(m===true){f.visibility="visible"}else{i.popToTop({left:m.left,top:m.top,region:{left:m.left,top:m.top-12,width:24,height:32}},1)}f=n=l=null}else{i.css("zIndex",0).hide()}};this.hide=function(){this.node.css("zIndex",0).hide()}}}},Static:{_reg:/-[\w]+:/,TIPSKEY:"tips",MAXWIDTH:300,MOVABLE:true,DELAYTIME:400,AUTOHIDETIME:5000,_showF:function(){var d=this,h=d._from,g=xui.Dom.byId(d._enode),k=d._pos,j,i,f,c=false;d._from=d._enode=null;if(!g||!h||!k||!(i=h.box)){return}c=((f=h.CF)&&(f=f.showTips)&&f(h,g,k));if(!c){c=(i._showTips&&i._showTips(h,g,k))}if(!c){if(((f=h)&&f.tips)||(f&&(f=f.properties)&&f.tips)){d.show(k,f);c=true}else{if((f=h)&&(f=f.properties)&&f.autoTips&&("caption" in f)&&f.tips===""){if(f.caption){d.show(k,{tips:f.caption});c=true}}}}if(!c){d.hide()}else{if(!d.MOVABLE){_.resetRun("$Tips2",d.hide,d.AUTOHIDETIME,null,d)}}g=k=h=null},getTips:function(){return this._curTips},setTips:function(c){if(this._curTips&&this._tpl&&this._Node){this._tpl.show(c,true)}},setPos:function(d,c){var f=this;if((f=f._Node)&&(f=f.style)){if(d||d===0){f.left=parseFloat(d)+"px"}if(c||c===0){f.top=parseFloat(c)+"px"}}},show:function(h,g,f){var c=this,d;c._pos=h;if(c._item===g){return}if(typeof g=="string"||(g&&(g[f||xui.Tips.TIPSKEY]))){d=c._tpl=c._Types[g.tipsTemplate]||c._Types["default"];d.show(g,h,f);c._Node=d.node.get(0);c._item=g;c._showed=true}else{c._cancel()}},hide:function(){var c=this;if(c._showed){if(c._tpl){c._tpl.hide()}c._clear()}},_cancel:function(){var c=this;if(c._markId){if(c._showed){c.hide()}else{_.resetRun("$Tips");_.resetRun("$Tips3");c._clear()}}},_clear:function(){var c=this;c._Node=c._curTips=c._markId=c._from=c._tpl=c._item=c._showed=null}}});Class("xui.History",null,{Static:{_fid:"xui:history",_type:(xui.browser.ie&&(xui.browser.ver<8))?"iframe":("onhashchange" in window)?"event":"timer",setCallback:function(g){var c=this,f=location.hash;if(f){f="#!"+encodeURIComponent((""+decodeURIComponent(f)).replace(/^#!/,""))}else{f="#!"}c._callback=g;if(g){c._lastFI=decodeURIComponent(f);switch(c._type){case"event":window.onhashchange=c._checker;break;case"iframe":document.body.appendChild(document.createElement('<iframe id="'+c._fid+'" src="about:blank" style="display: none;"></iframe>'));var d=document.getElementById(c._fid).contentWindow.document;d.open("javascript:'<html></html>'");d.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+f+"');<\/script></head><body></body></html>");d.close();case"timer":if(c._itimer){clearInterval(c._itimer)}c._itimer=setInterval(c._checker,100);break}c._callback(decodeURIComponent(c._lastFI.replace(/^#!/,"")))}else{if(c._itimer){clearInterval(c._itimer)}}return c},_checker:function(d){var c=xui.History;if(typeof c._callback!="function"){if(c._itimer){clearInterval(c._itimer)}return}switch(c._type){case"iframe":if(_.isSet(d)){location.hash=d}case"event":case"timer":if(decodeURIComponent(location.hash)!=decodeURIComponent(c._lastFI)){c._lastFI=decodeURIComponent(location.hash);c._callback(decodeURIComponent(location.hash.replace(/^#(!)?/,"")))}break}},getFI:function(){return this._lastFI},setFI:function(g,f){var c=this;if(!c._callback){return}if(g){g="#!"+encodeURIComponent((""+decodeURIComponent(g)).replace(/^#!/,""))}else{g="#!"}if(c._lastFI==decodeURIComponent(g)){return false}switch(c._type){case"iframe":var d=document.getElementById(c._fid).contentWindow.document;d.open("javascript:'<html></html>'");d.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+g+"');<\/script></head><body></body></html>");d.close();break;case"event":case"timer":location.hash=c._lastFI=decodeURIComponent(g);if(f!==false){_.tryF(c._callback,[decodeURIComponent(g.replace(/^#!/,""))])}break}}}});Class("xui.ComFactory",null,{Initialize:function(){var c=this;xui.getCom=function(d,f,j,i,h,g){return c.getCom.apply(c,arguments)};xui.newCom=function(d,f,i,h,g){return c.newCom.apply(c,arguments)};xui.showCom=function(p,i,f,j,h,k,n,m,d,g,l){return c.getCom(p,function(r,q,s){if(!r&&false!==_.tryF(i,[q,s],q)){this.show.apply(q,[f,m,d,s,g,l])}else{_.tryF(f,[r,q,s],q)}},j,h,k,n)}},Static:{_pro:{},_cache:{},_domId:"xui:ComFactory:",getProfile:function(c){return c?this._pro[c]:this._pro},setProfile:function(c,d){if(typeof c=="string"){this._pro[c]=d}else{this._pro=c}return this},destroyAll:function(){_.each(this._cache,function(c){_.tryF(c.destroy,[],c)});this._cache={}},broadcast:function(d){if(typeof d=="function"){var f,g=this._cache;for(f in g){d.call(g[f],f)}}},setCom:function(d,c){this._cache[d]=c;if(c){c.comRefId=d}return this},getComFromCache:function(c){return this._cache[c]||null},getCom:function(g,d,l,k,n,u){if(!g){var m=new Error("No id");_.tryF(d,[m,null,l]);if(l&&xui.Thread.isAlive(l)){xui.Thread(l).abort()}throw m;return}k=k!==false;var r=this._cache,f=this._pro,j,i;if(k&&r[g]&&!r[g].destroyed){_.tryF(d,[null,r[g],l],r[g]);return r[g]}else{if(!(j=f[g])){j={cls:g,cached:k,properties:n,events:u};i=g}else{i=j.cls||j}var s=arguments.callee,q=this,h=function(c,v,w){if(!_.isFun(c)){throw"'"+i+"' is not a constructor"}var x=new c();if(v.properties){_.merge(x.properties,v.properties,"all")}if(v.events){_.merge(x.events,v.events,"all")}if(v.cached!==false){xui.ComFactory.setCom(g,x)}var p=[function(B,A,C){var y=A.getUIComponents().get(),z=function(D,G,E){var F=arguments.callee;_.arr.each(D,function(J,K){if(J.key=="xui.UI.Tag"){var H=J,L=H.properties.tagKey;if(L&&G&&G[L]){s.apply(q,[G[L],function(){A[L]=this;this.parent=A;var N=this.getUIComponents(),M;if(!(M=N.get(0))){return}xui.UI.Tag.replace(H,M,E?A:null)},C])}}if(J.children){var I=[];_.arr.each(J.children,function(M){I[I.length]=M[0]});F(I,G)}})};z(y,v.children,1)}];p.push(w||null);if(d){xui.Thread(w).insert({task:d,args:[null,x,w],scope:x})}_.tryF(x[v.iniMethod||"create"],p,x)};xui.Thread.observableRun(function(p){var c=function(x,v,z){var w;if(w=xui.SC.get(i)){xui.Thread(z).insert({task:h,args:[w,j,z]})}else{var y=new Error("Variable not found (maybe SyntaxError) - "+i);_.tryF(d,[y,null,z]);if(z&&xui.Thread.isAlive(z)){xui.Thread(z).abort()}throw y}};xui.SC(i,function(w){if(w){c(0,0,p)}else{var v=new Error("No class name");_.tryF(d,[v,null,p]);if(p&&xui.Thread.isAlive(p)){xui.Thread(p).abort()}throw v}},true,p,{retry:0,onFail:function(v){_.tryF(d,[v,null,p])}})},null,l)}},newCom:function(c,d,h,g,f){return this.getCom(c,d,h,false,g,f)},storeCom:function(i){var d,f,h=this._cache,g=this._domId;if(f=h[i]){if(!(d=xui.Dom.byId(g))){xui("body").prepend(xui.create('<div id="'+g+'" style="display:none;"></div>'))}d=xui(g);f=f.getUIComponents();if(!f.isEmpty()){f.get(0).unlinkParent();d.append(f)}}},prepareComs:function(c){var f=this,d=[];_.arr.each(c,function(g){d.push(function(){f.getCom(g)})});xui.Thread(null,d,500).start();return this}}});Class("xui.Debugger",null,{Static:{$time:_(),_id1:"xui:dbg::_frm",_id4:"xui:dbg::_head",_id2:"xui:dbg::_con",_id3:"xui:dbg::_inp",err:function(c,f,d){if(xui.browser.gek&&c=="Error loading script"){return true}xui.Debugger.log(">>"+c+" at File: "+f+" ( line "+d+" ).");return true},trace:function(k){var g=_.toArr(arguments),f=g[1]||arguments.callee.caller,c=g[2]||[];if(f){c.push('function "'+(f.$name$||"")+'" in Class "'+(f.$original$||"")+'"');if(f.caller){try{arguments.callee(null,f.caller,c,1)}catch(j){}}}if(!g[3]){var d=[];d.push(" >> Object Info:");if(typeof k=="object"){for(var h in k){d.push(" -- "+h+" : "+k[h])}}else{d.push(k)}d.push(" >> Function Trace: "+c.join(" <= "));xui.Debugger.log.apply(xui.Debugger,d)}f=null},log:function(){var t1,t2,time,self=this,arr=_.toArr(arguments),str;if(!arr.length){return}t1=document.createElement("div");t2=document.createElement("div");t2.className="xui-dbg-con1";time=_();t2.appendChild(document.createTextNode("Time stamp : "+time+"("+(time-self.$time)+")"));self.$time=time;t1.appendChild(t2);for(var i=0,l=arr.length;i<l;i++){str=arr[i];t2=document.createElement("div");t2.className="xui-dbg-con2";t2.appendChild(document.createTextNode(" "+_.stringify(_.isArguments(str)?_.toArr(str):str)));t1.appendChild(t2)}if(!xui.Dom.byId(self._id2)){var ns=xui.create("<div id="+self._id1+' style="left:5px;top:'+(xui.win.scrollTop()+5)+'px;" class="xui-node xui-node-div xui-wrapper xui-dbg-frm xui-custom"><div class="xui-node xui-node-div xui-dbg-box xui-custom"><div id='+self._id4+' class="xui-node xui-node-div xui-dbg-header xui-custom">&nbsp;&nbsp;:&nbsp;)&nbsp;&nbsp;CrossUI Monitor window <span class="xui-node xui-node-span xui-dbg-cmds xui-custom"><a class="xui-node xui-node-a xui-custom" href="javascript:;" onclick="xui(\''+self._id2+'\').empty();">Clear</a><a class="xui-node xui-node-a xui-custom" href="javascript:;" onclick="xui(\''+self._id1+"').remove();\"> &Chi; </a></span></div><div id="+self._id2+' class="xui-node xui-node-div xui-dbg-content xui-custom"></div><div class="xui-node xui-node-div xui-dbg-tail xui-custom"><table class="xui-node xui-node-table xui-custom"><tr><td style="font-family:serif;">&nbsp;>>>&nbsp;</td><td style="width:100%"><input class="xui-node xui-node-input xui-custom" id='+self._id3+" /></td></tr></table></div></div></div>");xui("body").append(ns);self.$con=xui(self._id2);xui(self._id4).draggable(true,null,null,null,xui(self._id4).parent(2));if(xui.Dom.css3Support("boxShadow")){ns.css("boxShadow","2px 2px 2px #717C8C")}else{if(ns.addShadow){ns.addShadow()}}if(xui.browser.ie6){ns.height(ns.offsetHeight());ns.width(299);_.asyRun(function(){ns.width(300)})}var bak="",temp;xui(self._id3).onKeydown(function(p,e,s){var k=xui.Event.getKey(e).key;s=xui.use(s).get(0);if(k=="enter"){switch(s.value){case"?":case"help":self.$con.append(xui.create("<div class='xui-node xui-node-div xui-dbg-con3 xui-custom'><p class='xui-node xui-node-p xui-custom'><strong  class='xui-node xui-node-strong xui-custom'>vailable commands:</strong></p><ul  class='xui-node xui-node-ul xui-custom'><li  class='xui-node xui-node-li xui-custom'> -- <strong  class='xui-node xui-node-strong xui-custom'>[clr]</strong> or <strong>[clear]</strong> : clears the message</li><li  class='xui-node xui-node-li xui-custom'> -- <strong  class='xui-node xui-node-strong xui-custom'>[?]</strong> or <strong  class='xui-node xui-node-strong xui-custom'>[help]</strong> : shows this message</li><li  class='xui-node xui-node-li xui-custom'> -- <strong class='xui-node xui-node-strong xui-custom'>any other</strong>: shows its string representation</li></ul></div>"));break;case"clr":case"clear":xui(self._id2).empty();break;default:try{temp=s.value;if(/^\s*\x7b/.test(temp)){temp="("+temp+")"}self.log(eval(temp))}catch(e){self.$con.append(xui.create("<div  class='xui-node xui-node-div xui-dbg-con4 xui-custom'>"+String(e)+"</div>"));return}}bak=s.value;s.value=""}else{if(k=="up"||k=="down"){var a=s.value;s.value=bak||"";bak=a}}k=s=temp=bak=null})}self.$con.append(t1).scrollTop(self.$con.scrollHeight());t1=t2=null}},Initialize:function(){xui.CSS.addStyleSheet(".xui-dbg-frm{position:absolute;width:300px;z-index:2000;}.xui-dbg-header{cursor:move;height:18px;padding-top:2px;position:relative;border-bottom:solid 1px #CCC;background-color:#FFAB3F;font-weight:bold;}.xui-dbg-cmds{position:absolute;right:2px;top:2px;}.xui-dbg-cmds a{margin:2px;}.xui-dbg-box{position:relative;overflow:hidden;border:solid 1px #AAA;}.xui-dbg-content{position:relative;width:100%;overflow:auto;height:300px;background:#fff;}.xui-dbg-con1{background-color:#CCC;width:298px;}.xui-dbg-con2{padding-left:6px;border-bottom:dashed 1px #CCC;width:292px;}.xui-dbg-con3{padding-left:6px;border-bottom:dashed 1px #CCC;background:#EEE;color:#0000ff;width:292px;}.xui-dbg-con4{padding-left:6px;border-bottom:dashed 1px #CCC;background:#EEE;color:#ff0000;width:292px;}.xui-dbg-tail{overflow:hidden;position:relative;border-top:solid 1px #CCC;height:16px;background:#fff;color:#0000ff;}.xui-dbg-tail input{width:100%;border:0;background:transparent;}",this.KEY);xui.echo=function(){if(!xui.debugMode){return false}xui.Debugger.log.apply(xui.Debugger,_.toArr(arguments))};xui.message=function(m,p,d,g){d=d||200;if(xui.browser.ie){d=d+(d%2)}var c,k,n=arguments.callee,q=n.stack||(n.stack=[]),j=n.allmsg||(n.allmsg=[]),w=xui.win,f=w.scrollLeft()+w.width()/2-d/2,u=w.height(),v=w.scrollTop();c=q.pop();while(c&&!c.get(0)){c=q.pop()}if(!c){c='<div class="xui-node xui-node-div xui-wrapper xui-uibg-bar xui-uiborder-outset xui-custom" style="font-size:0;line-height:0;border:solid 1px #cdcdcd;position:absolute;overflow:visible;top:-50px;"><div class="xui-node xui-node-div xui-custom" style="font-size:14px;overflow:hidden;font-weight:bold;padding:2px;"></div><div class="xui-node xui-node-div xui-custom" style="font-size:12px;padding:5px;overflow:hidden;"></div></div>';c=xui.create(c);if(c.addBorder){c.addBorder()}j.push(c);if(xui.Dom.css3Support("boxShadow")){c.css("boxShadow","2px 2px 2px #717C8C")}}if(document.body.lastChild!=c.get(0)){xui("body").append(c,false,true)}c.topZindex(true);c.__hide=0;c.css({left:f+"px",width:d+"px",visibility:"visible"}).first().html(p||"").css("display",p?"":"none").next().html(m||"");if(xui.browser.ie&&xui.browser.ver<=8){c.ieRemedy()}if(n.last&&n.last.get(0)&&c!=n.last){var r=n.last;var i=r.left();if(r._thread&&r._thread.id&&r._thread.isAlive()){r._thread.abort()}r._thread=r.animate({left:[i,i+(r.width+d)/2+20]},function(){r.left(i)},function(){r.left(i+(r.width+d)/2+20)}).start();var s=r.offsetHeight();_.filter(j,function(h){if(h.isEmpty()){return false}if(!h.__hide&&h!=c&&h!=r){if(h._thread.id&&h._thread.isAlive()){h._thread.abort()}h.topBy(s)}})}n.last=c;n.last.width=d;k=c.height();if(xui.browser.ie6){c.cssSize({height:k,width:d+2})}if(c._thread&&c._thread.id&&c._thread.isAlive()){c._thread.abort()}c._thread=c.animate({top:[v-k-20,v+20]},function(){c.top(v-k-20)},function(){c.top(v+20)},300,0,"expoOut").start();_.asyRun(function(){if(c._thread&&c._thread.id&&c._thread.isAlive()){c._thread.abort()}c._thread=c.animate({top:[c.top(),u+20]},null,function(){q.push(c);c.hide();c.__hide=1},300,0).start()},g||5000);n=null};if(_.isDefined(window.console)&&(typeof window.console.log=="function")){xui.log=function(){window.console.log.apply(window.console,_.toArr(arguments))}}else{xui.log=xui.echo}if(xui.browser.isTouch){window.onerror=this.err}}});Class("xui.UIProfile","xui.Profile",{Instance:{renderId:null,_render:function(){var k=this,j=k.boxing(),n,c=xui.$cache.profileMap;if(k.beforeRender&&false===j.beforeRender(k)){return}if(!k.renderId){var p=xui.Dom.byId(k.$domId);if(!p){return}if(k.domId!=k.$domId){p.id=k.domId}c[k.domId]=c[k.$domId]=k;if(!p.$xid){xui.UI.$addEventsHanlder(k,p,true)}if(k._elset){for(var g=1,f=k._elset.length;g<f;g++){xui.UI.$addEventsHanlder(k,k._elset[g].node,true)}}if(xui.browser.ie&&xui.browser.ver<10&&"selectable" in k.properties){xui.setNodeData(p,"_onxuisel",k.properties.selectable?"true":"false")}k.rendered=k.renderId=p.$xid;p=null}if(k.CA&&!_.isEmpty(k.CA)){j.setCustomAttr(k.CA)}if(k.CS&&!_.isEmpty(k.CS)){j.setCustomStyle(k.CS)}if(xui.browser.isTouch){if((n=k.box.$Behaviors.DroppableKeys)&&n.length){_.arr.each(n,function(i){j.getSubNode(i,true).each(function(v){var u=k.box.getDropKeys(k,v.$xid);if(u){var w=xui.$cache.droppable,r=u.split(/[^\w-]+/);for(var s=0,q=r.length;s<q;s++){w[r[s]]=w[r[s]]||[];w[r[s]].push(v.$xid)}}})})}}if(xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){var d={auto:1,scroll:1};_.each(k.box.$Appearances,function(q,l){if(d[q.overflow]){k.getSubNode(l,true).$touchscroll("xy")}else{if(d[q["overflow-x"]]){k.getSubNode(l,true).$touchscroll("x")}else{if(d[q["overflow-y"]]){k.getSubNode(l,true).$touchscroll("y")}}}});if(d[k.properties.overflow]){j.setOverflow(k.properties.overflow,true)}}if(n=k.RenderTrigger){for(var g=0,f=n.length;g<f;g++){n[g].call(k)}delete k.RenderTrigger}if(k.onRender){j.onRender(k)}_.tryF(k.$onrender,[],k);if(arguments[0]===true&&(n=k.LayoutTrigger)){for(var g=0,f=n.length;g<f;g++){n[g].call(k)}if(k.onLayout){j.onLayout(k)}}if(!k.properties.lazyAppend){if(k.children){for(var g=0,m;m=k.children[g++];){if(m[0]._render){m[0]._render(true)}}}if(k.$attached){for(var g=0,m;m=k.$attached[g++];){if(m._render){m._render(true)}}delete k.$attached}if(k.exchildren){var h=[];for(var g=0,m;m=k.exchildren[g++];){j.append(m[0],m[1])}delete k.exchildren}if(k.excoms){var h=[];for(var g=0,m;m=k.excoms[g++];){m[0].show(null,j,m[1],false)}delete k.excoms}}k.renderCompleted=1},__gc:function(){var f=this,d;if(f.destroyed){return}if(f.$beforeDestroy){_.each(f.$beforeDestroy,function(h){_.tryF(h,[],f)});_.breakO(f.$beforeDestroy,2)}_.tryF(f.$ondestory,[],f);if(f.onDestroy){f.boxing().onDestroy()}if(f.destroyTrigger){f.destroyTrigger()}if(!f.serialId){return}if(d=f._$composed){_.each(d,function(h){h.__gc()})}f.clearCache();if(!f.$noReclaim){d=xui.$cache.reclaimId;(d[f.key]||(d[f.key]=[])).push(f.serialId)}else{delete f.$noReclaim}delete xui.$cache.profileMap[f.domId];delete xui.$cache.profileMap[f.$domId];if(f.box){delete f.box._namePool[f.alias]}var g;if(f.alias&&f.host&&(g=f.host[f.alias])&&(g=g._nodes)&&g.length===1){delete f.host[f.alias]}f.unLinkAll();if(f.LayoutTrigger){f.LayoutTrigger.length=0}if(f.RenderTrigger){f.RenderTrigger.length=0}if((d=f.children).length){d=_.copy(d);for(var c=0;c<d.length;c++){d[c][0].__gc();d[c].length=0}d.length=0}f.destroyed=true;if(f.$afterDestroy){_.each(f.$afterDestroy,function(h){_.tryF(h,[],f)});_.breakO(f.$afterDestroy,2)}if(f.afterDestroy){f.boxing().afterDestroy(f)}_.breakO([f.properties,f.events,f.CF,f.CB,f.CC,f.CA,f.CS,f],2);f.destroy=function(){};f.destroyed=true},unlinkParent:function(){var c=this;delete c.parent;delete c.childrenId;c.unLink("$parent");return c},getRootNode:function(){return xui.getNodeData(this.renderId,"element")},getRoot:function(){return xui(this.renderId?[this.renderId]:[],false)},getContainer:function(c){if(c!==true&&(c=typeof c=="string"?c:null)){c=this.getSubIdByItemId(c)}return this.box._CONTAINERKEY?this.getSubNode(this.box._CONTAINERKEY,c):this.keys.PANEL?this.getSubNode(this.keys.PANEL,c):this.getRoot()},linkParent:function(d,g,c){var f=this;f.unlinkParent();f.parent=d;f.childrenId=g;f.link(d.children,"$parent",[f,g],c);return f},_cacheR1:/^\w[\w_-]*$/,setDomId:function(g){var d=this,f=xui.$cache.profileMap;if(typeof g=="string"&&(d._cacheR1.test(g)||g==d.$domId)&&!xui.Dom.byId(g)){if(d.domId!=d.$domId){delete f[d.domId]}d.domId=g;if(d.renderId){d.getRootNode().id=g}if(f[d.$domId]){f[g]=d}}return d},getDomId:function(){return this.domId},clearCache:function(){var f=this,d=f.$_egetter;for(var c in d){d[c].length=0;delete d[c]}d=f.$_domid;for(var c in d){d[c].__gc();delete d[c]}return f},_getEV:function(n,f,d){var s=this,p=f+"+"+d,m=s.$_egetter||(s.$_egetter={}),c;if(m[p]){Array.prototype.push.apply(n,m[p]);return}else{c=m[p]=[]}var j=xui.$cache.profileMap,r,q;if((r=j[f])&&(r=r.events)&&(r=r[d])){for(var k=0,h=r.length;k<h;k++){if(typeof r[r[k]]=="function"){c.push(n[n.length]=r[r[k]])}}}q=f.split(":")[0].split("-")[1];if(typeof(((r=s._CB)&&(q?(r=r[q]):1))&&(r=r[d]))=="function"){c.push(n[n.length]=r)}else{if(typeof(((r=s.CB)&&(q?(r=r[q]):1))&&(r=r[d]))=="function"){c.push(n[n.length]=r)}else{if(typeof(((r=s.behavior)&&(q?(r=r[q]):1))&&(r=r[d]))=="function"){c.push(n[n.length]=r)}}}},_cacheR2:/<!--\x03([^>^\s]*)\x04-->/g,toHtml:function(g){var x=this,d=x.properties,s=x.box,p={},u,r="xui.UIProfile",q="xui.Profile",f,n,j,k,w,v,l;if(x.destroyed){return""}if(s["xui.svg"]){s._RenderSVG(x);return""}else{l=s._prepareData(x);if(s._dynamicTemplate){s._dynamicTemplate(x)}u=s._build(x,l);if((!d.lazyAppend||g)&&(k=x.children)){for(n=0;j=k[n++];){if(j[0][r]){f=j[1]||"";w=p[f]||(p[f]=[]);w[w.length]=j[0].toHtml(g)}else{if(!j[0][q]){v.ini.call(v,j[0]);j[0]=v.get(0)}}}}return u.replace(x._cacheR2,function(h,c){return p[c]?p[c].join(""):""})}},_buildItems:function(f,d,i){var g=this,h=g.box,j=h._rpt(g,xui.UI.$doTemplate(g,_.get(xui.$cache.template,[h.KEY,g._hash]),d,f)),c=xui.UI.$toDom(g,j.replace(g._cacheR2,""),i);if(g.CA&&!_.isEmpty(g.CA)){g.boxing().setCustomAttr(g.CA,undefined,c)}if(g.CS&&!_.isEmpty(g.CS)){g.boxing().setCustomStyle(g.CS,undefined,c)}return c},serialize:function(l,s){var n,i,q=this,h=(n=q.box._beforeSerialized)?n(q):q,d={alias:h.alias,key:h.key,host:h.host};if(d.host===q){delete d.host}else{if(h.host&&!s){if(l!==false){d.host="@this"}else{delete d.host}}}if(typeof h.theme=="string"){d.theme=h.theme}if(h.$domId!=h.domId){d.domId=h.domId}var k={},g=h.box.$DataStruct,f=xui.absObj.$specialChars;_.merge(k,h.properties,function(m,c){return(c in g)&&g[c]!==m&&!f[c.charAt(0)]});if(!_.isEmpty(k)){d.properties=k}if(!_.isEmpty(n=this.getEvents())){d.events=n}var j=h.box.$EventHandlers;_.filter(d.events,function(m,c){return m!=j[c]});if(_.isEmpty(d.events)){delete d.events}if(!_.isEmpty(h.CB)){d.CB=_.copy(h.CB)}if(!_.isEmpty(h.CC)){d.CC=_.copy(h.CC)}if(!_.isEmpty(h.CF)){d.CF=_.copy(h.CF)}if(!_.isEmpty(h.CS)){d.CS=_.clone(h.CS,function(m,c){return !((c+"").charAt(0)=="$"&&!m)})}if(!_.isEmpty(h.CA)){d.CA=_.copy(h.CA)}if(typeof h.theme=="string"){d.theme=h.theme}if(h.children&&h.children.length){if(h.box.KEY!="xui.UI.SVGPaper"){_.arr.stableSort(h.children,function(c,m){c=(c[0].properties.tabindex||0);m=(m[0].properties.tabindex||0);return c>m?1:c==m?0:-1})}n=d.children=[];_.arr.each(h.children,function(c){i=[c[0].serialize(false,s)];if(c[1]){i[1]=c[1]}n[n.length]=i})}if(h.exchildren&&h.exchildren.length){d.exchildren=h.exchildren}return l===false?d:_.serialize(d)},_applySetAction:function(c,d,f){if(this.renderId){return c.call(this,d,f)}},getKey:function(d){var c;if(d.charAt(0)=="!"){d=xui.use(d).id()}if(d.indexOf(":")==-1){d=(c=xui.$cache.profileMap[d])&&(c.$domId)}return d?d.split(":")[0]:""},getSubId:function(d){var c;if(d.charAt(0)=="!"){d=xui.use(d).id()}if(d.indexOf(":")==-1){d=(c=xui.$cache.profileMap[d])&&(c.$domId)}return d?d.split(":")[2]:""},pickSubId:function(d){var c=this,f,g=c.cache_subid||(c.cache_subid={});if((g[d]||(g[d]=[]))[0]){return g[d].shift()}g=c.subId||(c.subId={});f=(g[d]||(g[d]=new _.id)).next();return f},reclaimSubId:function(f,c){var d=this.cache_subid||(this.cache_subid={});(d[c]||(d[c]=[])).push(f)},_cacheR3:/\./g,_cacheH1:{},getClass:function(f,c){f=this.keys[f]||f;var d=this,g=f+":"+(c||"");return d._cacheH1[g]||(d._cacheH1[g]=f.replace(d._cacheR3,"-").toLowerCase().replace("xui-ui","xui")+(c||""))},_getSubNodeId:function(f,d){var c=this.$domId.split(":");c[0]=f;c[2]=_.isSet(d)?(d+""):"";f=c.join(":");return f==this.$domId?xui.$cache.profileMap[f].domId:f},getSubNode:function(g,d){var c=this;if(!c.renderId){return xui()}var g=c.keys[g]||g,k,f,j,i=c.$_domid||(c.$_domid={});if(d===true){k=xui([c.renderId]).query("*","id",g==c.keys.KEY?c.domId:new RegExp("^"+g+":"+c.serialId))}else{if(!_.isSet(d)&&i[g]&&i[g]._nodes.length==1){return i[g]}k=(f=xui.Dom.byId(j=c._getSubNodeId(g,d)))?xui([f]):((f=c.renderId)&&xui.use(f).query("*","id",j));if(!_.isSet(d)){i[g]=k}}return k},getSubNodes:function(h,c){if(!c){c=true}var k=[],m=typeof h=="string",l=typeof c=="string"||c===true,d,n;if(m){if(l){Array.prototype.push.apply(k,this.getSubNode(h,c).get())}else{for(var f=0;n=c[f++];){Array.prototype.push.apply(k,this.getSubNode(h,n).get())}}}else{for(var g=0;d=h[g++];){if(l){Array.prototype.push.apply(k,this.getSubNode(d,c).get())}else{for(var f=0;n=c[f++];){Array.prototype.push.apply(k,this.getSubNode(d,n).get())}}}}return xui(k)},getSubNodeByItemId:function(c,d){return(d=this.getSubIdByItemId(d))?this.getSubNode(c,d):xui()},getItemByItemId:function(d){var c;if((c=this.ItemIdMapSubSerialId)&&(c=c[d])){return this.SubSerialIdMapItem[c]}},getItemByDom:function(c){return this.SubSerialIdMapItem&&this.SubSerialIdMapItem[this.getSubId(typeof c=="string"?c.charAt(0)=="!"?((c=xui.use(c).get(0))&&c.id):c:c.id)]},getItemIdByDom:function(d){var c;return(c=this.getItemByDom(d))&&c.id},getSubIdByItemId:function(d){var c;return(c=this.ItemIdMapSubSerialId)&&c[d]},queryItems:function(h,g,d,l,c){var j=[],i=arguments.callee,k=i.f||(i.f=function(p,n,m,s,f,q){_.arr.each(p,function(u,r){if(n===true||n.call(null,u,r,p)){q.push(f?[u,r,p]:u);if(s){return false}}if(m&&u.sub&&u.sub.length){k(u.sub,n,m,s,f,q)}})});k(h,g,d,l,c,j);return j}},Static:{getFromDom:function(c){if((c=(c&&c.KEY=="xui.Dom")?c.get(0).id:typeof c=="string"?c.charAt(0)=="!"?((c=xui.use(c).get(0))&&c.id):c:(c&&c.id))&&(c=xui.Event._getProfile(c))&&c["xui.UIProfile"]){return c}}}});Class("xui.UI","xui.absObj",{Before:function(d,c,f){xui.absBox.$type[d.replace("xui.UI.","").replace("xui.","")]=xui.absBox.$type[d]=d;return true},After:function(){xui.absObj.After.apply(this,arguments);var A=this,p=arguments.callee,y,z,f,x,n,h,g,l,r,s,q,m;A._ctrlId=new _.id();A._idCache=[];A.$cssKeys={};z=A.$Keys;z.KEY=z.$key=A.KEY;A.addTemplateKeys(_.toArr(z,true));s="$Behaviors";f={};if((z=A.$parent)&&(l=z.length)){while(l--){q=z[l][s];for(h in q){if(typeof q[h]=="object"){if(_.isArr(q[h])){x=f[h]||(f[h]=[]);x.push.apply(x,q[h])}else{x=f[h]||(f[h]={});_.merge(x,q[h])}}else{f[h]=q[h]}}}}A[s]=f;s="$Templates";f={};if((z=A.$parent)&&(l=z[0])){for(h in l[s]){if(h.charAt(0)!="$"){f[h]=l[s][h]}}}A[s]=_.clone(f);s="$Appearances";f={};if((z=A.$parent)&&(l=z.length)){while(l--){q=z[l];for(h in q[s]){z=q[s][h];x=f[h]||(f[h]={});_.merge(x,z)}}}A[s]=f;A.setTemplate(A.Templates);delete A.Templates;A.setBehavior(A.Behaviors||{});delete A.Behaviors;A.setAppearance(A.Appearances);delete A.Appearances;if(z=A.PublicAppearance){xui.UI.$cache_css+=A.buildCSSText(z);delete A.PublicAppearance}},Instance:{setHoverPop:function(f,j,g,m,l){var i=this.get(0),h=xui(i);if(f["xui.UI"]){f=f.getRoot()}else{if(f["xui.UIProfile"]||f["xui.Template"]){f=f.boxing()}else{if(f["xui.Template"]){f=f.boxing()}else{if(typeof(f)=="string"&&f.chartAt(0)=="!"){f=xui(f)}}}}if(!_.isDefined(j)){j="12"}var k=i.getRoot().xid(),d=k+":"+f.xid();i.$beforeHover=j===null?null:function(c,n,p,q,s){if(s=="mouseover"){_.resetRun(d,null);var r=xui.getNodeData(k,"$ui.hover.pop")&&xui.getNodeData(f.get(0),"$ui.hover.parent")==q;if(!g||false!==g(c,f,p,q,n,r)){if(!r){f.popToTop(q,j,l);xui.setNodeData(k,"$ui.hover.pop",1);xui.setNodeData(f.get(0),"$ui.hover.parent",q)}}}else{_.resetRun(d,function(){if(!m||false!==m(c,f,p,q,n,"host")){f.hide();xui.setNodeData(k,"$ui.hover.pop",0);xui.setNodeData(f.get(0),"$ui.hover.parent",0)}})}};f.onMouseover(j===null?null:function(c,n,p){_.resetRun(d,null)},d).onMouseout(j===null?null:function(c,n,p){_.resetRun(d,function(){if(!m||false!==m(c,f,n,p,"pop")){f.hide();xui.setNodeData(k,"$ui.hover.pop",0);xui.setNodeData(f.get(0),"$ui.hover.parent",0)}})},d);return this},setTheme:function(f){if(typeof f!="string"||!f){f=null}var d,c=[];this.each(function(g){if(f!=g.theme){if(f===null){delete g.theme}else{g.theme=f}c.push(g)}});xui.UI.pack(c,false).refresh();return this},getTheme:function(){return this.get(0)&&this.get(0).theme},destroy:function(c){var d=this;this.each(function(k,h){if(k.destroyed){return}if(k.beforeDestroy&&false===k.boxing().beforeDestroy()){return}var j=k.properties,g=c?null:xui.Dom._getEffects(j.hideEffects,0),f=function(){if(k.$beforeDestroy){_.each(k.$beforeDestroy,function(i){_.tryF(i,[],k)});_.breakO(k.$beforeDestroy,2)}if(k.$afterDestroy){_.each(k.$afterDestroy,function(i){_.tryF(i,[],k)});_.breakO(k.$afterDestroy,2)}if(k.renderId){k.getRoot().remove()}else{k.__gc()}_.arr.removeFrom(d._nodes,h)};if(g){xui.Dom._vAnimate(k.getRoot(),false,g,f)}else{f()}},null,true)},isDestroyed:function(){return !!(this.get(0)?this.get(0).destroyed:1)},_toDomElems:function(){var c=[];_.arr.each(this._nodes,function(d){if(!d.renderId){c.push(d)}});if(c.length){xui.UI.pack(c,false).render()}c.length=0;_.arr.each(this._nodes,function(d){c.push(d.renderId)});return c},_ini:function(l,g,s,B,d,m,n,k,p){var x=this,A=x.constructor,h,r="default",j,f=A._namePool,E=xui.UI.__resetDftProp,D=A.__resetDftProp,C=A.$adjustProp,w=A.$DataStruct,u,z;if(l&&l["xui.Profile"]){h=l;u=h.alias||A.pickAlias();xui.UIProfile.apply(h,[s,x.$key,u,A,null,g])}else{if(l&&l.key&&xui.absBox.$type[l.key]){j=l;l=null;u=j.alias;u=(u&&!f[u])?u:A.pickAlias()}else{u=A.pickAlias()}h=new xui.UIProfile(s,x.$key,u,A,l,g,j)}f[u]=1;for(var y in w){if(!(y in h.properties)){z=D&&(y in D)?D[y]:E&&(y in E)?E[y]:w[y];h.properties[y]=typeof z=="object"?_.clone(z,true):z}}if(typeof(C)=="function"){C(h)}h.keys=A.$Keys;h.CS=d?_.copy(d):(h.CS||{});h.CB=n?_.copy(n):(h.CB||{});h.CC=m?_.copy(m):(h.CC||{});h.CF=k?_.copy(k):(h.CF||{});h.CA=p?_.copy(p):(h.CA||{});if(typeof B=="string"){h.theme=B}h.template=A.getTemplate();h.behavior=A.$Behaviors;if(!h.serialId){h.serialId=A._pickSerialId()}h.$domId=h.key+":"+h.serialId+":";h.domId=h.domId||h.$domId;h.RenderTrigger=_.copy(A.$RenderTrigger);h.LayoutTrigger=_.copy(A.$LayoutTrigger);h.link(xui.UI._cache,"UI").link(A._cache,"self").link(xui._pool,"xui");z=h.children;h.children=[];if(z&&z.length){for(var y=0,q;q=z[y++];){if(!q[0]["xui.UIProfile"]){q[0]=new (xui.SC(q[0].key))(q[0]).get(0)}q[0].linkParent(h,q[1])}}x._nodes.push(h);h._cacheInstance=x;return x},busy:function(h,g,f,d){var i=typeof h=="string"?h:"Loading...",c=typeof g=="string"?g:'<span style="background:url('+xui.ini.img_busy+') no-repeat left center;padding-left:16px;">'+i+"</span>";if(h===true||g===true){xui.Dom.busy()}return this.each(function(j){_.resetRun(j.$xid+":busy",function(n,m,l){if(!n.box){return}var q=n.keys,p;m=q[m]||q.BORDER||q.PANEL||q.KEY;var k=n.getSubNode(m,l);if(k.isEmpty()){return}if(!n.$busy||n.$busy.isEmpty()){p=n.$busy=xui.create('<div style="left:0;top:0;z-index:10;position:absolute;background-color:#DDD;width:100%;height:100%"></div><div style="left:0;top:0;z-index:20;text-align:center;position:absolute;width:100%;height:100%;font-size:12px;line-height:24px;cursor:wait;"><div>'+c+"</div></div>");xui([p.get(0)]).css({opacity:0.5})}p=n.$busy;xui([p.get(1).firstChild]).html(c,false).css("paddingTop",(k.offsetHeight()||0)/2+"px");k.append(p)},50,[j,f,d])})},free:function(){xui.Dom.free();return this.each(function(c){_.resetRun(c.$xid+":busy");if(c.$busy){c.$busy.remove();delete c.$busy}})},reLayout:function(c){return this.each(function(f){if(!f.renderId){return}var d=f.properties;if((!f.$noB)&&d.border&&f.boxing()._border){f.boxing()._border(null,false)}if(d.dock&&d.dock!="none"){f.boxing().adjustDock(c)}else{if(c){f._resize_h=-1;f._resize_w=-1}xui.UI.$tryResize(f,d.width,d.height,c)}})},toHtml:function(d){var c=[];_.arr.each(this._nodes,function(f){c[c.length]=f.toHtml(d)});return c.join("")},render:function(d){var k=this,j=[],h,g,c,f=k._nodes,p,m=[],q=xui.Dom.byId;xui.UI.$applyCSS();for(h=0;c=f[h++];){if(!c.renderId&&!xui.Dom.byId(c.domId)&&!xui.Dom.byId(c.$domId)){j[j.length]=c}}if(g=j.length){for(h=0;h<g;h++){if(c=j[h].toHtml()){m[m.length]=c}}if(m.length){xui.UI.$toDom(k.get(0),m.join(""))}}for(h=0;c=j[h++];){c._render(d)}m.length=j.length=0;return k},renderOnto:function(h,g){h=xui(h);if(h.isEmpty()){return this}var c=this,i=c.get(0),f=arguments.callee,d=f.paras||(f.paras=function(l){var k=l.cssRegion();k.tabindex=l.attr("tabIndex");if(k.tabindex<=0){delete k.tabindex}k.zIndex=l.css("zIndex");k.position=l.css("position");return k}),j=h.id();_.merge(i.properties,d(h),"all");i.properties.dock="none";if(!i.alias&&j){i.alias=j}if(i.alias){c.setHost(g||window,i.alias)}c.render(true);h.replace(c.getRoot());if(j){c.setDomId(j)}return c},setDomId:function(c){this.get(0).setDomId(c);return this},hide:function(c){return this.each(function(g){if(g.renderId){var f=g.properties,d=c?null:xui.Dom._getEffects(f.hideEffects,0);g.getRoot().hide(function(){f.top=f.left=parseInt(xui.Dom.HIDE_VALUE,10);f.dockIgnore=true},d)}})},show:function(f,d,h,g,c){return this.each(function(l){var j=l.properties,i;h=(h||h===0)?(parseInt(h,10)||0):null;g=(g||g===0)?(parseInt(g,10)||0):null;if(h!==null){j.left=h}if(g!==null){j.top=g}if(xui.getNodeData(l.renderId,"_xuihide")){i=1;j.dockIgnore=false;l.getRoot().show(h&&(h+"px"),g&&(g+"px"),null,a);if(j.dock&&j.dock!="none"){xui.UI.$dock(l,false,true)}}else{if(!f&&(!l.renderId||(l.getRootNode().id||"").indexOf(xui.Dom._emptyDivId)===0)){f=xui("body")}}var k=f,m;if(k){if(k["xui.UIProfile"]){m=k.renderId;k=k.boxing()}else{if(k["xui.UI"]){m=(m=k.get(0))&&m.renderId}else{m=(k=xui(k))&&k._nodes[0]}}if(m){k.append(l.boxing(),d);if(!i){l.getRoot().show(h&&(h+"px"),g&&(g+"px"))}}}})},clone:function(){return arguments.callee.upper.apply(this,["domId"])},refresh:function(i){var q,f,k,c,n,m,g,j,h,d,l;return this.each(function(x){if(!x.renderId){return}h=x.box;var s,w=x.host,v=x.alias;if(x.host&&x.host["xui.Com"]&&x.host.autoDestroy){x.host.autoDestroy=false}m=x.$xid;g=x.serialId;var r=x.$afterRefresh;if(typeof x.boxing().getUIValue=="function"){l=x.boxing().getUIValue();if((x.boxing().getValue()+" ")==(l+" ")){l=null}}if(k=!!x.parent){c=x.parent.boxing();q=x.childrenId}else{c=x.getRoot().parent()}f=i?xui.Dom.getEmptyDiv():xui.$getGhostDiv();x.boxing().getChildren().reBoxing().each(function(y){f.appendChild(y)});f=null;d=_.copy(x.children);x.boxing().removeChildren();n=x.serialize(false,true);j=x.$refreshTrigger;var u=xui.create("span");x.getRoot().replace(u);x.$noReclaim=1;var p=x._cacheInstance;x.boxing().destroy(true);_.merge(x,n,"all");delete x.destroyed;x.$xid=m;x.serialId=g;x=new h(x).render();if(p){_.merge(p,x,"all");x.get(0)._cacheInstance=p}if(j){j.call(j.target,x.get(0))}if(k){c.append(x,q)}else{c.append(x)}if(w){x.setHost(w,v)}_.arr.each(d,function(y){delete y[0].$dockParent;x.append.apply(x,y)});u.replace(x.get(0).getRoot());u.remove();u=null;if(l){x.setUIValue(l,true)}if(r){x.get(0).$afterRefresh=r;r(x.get(0))}if(_.isSet(s&&x.host&&x.host["xui.Com"])){x.host.autoDestroy=s}})},append:function(l,c,g,f){var q=this.get(0),d=q.properties;var k,m,n=arguments[4],j=arguments[5];g=!!g;if(f){if(f["xui.UI"]){f=f.get(0)}_.arr.each(q.children,function(s,r){if(s[0]===f){k=r;return false}});if(_.isNumb(k)){k=g?k:(k+1);m=f.getRoot();if(m.isEmpty()){m=null}}}else{k=g?0:-1}if(_.isHash(l)||_.isStr(l)){l=xui.create(l)}if(l["xui.UIProfile"]){l=l.boxing()}if(q.beforeAppend&&false===this.beforeAppend(q,l,c,g,f)){return}if(l["xui.Com"]){if(c!==false){var h=k;l.getUIComponents().each(function(i){i.linkParent(q,c,f?(h++):h)})}if(q.renderId){j=n?j:q.getContainer(c);if(j&&(!j.isEmpty())&&(!d.lazyAppend||j.css("display")!="none")){if(!f){j[g?"prepend":"append"](l)}else{if(m){m[g?"addPrev":"addNext"](l)}}}}else{_.arr.insertAny(q.excoms||(q.excoms=[]),[l,c],k,true)}}else{if(c!==false){if(l["xui.UI"]){var h=k;l.each(function(i){i.linkParent(q,c,f?(h++):h)})}}if(q.renderId){var p;if(q.parent&&_.get(q,["properties","dock"])!="none"&&!_.get(q,["properties","dockIgnore"])&&!_.get(q,["properties","dockFloat"])){if(l["xui.absBox"]){p=l.reBoxing().parent()}}j=n?j:q.getContainer(c);if(j&&(!j.isEmpty())&&(!d.lazyAppend||j.css("display")!="none")){if(!f){j[g?"prepend":"append"](l)}else{if(m){m[g?"addPrev":"addNext"](l)}}}if(p&&p.get(0)){p.onSize()}}else{if(!l["xui.UI"]){_.arr.insertAny(q.exchildren||(q.exchildren=[]),[l,c],k,true)}}}if(q.afterAppend){this.afterAppend(q,l,c,g,f)}return this},getParent:function(){var c=this.get(0);if(c){return c.parent&&c.parent.boxing()}},getChildrenId:function(){var c=this.get(0);if(c){return c.childrenId}},getChildren:function(d,g){var c=[],h=function(f){_.arr.each(f.children,function(i){c.push(i[0]);if(i[0].children&&i[0].children.length){h(i[0])}})};_.arr.each(this.get(0).children,function(f){if((d&&typeof(d)=="string")?f[1]===d:1){c.push(f[0]);if(g){h(f[0])}}});return xui.UI.pack(c)},removeChildren:function(c,d){return this.each(function(f){var g=_.copy(f.children);_.arr.each(g,function(h){if(c===true?1:c?typeof c=="string"?(h[1]==c):(h[0]==(c["xui.UI"]?c.get(0):c)):1){if(f.beforeRemove&&false===f.boxing().beforeRemove(f,h[0],h[1],d)){return}h[0].unlinkParent();if(f.afterRemove){f.boxing().afterRemove(f,h[0],h[1],d)}if(d&&!h[0].destroyed){h[0].boxing().destroy(true)}}})})},draggable:function(d,h,f,c,g){return this.each(function(i){i.getSubNode(i.keys[f]||"KEY",true).beforeMousedown(d?function(m,k,l){if(xui.Event.getBtn(k)!="left"){return}if(m.properties.disabled){return}var j=j?typeof(j)=="function"?_.tryF(getTarget,[],i):xui(j):null;if(!j||!j.get(0)){j=xui(l)}c=c||{};c.dragKey=d;c.dragData=typeof h=="function"?h():h;_.merge(c,{dragCursor:"pointer",dragType:"icon",dragDefer:1});j.startDrag(k,c)}:null,"_d",-1).beforeDragbegin(d?function(j,k,l){xui.use(l).onMouseout(true,{$force:true}).onMouseup(true)}:null,"_d",-1);if(!d){i.clearCache()}})},setCustomFunction:function(c,d){return this.each(function(f){if(typeof c=="string"){if(d){f.CF[c]=d}else{delete f.CF[c]}}else{f.CF=c||{}}})},setCustomClass:function(d,g){var f=arguments.callee,c=(f.fun||(f.fun=function(p,l,m,k){if(!m[l]){return}var n=p.getSubNode(l,true),j;if(!n.isEmpty()){_.arr.each(m[l].split(/\s+/),function(h){n[k?"removeClass":"addClass"](h)})}}));return this.each(function(k){var h=_.copy(k.CC);if(typeof d=="string"){if(k.renderId){if(d in h){c(k,d,h,true)}}if(!g){delete k.CC[d]}else{k.CC[d]=g;if(k.renderId){c(k,d,k.CC)}}}else{if(!!d&&typeof d=="object"){if(k.renderId){for(var j in h){c(k,j,h,true)}for(var j in d){c(k,j,d)}}k.CC=d}else{if(k.renderId){for(var j in h){c(k,j,h,true)}}k.CC={}}}})},setCustomAttr:function(f,h,d){var g=arguments.callee,c=(g.fun||(g.fun=function(q,n,m,k,l){if(!m[n]){return}var j=q.keys[n]||n,p,i;if(l){p=l.query("*","id",j==q.keys.KEY?q.domId:new RegExp("^"+j+":"+q.serialId))}else{p=q.getSubNode(n,true)}if(!p.isEmpty()){if(_.isHash(m[n])){_.each(m[n],function(s,r){p.attr(r,k?"":(s&&typeof s=="string")?xui.adjustRes(s,0,1):s)})}}}));return this.each(function(l){var j=_.copy(l.CA);if(!!f&&typeof f=="object"){if(f){_.filter(f,function(n,m){return m!="id"&&m!="class"&&m!="style"&&m!="$xid"})}if(l.renderId){for(var k in f){c(l,k,j,true,d)}for(var k in f){c(l,k,f,false,d)}}l.CA=f}else{if(l.renderId){for(var k in j){c(l,k,j,true,d)}}l.CA={}}})},setCustomStyle:function(f,h,d){var g=arguments.callee,c=(g.fun||(g.fun=function(q,n,m,k,l){if(!m[n]){return}var j=q.keys[n]||n,p,i;if(l){p=l.query("*","id",j==q.keys.KEY?q.domId:new RegExp("^"+j+":"+q.serialId))}else{p=q.getSubNode(n,true)}if(!p.isEmpty()){if(_.isStr(m[n])){_.arr.each(m[n].split(";"),function(s,r){if((i=s.split(":")).length>=2){r=i.shift();s=i.join(":");r=r.replace(/\-(\w)/g,function(v,u){return u.toUpperCase()});p.css(r,(k?"":xui.adjustRes(s,0,1))||"")}})}else{if(_.isHash(m[n])){_.each(m[n],function(s,r){r=r.replace(/\-(\w)/g,function(v,u){return u.toUpperCase()});p.css(r,(k?"":(s&&typeof s=="string")?xui.adjustRes(s,0,1):s)||"")})}}}}));return this.each(function(l){var j=_.copy(l.CS);if(typeof f=="string"){if(l.renderId){if(f in j){c(l,f,j,true,d)}}if(!h){delete l.CS[f]}else{l.CS[f]=h;if(l.renderId){c(l,f,l.CS,false,d)}}}else{if(!!f&&typeof f=="object"){if(l.renderId){for(var k in j){c(l,k,j,true,d)}for(var k in f){c(l,k,f,false,d)}}l.CS=f}else{if(l.renderId){for(var k in j){c(l,k,j,true,d)}}l.CS={}}}})},setCustomBehavior:function(c,d){return this.each(function(f){if(typeof c=="string"){if(f.keys[c]){f.CB[c]=d||{}}}else{f.CB=c||{}}if(f.CB.KEY){_.merge(f.CB,f.CB.KEY,"all");delete f.CB.KEY}f.clearCache()})},adjustDock:function(c){return this.each(function(d){if(!d.renderId){return}if("dock" in d.properties&&d.properties.dock&&d.properties.dock!="none"&&d.renderId){var f=d.getRootNode();if(f.clientHeight){if(c){f.style.width=0;f.style.height=0;d._resize_h=-1;d._resize_w=-1}xui.UI.$dock(d,true,true)}}if(d.$onDock){var f=d.boxing().getContainer(true);if(f&&f.onSize&&f.get(0)){f.onSize()}}})}},Initialize:function(){var d=this.prototype;_.arr.each("getSubNode,getDomId,getRootNode,getRoot,getContainer".split(","),function(g){if(!d[g]){d[g]=function(){var h=this.get(0);return h?h[g].apply(h,arguments):null}}d[g].$original$="xui.UI";d[g].$type$="instance";d[g].$name$=g});var c=this,f={};_.each(xui.UI.$ps,function(g,h){f[h]={ini:"auto",action:function(l){var j=this,m=j.properties,i=false,k;j.getRoot()[h]?j.getRoot()[h](l):xui.Dom._setPxStyle(j.getRootNode(),h,l);if(h=="width"||h=="height"){if(!j.box._onresize&&j.onResize){j.boxing().onResize(j,h=="width"?l:null,h=="height"?l:null)}}else{if(j.onMove){j.boxing().onMove(j,h=="left"?l:null,h=="top"?l:null,h=="right"?l:null,h=="bottom"?l:null)}}if(m.dock!="none"){k={$type:m.dock,$dockid:_.arr.indexOf(["width","height","fill","cover"],m.dock)!=-1?j.$xid:null};switch(m.dock){case"middle":if(h!="height"&&h!="top"){return}k.top=k.height=1;break;case"center":if(h!="width"&&h!="left"){return}k.left=k.width=1;break;case"top":if(h!="height"&&h!="top"){return}k.width=k.height=1;break;case"bottom":if(h!="height"&&h!="bottom"){return}k.width=k.height=1;break;case"left":if(h!="width"&&h!="left"){return}k.width=k.height=1;break;case"right":if(h!="width"&&h!="right"){return}k.width=k.height=1;break;case"width":if("width"==h){return}k.width=1;break;case"height":if("height"==h){return}k.height=1;break;case"fill":case"cover":if(h=="width"&&h=="height"){return}k.width=k.height=1;break}_.tryF(j.$dockFun,[k],j)}}}});_.merge(f,{renderer:{ini:null},zIndex:{ini:1,action:function(g){this.getRoot().css("zIndex",g)}},tabindex:{ini:1,action:function(i){var h=this,g=new RegExp("^"+h.key+"[-\\w]*:"+h.serialId+":");h.getRoot().query("*",function(j){return j.id&&g.test(j.id)&&j.getAttribute("tabIndex")}).attr("tabIndex",i)}},position:{ini:"absolute",listbox:["","static","relative","absolute"],action:function(g){this.getRoot().css("position",g)}},visibility:{listbox:["","visible","hidden"],action:function(g){this.getRoot().css("visibility",g);if(this.$resizer){if(g=="hidden"){this.$resizer.hide()}else{this.$resizer.show()}}xui.setNodeData(this.getRootNode(),"_setVisibility",1)}},display:{listbox:["","none","block","inline","inline-block"],action:function(g){if(g=="inline-block"){this.getRoot().setInlineBlock()}else{this.getRoot().css("display",g)}}},selectable:{ini:false,action:function(g){this.getRoot().setSelectable(!!g)}}});c.setDataModel(f);xui.UI.$cache_css+=xui.UI.buildCSSText({".xui-css-noscroll, .xui-css-noscroll body, .xui-css-viewport, .xui-css-viewport body":{overflow:"hidden",height:"100%",border:"0 none",margin:"0",padding:"0"},".xui-ui-draggable":{},".xui-inline-block":{display:xui.$inlineBlock,zoom:xui.browser.ie?1:null},".xui-ui-btn, .xui-ui-btni, .xui-ui-btnc":{height:"22px","line-height":"22px",background:xui.UI.$bg("button.gif","no-repeat",true)},".xui-ui-btn":{$order:1,"white-space":"nowrap","vertical-align":"top",overflow:"hidden","background-position":"right top","padding-right":"4px","font-size":"12px"},".xui-ui-btn *":{cursor:"pointer"},".xui-ui-btnc button, .xui-ui-btnc a":{display:xui.$inlineBlock,zoom:xui.browser.ie?1:null,background:"transparent",border:0,margin:0,padding:0},".xui-ui-btnc a":{padding:"0 4px"},".xui-ui-btnc a, .xui-ui-btnc span, .xui-ui-btnc button":{"line-height":"22px"},".xui-ui-btni":{$order:1,"background-position":"left -60px","padding-left":"4px","vertical-align":"top",overflow:"hidden"},".xui-ui-btnc":{$order:1,"background-position":"left -30px","background-repeat":"repeat-x","vertical-align":"top"},".xui-ui-btn-mouseover, .xui-ui-btn-focus":{$order:2,"background-position":"right -90px"},".xui-ui-btn-mouseover .xui-ui-btni, .xui-ui-btn-focus .xui-ui-btni":{$order:2,"background-position":"left -150px"},".xui-ui-btn-mouseover .xui-ui-btnc, .xui-ui-btn-focus .xui-ui-btnc":{$order:2,"background-position":"left -120px"},".xui-ui-btn-mousedown, .xui-ui-btn-checked":{$order:3,"background-position":"right -180px"},".xui-ui-btn-mousedown .xui-ui-btni, .xui-ui-btn-checked .xui-ui-btni":{$order:3,"background-position":"left -240px"},".xui-ui-btn-mousedown .xui-ui-btnc, .xui-ui-btn-checked .xui-ui-btnc":{$order:3,"background-position":"left -210px"},".xui-ui-image":{"vertical-align":"middle",width:"16px",height:"16px","background-repeat":"no-repeat"},".xui-ui-icon":{"vertical-align":"middle",width:"16px",height:"16px","background-repeat":"no-repeat","background-position":"center",margin:"0 2px"},".xui-uicmd-close, .xui-uicmd-info, .xui-uicmd-opt, .xui-uicmd-pop, .xui-uicmd-land, .xui-uicmd-refresh, .xui-uicmd-toggle, .xui-uicmd-toggle2, .xui-uicmd-min, .xui-uicmd-max,.xui-uicmd-restore,.xui-uicmd-pin, .xui-uicmd-check, .xui-uicmd-radio, .xui-uicmd-add, .xui-uicmd-remove":{"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"left top",width:"16px",height:"16px","margin-right":"2px",cursor:"default","vertical-align":"middle"},".xui-uicmd-info":{$order:1,"background-position":"-320px 0"},".xui-uicmd-info-mouseover":{$order:2,"background-position":"-320px  -20px"},".xui-uicmd-info-mousedown":{$order:3,"background-position":"-320px  -40px"},".xui-uicmd-opt":{$order:1,"background-position":"0 0"},".xui-uicmd-opt-mouseover":{$order:2,"background-position":"0 -20px"},".xui-uicmd-opt-mousedown":{$order:3,"background-position":"0 -40px"},".xui-uicmd-pop, .xui-uicmd-land":{$order:1,"background-position":"-40px 0"},".xui-uicmd-pop-mouseover, .xui-uicmd-land-mouseover":{$order:2,"background-position":"-40px -20px"},".xui-uicmd-pop-mousedown, .xui-uicmd-land-mousedown":{$order:3,"background-position":"-40px -40px"},".xui-uicmd-refresh":{$order:1,"background-position":"-280px 0"},".xui-uicmd-refresh-mouseover":{$order:2,"background-position":"-280px -20px"},".xui-uicmd-refresh-mousedown":{$order:3,"background-position":"-280px -40px"},".xui-uicmd-pin":{$order:1,"background-position":"-80px 0"},".xui-uicmd-pin-mouseover":{$order:2,"background-position":"-80px -20px"},".xui-uicmd-pin-mousedown":{$order:3,"background-position":"-80px -40px"},".xui-uicmd-pin-checked, .xui-uicmd-pin-checked-mouseover, .xui-uicmd-pin-checked-mousedown":{$order:4,"background-position":"-80px -40px"},".xui-uicmd-min":{$order:1,"background-position":"-120px 0"},".xui-uicmd-min-mouseover":{$order:2,"background-position":" -120px -20px"},".xui-uicmd-min-mousedown":{$order:3,"background-position":"-120px -40px"},".xui-uicmd-restore":{$order:1,"background-position":"-160px 0"},".xui-uicmd-restore-mouseover":{$order:2,"background-position":"-160px -20px"},".xui-uicmd-restore-mousedown":{$order:3,"background-position":"-160px -40px"},".xui-uicmd-max":{$order:1,"background-position":"-200px 0"},".xui-uicmd-max-mouseover":{$order:2,"background-position":"-200px -20px"},".xui-uicmd-max-mousedown":{$order:3,"background-position":"-200px -40px"},".xui-uicmd-close":{$order:1,"background-position":"-240px 0"},".xui-uicmd-close-mouseover":{$order:2,"background-position":"-240px -20px"},".xui-uicmd-close-mousedown":{$order:3,"background-position":"-240px -40px"},".xui-uicmd-check":{$order:1,margin:"0 4px 0 2px","background-position":"-20px -70px"},".xui-uicmd-check-mouseover":{$order:2,"background-position":"-20px -90px"},".xui-uicmd-check-mousedown":{$order:3,"background-position":"-20px -110px"},".xui-uicmd-check-checked":{$order:4,"background-position":"0 -70px"},".xui-uicmd-check-checked-mouseover":{$order:5,"background-position":"0 -90px"},".xui-uicmd-check-checked-mousedown":{$order:6,"background-position":"0 -110px"},".xui-uicmd-radio":{$order:1,margin:"0 4px 0 2px","background-position":"-60px -70px"},".xui-uicmd-radio-mouseover":{$order:2,"background-position":"-60px -90px"},".xui-uicmd-radio-mousedown":{$order:3,"background-position":"-60px -110px"},".xui-uicmd-radio-checked":{$order:4,"background-position":"-40px -70px"},".xui-uicmd-radio-checked-mouseover":{$order:5,"background-position":"-40px -90px"},".xui-uicmd-radio-checked-mousedown":{$order:6,"background-position":"-40px -110px"},".xui-uicmd-add":{$order:1,"background-position":"-56px -222px"},".xui-uicmd-add-mouseover":{$order:2,"background-position":"-56px -222px"},".xui-uicmd-add-mousedown":{$order:3,"background-position":"-56px -222px"},".xui-uicmd-remove":{$order:1,"background-position":"-72px -222px"},".xui-uicmd-remove-mouseover":{$order:1,"background-position":"-72px -222px"},".xui-uicmd-remove-mousedown":{$order:1,"background-position":"-72px -222px"},".xui-uicmd-toggle":{$order:1,"background-position":"-160px -70px"},".xui-uicmd-toggle-mouseover":{$order:2,"background-position":"-160px -90px"},".xui-uicmd-toggle-mousedown":{$order:3,"background-position":"-160px -110px"},".xui-uicmd-toggle-checked":{$order:4,"background-position":"-180px -70px"},".xui-uicmd-toggle-checked-mouseover":{$order:5,"background-position":"-180px -90px"},".xui-uicmd-toggle-checked-mousedown":{$order:6,"background-position":"-180px -110px"},".xui-uicmd-toggle2":{$order:1,"background-position":"-200px -70px"},".xui-uicmd-toggle2-mouseover":{$order:2,"background-position":"-200px -90px"},".xui-uicmd-toggle2-mousedown":{$order:3,"background-position":"-200px -110px"},".xui-uicmd-toggle2-checked":{$order:4,"background-position":"-220px -70px"},".xui-uicmd-toggle2-checked-mouseover":{$order:5,"background-position":"-220px -90px"},".xui-uicmd-toggle2-checked-mousedown":{$order:6,"background-position":"-220px -110px"},".xui-uicmd-none":{display:"none"},".xui-uicmd-empty":{$order:1000,width:"16px",height:"16px","margin-right":"2px",cursor:"default","vertical-align":"middle",background:"none"},".xui-uibar-top, .xui-uibar-bottom, .xui-uibar-top-s, .xui-uibar-bottom-s":{position:"relative","vertical-align":"baseline","font-size":0,"line-height":0},".xui-uibar-top td, .xui-uibar-top-s td, .xui-uibar-bottom td, .xui-uibar-bottom-s td":{$order:1,"background-image":xui.UI.$bg("bar_vertical.gif","",true),"background-repeat":"no-repeat","background-position":"left top"},".xui-uibar-top, .xui-uibar-top .xui-uibar-t":{height:"29px"},".xui-uibar-top .xui-uibar-tdl":{$order:1,"padding-left":"4px",height:"100%","background-position":"0 0"},".xui-uibar-top .xui-uibar-tdm":{$order:1,"background-position":"0 -30px","background-repeat":"repeat-x"},".xui-uibar-top .xui-uibar-tdr":{$order:1,"padding-left":"4px","background-position":"right -60px"},".xui-uibar-top-focus .xui-uibar-tdl":{$order:2,"padding-left":"4px",height:"100%","background-position":"left -90px"},".xui-uibar-top-focus .xui-uibar-tdm":{$order:2,"background-position":"left -120px","background-repeat":"repeat-x"},".xui-uibar-top-focus .xui-uibar-tdr":{$order:2,"padding-left":"4px","background-position":"right -150px"},".xui-uibar-top .xui-uibar-cmdl":{overflow:"hidden",position:"absolute",left:0,top:"6px",width:"92%",height:"22px","padding-left":"8px","white-space":"nowrap"},".xui-uibar-top .xui-uibar-cmdr":{position:"absolute",top:"6px",right:"8px","text-align":"right"},".xui-uicon-main":{position:"relative","padding-left":"4px","font-size":0,"line-height":0,"z-index":1,overflow:"visible","background-image":xui.UI.$bg("bar_horizontal.gif","",true),"background-repeat":"repeat-y","background-position":"-595px top"},".xui-uicon-maini":{"padding-right":"4px","font-size":0,"line-height":0,"background-image":xui.UI.$bg("container_right.gif","",true),"background-repeat":"repeat-y","background-color":"#AAD2FA","background-position":"right top"},".xui-uibar-bottom, .xui-uibar-bottom .xui-uibar-t":{height:"12px"},".xui-uibar-bottom .xui-uibar-tdl":{$order:1,"padding-left":"4px",height:"100%","background-position":"left -189px"},".xui-uibar-bottom .xui-uibar-tdm":{$order:1,"background-position":"left -211px","background-repeat":"repeat-x"},".xui-uibar-bottom .xui-uibar-tdr":{$order:1,"padding-left":"4px","background-position":"right -233px"},".xui-uibar-top-s, .xui-uibar-top-s .xui-uibar-t":{$order:3,height:"7px"},".xui-uibar-top-s .xui-uibar-tdl":{$order:3,height:"100%","padding-left":"4px","background-position":"left -2`61px"},".xui-uibar-top-s .xui-uibar-tdm":{$order:3,"background-position":"left -283px","background-repeat":"repeat-x"},".xui-uibar-top-s .xui-uibar-tdr":{$order:3,"padding-left":"4px","background-position":"right -305px"},".xui-uibar-top-s .xui-uibar-cmdl":{$order:3,display:"none"},".xui-uibar-top-s .xui-uibar-cmdr":{$order:3,display:"none"},".xui-uibar-bottom-s, .xui-uibar-bottom-s .xui-uibar-t":{$order:3,height:"6px"},".xui-uibar-bottom-s .xui-uibar-tdl":{$order:3,height:"100%","padding-left":"4px","background-position":"left -327px"},".xui-uibar-bottom-s .xui-uibar-tdm":{$order:3,"background-position":"left -349px","background-repeat":"repeat-x"},".xui-uibar-bottom-s .xui-uibar-tdr":{$order:3,"padding-left":"4px","background-position":"right -371px"}})+xui.UI.buildCSSText({".xui-ui-unselectable":{$order:0,"-moz-user-select":xui.browser.gek?"-moz-none":null,"-khtml-user-select":xui.browser.kde?"none":null,"-webkit-user-select":xui.browser.kde?"none":null,"-o-user-select":xui.browser.opr?"none":null,"-ms-user-select":(xui.browser.ie||xui.browser.newie)?"none":null,"user-select":"none"},".xui-ui-selectable":{$order:1,"-moz-user-select":xui.browser.gek?"text":null,"-khtml-user-select":xui.browser.kde?"text":null,"-webkit-user-select":xui.browser.kde?"text":null,"-o-user-select":xui.browser.opr?"text":null,"-ms-user-select":(xui.browser.ie||xui.browser.newie)?"text":null,"user-select":"text"},".xui-ui-ctrl":{cursor:"default","font-family":"arial,helvetica,clean,sans-serif","font-style":"normal","font-weight":"normal","font-size":"12px","vertical-align":"middle"},".xui-uiw-shell":{background:"transparent",display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,border:0,padding:0,margin:0},".xui-uiw-frame":{$order:1,display:"block",position:"relative",border:0,padding:0,margin:0,width:"100%",height:"100%","-moz-box-flex":"1"},".xui-uiw-border":{$order:2,display:"block",position:"absolute",border:0,padding:0,margin:0,left:0,top:0,width:"100%",height:"100%"}})+xui.UI.buildCSSText({".xui-uibg-base":{"background-color":"#fff"},".xui-uibg-bar":{"background-color":"#aad2fa"},".xui-uiborder-flat":{border:"solid 1px #648cb4"},".xui-uiborder-inset":{border:"solid 1px","border-color":"#648cb4 #c8e1fa #c8e1fa #648cb4"},".xui-uiborder-outset":{border:"solid 1px","border-color":"#c8e1fa #648cb4 #648cb4 #c8e1fa"},".xui-uiborder-none":{$order:10,border:"none"}});xui.UI.$cache_css2+=xui.UI.buildCSSText({".xui-css-dockparent":{overflow:"hidden"},".xui-ui-dirty":{$order:1,"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-390px -290px"},".xui-ui-readonly, .xui-ui-inputreadonly, .xui-ui-itemreadonly, .xui-ui-readonly, .xui-ui-itemreadonly *, .xui-ui-readonly *":{$order:2,color:"#808080"},".xui-ui-disabled, .xui-ui-inputdisabled, .xui-ui-itemdisabled, .xui-ui-disabled, .xui-ui-itemdisabled *, .xui-ui-disabled *":{$order:2,cursor:"not-allowed",color:"#808080"},".xui-ui-inputdisabled, .xui-ui-disabled input, .xui-ui-itemdisabled input, .xui-ui-disabled textarea, .xui-ui-itemdisabled textarea":{$order:2,"background-color":"#eee"},".xui-ui-invalid, .xui-ui-invalid *":{$order:1,"background-color":"#FFEBCD"},".xui-item-row":{display:"block","white-space":"nowrap"},".xui-ui-busy":{"background-image":"url("+xui.ini.img_busy+")","background-repeat":"no-repeat","background-position":"center center"},".xui-uicmd-toggle-busy":{$order:7,"background-image":"url("+xui.ini.img_busy+")","background-repeat":"no-repeat","background-position":"center center"},".xui-uicmd-toggle2-busy":{$order:7,"background-image":"url("+xui.ini.img_busy+")","background-repeat":"no-repeat","background-position":"center center"}})},$End:function(){var d={},c=this.$Keys;_.filter(this.getAppearance(),function(q,p){var n=p.split(/\s*,\s*/),h;for(var g=n.length-1;g>=0;g--){h=n[g].match(/[A-Z][A-Z0-9]*/g);if(h&&h.length){for(var k=0,f=h.length;k<f;k++){if(!c[h[k]]){n.splice(g,1);break}}}}if(n.length){d[n.join(", ")]=q}});this.setAppearance(d);xui.UI.$cache_css+=this.buildCSSText(this.$Appearances)},Static:{$cache_css:"",$cache_css2:"",$css_tag_dirty:"xui-ui-dirty",$css_tag_invalid:"xui-ui-invalid",$tag_left:"{",$tag_right:"}",$tag_subId:"_serialId",$x01:/\x01/img,$x01r:/ \x01 /img,$tag_special:"\x01",$ID:"\x01id\x01",$DOMID:"\x01domid\x01",$CLS:"\x01cls\x01",$childTag:"<!--\x03{id}\x04-->",$onSize:function(d,f){var c=d.getRootNode().style;if(f.width||f.height){xui.UI.$tryResize(d,c.width,c.height)}c=null},$ps:{left:1,top:1,width:1,height:1,right:1,bottom:1},_objectProp:{tagVar:1,dockMargin:1},$toDom:function(h,m,k){if(k===false){return _.str.toDom(m)}var d=xui.Dom.getEmptyDiv().get(0),j=[];d.innerHTML=m;this.$addEventsHanlder(h,d);for(var g=0,f=d.childNodes,c=f.length;g<c;g++){xui.$registerNode(f[g]);j[j.length]=f[g].$xid}d=null;return xui(j,false)},$evtsindesign:{onload:1,onerror:1,onunload:1,onsize:1,onmousedown:1,onmouseup:1},$addEventsHanlder:function(h,g,w){var c=xui.$cache.UIKeyMapEvents,p=xui.Event._eventHandler,s=this.$evtsindesign,y=xui.Event.$eventhandler,f=_.toArr(g.getElementsByTagName("*")),r,m,q,n,d,x,u;if(w){f.push(g)}if(m=f.length){for(r=0;r<m;r++){if((g=f[r]).nodeType!=1){continue}if(d=g.id){if(x=c[d]||c[d.substr(0,d.indexOf(":"))]){u=xui.$registerNode(g);u=u.eHandlers||(u.eHandlers={});for(q in x){if(h.$inDesign&&!s[q]){continue}u[q]=x[q];if(n=p[q]){u[n]=g[n]=x[q];if(xui.browser.isTouch&&n=="onmousedown"){xui.setNodeData(g,["eHandlers","onxuitouchdown"],y);if(g.addEventListener){g.addEventListener("xuitouchdown",y,false)}else{if(g.attachEvent){g.attachEvent("xuitouchdown",y)}}}}}}}}}f.length=0;g=x=null},setDftProp:function(c){this.__resetDftProp=c;return this},getFromDom:function(c){if(c=xui.UIProfile.getFromDom(c)){return c.boxing()}},_ensureValues:function(d){var f=[],l=0,h=0,m,j=this.KEY,g=xui.$cache.profileMap,c=xui.getNodeData;if(d["xui.absBox"]){d=d._nodes}for(;m=d[l++];){if((m.box&&m.box[j])||((m=g[c(m.renderId?m.renderId:m,["element","id"])])&&m.box&&m.box[j])){f[h++]=m}}return f.length<=1?f:this._unique(f)},__gc:function(){var f=this,d=f.$key,c=xui.$cache;_.breakO([c.template[d],c.reclaimId[d],f._cache,f._idCache,f.$DataModel,f.$Templates,f.$Behaviors,f],2);delete xui.absBox.$type[d.replace("xui.UI.","")];delete xui.absBox.$type[d];_.filter(xui.$cache.UIKeyMapEvents,function(h,g){return !(g==d||g.indexOf(d+"-")==0)});Class.__gc(d)},_pickSerialId:function(){var c=xui.$cache.reclaimId[this.$key];if(c&&c[0]){return c.pop()}return this._ctrlId.next()},$bg:function(f,c,d){return function(g){var h=xui.ini.path+"appearance/default/"+(typeof d=="string"?d:d?"Public":(h=g.split("."))[h.length-1])+"/"+f;return"url("+h+") "+(c||"")}},$ieBg:function(d,c){return function(f){var g=xui.ini.path+"appearance/default/"+(typeof c=="string"?c:c?"Public":(g=f.split("."))[g.length-1])+"/"+d;return'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+g+'",sizingMethod="crop")'}},$doTemplate:function(c,z,d,B,f){var k=arguments.callee,h,g,m,q=xui.UI.$x01,u=" \x01 ",p="",x=_.isArr(d),y=z[B||""],j=!f,f=f||[];if(x){if(typeof y!="function"){y=k}for(var w=0;g=d[w++];){y(c,z,g,B,f)}}else{if(g=d.object){f[f.length]=g.toHtml()}else{if(typeof y=="function"){y(c,z,d,B,f)}else{B=B?B+".":"";var C=y[0],A=y[1];for(var w=0,v=C.length;w<v;w++){if(m=A[w]){if(m in d){g=d[m];if(z[h=B+m]&&g){k(c,z,g,h,f)}else{f[f.length]=(g===undefined||g===null||g===NaN)?p:typeof g=="string"?g.replace(q,u):g}}}else{f[f.length]=(C[w]===undefined||C[w]===null||C[w]===NaN)?p:C[w]}}}}}if(j){return f.join("")}},$buildTemplate:function(k,K,P,r,d){if(K&&(K.tagName+"").toLowerCase()=="text"){d[d.length]=K.text;return}var y=arguments.callee,x=k.host,m=(x&&x["xui.Com"]&&x.customStyle&&!_.isEmpty(x.customStyle))?(" xui-com-"+x.$xid):null,w=k.behavior?P?k.behavior[P]:k.behavior:null,j=k.properties,N=y.map1||(y.map1={tagName:1,text:1}),L=y.map2||(y.map2={image:1,input:1,br:1,meta:1,hr:1,abbr:1,embed:1}),I=y.map3||(y.map3={input:1,textarea:1,pre:1,code:1}),E=y.r2||(y.r2=/[a-z]/),D=y.r3||(y.r3=/^(on|before|after)/),A=y.r7||(y.r7=/([^{}]*)\{([\w]+)\}([^{}]*)/g),n=false,q=xui.UI,v,z,J,p,f;if(!K){K=k.template}f=P?k.keys[P]:k.key;if(!K.tagName){K.tagName="span"}if(K.id!==null){K.id=P?f+":"+q.$ID+":"+q.$tag_left+q.$tag_subId+q.$tag_right:q.$DOMID}else{delete K.id}if(K.className!==null){v=q.$CLS+(P?"-"+P.toLowerCase():"");J=K.className||"";p=K.tagName.charAt(0)!="{"?K.tagName.toLowerCase():K.tagName;K["class"]="xui-node xui-node-"+p+" "+v+" "+J+" "+(f==k.key?("xui-ui-ctrl "+((xui.browser.ie&&xui.browser.ver<10)?"":"{_selectable} ")):"")+q.$tag_special+(P||"KEY")+"_CT"+q.$tag_special+" "+q.$tag_special+(P||"KEY")+"_CC"+q.$tag_special+" xui-custom"+(m||"")}delete K.className;K.style=(K.style?(K.style+";"):"")+q.$tag_special+(P||"KEY")+"_CS"+q.$tag_special;var H=[],G={},h=K.tagName.charAt(0)!="{"?K.tagName.toLowerCase():K.tagName,s=K.text,c=xui.absObj.$specialChars;for(var F in K){if(!K[F]){continue}if(!c[F.charAt(0)]&&!N[F]){z=K[F];if(!E.test(F)){if(typeof z=="object"){if(!z.$order){z.$order=0}z.$key=F;H[H.length]=z}}else{G[F]=z}}}_.arr.stableSort(H,function(i,l){i=i.$order||0;l=l.$order||0;return i>l?1:i==l?0:-1});if(!d){n=true;d=[]}d[d.length]="<"+h+" ";for(var F in G){if(G[F]){d[d.length]=F+'="'+G[F]+'" '}}if(K.className!==null){K.className=J}delete K["class"];d[d.length]=q.$tag_special+(P||"KEY")+"_CA"+q.$tag_special;d[d.length]=">";if(!L[h]&&s){d[d.length]=s.replace(/\{comcls\}/g,m||"")}for(var F=0,C=H.length;F<C;){z=H[F++];y(k,z,z.$key,r,d)}if(!L[h]){d[d.length]="</"+h+">"}if(n){var O=r[0],M=r[1],B=d.join(""),g=false;B.replace(A,function(l,i,Q,u){if(i){O[O.length]=i}M[O.length]=O[O.length]=Q;if(u){O[O.length]=u}g=true;return""});if(!g){O[0]=B}}},_rpt:function(d,k){var h=arguments.callee,j=xui.UI,l=j.$tag_special,f=function(p,n,m){n="";for(m in p){n+=(m+'="'+p[m]+'" ')}return n},c=h._r||(h._r=new RegExp(l+"([0-9A-Z_]+)_C([CTA])"+l+"|"+l+"([\\w_\\-\\.]*)"+l,"img")),i={id:d.serialId,cls:d.getClass("KEY"),domid:d.$domId},g={A:d.CA,C:d.CC,T:d._CT};return k.replace(c,function(n,m,q,p){return i[p]||(g[q]?(q=="A"?f(g[q][m]):(g[q][m]||"")):"")}).replace(j.$x01r,"\x01")},_build:function(d,p){var s,x,f,v=xui.UI,w=[[],[]],y=this,r=y.KEY,c=xui.$cache.template,n=d._hash="b:"+(d.template._subid||"")+";!"+(d._exhash||"");if(typeof d.theme=="string"){var q=d._CT={},g=d.key.replace(/\./g,"-").toLowerCase().replace("xui-ui","xui")+"-";_.each(d.keys,function(j,h){if(h.charAt(0)!="$"){q[h]=g+d.theme+"-"+h.toLowerCase()}})}if(!(s=_.get(c,[r,n]))){v.$buildTemplate(d,null,null,w);_.set(c,[r,n,""],w);if(x=d.template.$submap){for(var l in x){if(typeof(f=x[l])!="function"){var w=[[],[]];for(var k in f){if(typeof f[k]=="object"){v.$buildTemplate(d,f[k],k,w)}}f=w}_.set(c,[r,n,l],f)}}s=_.get(c,[r,n])}if(!s){return""}return y._rpt(d,v.$doTemplate(d,s,p))},_setDefaultBehavior:function(k){var c=this,h=arguments.callee,j=h._m||(h._m={"":1,KEY:1,$key:1}),i=h._f1||(h._f1=function(f,n,p){var m=function(w,B,q){var E,u=xui.use(q).id(),D,C=w.getSubId(u),s=w.properties,r,A,z;if(s.disabled||s.readonly){return}D=w.SubSerialIdMapItem&&w.SubSerialIdMapItem[C];if(D&&D.disabled){return}if(D&&D.readonly){return}switch(typeof f){case"string":r=w.getSubNode(f,C)._get();break;case"function":A=[f];break;case"object":r=[];A=[];for(var v,y=0,x=f.length;y<x;y++){v=f[y];if(typeof v=="string"){r.push.apply(r,w.getSubNode(v,C)._get())}else{A.push(v)}}}if(r&&r.length){r=xui(r);z=w.boxing();if(p==1){if(n=="mouseover"){if(w.$beforeHover&&false==w.$beforeHover(w,D,B,q,"mouseover")){return}if(s.disableHoverEffect){return}if(w.beforeHoverEffect&&false===z.beforeHoverEffect(w,D,B,q,"mouseover")){return}}if(n=="mousedown"){if(w.$beforeClick&&false==w.$beforeClick(w,D,B,q,"mousedown")){return}if(s.disableClickEffect){return}if(w.beforeClickEffect&&false===z.beforeClickEffect(w,D,B,q,"mousedown")){return}}r.tagClass("-"+n)}else{if(n=="mouseup"){if(w.$beforeClick&&false==w.$beforeClick(w,D,B,q,"mouseup")){return}if(s.disableClickEffect){return}if(w.beforeClickEffect&&false===z.beforeClickEffect(w,D,B,q,"mouseup")){return}r.tagClass("-mousedown",false)}else{if(w.$beforeHover&&false==w.$beforeHover(w,D,B,q,"mouseout")){return}if(s.disableHoverEffect){return}if(w.beforeHoverEffect&&false===z.beforeHoverEffect(w,D,B,q,"mouseout")){return}r.tagClass("(-mouseover|-mousedown)",false)}}}if(A&&A.length){_.arr.each(A,function(F){_.tryF(F,[w],w)});A.length=0}};return m}),d={},g;if(!xui.SC.get("xui.absComposed")){Class("xui.absComposed","xui.absObj",{Instance:{addPanel:function(m,p,q){var r=_.clone(xui.UI.Panel.$DataStruct,true);_.merge(r,m,"with");_.merge(r,{dock:"fill",tag:m.tag||m.id},"all");var n=new xui.UI.Panel(r),f=[];this.append(n,q&&q.id);_.arr.each(p,function(s){f.push(s[0])});n.append(xui.UI.pack(f,false));return this},removePanel:function(){this.destroy(true)},getPanelPara:function(){return _.clone(this.get(0).properties,true)},getPanelChildren:function(){return this.get(0).children},_e1:function(m,n,p,q,f){},_e2:function(m,f,n,p){},_e3:function(m,n,f,p){},_e4:function(m,q,r,f,p,n){},_e5:function(f,m,n){}},Static:{DataModel:{dragKey:"",dropKeys:"",overflow:{ini:xui.browser.isTouch?"auto":undefined,combobox:["","visible","hidden","scroll","auto","overflow-x:auto;overflow-y:auto"],action:function(f){var m=this;_.arr.each(m.box.$Behaviors.PanelKeys,function(n){var p=m.getSubNode(n,true);if(f){if(f.indexOf(":")!=-1){_.arr.each(f.split(/\s*;\s*/g),function(r){var q=r.split(/\s*:\s*/g);if(q.length>1){p.css(_.str.trim(q[0]),_.str.trim(q[1]||""))}});return}}p.css("overflow",f||"")})}},panelBgClr:{type:"color",ini:"",action:function(f){var m=this;_.arr.each(m.box.$Behaviors.PanelKeys,function(n){m.getSubNode(n,true).css("background-color",f)})}},panelBgImg:{format:"image",ini:"",action:function(f){var m=this;_.arr.each(m.box.$Behaviors.PanelKeys,function(n){m.getSubNode(n,true).css("background-image",f?("url("+xui.adjustRes(f||"")+")"):"")})}},panelBgImgPos:{ini:"",combobox:["","top left","top center","top right","center left","center center","center right","bottom left","bottom center","bottom right","0% 0%","-0px -0px"],action:function(f){var m=this;_.arr.each(m.box.$Behaviors.PanelKeys,function(n){m.getSubNode(n,true).css("background-position",f)})}},panelBgImgRepeat:{ini:"",combobox:["","repeat","repeat-x","repeat-y","no-repeat"],action:function(f){var m=this;_.arr.each(m.box.$Behaviors.PanelKeys,function(n){m.getSubNode(n,true).css("background-repeat",f)})}},panelBgImgAttachment:{ini:"",combobox:["","scroll","fixed"],action:function(f){var m=this;_.arr.each(m.box.$Behaviors.PanelKeys,function(n){m.getSubNode(n,true).css("background-attachment",f)})}}},$abstract:true}})}var l=xui.absComposed.prototype;if(k.HoverEffected){_.each(k.HoverEffected,function(m,f){g=j[f]?k:(k[f]||(k[f]={}));if(!m){g.afterMouseover=g.afterMouseout=null}else{g.afterMouseover=i(m,"mouseover",1);g.afterMouseout=i(m,"mouseout",2)}});d.beforeHoverEffect=l._e1}if(k.ClickEffected){_.each(k.ClickEffected,function(m,f){g=j[f]?k:(k[f]||(k[f]={}));if(!m){g.afterMousedown=g.afterMouseup=null}else{g.afterMousedown=i(m,"mousedown",1);g.afterMouseup=i(m,"mouseup",2)}});d.beforeClickEffect=l._e1}if(k.HotKeyAllowed){_.merge(k,{beforeKeydown:function(f,m,n){if(f.onHotKeydown){return false!==f.boxing().onHotKeydown(f,xui.Event.getKey(m),m,n)}},beforeKeypress:function(f,m,n){if(f.onHotKeypress){return false!==f.boxing().onHotKeypress(f,xui.Event.getKey(m),m,n)}},beforeKeyup:function(f,m,n){if(f.onHotKeyup){return false!==f.boxing().onHotKeyup(f,xui.Event.getKey(m),m,n)}}});d.onHotKeydown=d.onHotKeypress=d.onHotKeyup=l._e2}if(k.NavKeys){_.each(k.NavKeys,function(m,p){var f=arguments.callee,n,v=f.m1||(f.m1={KEY:1,$key:1});if(v[p]){return}var s=f.m2||(f.m2={input:1,textarea:1}),r=f.m3||(f.m3={tab:1,enter:1,up:1,down:1,left:1,right:1}),q=f.m4||(f.m4={tab:1,up:1,down:1,left:1,right:1}),u=k[p]||(k[p]={});var u=k[p]||(k[p]={});if(null===m){u.afterKeydown=null}else{u.afterKeydown=function(C,G,x){var D=xui.Event.getKey(G),I=D.key,y=D.ctrlKey,A=D.shiftKey,F=D.altKey,H=false,w=C._smartnav;if(w){var B=xui.use(x).get(0);if(s[D=B.tagName.toLowerCase()]){if(I&&D=="input"&&B.type.toLowerCase()!="text"&&B.type.toLowerCase()!="password"){H=true}else{if(r[I]){var z=xui.use(x).caret(),E=xui.use(x).get(0).value;switch(I){case"up":if(!/[\n\r]/.test(E.substr(0,z[0]))){H=true}break;case"left":if(!A&&(y||(z[0]===0&&(z[1]!==E.length||z[1]===0)))){H=true}break;case"down":if(!/[\n\r]/.test(E.substr(z[1],E.length))){H=true}break;case"right":if(!A&&(y||(z[1]===E.length&&(z[0]!==0||z[1]===0)))){H=true}break;case"enter":if(D=="input"||F){H=true}break;case"tab":H=true;break}}}}else{if(q[I]){H=true}}B=null}else{H=I==="tab"}if(H){if(C.beforeNextFocus&&false===C.boxing().beforeNextFocus(C,G,D.shiftKey,x)){return false}if(w){if(I!="tab"){xui.use(x).nextFocus(("up"==I||"left"==I)?false:true)}}}}}});d.beforeNextFocus=l._e3}if((g=k.DroppableKeys)&&g.length){_.arr.each(g,function(f){c._droppable(f)});g=c.prototype;_.arr.each("addPanel,removePanel,getPanelPara,getPanelChildren,getDropKeys,setDropKeys".split(","),function(f){if(!g[f]){g[f]=l[f]}});c.$DataModel.dropKeys=c.$DataStruct.dropKeys="";d.onDragEnter=d.onDragLeave=d.beforeDrop=d.onDrop=d.afterDrop=d.onDropTest=d.onDropMarkShow=d.onDropMarkClear=l._e4}if((g=k.DraggableKeys)&&g.length){_.arr.each(g,function(f){c._draggable(f)});g=c.prototype;_.arr.each("getDragKey,setDragKey".split(","),function(f){if(!g[f]){g[f]=l[f]}});c.$DataModel.dragKey=c.$DataStruct.dragKey="";d.onGetDragData=d.onStartDrag=d.onDragStop=l._e5}if((g=k.NoDraggableKeys)&&g.length){c.NoDraggableKeys=g}if((g=k.NoDroppableKeys)&&g.length){c.NoDroppableKeys=g}if((g=k.PanelKeys)&&g.length){g=c.prototype;_.arr.each(["overflow","panelBgClr","panelBgImg","panelBgImgPos","panelBgImgRepeat","panelBgImgAttachment"],function(n){var m="get"+_.str.initial(n);if(!g[m]){g[m]=l[m]}m="set"+_.str.initial(n);if(!g[m]){g[m]=l[m]}c.$DataStruct[n]="";c.$DataModel[n]=_.copy(xui.absComposed.$DataModel[n])})}c.setEventHandlers(d)},addTemplateKeys:function(c){var d=this,f=d.KEY,h=arguments.callee,g=h._reg||(h._reg=/\./g);_.arr.each(c,function(j){d.$cssKeys[j]=(d.$Keys[j]=j=="KEY"?f:f+"-"+j).replace(g,"-").toLowerCase().replace("xui-ui","xui")});return d},$getCSSValue:function(d,h){var g=xui.$CSSCACHE,f=d+"->"+h;if(f in g){return g[f]}var j=xui.Dom.getEmptyDiv().get(0),i;xui.Dom._setClass(j,d);i=g[f]=parseInt(xui.Dom.getStyle(j,h),10)||0;xui.Dom._setClass(j,"");return i},setAppearance:function(c){_.merge(this.$Appearances,c,"all");return this},getAppearance:function(){return this.$Appearances},setTemplate:function(g,r){if(g){var q=this,n=q.$tagName||(q.$tagName={}),m=arguments.callee,c=m.r2||(m.r2=/[a-z]/),l=xui.absObj.$specialChars,h=["KEY"],k=m._fun||(m._fun=function(v,s,j){var w,u;for(u in v){if(!l[u.charAt(0)]){if(!c.test(u)){s[s.length]=u;w=v[u];if(typeof w=="object"){j[u]=w.tagName||"";arguments.callee(w,s,j)}}}}}),p;n.KEY=g.tagName||"";k(g,h,n);q.addTemplateKeys(h);p=q.$Templates;if(typeof r=="string"){g._subid=r;p[r]=g}else{p._=g}if(p=g.$submap){for(var f in p){for(var d in p[f]){m.call(q,p[f],d)}}}}return this},getTemplate:function(c){return this.$Templates[c||"_"]},setBehavior:function(d){if(d){var q=this,n=xui.$cache.UIKeyMapEvents,f=q.$key,A=xui.absObj.$specialChars,c=xui.Event.$eventhandler,h=xui.Event._eventMap,B=arguments.callee,z=B.r1||(B.r1=/[a-z]/),x=B.r2||(B.r2=/^(on|before|after)/),p=q.$Behaviors,s,y,w,u,r,l,g;q._setDefaultBehavior(d);if(d.KEY){_.merge(d,d.KEY,"all");delete d.KEY}for(y in d){r=d[y];if(!A[y.charAt(0)]){if(!z.test(y)){s=p[y]||(p[y]={});for(w in r){l=r[w];if(!A[w.charAt(0)]){if(l){s[w]=l}else{delete s[w]}}}}else{if(x.test(y)){if(r){p[y]=r}else{delete p[y]}}else{p[y]=r}}}}_.filter(n,function(k,j){return !(j==f||j.indexOf(f+"-")==0)});for(y in p){r=p[y];if(!A[y.charAt(0)]){if(!z.test(y)){for(w in r){if(!A[w.charAt(0)]&&r[w]){u=f+"-"+y;(n[u]||(n[u]={}))["on"+h[w]]=c}}}else{if(x.test(y)&&r){u=f;(n[u]||(n[u]={}))["on"+h[y]]=c}}}}}return q},getBehavior:function(){return this.$Behaviors},$applyCSS:function(){var g=xui.UI,f=g.$cache_css,d=g.$cache_css2;if(!g.$cssNo){g.$cssNo=1;var c=xui.browser;xui("body").addClass((c.ie?("xui-css-ie xui-css-ie"+c.ver+" "):c.gek?("xui-css-gek xui-css-gek"+c.ver+" "):c.kde?("xui-css-kde xui-css-kde"+c.ver+" "):c.opr?("xui-css-opr xui-css-opr"+c.ver+" "):"")+(c.isSafari?"xui-css-safari ":c.isChrome?"xui-css-chrome ":"")+(c.isMac?"xui-css-mac":c.isLinux?"xui-css-linux ":""));xui("html").addClass(c.isStrict?"xui-css-base xui-css-strict":"xui-css-base ")}if(f){xui.CSS.addStyleSheet(f,"xui.UI-CSS"+(g.$cssNo++));xui.UI.$cache_css=""}if(d){xui.CSS.addStyleSheet(d,"xui.UI-CSS"+(g.$cssNo++),true);xui.UI.$cache_css2=""}},buildCSSText:function(q){var B=this,x=arguments.callee,g=x._r1||(x._r1=/(^|\s|,)([0-9A-Z_]+)/g),s=[],c=[],u=xui.browser,m=u.ie6,d=u.ie,w=u.gek,y=B.$cssKeys,A,z,f;for(var p in q){if(f=q[p]){A=p.replace(g,function(i,h,j){return h+"."+(y[j]||j)}).toLowerCase();f.$order=parseInt(f.$order,10)||0;f.$=A;s[s.length]=f}}_.arr.stableSort(s,function(h,i){h=h.$order||0;i=i.$order||0;return h>i?1:h==i?0:-1});for(var p=0,k=s.length;p<k;){f=s[p++];c[c.length]=f.$+"{";if(A=f.$before){c[c.length]=A}if(A=f.$text){c[c.length]=A}for(var n in f){if(n.charAt(0)=="$"){continue}if((z=f[n])||f[n]===0){switch(typeof z){case"string":case"number":c[c.length]=n+":"+z+";";break;case"function":c[c.length]=n+":"+z(B.KEY)+";";break;default:_.arr.each(z,function(h){if(h){c[c.length]=n+":"+h+";"}})}}}if(z=f.$after){c[c.length]=z}c[c.length]="}"}return c.join("")},_droppable:function(g){var d=this,f=xui.Event.$eventhandler2,k=d.$Behaviors,c=g=="KEY"?k:(k[g]||(k[g]={})),i=xui.$cache.UIKeyMapEvents,j=g=="KEY"?d.KEY:(d.KEY+"-"+g),h=i[j]||(i[j]={});_.merge(c,{beforeMouseover:function(n,s,l){if(n.properties.disabled||n.properties.readonly){return}if(n.behavior.NoDroppableKeys){var p=n.getKey(xui.Event.getSrc(s).id||"").split("-")[1];if(p&&_.arr.indexOf(n.behavior.NoDroppableKeys,p)!=-1){return}}var v=l,x=xui.DragDrop,m=x.getProfile(),w=m.dragKey,q=m.dragData,z,r,y,u;if(!w||!q||!(new RegExp("\\b"+w+"\\b")).test(n.box.getDropKeys(n,v))){return}r=n.boxing();if(r.getItemByDom){z=r.getItemByDom(l)}u=[n,s,v,w,q,z];if((y=n.onDropTest)&&(false===r.onDropTest.apply(r,u))){return}if((y=n.box._onDropTest)&&(false===y.apply(n.host||n,u))){return}x.setDropElement(l);if(n.onDropMarkShow&&(false===r.onDropMarkShow.apply(r,u))){}else{if((y=n.box._onDropMarkShow)&&(false===y.apply(n.host||n,u))){}else{_.resetRun("setDropFace",x.setDropFace,0,[v],x)}}if(y=n.box._onDragEnter){y.apply(n.host||n,u)}if(n.onDragEnter){r.onDragEnter.apply(r,u)}},beforeMouseout:function(n,r,l){if(n.properties.disabled||n.properties.readonly){return}var v=xui.DragDrop,m=v.getProfile(),u=m.dragKey,p=m.dragData,w,q,s;if(m.dropElement==l){q=n.boxing();if(q.getItemByDom){w=q.getItemByDom(l)}s=[n,r,l,u,p,w];if(n.onDropMarkClear&&(false===q.onDropMarkClear.apply(q,s))){}else{if((t=n.box._onDropMarkClear)&&(false===t.apply(n.host||n,s))){}else{_.resetRun("setDropFace",v.setDropFace,0,[null],xui.DragDrop)}}if(t=n.box._onDragLeave){t.apply(n.host||n,s)}if(n.onDragLeave){q.onDragLeave.apply(q,s)}v.setDropElement(null)}},beforeDrop:function(n,r,l){var v=xui.DragDrop,m=v.getProfile(),u=m.dragKey,p=m.dragData,x,w,s,q=n.boxing();if(q.getItemByDom){x=q.getItemByDom(l)}s=[n,r,l,u,p,x];if(n.onDropMarkClear&&(false===q.onDropMarkClear.apply(q,s))){}else{if((w=n.box._onDropMarkClear)&&(false===w.apply(n.host||n,s))){}}if(n.beforeDrop&&(false===q.beforeDrop.apply(q,s))){return}if(n.onDrop&&(false===q.onDrop.apply(q,s))){}else{if(n.box._onDrop){n.box._onDrop.apply(n.host||n,s)}}if(n.afterDrop){q.afterDrop.apply(q,s)}}},"all");_.merge(h,{onmouseover:f,onmouseout:f,ondrop:f,afterDrop:f,beforeDrop:f});return d},_draggable:function(g){var d=this,f=xui.Event.$eventhandler2,k=d.$Behaviors,c=g=="KEY"?k:(k[g]||(k[g]={})),i=xui.$cache.UIKeyMapEvents,j=g=="KEY"?d.KEY:(d.KEY+"-"+g),h=i[j]||(i[j]={});_.merge(c,{beforeMousedown:function(n,r,l){if(xui.Event.getBtn(r)!="left"){return}if(n.properties.disabled){return}if(!n.properties.dragKey){return}if(n.behavior.NoDraggableKeys){var p=n.getKey(xui.Event.getSrc(r).id||"").split("-")[1];if(p&&_.arr.indexOf(n.behavior.NoDraggableKeys,p)!=-1){return}}var u=xui.Event.getPos(r),q=n.boxing(),s=[n,r,l],v;if(n.onStartDrag&&(false===q.onStartDrag.apply(q,s))){}else{if((v=n.box._onStartDrag)&&(false===v.apply(n.host||n,s))){}else{var m=n.box;xui.use(l).startDrag(r,{dragType:"icon",targetLeft:u.left+12,targetTop:u.top+12,dragCursor:"pointer",dragDefer:1,dragKey:m.getDragKey(n,l),dragData:m.getDragData(n,r,l)})}}},beforeDragbegin:function(l,m,n){xui.use(n).onMouseout(true,{$force:true}).onMouseup(true)},beforeDragstop:function(m,n,p){var l;if(m.onDragStop){m.boxing().onDragStop(m.e,p)}if(l=m.box._onDragStop){l.apply(m.host||m,arguments)}}},"all");_.merge(h,{onmousedown:f,ondragbegin:f});return d},adjustData:function(g,h,f){if(!f){f={}}var c=g.box.$DataModel,d,j;for(d in h){if(d.charAt(0)=="$"){continue}if(h.hasOwnProperty(d)&&!f.hasOwnProperty(d)){f[d]=typeof(j=h[d])=="string"?d=="html"?xui.adjustRes(j,0,1):xui.adjustRes(j,true):j}}if("disabled" in c){f.disabled=(_.isSet(f.disabled)&&f.disabled)?"xui-ui-itemdisabled":""}if("readonly" in c){f.readonly=(_.isSet(f.readonly)&&f.readonly)?"xui-ui-itemreadonly":""}f.imageDisplay=(f.imageClass||f.image)?"":"display:none";if(f.image){f.backgroundImage="background-image:url("+f.image+");"}if(f.imagePos){f.backgroundPosition="background-position:"+f.imagePos+";"}else{if(f.image){f.backgroundPosition="background-position:center;"}}if(f.imageRepeat){f.backgroundRepeat="background-repeat:"+f.imageRepeat+";"}else{if(f.image){f.backgroundRepeat="background-repeat:no-repeat;"}}if(!f.image){f.image=xui.ini.img_bg}if((typeof(j=f.renderer)=="function")||(typeof(j=h.renderer)=="function")){f.caption=j.call(g,h,f)}return f},cacheData:function(c,d){_.set(xui.$cache,["UIDATA",c],d);return this},getCachedData:function(c){var d=_.get(xui.$cache,["UIDATA",c]);if(typeof d=="function"){d=d()}return d},Behaviors:{HotKeyAllowed:true,onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f)!==false}}},DataModel:{autoTips:true,className:{ini:"",action:function(c,d){if(d){this.getRoot().removeClass(d)}this.getRoot().addClass(c)}},disableClickEffect:false,disableHoverEffect:false,disableTips:false,disabled:{ini:false,action:function(c){var d=this.getRoot();if(c){d.addClass("xui-ui-disabled")}else{d.removeClass("xui-ui-disabled")}}},defaultFocus:false,dock:{ini:"none",listbox:["none","top","bottom","left","right","center","middle","origin","width","height","fill","cover"],action:function(c){xui.UI.$dock(this,true,true)}},dockIgnore:{ini:false,action:function(d){var c=this;if(c.properties.dock!="none"){xui.UI.$dock(c,true,true)}}},dockOrder:{ini:1,action:function(d){var c=this;if(c.properties.dock!="none"){xui.UI.$dock(c,true,true)}}},showEffects:"",hideEffects:"",dockMargin:{ini:{left:0,top:0,right:0,bottom:0},action:function(d){var c=this;if(c.properties.dock!="none"){xui.UI.$dock(c,true,true)}}},dockFloat:{ini:false,action:function(d){var c=this;if(c.properties.dock!="none"){xui.UI.$dock(c,true,true)}}},dockMinW:0,dockMinH:0,tips:"",rotate:{ini:0,action:function(d){var c=this.getRoot(),f=this.boxing();d=parseInt(d,10);d=d%360;if(d<0){d=d+360}if(this.box["xui.svg"]){f.setAttr("KEY",{transform:"r"+d},false)}else{c.css("transform","rotate("+d+"deg)")}}}},EventHandlers:{beforeRender:function(c){},onRender:function(c){},onLayout:function(c){},onResize:function(f,d,c){},onMove:function(f,h,g,d,c){},onDock:function(c,d){},beforePropertyChanged:function(d,c,f,g){},afterPropertyChanged:function(d,c,f,g){},beforeAppend:function(c,d){},afterAppend:function(c,d){},beforeRemove:function(f,g,d,c){},afterRemove:function(f,g,d,c){},onDestroy:function(c){},beforeDestroy:function(c){},afterDestroy:function(c){},onShowTips:function(c,d,f){},onContextmenu:function(c,f,g,d){}},RenderTrigger:function(){var d=this,c=d.boxing(),h=d.properties;if(d.box._onresize){var g=d.getRootNode().style,f;if((f=g.visibility)!="hidden"){d._$visibility=f;g.visibility="hidden"}xui.UI.$tryResize(d,h.width,h.height);g=null}if(h.disabled){c.setDisabled(true,true)}if(h.rotate){c.setRotate(h.rotate,true)}d._inValid=1},$doResize:function(i,c,g,k,d){if(k||((c||g)&&(i._resize_w!=c||i._resize_h!=g))){if(!i.getRootNode()){return false}i._resize_w=c;i._resize_h=g;_.tryF(i.box._onresize,[i,c,g,k,d],i.box);if(i.onResize){i.boxing().onResize(i,c,g)}}if("_$visibility" in i){var j=i.getRootNode(),f=j.style;if(f.visibility!="visible"&&!xui.getNodeData(j,"_setVisibility")){f.visibility=i._$visibility}j=f=null;_.clearTimeout(i._$rs_timer);delete i._$rs_timer;delete i._$rs_args;delete i._$visibility}},$tryResize:function(k,c,j,l,g){var i=k.box,f=i._onresize;if(f&&(l||c||j)){c=((c===""||c=="auto")?"auto":parseInt(c,10))||null;j=((j===""||j=="auto")?"auto":parseInt(j,10))||null;if("_$visibility" in k){var d=k._$rs_args;if(!d){d=k._$rs_args=[k,null,null];k._$rs_timer=_.asyRun(function(){if(!k.box){return}if(k&&k._$rs_args){xui.UI.$doResize.apply(null,k._$rs_args)}})}d[1]=c;d[2]=j;d[3]=l;d[4]=g}else{xui.UI.$doResize(k,c,j,l,g)}}},LayoutTrigger:function(){var d=this,c=d.boxing(),g=d.properties;if(g.dock&&g.dock!="none"){if(!d.$laidout){d.$laidout=1;var f=d.getRootNode().style;switch(g.dock){case"top":case"bottom":case"width":f.width=0;break;case"left":case"right":case"height":f.height=0;break;default:f.width=f.height=0}}xui.UI.$dock(this,false,true)}},$dock_args:["top","bottom","left","right","center","middle","width","height"],$dock_map:{middle:1,center:1},$dock:function(j,g,u){var y=j.getRoot(),v=j.box["xui.svg"],d=j.boxing(),w=xui((y.get(0)&&y.get(0).parentNode)||j.$dockParent);if(!w.get(0)){return}var i=j.properties,s=i.dockMargin,l="auto",x=i.dock||"none",r=xui.Event.getId(w.get(0)),z=function(f,p){f=parseInt(f.properties.dockOrder,10)||0;p=parseInt(p.properties.dockOrder,10)||0;return f>p?1:f==p?0:-1},k,q="$inMatrix",A,n,m,h=function(f){return xui.browser.ie6?f-f%2:f};if(v){var c=d._getBBox();i.left=c.x;i.top=c.y;i.width=c.width;i.height=c.height}if(w.get(0)===document.body||w.get(0)===document||w.get(0)===window){r="!document";m=true}if(r&&(r==xui.Dom._ghostDivId||_.str.startWith(r,xui.Dom._emptyDivId))){return}if(j.$dockParent!=r||j.$dockType!=x||g){j.$dockParent=r;j.$dockType=x;j.unLink("$dockall");j.unLink("$dock");j.unLink("$dock1");j.unLink("$dock2");switch(x){case"middle":k={right:i.right=="auto"?l:(i.right||""),bottom:l,left:i.left=="auto"?l:(i.left||""),width:i.width||"",height:i.height||""};break;case"center":k={right:l,bottom:i.bottom=="auto"?l:(i.bottom||""),top:i.top=="auto"?l:(i.top||""),width:i.width||"",height:i.height||""};break;case"origin":k={right:l,bottom:l,width:i.width||"",height:i.height||""};break;case"top":k={left:s.left,right:s.right,bottom:l,height:i.height||""};break;case"bottom":k={left:s.left,right:s.right,top:l,height:i.height||""};break;case"left":k={right:l,width:i.width||""};break;case"right":k={left:l,width:i.width||""};break;case"width":k={bottom:l,height:i.height||"",top:i.top||""};break;case"height":k={right:l,width:i.width||"",left:i.left||""};break;case"fill":case"cover":k={right:l,bottom:l};break;case"none":k={left:i.left,top:i.top,width:i.width||"",height:i.height||""};break}if(y.get(0)){if(v){d._setBBox(k)}else{y.cssRegion(k,true)}}if(m){w=xui.win;if(!xui.$cache._resizeTime){xui.$cache._resizeTime=1}}if(x!="none"){A=w.$getEvent("onSize","dock");if(!A){A=function(P){var M=arguments.callee,f=xui.UI.$dock_map,I=xui.UI.$dock_args,J=M.rePos,K=M.pid=="!window"||M.pid=="!document",E=K?xui.win:xui(M.pid);if(!E.get(0)){return}var p=E.get(0).style,H,G,F,D,N,L,C,O;C=(p&&parseInt(p.width,10))||E.width();O=(p&&parseInt(p.height,10))||E.height();if(P.$dockid||!K||((_()-xui.$cache._resizeTime)>50)){H={left:0,top:0,right:0,bottom:0,width:C,height:O};for(F=0;N=I[F++];){L=M[N];if(L.length){if(!f[N]){P.width=P.height=1}for(G=0;D=L[G++];){if(!D.properties.dockIgnore){J(D,H,N,P.$dockid,K||P.width,K||P.height)}}}}if(H.later){_.each(H.later,function(S){var Q;try{if(S.isSVG){S.ins._setBBox(S)}else{S.node.cssRegion(S,true)}if(Q=xui.UIProfile.getFromDom(S.node.get(0))){delete S.node;if(!Q.box._onresize&&Q.onResize&&(S.width!==null||S.height!==null)){Q.boxing().onResize(Q,S.width,S.height)}if(Q.onDock){Q.boxing().onDock(Q,S)}if(Q.$onDock){Q.$onDock(Q,S)}}}catch(R){_.asyRun(function(){if(!S.node){return}S.width+=1;S.height+=1;if(S.isSVG){S.ins._setBBox(S)}else{S.node.cssRegion(S)}S.width-=1;S.height-=1;if(S.isSVG){S.ins._setBBox(S)}else{S.node.cssRegion(S,true)}if(Q=xui.UIProfile.getFromDom(S.node.get(0))){delete S.node;if(!Q.box._onresize&&Q.onResize&&(S.width!==null||S.height!==null)){Q.boxing().onResize(Q,S.width,S.height)}if(Q.onDock){Q.boxing().onDock(Q,S)}if(Q.$onDock){Q.$onDock(Q,S)}}})}})}for(F=0;N=I[F++];){L=M[N];if(L.length){for(G=0;D=L[G++];){if(!D.properties.dockIgnore){if(!H.later||!H.later[D.$xid]){if(D.onDock){D.boxing().onDock(D)}if(D.$onDock){D.$onDock(D)}}}}}}if(K){xui.$cache._resizeTime=_()}}M=J=E=p=null};A.pid=r;_.arr.each(xui.UI.$dock_args,function(f){A[f]=[]});A.dockall=[];A.rePos=function(D,L,Q,P,K,U){var T=false;if(P&&D.$xid!=P){T=true}var C=D.properties,S=C.dockFloat,N=C.dockMargin,R=D.getRoot(),p=D.boxing(),V=D.getRootNode().style,F,M,X,H,W,G,J=parseInt(C._dockBorderWidth,10)||0,I=parseInt(C._dockBorderHeight,10)||0,E={},O=D.box["xui.svg"],f;if(O){f=p._getBBox();C.left=f.x;C.top=f.y;C.width=f.width;C.height=f.height}if(V.display=="none"){return}switch(Q){case"middle":if(O){p.setTop(Math.max(0,(L.height-f.height)/2))}else{R.top(Math.max(0,(L.height-R.height())/2))}break;case"center":if(O){p.setLeft(Math.max(0,(L.width-f.width)/2))}else{R.left(Math.max(0,(L.width-R.width())/2))}break;case"top":if(!T){F=N.left;X=N.right;M=(S?0:L.top)+N.top;if(parseFloat(V.top)!=M){E.top=M}W=L.width-F-X-J;W=h(C.dockMinW?Math.max(C.dockMinW,W):W);if(parseFloat(V.width)!=W){E.width=h(W)}if(!_.isEmpty(E)){if(O){p._setBBox(E)}else{R.cssRegion(E,true)}}}if(!S){L.top+=(O?f.height:R.offsetHeight()+N.top+N.bottom)}break;case"bottom":if(!T){F=N.left;X=N.right;H=(S?0:L.bottom)+N.bottom;if(parseFloat(V.bottom)!=H){E.bottom=H}W=L.width-F-X-J;W=h(C.dockMinW?Math.max(C.dockMinW,W):W);if(parseFloat(V.width)!=W){E.width=h(W)}if(!_.isEmpty(E)){if(O){p._setBBox(E)}else{R.cssRegion(E,true)}}}if(!S){L.bottom+=(O?f.height:R.offsetHeight()+N.top+N.bottom)}break;case"left":if(!T){F=(S?0:L.left)+N.left;M=(S?0:L.top)+N.top;H=(S?0:L.bottom)+N.bottom;if(parseFloat(V.left)!=F){E.left=F}if(parseFloat(V.top)!=M){E.top=M}W=L.height-M-H-I;W=h(C.dockMinH?Math.max(C.dockMinH,W):W);if(parseFloat(V.height)!=W){E.height=h(W)}if(!_.isEmpty(E)){if(O){p._setBBox(E)}else{R.cssRegion(E,true)}}}if(!S){L.left+=(O?f.width:R.offsetWidth()+N.left+N.right)}break;case"right":if(!T){X=(S?0:L.right)+N.right;M=(S?0:L.top)+N.top;H=(S?0:L.bottom)+N.bottom;if(parseFloat(V.right)!=X){E.right=X}if(parseFloat(V.top)!=M){E.top=M}W=L.height-M-H-I;W=h(C.dockMinH?Math.max(C.dockMinH,W):W);if(parseFloat(V.height)!=W){E.height=h(W)}if(!_.isEmpty(E)){if(O){p._setBBox(E)}else{R.cssRegion(E,true)}}}if(!S){L.right+=(O?f.width:R.offsetWidth()+N.left+N.right)}break;case"width":if(!K){return}F=(C.dock=="cover"?0:(S?0:L.left))+N.left;X=(C.dock=="cover"?0:(S?0:L.right))+N.right;M=C.dock=="width"?(parseInt(C.top,10)||0):((C.dock=="cover"?0:(S?0:L.top))+N.top);W=L.width-F-X-J;L.later=L.later||{};L.later[D.$xid]=L.later[D.$xid]||{};_.merge(L.later[D.$xid],{isSVG:O,ins:p,node:R,width:h(C.dockMinW?Math.max(C.dockMinW,W):W),left:F,top:M},"all");break;case"height":if(!U){return}M=(C.dock=="cover"?0:(S?0:L.top))+N.top;H=(C.dock=="cover"?0:(S?0:L.bottom))+N.bottom;F=C.dock=="height"?(parseInt(C.left,10)||0):((C.dock=="cover"?0:(S?0:L.left))+N.left);W=L.height-M-H-I;L.later=L.later||{};L.later[D.$xid]=L.later[D.$xid]||{};_.merge(L.later[D.$xid],{isSVG:O,ins:p,node:R,height:h(C.dockMinH?Math.max(C.dockMinH,W):W),left:F,top:M},"all");break}};w.onSize(A,"dock")}if(x=="fill"||x=="cover"){j.link(A.height,"$dock1");j.link(A.width,"$dock2");_.arr.stableSort(A.height,z);_.arr.stableSort(A.width,z)}else{if(x=="origin"){j.link(A.center,"$dock1");j.link(A.middle,"$dock2")}else{j.link(A[x],"$dock");_.arr.stableSort(A[x],z)}}j.link(A.dockall,"$dockall");xui.$cache._resizeTime=1;j.$dockFun=A}var B=function(F,C){var E,D;if(C){E=xui.win.$getEvent("onSize","dock");if(E&&E.dockall&&E.dockall.length){xui("html").addClass("xui-css-viewport");if(D=xui("body").get(0)){D.scroll="no"}}else{xui("html").removeClass("xui-css-viewport");if(D=xui("body").get(0)){D.scroll=""}}}else{if(F&&F.get(0)){E=F.$getEvent("onSize","dock");if(E&&E.dockall&&E.dockall.length){F.addClass("xui-css-dockparent")}else{F.removeClass("xui-css-dockparent")}}}};B(w,m);if(x!="none"){(j.$beforeDestroy=(j.$beforeDestroy||{}))["releaseDock"]=function(){j.unLink("$dockall");j.unLink("$dock");j.unLink("$dock1");j.unLink("$dock2");B(w,m);if(w&&w.get(0)&&(w=xui.UIProfile.getFromDom(w.id()))){_.tryF(w.clearCache,[],w)}j=B=w=null}}else{if(j.$beforeDestroy){delete j.$beforeDestroy.releaseDock}}}if(u){w.onSize()}},_beforeSerialized:function(g){var c,f,j={};_.merge(j,g,"all");var h=j.properties=_.clone(g.properties,true);switch(h.dock){case"top":case"bottom":delete h.width;delete h.left;delete h.top;delete h.right;delete h.bottom;break;case"left":case"right":delete h.height;delete h.left;delete h.top;delete h.right;delete h.bottom;break;case"width":delete h.width;delete h.left;delete h.right;break;case"height":delete h.height;delete h.top;delete h.bottom;break;case"fill":case"cover":delete h.width;delete h.height;delete h.left;delete h.top;delete h.right;delete h.bottom;break}for(var d in xui.UI.$ps){if((d in h)&&typeof h[d]!="number"&&h[d]!=""&&h[d]!="auto"){h[d]=isNaN(h[d]=parseFloat(h[d]))?"auto":h[d]}}for(var d in g.box._objectProp){if((d in h)&&h[d]&&_.isHash(h[d])&&_.isEmpty(h[d])){delete h[d]}}if(h.items&&h.items.length){f=xui.absObj.$specialChars;h.items=_.clone(h.items,function(m,k,l){return !f[((l===1?m.id:k)+"").charAt(0)]&&m!=undefined})}if((f=h.dockMargin)&&!f.left&&!f.top&&!f.right&&!f.bottom){delete h.dockMargin}if(_.isEmpty(h.resizerProp)){delete h.resizerProp}if(h.items&&(h.items.length==0||h.listKey)){delete h.items}return j},getDropKeys:function(c,d){return c.properties.dropKeys},getDragKey:function(c,d){return c.properties.dragKey},getDragData:function(c,f,d){return{profile:c,domId:xui.use(d).id(),data:c.onGetDragData?c.boxing().onGetDragData(c,f,d):null}},_prepareData:function(f,k){var c=f.properties,m=this.$DataModel,n=arguments.callee,d=n.map||(n.map=_.toArr("left,top,bottom,right,width,height")),p=[],l=f.box,q=f.box.adjustData,r;k=k||{};if(c.id){delete c.id}if("caption" in m&&c.caption!==null){c.caption=c.caption===undefined?f.alias:c.caption}if("html" in m&&c.html){k.html=xui.adjustRes(c.html,0,1)}if("src" in m&&c.src){k.src=xui.adjustRes(c.src,0,1)}if("$hborder" in m){k.bWidth=c.width-(c.$hborder||0)*2}if("$vborder" in m){k.bHeight=c.height-(c.$vborder||0)*2}for(var g=0,h;h=d[g];g++){if(c[h]||c[h]===0){if(String(parseFloat(c[h]))==String(c[h])){p[p.length]=h+":"+(parseInt(c[h],10)||0)+"px"}else{if(c[h]!="auto"&&c[h]){p[p.length]=h+":"+c[h]}}}}if(c.position){p[p.length]="position:"+c.position}if(c.visibility){p[p.length]="visibility:"+c.visibility}if("zIndex" in c){p[p.length]="z-index:"+c.zIndex}if(c.display){p[p.length]="display:"+(c.display=="inline-block"?xui.browser.gek?"-moz-inline-block;display:-moz-inline-box;display:inline-block;":"inline-block":c.display)}k._style=p.join(";");if(l.$Behaviors.PanelKeys&&!l["xui.absList"]){p=[];if(c.panelBgClr){p[p.length]="background-color:"+c.panelBgClr}if(c.panelBgImg){p[p.length]="background-image:url("+xui.adjustRes(c.panelBgImg)+")"}if(c.panelBgImgPos){p[p.length]="background-position:"+c.panelBgImgPos}if(c.panelBgImgRepeat){p[p.length]="background-repeat:"+c.panelBgImgRepeat}if(c.panelBgImgAttachment){p[p.length]="background-attachment:"+c.panelBgImgAttachment}k._panelstyle=p.join(";")}if("className" in m){k._className=c.className||""}if("readonly" in m){k.readonly=c.readonly?"xui-ui-readonly":""}if("href" in m){k.href=c.href||xui.$DEFAULTHREF}if("tabindex" in m){k.tabindex=c.tabindex||"-1"}if("items" in m){f.ItemIdMapSubSerialId={};f.SubSerialIdMapItem={};c.items=f.box._adjustItems(c.items);k.items=this._prepareItems(f,c.items)}if("selectable" in m){k._selectable=(xui.browser.ie&&xui.browser.ver<10)?"":(c.selectable?"xui-ui-selectable":"xui-ui-unselectable")}k=q(f,c,k);f.prepared=true;return k},_prepareItems:function(g,q,p,j,m){var v=[],u,c,s,f=xui.UI.$tag_subId,d,k=g.properties.tabindex,r=g.box.adjustData;for(var n=0,h=q.length;n<h;n++){if(typeof q[n]!="object"){q[n]={id:q[n]}}u=q[n];if(!u.hasOwnProperty("caption")){u.caption=u.id}c={id:u.id};if(p){c._pid=p}d=c[f]=typeof m=="string"?m:g.pickSubId("items");if(false!==j){g.ItemIdMapSubSerialId[u.id]=d;g.SubSerialIdMapItem[d]=u}if(s=u.object){s=c.object=s["xui.absBox"]?s.get(0):s;if(s["xui.UIProfile"]){s.properties.position="relative"}u.$xid=s.$xid;s.$item=u;s.$holder=g;if(!s.host||s.host===s){s.boxing().setHost(g.host,s.alias)}if(!g.$attached){g.$attached=[]}g.$attached.push(s)}else{c._tabindex=k;if(u.hidden){u.itemDisplay="display:none;"}r(g,u,c);if(this._prepareItem){this._prepareItem(g,c,u,p,n,h,j,m)}}v.push(c)}return v},_showTips:function(c,d,f){if(c.properties.disableTips){return}if(c.onShowTips){return c.boxing().onShowTips(c,d,f)}}}});Class("xui.absList","xui.absObj",{Instance:{activate:function(){var d=this.get(0),c=d.getSubNode("ITEM",true);if(!c.isEmpty()){c.focus()}return this},insertItems:function(i,d,n){var f,k,l,j,c,g,h,m=this._afterInsertItems;return this.each(function(r){h=r.box;k=h._adjustItems(i);l=r.properties.items;j=_.arr.subIndexOf(l,"id",d);if(r.renderId){g=h._prepareItems(r,k,d);c=r._buildItems("items",g);if(r.$attached){for(var q=0,p;p=r.$attached[q++];){if(p._render){p._render(true)}}delete r.$attached}if(j==-1){f=r.getSubNode(h._ITEMSKEY||r.keys.ITEMS||r.keys.KEY);if(n){f.prepend(c)}else{f.append(c)}}else{f=r.getSubNodeByItemId(h._ITEMKEY||"ITEM",d);if(n){f.addPrev(c)}else{f.addNext(c)}}}if(j==-1){_.arr.insertAny(l,k,n?0:-1)}else{_.arr.insertAny(l,k,n?j:j+1)}if(m){r.boxing()._afterInsertItems(r,g,d,n)}})},removeItems:function(d,g){if(!(d instanceof Array)){d=[d]}_.arr.each(d,function(k,j){d[j]=""+k});var h,f,c=this._afterRemoveItems;remove=function(l,i,p,n,k,m){var j=arguments.callee;if(!k){k=xui()}_.filter(i,function(u){var s,q;if(m||(q=(_.arr.indexOf(p,u.id)!=-1))){if(l.renderId){if(s=l.ItemIdMapSubSerialId[u.id]){n.push(_.copy(l.SubSerialIdMapItem[s]));delete l.SubSerialIdMapItem[s];delete l.ItemIdMapSubSerialId[u.id];l.reclaimSubId(s,"items");if(!m){if(!(h=l.getSubNode(l.keys[g]?g:(l.box._ITEMKEY||"ITEM"),s)).isEmpty()){k.merge(h)}if(u.$xid){k.get().push(xui.getObject(u.$xid).getRootNode())}}}}}if(u.sub){j(l,u.sub,p,n,k,m||q)}if(q){for(var r in u){u[r]=null}return false}});k.remove()};return this.each(function(i){var k=i.properties,j=[];remove(i,k.items,d,j);if(f=k.$UIvalue){if((f=(""+f).split(k.valueSeparator)).length>1){_.filter(f,function(l){return _.arr.indexOf(d,l)==-1});k.$UIvalue=f.join(k.valueSeparator)}else{if(_.arr.indexOf(d,k.$UIvalue)!=-1){k.$UIvalue=null}}}if(c&&i.renderId){i.boxing()._afterRemoveItems(i,j)}})},clearItems:function(c){return this.each(function(d){if(d.SubSerialIdMapItem){if(d.renderId){d.getSubNode(d.keys[d.box._ITEMKEY||"ITEM"],true).remove()}_.each(d.SubSerialIdMapItem,function(g,f){d.reclaimSubId(f,"items")});d.SubSerialIdMapItem={};d.ItemIdMapSubSerialId={}}d.properties.items.length=0;d.properties.$UIvalue=null})},updateItem:function(i,h){i+="";var p=this,g=p.get(0),k=g.box,q=g.properties.items,u=g.queryItems(q,function(v){return typeof v=="object"?v.id===i:v==i},true,true,true),l,w,r,d,s,j,n;if(!_.isHash(h)){h={caption:h+""}}if(u&&u.length){u=u[0];if(typeof u[0]!="object"){w=u[2][u[1]]={id:u[0]}}else{w=u[0]}if(_.isSet(h.id)){h.id+=""}if(h.id&&i!==h.id){l=h.id;var c=g.ItemIdMapSubSerialId,m;if(!c[l]){if(m=c[i]){c[l]=m;delete c[i];g.SubSerialIdMapItem[m].id=l}else{w.id=l}}}delete h.id;if(_.isEmpty(h)){return p}_.merge(w,h,"all");s=g.getSubNodeByItemId("ITEM",l||i);if(!s.isEmpty()){r=_.get(g,["ItemIdMapSubSerialId",l||i]);d=k._prepareItems(g,[w],w._pid,false,r);if(h.sub){delete w._created;delete w._checked}else{if(w.sub){j=g.getSubNodeByItemId("SUB",l||i)}}s.replace(g._buildItems(arguments[2]||"items",d),false);if(j&&!j.isEmpty()){if(!(n=g.getSubNodeByItemId("SUB",l||i)).isEmpty()){n.replace(j)}}if(typeof p.setUIValue=="function"){var x=g.properties.$UIvalue||"",d=(""+x).split(g.properties.valueSeparator);if(d.length&&_.arr.indexOf(d,i)!=-1){if(l){_.arr.removeValue(d,i)}d.push(w.id);p.setUIValue(d.join(g.properties.valueSeparator),true)}}}if(k.$Behaviors.PanelKeys){var f={};if(h.hasOwnProperty("panelBgClr")){f["background-color"]=h.panelBgClr}if(h.hasOwnProperty("panelBgImg")){f["background-image"]=h.panelBgImg?("url("+xui.adjustRes(h.panelBgImg)+")"):""}if(h.hasOwnProperty("panelBgImgPos")){f["position-color"]=h.panelBgImgPos}if(h.hasOwnProperty("panelBgImgRepeat")){f["background-repeat"]=h.panelBgImgRepeat}if(h.hasOwnProperty("panelBgImgAttachment")){f["background-attachment"]=h.panelBgImgAttachment}if(h.hasOwnProperty("overflow")){var m=h.overflow;if(m){if(m.indexOf(":")!=-1){_.arr.each(m.split(/\s*;\s*/g),function(y){var v=y.split(/\s*:\s*/g);if(v.length>1){f[_.str.trim(v[0])]=_.str.trim(v[1]||"")}})}}f.overflow=m||""}if(!_.isEmpty(f)){_.arr.each(k.$Behaviors.PanelKeys,function(v){panel=g.getSubNode(v,l||i).css(f)})}}}return p},getItems:function(g){var f=this.get(0).properties.items;if(g=="data"){return _.clone(f,true)}else{if(g=="min"){var d=_.clone(f,true),c;_.arr.each(d,function(j,h){d[h]=j.id});return d}else{return f}}},fireItemClickEvent:function(c){c+="";this.getSubNodeByItemId(this.constructor._focusNodeKey,c).onClick();return this}},Static:{getDropKeys:function(c,f){var d=c.getSubItemByDom(f);return(d&&d.dropKeys)||c.properties.dropKeys},getDragKey:function(c,f){var d=c.getSubItemByDom(f);return(d&&d.dragKey)||c.properties.dragKey}},Initialize:function(){var c=this.prototype;_.arr.each(_.toArr("getItemByItemId,getItemByDom,getSubIdByItemId,getSubNodeByItemId"),function(d){c[d]=function(){var f=this.get(0);return f[d].apply(f,arguments)};Class._fun(c[d],d,c.KEY,null,"instance")})},Static:{_focusNodeKey:"ITEM",$abstract:true,DataModel:{listKey:{set:function(d){var f=this,c=f.box.getCachedData(d);if(c){f.boxing().setItems(_.clone(c))}else{f.boxing().setItems(f.properties.items)}f.properties.listKey=d}},items:{ini:[],set:function(p){var c=this,l=c.boxing(),m=c.properties.items,d,f,n;if(typeof l.setValue=="function"){n=c.properties.value;if(n&&p&&p.length){var h=_.arr.indexOf(p,n);if(h===-1){h=_.arr.subIndexOf(p,"id",c.properties.value)}if(h===-1){n=p?p[0]?p[0].id?p[0].id:p[0]:"":""}}}if(m&&m.length){if(c.children&&c.children.length){d=[];_.arr.each(c.children,function(r){d.push(f=[r[0].serialize(false,true),null,null]);if(f[1]=r[1]){var s=_.arr.indexOf(m,r[1]);if(s===-1){s=_.arr.subIndexOf(m,"id",r[1])}if(s!==-1){f[2]=s}}});l.removeChildren(true,true)}l.clearItems()}l.insertItems(p?_.copy(p):null);if(p&&p.length&&d){var g={},j={},k=p.length;_.arr.each(p,function(s,r){g[s.id||s]=r;j[r]=s.id||s});_.arr.each(d,function(i){var r;if(_.isSet(i[1])){if(g[i[1]]){l.append(i[0],i[1]);r=1}else{if(j[i[2]]){l.append(i[0],j[i[2]]);r=1}}}if(!r){l.append(i[0],n)}})}if(_.isSet(n)){l.setValue(n,true)}if(c.renderId){var q=c.getRootNode().style;xui.UI.$tryResize(c,q.width,q.height,true);q=null}}},valueSeparator:";"},RenderTrigger:function(){this.destroyTrigger=function(){_.each(this.SubSerialIdMapItem,function(c){_.breakO(c)});this.properties.items.length=0}},_adjustItems:function(d){if(!d){d=[]}if(_.isStr(d)){d=[d]}var f=_.copy(d),c;_.arr.each(f,function(h,g){if(typeof h!="object"){f[g]={id:h+""}}else{f[g]=_.copy(h);f[g].id=_.isSet(f[g].id)?(f[g].id+""):_.id()}});return f},_showTips:function(f,h,k){if(f.properties.disableTips){return}if(f.onShowTips){return f.boxing().onShowTips(f,h,k)}if(!xui.Tips){return}var d=f.properties,j=h.id,c=f.getSubId(j),i=f.SubSerialIdMapItem,g=i&&i[c];if(g&&("tips" in g)){if(g.tips){xui.Tips.show(k,g)}else{xui.Tips.hide()}return true}else{if(f.properties.autoTips&&g&&"caption" in g){if(g.caption){xui.Tips.show(k,{tips:g.caption})}else{xui.Tips.hide()}return true}else{return false}}}}});Class("xui.absValue","xui.absObj",{Instance:{_getCtrlValue:function(){return this.get(0).properties.$UIvalue},_setCtrlValue:function(c){return this},_setDirtyMark:function(c){return this.each(function(h){if(!h.renderId){return}var g=h.properties,f=g.value!==g.$UIvalue,j=h.getSubNode(c||"KEY"),i=xui.UI.$css_tag_dirty;if(h._dirtyFlag!==f){if(g.dirtyMark&&g.showDirtyMark){if(h.beforeDirtyMark&&false===h.boxing().beforeDirtyMark(h,f)){}else{if(f){j.addClass(i)}else{j.removeClass(i)}}}h._dirtyFlag=f}})},getValue:function(f){var d=this.get(0),g=d.properties,c=g.value;if(d.box.$valuemode=="multi"){if(f){if(_.isStr(c)){c=c.split(g.valueSeparator)}}}if(d.box.$DataModel.selMode&&(g.selMode=="multi"||g.selMode=="multibycheckbox")&&f){if(_.isStr(c)){c=c.split(g.valueSeparator)}if(c&&_.isArr(c)&&c.length>1){c.sort()}}return c},getUIValue:function(g){var f=this.get(0),h=f.properties;if(!f.renderId){return h&&h.value}var d=this._getCtrlValue(),c;if(!f.box._checkValid||false!==f.box._checkValid(f,d)){h.$UIvalue=d}c=h.$UIvalue;if(f.box.$valuemode=="multi"){if(g){if(_.isStr(c)){c=c.split(h.valueSeparator)}}}if(f.box.$DataModel.selMode&&(h.selMode=="multi"||h.selMode=="multibycheckbox")&&g){if(_.isStr(c)){c=c.split(h.valueSeparator)}if(c&&_.isArr(c)&&c.length>1){c.sort()}}return c},resetValue:function(d){var c=this;c.each(function(f){var g,h=f.properties;if(typeof(g=f.box._ensureValue)=="function"){d=g.call(f.box,f,d)}if(h.value!==d||h.$UIvalue!==d){if(f.box._beforeResetValue){f.box._beforeResetValue(f)}if(typeof(g=f.$onValueSet)=="function"){g=g.call(f,d);if(_.isSet(g)){d=g}}f.boxing()._setCtrlValue(h.value=d);h.$UIvalue=d}f._inValid=1});c._setDirtyMark();return c},setUIValue:function(g,f,d){var c=this;this.each(function(h){var m=h.properties,j,k=m.$UIvalue,i=h.boxing(),l=k!==g;if(l||f){if(l){if((h.box._checkValid&&false===h.box._checkValid(h,g))||(h.beforeUIValueSet&&false===(j=i.beforeUIValueSet(h,k,g)))){return}if(j!==undefined&&typeof j!=="boolean"){g=j}if(h.box&&(typeof(j=h.box._ensureValue)=="function")){g=j.call(h.box,h,g)}}if(typeof(j=h.$onUIValueSet)=="function"){j=j.call(h,g);if(_.isSet(j)){g=j}}if(h.renderId&&!d){i._setCtrlValue(g)}if(l){m.$UIvalue=g}if(h.renderId){i._setDirtyMark()}if(l){if(h.afterUIValueSet){i.afterUIValueSet(h,k,g)}if(h.onChange){i.onChange(h,k,g)}if(!m.dirtyMark){i.setValue(g)}}}});return this},updateValue:function(){return this.each(function(d){var f=d.properties;if(f.value!==f.$UIvalue){var c=d.boxing();if(c.checkValid()){c.setValue(c.getUIValue(),true);c._setDirtyMark()}}})},isDirtied:function(){var c=false;this.each(function(d){var f=d.properties;c=(f.value+" ")!==(f.$UIvalue+" ");if(c){return false}});return c},checkValid:function(g){var h,f,d=true,c=_.isSet(g);this.each(function(i){h=i.properties;f=true;if(i.box._checkValid2){d=(f=i.box._checkValid2(i))&&d}if(f&&i.box._checkValid){d=i.box._checkValid(i,c?g:h.$UIvalue)&&d}if(!c&&i.renderId){i.boxing()._setDirtyMark()}});return d}},Static:{$abstract:true,DataModel:{dataBinder:{ini:"",set:function(d,g){var c=this,f=c.properties;if(g){xui.DataBinder._unBind(g,c)}f.dataBinder=d;xui.DataBinder._bind(d,c)}},dataField:{ini:"",set:function(g,i){var f=this,d,h=f.properties;h.dataField=g;if(!h.dataBinder){return}var c=xui.DataBinder.getFromName(h.dataBinder);if(c&&(d=c.get(0))&&(d=d.properties.data)&&_.isSet(d=d[g])){f.boxing().setValue(d,true)}}},readonly:{ini:false,action:function(c){var d=this.getRoot();if(c){d.addClass("xui-ui-readonly")}else{d.removeClass("xui-ui-readonly")}}},value:{ini:null,set:function(h){var d=this,j=d.properties,g,i=j.value,f=d.boxing(),c=h;if(d.box._checkValid&&d.box._checkValid(d,c)===false){return}if(d.beforeValueSet&&false===(g=f.beforeValueSet(d,i,c))){return}if(g!==undefined){c=g}if(typeof(g=d.box._ensureValue)=="function"){c=g.call(d.box,d,c)}if(typeof(g=d.$onValueSet)=="function"){g=g.call(d,c);if(_.isSet(g)){c=g}}if(d.renderId){f._setCtrlValue(c)}j.value=j.$UIvalue=c;if(!d._inValid){d._inValid=1}if(d.renderId){f._setDirtyMark()}if(d.afterValueSet){f.afterValueSet(d,i,c)}}},dirtyMark:true,showDirtyMark:true},_ensureValue:function(c,d){if(c.box.$DataModel.selMode&&(c.properties.selMode=="multi"||c.properties.selMode=="multibycheckbox")){if(!_.isArr(d)){d=(d?(""+d):"").split(c.properties.valueSeparator)}d.sort();return d.join(c.properties.valueSeparator)}else{return _.isArr(d)?d[0]:d}},EventHandlers:{beforeValueSet:function(d,c,f){},afterValueSet:function(d,c,f){},beforeUIValueSet:function(d,c,f){},afterUIValueSet:function(d,c,f){},onChange:function(d,c,f){},beforeDirtyMark:function(d,c){}},RenderTrigger:function(){var d=this,c=d.boxing(),g=d.properties,f;if(f=g.dataBinder){c.setDataBinder(f,true)}if(f=g.dataField){c.setDataField(f)}if(g.value!==undefined){if(typeof(f=d.box._ensureValue)=="function"){g.value=f.call(d.box,d,g.value);if(g.$UIvalue){g.$UIvalue=f.call(d.box,d,g.$UIvalue)}}if(!g.$UIvalue){g.$UIvalue=g.value}c._setCtrlValue(g.$UIvalue,true)}}}});new function(){var c="xui.UI";Class(c+".Widget",c,{Static:{Appearances:{KEY:{"font-size":xui.browser.ie?0:null,"line-height":xui.browser.ie?0:null}},Templates:{className:"xui-uiw-shell {_className}",style:"{_style}",FRAME:{className:"xui-uiw-frame ",BORDER:{style:"width:{bWidth}px;height:{bHeight}px;",className:"xui-uiw-border"}}},Behaviors:{onSize:xui.UI.$onSize},DataModel:{width:100,height:100,$hborder:0,$vborder:0},RenderTrigger:function(){var d=this,f=d.properties,g=d.boxing();if(d.renderId){if((!d.$noB)&&f.border&&g._border){g._border()}}if((!d.$noR)&&f.resizer&&g.setResizer){g.setResizer(f.resizer,true)}if((!d.$noS)&&f.shadow&&g._shadow){g._shadow()}},_onresize:function(h,d,m){var n=h.properties,f=h.getSubNode("BORDER"),l,j=d,i=m,g=Math.max(0,(n.$b_lw||0)-(n.$hborder||0)),k=Math.max(0,(n.$b_tw||0)-(n.$vborder||0));if(j&&"auto"!==j){j-=Math.max((n.$hborder||0)*2,(n.$b_lw||0)+(n.$b_rw||0));if(xui.browser.ie6){j=(parseInt(j/2,10))*2}}if(i&&"auto"!==i){i-=Math.max((n.$vborder||0)*2,(n.$b_lw||0)+(n.$b_rw||0));if(xui.browser.ie6){i=(parseInt(i/2,10))*2}if(xui.browser.ie6&&null===d){f.ieRemedy()}}l={left:g,top:k,width:j,height:i};f.cssRegion(l);if((h.$border||h.$shadow||h.$resizer)&&xui.browser.ie){f.ieRemedy()}return l}}});Class(c+".Link",c,{Static:{Appearances:{KEY:{"font-size":xui.browser.ie?"12px":null,"line-height":xui.browser.ie?"14px":null,cursor:"pointer"}},Templates:{tagName:"a",className:"{_className}",style:"{_style}",href:"{href}",target:"{target}",tabindex:"{tabindex}",text:"{caption}"},Behaviors:{HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},onClick:function(f,h,i){var g;if(!f.properties.disabled&&f.onClick){g=f.boxing().onClick(f,h,i)}var d=xui.use(i).attr("href");return typeof g=="boolean"?g:(d.indexOf("javascript:")===0||d.indexOf("#")===0)?false:true}},DataModel:{caption:{ini:undefined,action:function(d){d=(_.isSet(d)?d:"")+"";this.getRoot().html(xui.adjustRes(d,true))}},href:{ini:xui.$DEFAULTHREF,action:function(d){this.getRoot().attr("href",d)}},target:{action:function(d){this.getRoot().attr("target",d)}}},EventHandlers:{onClick:function(d,f){}}}});Class(c+".SLabel",c,{Static:{Templates:{className:"{_className}",style:"{_style};text-align:{hAlign}",text:"{caption}"},Appearances:{KEY:{"padding-right":"6px"}},DataModel:{selectable:true,caption:{ini:undefined,action:function(d){d=(_.isSet(d)?d:"")+"";this.getRoot().html(xui.adjustRes(d,true))}},hAlign:{ini:"right",listbox:["left","center","right"],action:function(d){this.getRoot().css("textAlign",d)}}},Behaviors:{onClick:function(d,g,h){var f=d.properties;if(f.disabled){return false}if(d.onClick){return d.boxing().onClick(d,g,h)}}},EventHandlers:{onClick:function(d,f,g){}}}});Class(c+".SButton",c,{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this}},Static:{Templates:{className:"xui-ui-unselectable {_clsName} {_className}",style:"{_style}",BTN:{className:"xui-ui-btn",BTNI:{className:"xui-ui-btni",BTNC:{className:"xui-ui-btnc",FOCUS:{tabindex:"{tabindex}",style:"{_align}",ICON:{$order:1,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{$order:2,text:"{caption}"}}}}}},Appearances:{BTN:{overflow:"hidden"},"KEY-auto BTN, KEY-auto BTNI, KEY-auto BTNC, KEY-auto FOCUS":{$order:1,display:xui.$inlineBlock},"BTN,BTNI,BTNC":{display:"block"},"KEY FOCUS":{cursor:"pointer","font-size":"12px","text-align":"center",display:"block"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle",display:"inline"}},Behaviors:{HoverEffected:{BTN:["BTN"]},ClickEffected:{BTN:["BTN"]},NavKeys:{FOCUS:1},onClick:function(d,g,h){var f=d.properties;if(f.disabled){return false}d.getSubNode("FOCUS").focus();if(d.onClick){return d.boxing().onClick(d,g,h)}},onKeydown:function(f,h,i){var g=xui.Event.getKey(h),d=g.key;if(d==" "||d=="enter"){f.getSubNode("BTN").afterMousedown();f.__fakeclick=1}},onKeyup:function(f,h,i){var g=xui.Event.getKey(h),d=g.key;if(d==" "||d=="enter"){f.getSubNode("BTN").afterMouseup();if(f.__fakeclick){xui.use(i).onClick()}}delete f.__fakeclick}},DataModel:{image:{format:"image",action:function(d){this.getSubNode("ICON").css("display",d?"":"none").css("backgroundImage",d?("url("+xui.adjustRes(d)+")"):"")}},imagePos:{action:function(d){this.getSubNode("ICON").css("backgroundPosition",d)}},caption:{ini:undefined,action:function(d){d=(_.isSet(d)?d:"")+"";this.getSubNode("CAPTION").html(xui.adjustRes(d,true))}},hAlign:{ini:"center",listbox:["left","center","right"],action:function(d){this.getSubNode("FOCUS").css("textAlign",d)}},width:{ini:"auto",action:function(d){if(d=="auto"){this.getRoot().width("auto").tagClass("-auto")}else{this.getRoot().width(d).tagClass("-auto",false)}}},height:{readonly:true}},EventHandlers:{onClick:function(d,f,g){}},_prepareData:function(d){var f=arguments.callee.upper.call(this,d);f._align="text-align:"+f.hAlign+";";f._clsName=parseInt(f.width,10)?"":d.getClass("KEY","-auto");return f}}});Class(c+".SCheckBox",[c,"xui.absValue"],{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this},_setCtrlValue:function(d){return this.each(function(f){f.getSubNode("MARK").tagClass("-checked",!!d)})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["CAPTION"])}},Static:{Templates:{className:"{_clsName} {_className}",style:"{_style}",FOCUS:{tabindex:"{tabindex}",MARK:{$order:0,className:"xui-uicmd-check"},ICON:{$order:1,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{$order:2,text:"{caption}"}}},Appearances:{KEY:{overflow:"visible"},FOCUS:{cursor:"default","vertical-align":"middle",padding:"2px 0","font-size":"12px","line-height":"22px"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle"}},Behaviors:{HoverEffected:{KEY:"MARK"},ClickEffected:{KEY:"MARK"},NavKeys:{FOCUS:1},onClick:function(f,h,i){var g=f.properties,d=f.boxing();if(g.disabled){return false}if(g.readonly){return false}d.setUIValue(!g.$UIvalue);if(f.onChecked){d.onChecked(f,h,g.$UIvalue)}f.getSubNode("FOCUS").focus()},FOCUS:{onKeydown:function(f,g,h){var d=xui.Event.getKey(g).key;if(d==" "||d=="enter"){f.getRoot().onClick(true);return false}}}},DataModel:{value:false,image:{format:"image",action:function(d){this.getSubNode("ICON").css("display",d?"":"none").css("backgroundImage",d?("url("+xui.adjustRes(d)+")"):"")}},imagePos:{action:function(d){this.getSubNode("ICON").css("backgroundPosition",d)}},caption:{ini:undefined,action:function(d){d=(_.isSet(d)?d:"")+"";this.getSubNode("CAPTION").html(xui.adjustRes(d,true))}}},EventHandlers:{onChecked:function(d,g,f){}},_ensureValue:function(d,f){return !!f}}});Class(c+".Element",c,{Static:{_objectProp:{tagVar:1,dockMargin:1,attributes:1},Templates:{tagName:"{nodeName}",className:"{_className}",style:"{_style};",tabindex:"{tabindex}",text:"{html}"+xui.UI.$childTag},DataModel:{width:"100",height:"30",nodeName:{ini:"xui",action:function(d){this.boxing().refresh()}},selectable:true,html:{html:1,action:function(d){this.getRoot().html(xui.adjustRes(d,0,1))}},attributes:{ini:{},action:function(f,g){var d=this.getRoot();if(!_.isEmpty(g)){_.each(g,function(j,h){d.attr(h,null)})}if(!_.isEmpty(f)){_.each(f,function(j,h){d.attr(h,j)})}}},tabindex:-1},Appearances:{KEY:{"line-height":"1.22em"}},RenderTrigger:function(){var f=this.properties.attributes;if(!_.isEmpty(f)){var d=this.getRoot();_.each(f,function(h,g){d.attr(g,h)})}}}});Class(c+".HTMLButton",c+".Element",{Instance:{activate:function(){this.getRoot().focus();return this}},Static:{Templates:{tagName:"button",className:"{_className}",style:"{_style};",tabindex:"{tabindex}",text:"{html}"+xui.UI.$childTag},DataModel:{nodeName:null,tabindex:1},Appearances:{KEY:{"line-height":"1.22em",cursor:"pointer"}},Behaviors:{onClick:function(d,g,h){var f=d.properties;if(f.disabled){return false}if(d.onClick){return d.boxing().onClick(d,g,h)}}},EventHandlers:{onClick:function(d,g,f){}}}});Class(c+".Span",c,{Static:{Templates:{className:"{_className}",style:"{_style};{_overflow};",tabindex:"{tabindex}",text:"{html}"+xui.UI.$childTag},DataModel:{width:"16",height:"16",selectable:true,html:{html:1,action:function(d){this.getRoot().html(xui.adjustRes(d,0,1))}},overflow:{ini:xui.browser.isTouch?"auto":undefined,combobox:["","visible","hidden","scroll","auto","overflow-x:auto;overflow-y:auto"],action:function(d){var f=this.getContainer();if(d){if(d.indexOf(":")!=-1){_.arr.each(d.split(/\s*;\s*/g),function(h){var g=h.split(/\s*:\s*/g);if(g.length>1){f.css(_.str.trim(g[0]),_.str.trim(g[1]||""))}});return}}f.css("overflow",d||"")}},tabindex:-1},Appearances:{KEY:{"line-height":"1.22em"}},Behaviors:{onClick:function(d,g,h){var f=d.properties;if(f.disabled){return false}if(d.onClick){return d.boxing().onClick(d,g,h)}}},EventHandlers:{onClick:function(d,g,f){}},_prepareData:function(d){var f=arguments.callee.upper.call(this,d);if(_.isStr(f.overflow)){f._overflow=f.overflow.indexOf(":")!=-1?(f.overflow):("overflow:"+f.overflow)}return f}}});Class(c+".CSSBox",c+".Span",{Instance:{adjustDock:null,draggable:null,busy:null,free:null},Static:{$initRootHidden:true,$initRootCreated:true,_objectProp:{tagVar:1,normalStatus:1,hoverStatus:1,activeStatus:1,focusStatus:1},Templates:{style:"left:"+xui.Dom.HIDE_VALUE+";top:"+xui.Dom.HIDE_VALUE+";width:150px;height:60px;visibility:hidden;display:none;position:absolute;z-index:0;"},DataModel:{className:{ini:null,action:function(){this.box._refreshCSS(this)}},normalStatus:{ini:{},action:function(d){this.box._refreshCSS(this)}},hoverStatus:{ini:{},action:function(d){this.box._refreshCSS(this)}},activeStatus:{ini:{},action:function(d){this.box._refreshCSS(this)}},focusStatus:{ini:{},action:function(d){this.box._refreshCSS(this)}},showEffects:null,hideEffects:null,position:null,display:null,visibility:null,zIndex:null,left:null,top:null,width:null,height:null,right:null,bottom:null,dock:null,renderer:null,display:null,html:null,selectable:null,overflow:null,tabindex:null,autoTips:null,disableClickEffect:null,disableHoverEffect:null,disableTips:null,disabled:null,defaultFocus:null,doc:null,dockIgnore:null,dockOrder:null,dockMargin:null,dockFloat:null,dockMinW:null,dockMinH:null,tips:null},$adjustProp:function(d){d.properties.className=d.properties.className||("xui-css-"+d.$xid)},RenderTrigger:function(){var d=this;d.box._refreshCSS(d);if(!d.$inDesign){xui("body").prepend(d.getRoot())}},_refreshCSS:function(d){_.resetRun(d.key+":"+d.$xid,function(){if(d.destroyed){return}var m=d.properties,f=m.className,g=d.getRootNode(),h="";var l=m.normalStatus,k=m.hoverStatus,j=m.activeStatus,i=m.focusStatus;if(l&&!_.isEmpty(l)){h+="."+f+"{"+xui.Dom.$adjustCss(l,true)+"}\n"}if(k&&!_.isEmpty(k)){h+="."+f+":hover{"+xui.Dom.$adjustCss(k,true)+"}\n"}if(j&&!_.isEmpty(j)){h+="."+f+":active{"+xui.Dom.$adjustCss(j,true)+"}"}if(i&&!_.isEmpty(i)){h+="."+f+":focus{"+xui.Dom.$adjustCss(i,true)+"}"}g.innerHTML="Text";if(h){xui.CSS._appendSS(g,h)}xui.Dom._setClass(g,f)})},EventHandlers:{onContextmenu:null,onDock:null,onLayout:null,onMove:null,onRender:null,onResize:null,onShowTips:null,beforeAppend:null,afterAppend:null,beforeRender:null,afterRender:null,beforeRemove:null,afterRemove:null,onHotKeydown:null,onHotKeypress:null,onHotKeyup:null}}});Class(c+".Div",c,{Static:{Appearances:{KEY:{outline:xui.browser.gek?"none":null,zoom:(xui.browser.ie&&xui.browser.ver<9)?"1":null,"line-height":"1.22em",background:xui.browser.ie?"url("+xui.ini.img_bg+") no-repeat left top":null}},Templates:{tagName:"div",className:"xui-nooutline {_className}",style:"{_style};{_overflow};",tabindex:"{tabindex}",text:"{html}"+xui.UI.$childTag},DataModel:{iframeAutoLoad:{ini:"",action:function(){this.getSubNode("PANEL").html("",false);this.box._applyAutoLoad(this)}},ajaxAutoLoad:{ini:"",action:function(){this.getSubNode("PANEL").html("",false);this.box._applyAutoLoad(this)}},width:"100",height:"100",selectable:true,html:{html:1,action:function(d){this.getRoot().html(xui.adjustRes(d,0,1))}},overflow:{ini:xui.browser.isTouch?"auto":undefined,combobox:["","visible","hidden","scroll","auto","overflow-x:auto;overflow-y:auto"],action:function(d){var f=this.getContainer();if(d){if(d.indexOf(":")!=-1){_.arr.each(d.split(/\s*;\s*/g),function(h){var g=h.split(/\s*:\s*/g);if(g.length>1){f.css(_.str.trim(g[0]),_.str.trim(g[1]||""))}});return}}f.css("overflow",d||"")}},tabindex:-1},RenderTrigger:function(){var d=this;if(d.box.KEY=="xui.UI.Div"){if(d.properties.iframeAutoLoad||d.properties.ajaxAutoLoad){d.box._applyAutoLoad(this)}}},_prepareData:function(d){var f=arguments.callee.upper.call(this,d);if(_.isStr(f.overflow)){f._overflow=f.overflow.indexOf(":")!=-1?(f.overflow):("overflow:"+f.overflow)}return f},_applyAutoLoad:function(h){var d=h.properties,k=h.boxing();if(d.iframeAutoLoad){k.getContainer().css("overflow","hidden");var m=typeof d.iframeAutoLoad=="string"?{url:d.iframeAutoLoad}:_.clone(d.iframeAutoLoad,true),f="biframe_"+_(),l=xui.browser.ie&&xui.browser.ver<9,i=document.createElement(l?"<iframe name='"+f+"'>":"iframe");m.url=xui.adjustRes(m.url,false,true);i.id=i.name=f;if(_.isHash(d.iframeAutoLoad)){d.iframeAutoLoad.frameName=f}if(!m.query){m.query={}}m.query._rand=_();i.src=m.url;i.frameBorder="0";i.marginWidth="0";i.marginHeight="0";i.vspace="0";i.hspace="0";i.allowTransparency="true";i.width="100%";i.height="100%";k.append(i);xui.Dom.submit(m.url,m.query,m.method,f,m.enctype)}else{if(d.ajaxAutoLoad){var j=typeof d.ajaxAutoLoad=="string"?{url:d.ajaxAutoLoad}:_.clone(d.ajaxAutoLoad,true),n={rspType:"text"};if(!j.query){j.query={}}j.query._rand=_();_.merge(n,j.options);k.busy();var g=k.getContainer();xui.Ajax(xui.adjustRes(j.url,false,true),j.query,function(p){g.html(p,true,true);k.free()},function(p){g.html("<div>"+p+"</div>",true,false);k.free()},null,n).start()}}}}});Class(c+".Tag",c+".Div",{Static:{Templates:{tagName:"div",className:"{_className}",style:"overflow:auto;border:dashed blue 1px;text-align:center;background-color:#EBEADB;{_style};{_panelstyle};{_overflow};",text:"{tagKey}"+xui.UI.$childTag},DataModel:{html:null,tagKey:{action:function(d){this.getRoot().html(d)}}},_l:_.toArr("left,top,bottom,right,width,height,zIndex,tabindex,position,dock,dockFloat,dockMinW,dockMinH,dockOrder,dockMargin"),replace:function(g,h,d){_.arr.each(this._l,function(k){if(k in g.properties){h.properties[k]=g.properties[k]}});_.merge(h.CS,g.CS,"all");_.merge(h.CC,g.CC,"all");_.merge(h.CA,g.CA,"all");if(typeof g.theme=="string"){h.theme=g.theme}if(g.parent){var i=g.parent.children,j=i["$"+g.$xid],f=_.arr.indexOf(i,j);g.parent.boxing().append(h,j[1]);i[f]=i.pop();g.unLink("$parent");delete g.parent}else{if(d){_.arr.each(d._nodes,function(l,k){if(l===g){d._nodes[k]=h;return false}})}}if(g.renderId){h.boxing().renderOnto(g.getRootNode())}}}});Class(c+".Pane",c+".Div",{Static:{Behaviors:{DroppableKeys:["KEY"],PanelKeys:["KEY"]},Appearances:{KEY:{"line-height":"1.22em"}},RenderTrigger:function(){var d=this;if(d.box.KEY=="xui.UI.Pane"){if(d.properties.iframeAutoLoad||d.properties.ajaxAutoLoad){d.box._applyAutoLoad(d)}}}}})};Class("xui.UI.Image","xui.UI",{Instance:{getRate:function(){return parseFloat(this.get(0)._rate)||1}},Static:{Templates:{tagName:"image",style:"cursor:{cursor};{_style}",className:"{_className}",border:"0",src:xui.ini.img_bg,alt:"{alt}"},Behaviors:{HoverEffected:{KEY:"KEY"},ClickEffected:{KEY:"KEY"},DraggableKeys:["KEY"],onError:function(c,d,f){c.boxing().onError(c)},onLoad:function(d,g,h){var c=new Image(),f=xui.use(h).get(0).src;c.onload=function(){if(!d||d.isDestroyed){return}var j=d.properties,i=d.box._adjust(d,_.isFinite(j.width)?j.width:c.width,_.isFinite(j.height)?j.height:c.height);if(d.$afterLoad){d.$afterLoad.apply(d.host,[d,f,i[0],i[1]])}d.boxing().afterLoad(d,f,i[0],i[1]);if(j.dock!="none"){d.boxing().adjustDock()}c.onload=null};c.src=f},onClick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onClick){return c.boxing().onClick(c,f,g)}},onDblclick:function(c,f,g){var d=c.properties;if(d.disabled){return false}if(c.onDblclick){c.boxing().onDblclick(c,f,g)}}},RenderTrigger:function(){var d=this,f=d.properties,c=f.src;if(c){d.boxing().setSrc(c,c!=xui.ini.img_bg)}},EventHandlers:{onClick:function(c,d,f){},onDblclick:function(c,d,f){},onError:function(c){},beforeLoad:function(c){},afterLoad:function(f,g,d,c){}},_adjust:function(h,g,c){var k=h.properties,j=h.getRootNode();g=parseInt(g,10)||0;c=parseInt(c,10)||0;j.style.width=j.style.height="";if(g>0&&c>0){var f=k.maxWidth/g,d=k.maxHeight/c,i=f<d?f:d;if(i>=1){i=1}h._rate=i;return[j.width=g*i,j.height=c*i]}return[0,0]},DataModel:{maxWidth:{ini:800,action:function(c){var d=this.getRootNode(),f=this.properties;this.box._adjust(this,_.isFinite(f.width)?f.width:d.width,_.isFinite(f.height)?f.height:d.height)}},maxHeight:{ini:600,action:function(c){var d=this.getRootNode(),f=this.properties;this.box._adjust(this,_.isFinite(f.width)?f.width:d.width,_.isFinite(f.height)?f.height:d.height)}},width:{ini:"auto",action:function(c){var f=this.getRootNode(),g=this.properties,d=new Image();d.src=f.src;this.box._adjust(this,_.isFinite(c)?parseInt(c,10):d.width,_.isFinite(g.height)?g.height:d.height)}},height:{ini:"auto",action:function(c){var f=this.getRootNode(),g=this.properties,d=new Image();d.src=f.src;this.box._adjust(this,_.isFinite(g.width)?g.width:d.width,_.isFinite(c)?parseInt(c,10):d.height)}},src:{format:"image",ini:xui.ini.img_bg,action:function(d){var c=this;if(false!==c.boxing().beforeLoad(this)){_.asyRun(function(){c.getRoot().attr({width:"0",height:"0",src:xui.adjustRes(d)})})}}},alt:{ini:"",action:function(c){this.getRoot().attr("alt",c)}},cursor:{ini:"auto",combobox:["","default","text","pointer","move","crosshair","wait","help","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize"],action:function(c){this.getRoot().css("cursor",c)}}}}});Class("xui.UI.Flash","xui.UI",{Instance:{refreshFlash:function(){var d="",c=this.constructor;return this.each(function(f){_.resetRun(f.domId,function(){c._clearMemory(f);if(f.properties.src){c._drawSWF(f)}})})},getFlash:function(){return this.constructor._getSWF(this.get(0))}},Static:{Appearances:{KEY:{"font-size":xui.browser.ie?0:null,"line-height":xui.browser.ie?0:null,overflow:"hidden"},BOX:{position:"absolute",left:0,top:0,"z-index":1},COVER:{position:"absolute",left:"-1px",top:"-1px",width:0,height:0,"z-index":4}},Templates:{tagName:"div",className:"{_className}",style:"{_style}",BOX:{tagName:"div"},COVER:{tagName:"div",style:"background-image:url("+xui.ini.img_bg+");"}},Behaviors:{onSize:xui.UI.$onSize},DataModel:{selectable:true,width:500,height:300,cover:false,src:{format:"flash",ini:"",action:function(c,d){this.boxing().refreshFlash()}},parameters:{ini:{},action:function(c,d){this.boxing().refreshFlash()}},flashvars:{ini:{},action:function(c,d){this.boxing().refreshFlash()}}},RenderTrigger:function(){(this.$beforeDestroy=(this.$beforeDestroy||{}))["flashClearMem"]=function(){if(this.box){this.box._clearMemory(this)}};this.boxing().refreshFlash()},getFlashVersion:function(){if(xui.browser.ie){try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{c.AllowScriptAccess="always"}catch(d){return"6,0,0"}}catch(d){}finally{try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(d){}}}else{try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(d){}}return"0,0,0"},_getSWF:function(c){var d=_.isStr(c)?c:(this._idtag+c.serialId);return(xui.browser.ie?window[d]:((document.embeds&&document.embeds[d])||window.document[d]))||document.getElementById(d)},_clearMemory:function(g){var h=this._idtag+g.serialId;var d=_.fun(),f=g.box._getSWF(g);if(f){f.style.display="none";if(xui.browser.ie){for(var c in f){if(typeof f[c]=="function"){f[c]=d}}if(window[h]){window[h]=undefined}}else{if(document.embeds&&document.embeds[h]){document.embeds[h]=undefined}if(window.document[h]){window.document[h]=undefined}}f=d=null}},_drawSWF:function(h){var g=this;var k=h.properties,f=h.serialId,j=xui.adjustRes(k.src),i=k.parameters,d=_.copy(k.flashvars),c="";d.DOMId=h.box._idtag+h.serialId;d.chartWidth=k.width;d.chartHeight=k.height;if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){c+='<embed type="application/x-shockwave-flash" src="'+j+"?"+_.urlEncode(i)+'" ';c+='width="'+k.width+'" height="'+k.height+'" ';c+='id="'+d.DOMId+'" name="'+d.DOMId+'" ';c+='wmode="opaque" ';c+='flashvars="'+_.urlEncode(d)+'" ';c+="/>"}else{c+='<object id="'+d.DOMId+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" ';c+='width="'+k.width+'" height="'+k.height+'">';c+='<param name="movie" value="'+j+"?"+_.urlEncode(i)+'" />';c+='<param name="wmode" value="opaque" />';c+='<param name="flashvars" value="'+_.urlEncode(d)+'" />';c+="</object>"}h.getSubNode("BOX").html(c,false)},_onresize:function(g,f,c){var d=g.getSubNode("BOX").cssSize(),h=g.properties;if((f&&d.width!=f)||(c&&d.height!=c)){if(f){h.width=f}if(c){h.height=c}d={width:f,height:c};g.getSubNode("BOX").cssSize(d,true);if(g.$inDesign||h.cover){g.getSubNode("COVER").cssSize(d,true)}g.boxing().refreshFlash()}}}});Class("xui.UI.Border","xui.UI",{Instance:{_attachTo:function(i,g){var f=this,d=f.get(0),h;i.append(f);d.$edgeId=xui(i).id();d.$tieId=g;d.$attached=true;if(h=d.properties){if(d.properties.borderActive){var c="tag",j=d.domId;if(xui(g).get(0)){xui(g).afterMouseover(function(m,l){if(m.properties.disabled){return}var k=xui.$cache.profileMap[j];_.tryF(k.behavior.TAG.afterMouseover,[k,l,k.getRootNode()],this)},c).afterMouseout(function(m,l){if(m.properties.disabled){return}var k=xui.$cache.profileMap[j];_.tryF(k.behavior.TAG.afterMouseout,[k,l,k.getRootNode()],this)},c).afterMousedown(function(m,l){if(m.properties.disabled){return}var k=xui.$cache.profileMap[j];_.tryF(k.behavior.TAG.afterMousedown,[k,l,k.getRootNode()],this)},c).afterMouseup(function(m,l){if(m.properties.disabled){return}var k=xui.$cache.profileMap[j];_.tryF(k.behavior.TAG.afterMouseup,[k,l,k.getRootNode()],this)},c)}}}return i},_detach:function(){var g=this,f=g.get(0),i,h,d=null,c="tag";delete f.$attached;if(i=f.$tieId){if(i=xui.Dom.byId(i)){xui(i).afterMouseover(d,c).afterMouseout(d,c).afterMousedown(d,c).afterMouseup(d,c)}}return g}},Initialize:function(){_.each({addBorder:function(d){var f=xui([this.get(0)]),c=arguments[1]||f.id();return new xui.UI.Border(d)._attachTo(f,c)},$getBorder:function(){var d=this.id(),c;_.arr.each(xui.UI.Border._cache,function(f){if(f.$edgeId==d){c=f;return false}});return c&&c.boxing()},removeBorder:function(){var c=this.id();_.arr.each(xui.UI.Border._cache,function(d){if(d.$edgeId==c){d.boxing()._detach().destroy(true)}});return this}},function(d,c){xui.Dom.plugIn(c,d)});_.each({_border:function(d,c){return this.each(function(l){var i=l.properties,j=l.getSubNode(i._customBorder||"BORDER"),g;if(!d){d={}}if(i._customBorder){g=(d._bkey=l.getClass("KEY"))}else{g="xui-border"}var h="setting-"+g,f;f="borderLeftWidth";i.$b_lw=xui.UI.$getCSSValue(h,f);f="borderRightWidth";i.$b_rw=xui.UI.$getCSSValue(h,f);f="borderTopWidth";i.$b_tw=xui.UI.$getCSSValue(h,f);f="borderBottomWidth";i.$b_bw=xui.UI.$getCSSValue(h,f);if(c!==false){if(j.$getBorder()){return}l.$border=j.addBorder(d);l.clearCache().boxing().reLayout()}})},_unBorder:function(){return this.each(function(f){var d=f.getSubNode("BORDER"),c=f.properties;if(!d.$getBorder()){return}d.removeBorder();delete f.$border;delete c.$b_lw;delete c.$b_rw;delete c.$b_tw;delete c.$b_bw;f.clearCache().boxing().reLayout()})}},function(d,c){xui.UI.Widget.plugIn(c,d)});xui.UI.Widget.setDataModel({border:{ini:false,action:function(d){var c=this.boxing();if(d){c._border()}else{c._unBorder()}}}})},Static:{Templates:{tagName:"div",TAG:{},T:{className:"{cls_t}"},RT:{className:"{cls_rt}",$order:1},R:{className:"{cls_r}"},RB:{className:"{cls_rb}",$order:1},B:{className:"{cls_b}"},LB:{className:"{cls_lb}",$order:1},L:{className:"{cls_l}"},LT:{className:"{cls_lt}",$order:1}},Appearances:{KEY:{width:0,height:0,display:xui.browser.ie6?"inline":null,"font-size":0,"line-height":0},"TAG,T, RT, R, RB, B, LB, L, LT":{position:"absolute",display:"block","font-size":0,"line-height":0},".setting-xui-border":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},T:{width:"100%",left:0,top:"-1px",height:"3px","background-image":xui.UI.$bg("vertical.gif",""),"background-repeat":"repeat-x","background-position":"left top"},B:{width:"100%",left:0,bottom:"-1px",height:"3px","background-image":xui.UI.$bg("vertical.gif",""),"background-repeat":"repeat-x","background-position":"left bottom"},L:{height:"100%",top:0,left:"-1px",width:"3px","background-image":xui.UI.$bg("horizontal.gif",""),"background-repeat":"repeat-y","background-position":"left top"},R:{height:"100%",top:0,right:"-1px",width:"3px","background-image":xui.UI.$bg("horizontal.gif",""),"background-repeat":"repeat-y","background-position":"right top"},LT:{top:"-1px",left:"-1px",width:"3px",height:"3px","background-image":xui.UI.$bg("corner.gif",""),"background-repeat":"no-repeat","background-position":"left top"},RT:{top:"-1px",right:"-1px",width:"3px",height:"3px","background-image":xui.UI.$bg("corner.gif",""),"background-repeat":"no-repeat","background-position":"right top"},RB:{right:"-1px",bottom:"-1px",width:"3px",height:"3px","background-image":xui.UI.$bg("corner.gif",""),"background-repeat":"no-repeat","background-position":"right bottom"},LB:{left:"-1px",bottom:"-1px",width:"3px",height:"3px","background-image":xui.UI.$bg("corner.gif",""),"background-repeat":"no-repeat","background-position":"left bottom"}},Behaviors:{HoverEffected:{TAG:"KEY"},ClickEffected:{TAG:"KEY"}},DataModel:{_bkey:"",borderActive:false},_prepareData:function(c){var f=arguments.callee.upper.call(this,c),d=c.properties._bkey;f.cls_t=d?d+"-b-t":"";f.cls_rt=d?d+"-b-rt":"";f.cls_r=d?d+"-b-r":"";f.cls_rb=d?d+"-b-rb":"";f.cls_b=d?d+"-b-b":"";f.cls_lb=d?d+"-b-lb":"";f.cls_l=d?d+"-b-l":"";f.cls_lt=d?d+"-b-lt":"";return f}}});Class("xui.UI.Shadow","xui.UI",{Instance:{_attachTo:function(d){d=d.reBoxing();var c=this;c.get(0)._target=d.get(0);d.append(c);return d}},Initialize:function(){_.each({addShadow:function(c){return new xui.UI.Shadow(c)._attachTo(xui([this.get(0)]))},$getShadow:function(){var d=this.get(0),c;_.arr.each(xui.UI.Shadow._cache,function(f){if(f._target==d){c=f;return false}});return c&&c.boxing()},removeShadow:function(){var c=this.get();_.arr.each(xui.UI.Shadow._cache,function(d){if(d&&d.renderId&&d._target){if(_.arr.indexOf(c,xui(d._target).get(0))!=-1){d.boxing().destroy(true)}}});return this}},function(d,c){xui.Dom.plugIn(c,d)});_.each({_shadow:function(c){return this.each(function(i){var g=i.getSubNode("BORDER"),h=i.properties,f;if(xui.Dom.css3Support("boxShadow")){f=parseInt(h._shadowSize*3/4,10);g.css("boxShadow",f+"px "+f+"px "+f+"px #717C8C");if(i.box._shadowRB){i.getSubNode(i.box._shadowRB).css("background-color","#717C8C")}}else{if(g.$getShadow()){return}i.$shadow=g.addShadow({shadowSize:h._shadowSize})}})},_unShadow:function(){return this.each(function(d){var c=d.getSubNode("BORDER");if(xui.Dom.css3Support("boxShadow")){c.css("boxShadow","");if(d.box._shadowRB){d.getSubNode(d.box._shadowRB).css("background-color","transparent")}}else{if(!c.$getShadow()){return}c.removeShadow();delete d.$shadow}})}},function(d,c){xui.UI.Widget.plugIn(c,d)});xui.UI.Widget.setDataModel({shadow:{ini:false,action:function(d){var c=this.boxing();if(d){c._shadow()}else{c._unShadow()}}},_shadowSize:this.SIZE})},Static:{SIZE:4,Templates:{tagName:"div",R:{tagName:"div",style:"top:{shadowOffset}px;width:{shadowSize}px;right:-{pos}px;"},RB:{tagName:"div",style:"height:{rbsize}px;width:{rbsize}px;right:-{pos}px;bottom:-{pos}px;"},B:{tagName:"div",style:"left:{shadowOffset}px;height:{shadowSize}px;bottom:-{pos}px;"}},Appearances:{KEY:{width:0,height:0,display:xui.browser.ie6?"inline":null,"font-size":xui.browser.ie6?0:null,"line-height":xui.browser.ie6?0:null},"B, RB, R":{position:"absolute",display:"block","font-size":xui.browser.ie?0:null,"line-height":xui.browser.ie?0:null,"z-index":"-1"},B:{left:0,width:"100%",background:xui.browser.ie6?"":xui.UI.$bg("bottom.png","repeat-x left bottom"),_filter:xui.UI.$ieBg("bottom.png")},RB:{background:xui.browser.ie6?"":xui.UI.$bg("right_bottom.png","left top"),_filter:xui.UI.$ieBg("right_bottom.png")},R:{top:0,height:"100%",background:xui.browser.ie6?"":xui.UI.$bg("right.png","repeat-y right top"),_filter:xui.UI.$ieBg("right.png")}},DataModel:{shadowSize:{ini:8,action:function(f){var d=this,c=d.properties.shadowOffset;d.getSubNode("R").cssRegion({width:f,top:c,right:-f-c});d.getSubNode("RB").cssRegion({width:f,height:f,right:-f-c+1,bottom:-f-c+1});d.getSubNode("B").cssRegion({height:f,left:c,bottom:-f-c})}},shadowOffset:{ini:0,action:function(c){this.boxing().setShadowSize(this.properties.shadowSize,true)}}},_prepareData:function(d){var c=arguments.callee.upper.call(this,d);c.pos=(parseInt(c.shadowSize,10)||0)+(parseInt(c.shadowOffset,10)||0);c.rbsize=c.shadowSize+4;return c},LayoutTrigger:function(){if(xui.browser.ie){this.getRoot().ieRemedy()}}}});Class("xui.UI.Resizer","xui.UI",{Instance:{_attachTo:function(g,f){var d=this,c=d.get(0);c._target=xui(g);c._parent=f||xui("body");c._parent.append(d);c.$resizeId=xui(g).id();return d},show:function(){var c=this;c.each(function(d){d.getRoot().css("display","")});if(xui.browser.ie){c.reBoxing().ieRemedy()}return c},hide:function(){var c=this;c.reBoxing().css("display","none");return c}},Initialize:function(){this.addTemplateKeys(["HANDLER","HIDDEN","MOVE","CONF1","CONF2","L","R","T","B","LT","RT","LB","RB"]);_.each({addResizer:function(f,d,c){var h=xui([this.get(0)]);f=f||{};_.merge(f,{_attached:true});var g=new xui.UI.Resizer(f)._attachTo(h,h);if(d){g.onUpdate(d)}if(c){g.onChange(c)}return g},removeResizer:function(){var c=this.id();_.arr.each(xui.UI.Resizer._cache,function(d){if(d.$resizeId==c){d.boxing().destroy(true)}});return this},$getResizer:function(){var d=this.id(),c;_.arr.each(xui.UI.Resizer._cache,function(f){if(f.$resizeId==d){c=f;return false}});return c&&c.boxing()}},function(d,c){xui.Dom.plugIn(c,d)});_.each({_resizer:function(d,c){return this.each(function(h){var f=h.getSubNode("BORDER"),g=h.properties;if(f.$getResizer()){return}c=c||{};var i=function(v,s,z,k){var n=arguments.callee.profile,m=n.getRoot(),x=n.boxing(),j=n.properties,r=n.box["xui.svg"],y;if(z){var u=null,q=null,p=null,y=null;if(y=z.width){m.widthBy(y);j.width=u=r?x.getWidth():m.width()}if(y=z.height){m.heightBy(y);j.height=q=r?x.getHeight():m.height()}xui.UI.$tryResize(n,u,q,true);if(!n.box._onresize&&n.onResize&&(u!==null||q!==null)){x.onResize(n,u,q)}}if(k){if((y=k.left)&&!(j.left=="auto"&&parseInt(j.right,10)>=0)){m.leftBy(y);j.left=r?x.getLeft():m.left()}if((y=k.top)&&!(j.top=="auto"&&parseInt(j.bottom,10)>=0)){m.topBy(y);j.top=r?x.getTop():m.top()}if(n.onMove&&(p!==null||y!==null)){x.onMove(n,p,y,null,null)}}return false};i.profile=h;h.$resizer=f.addResizer(c,i);h.$resizer.get(0).$parentUIProfile=h;if(g.visibility=="hidden"){h.$resizer.hide()}})},_unResizer:function(){return this.each(function(d){var c=d.getSubNode("BORDER");if(!c.$getResizer()){return}c.removeResizer();delete d.$resizer})}},function(d,c){xui.UI.Widget.plugIn(c,d)});xui.UI.Widget.setDataModel({resizer:{ini:false,action:function(f){var d=this.boxing();if(f){var g=this.properties,c={};_.each("minHeight,minWidth,maxHeight,maxWidth".split(","),function(h){if(h in g){c[h]=g[h]}});if(g.resizerProp&&!_.isEmpty(g.resizerProp)){_.merge(c,g.resizerProp,"all")}if(g.tagVar.resizerProp){_.merge(c,g.tagVar.resizerProp,"all")}d._resizer(f,c)}else{d._unResizer()}}},resizerProp:{ini:{}}})},Static:{Templates:{tagName:"div",style:"{_style};"},Appearances:{KEY:{position:"absolute",margin:"0 -1px -1px 0",visibility:"visible","font-size":0,"line-height":0,"*background":"url("+xui.ini.path+"bg.gif)","z-index":60,cursor:"move"},MOVE:{position:"absolute",display:"block","z-index":100,visibility:"visible","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-17px -244px","font-size":0,"line-height":0},"CONF1, CONF2":{position:"absolute",display:"block","z-index":100,visibility:"visible","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","font-size":0,"line-height":0,cursor:"pointer"},CONF2:{$order:2,"background-position":"-90px -272px"},CONF1:{$order:3,"background-position":"-112px -284px"},HANDLER:{$order:0,position:"absolute",display:"block",border:"solid 1px","background-color":"#fff","z-index":100,visibility:"visible","font-size":0,"line-height":0},T:{$order:1,left:"50%",cursor:"n-resize"},RT:{$order:1,cursor:"ne-resize","z-index":110},R:{$order:1,top:"50%",cursor:"e-resize"},RB:{$order:1,cursor:"se-resize","z-index":110},B:{$order:1,left:"50%",cursor:"s-resize"},LB:{$order:1,cursor:"sw-resize","z-index":110},L:{$order:1,top:"50%",cursor:"w-resize"},LT:{$order:1,cursor:"nw-resize","z-index":110},HIDDEN:{$order:10,"background-color":"transparent","border-width":0}},Behaviors:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{move:true})},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{move:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{move:true})},onDblclick:function(c,d,f){if(c.onDblclick){c.boxing().onDblclick(c,d,f)}},CONF1:{onMouseover:function(c,d,f){if(c.onConfig){return c.boxing().onConfig(c,d,f,"left","mouseover")}return false},onMousedown:function(c,d,f){if(c.onConfig){return c.boxing().onConfig(c,d,f,"left","mousedown")}return false},onClick:function(c,d,f){if(c.onConfig){return c.boxing().onConfig(c,d,f,"left","click")}return false}},CONF2:{onMouseover:function(c,d,f){if(c.onConfig){return c.boxing().onConfig(c,d,f,"right","mouseover")}return false},onMousedown:function(c,d,f){if(c.onConfig){return c.boxing().onConfig(c,d,f,"right","mousedown")}return false},onClick:function(c,d,f){if(c.onConfig){return c.boxing().onConfig(c,d,f,"right","click")}return false}},LT:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{left:true,top:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{left:true,top:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{left:true,top:true})}},RT:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{right:true,top:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{right:true,top:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{right:true,top:true})}},LB:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{left:true,bottom:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{left:true,bottom:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{left:true,bottom:true})}},RB:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{right:true,bottom:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{right:true,bottom:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{right:true,bottom:true})}},L:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{left:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{left:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{left:true})}},T:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{top:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{top:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{top:true})}},R:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{right:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{right:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{right:true})}},B:{beforeMousedown:function(c,d,f){c.box._onMousedown(c,d,f,{bottom:true});return false},onDragbegin:function(c,d,f){c.box._onDragbegin(c,d,f)},onDrag:function(c,d,f){c.box._onDrag(c,d,f,{bottom:true})},onDragstop:function(c,d,f){c.box._onDragstop(c,d,f,{bottom:true})}}},DataModel:{_attached:false,forceVisible:false,forceMovable:"",singleDir:false,vertical:true,horizontal:true,minHeight:12,minWidth:12,maxHeight:5000,maxWidth:5000,handlerSize:4,handlerOffset:0,leftConfigBtn:{ini:false,action:function(c){this.getSubNode("CONF1").css("display",c?"":"none")}},rightConfigBtn:{ini:false,action:function(c){this.getSubNode("CONF2").css("display",c?"":"none")}},left:100,top:100,height:100,width:100,position:"absolute",display:"block"},EventHandlers:{onDblclick:function(c,d,f){},onUpdate:function(f,g,d,c){},onChange:function(d,c){},onConfig:function(d,f,g,h,c){}},_dynamicTemplate:function(f){var i=f.properties,m,h,k,g=f._exhash="$_attached:"+i._attached+";forceVisible:"+i.forceVisible+";singleDir:"+i.singleDir+";vertical:"+i.vertical+";horizontal:"+i.horizontal+";forceMovable:"+i.forceMovable+";";var c=arguments.callee.map||(arguments.callee.map={MOVE:{tagName:"div",style:"top:50%;left:50%;margin-left:-6px;margin-top:-6px;width:13px;height:13px;"},CONF1:{tagName:"div",style:"top:0px;left:-16px;width:16px;height:16px;{_leftCofigBtn};"},CONF2:{tagName:"div",style:"top:0px;left:auto;right:-16px;width:16px;height:16px;{_rightCofigBtn};"},T:{tagName:"div",style:"top:-{extend}px;margin-left:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},RT:{tagName:"div",style:"top:-{extend}px;right:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},R:{tagName:"div",style:"right:-{extend}px;margin-top:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},RB:{tagName:"div",style:"bottom:-{extend}px;right:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},B:{tagName:"div",style:"bottom:-{extend}px;margin-left:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},LB:{tagName:"div",style:"bottom:-{extend}px;left:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},L:{tagName:"div",style:"left:-{extend}px;margin-top:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},LT:{tagName:"div",style:"left:-{extend}px;top:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},cover:{T:{tagName:"div",style:"width:100%;left:0;top:-{extend}px;height:{handlerSize}px;"},RT:{tagName:"div",style:"top:-{extend}px;right:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},R:{tagName:"div",style:"height:100%;top:0;right:-{extend}px;width:{handlerSize}px;"},RB:{tagName:"div",style:"right:-{extend}px;bottom:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},B:{tagName:"div",style:"width:100%;left:0;bottom:-{extend}px;height:{handlerSize}px;"},LB:{tagName:"div",style:"left:-{extend}px;bottom:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"},L:{tagName:"div",style:"height:100%;top:0;left:-{extend}px;width:{handlerSize}px;"},LT:{tagName:"div",style:"top:-{extend}px;left:-{extend}px;width:{handlerSize}px;height:{handlerSize}px;"}}});var j=f.box.getTemplate(g);if(!j){var l,d;j=_.clone(f.box.getTemplate());l=i._cover?c.cover:c;if(i._move){j.MOVE=c.MOVE}j.CONF1=c.CONF1;j.CONF2=c.CONF2;if(i.vertical){if(!i.singleDir){j.T=l.T}j.B=l.B}if(i.horizontal){if(!i.singleDir){j.L=l.L}j.R=l.R;if(i.vertical){if(!i.singleDir){j.LB=l.LB;j.RT=l.RT;j.LT=l.LT}j.RB=l.RB}}d=f.getClass("KEY","-handler")+" ";if(l=j.T){l.className=d}if(l=j.RT){l.className=d}if(l=j.R){l.className=d}if(l=j.RB){l.className=d}if(l=j.B){l.className=d}if(l=j.LB){l.className=d}if(l=j.L){l.className=d}if(l=j.LT){l.className=d}if(!i._visible){d=f.getClass("KEY","-hidden")+" ";if(l=j.T){l.className+=d}if(l=j.RT){l.className+=d}if(l=j.R){l.className+=d}if(l=j.RB){l.className+=d}if(l=j.B){l.className+=d}if(l=j.LB){l.className+=d}if(l=j.L){l.className+=d}if(l=j.LT){l.className+=d}}f.box.setTemplate(j,g)}f.template=j},_prepareData:function(d){var c=d.properties;c._visible=true;c._cover=false;c._move=true;if(c._attached){c._visible=false;c._cover=true;c._move=false;c.position="static";c.display="inline";c.left=c.top=c.width=c.height=0}if(c.forceVisible){c._visible=true;c._cover=false}if(typeof c.forceMovable=="boolean"){c._move=c.forceMovable}c.extend=(parseInt(c.handlerSize,10)||0)/2+(parseInt(c.handlerOffset,10)||0);c._leftCofigBtn=c.leftConfigBtn?"":"display:none";c._rightCofigBtn=c.rightConfigBtn?"":"display:none";return arguments.callee.upper.call(this,d)},RenderTrigger:function(){var c=this;xui.setNodeData(c.renderId,"zIndexIgnore",1)},_onUpdate:function(g,h,f,c){if(h){if(f){h.widthBy(f.width,true).heightBy(f.height,true)}if(c){var d=h.get(0).style;if(d.left=="auto"&&(parseInt(d.right,10)>=0)){}else{h.leftBy(c.left)}if(d.top=="auto"&&(parseInt(d.bottom,10)>=0)){}else{h.topBy(c.top)}}}},_onMousedown:function(d,g,h,c){if(xui.Event.getBtn(g)!="left"){return}var f=d.$parentUIProfile;if(f&&f["xui.UIProfile"]&&f.beforeResizerDrag&&false===_.tryF(f.beforeResizerDrag,[f,d,c],f.boxing())){return}var i=xui.Event.getPos(g);xui.use(h).startDrag(g,{dragDefer:2,targetReposition:false,dragType:"blank",dragCursor:true,targetLeft:i.left,targetTop:i.top})},_onDragbegin:function(f,g){var i=f.properties._attached?f._target:xui([f.renderId]),c=i.width(),d=i.height();if(f.properties._attached){var j=i.offset();f.proxy=xui.Dom.getEmptyDiv();f.proxy.html(" ",false).css({border:"1px dashed",visibility:"visible"}).offset(j).width(c).height(d).css("zIndex",xui.Dom.TOP_ZINDEX+20)}else{f.proxy=i}f.o_pos=f.proxy.cssPos();f.o_w2=f.o_w=c;f.o_h2=f.o_h=d;f.$onDrag=true},_onDrag:function(g,k,d,q){var f=q;g.oos=g.oos||{};var i=xui.DragDrop.getProfile().offset;if(i.x==g.oos.width&&i.y==g.oos.height){return}g.oos=i;var n,m,p,j,r=g.properties;if(f.left){p=g.o_w-i.x;n=g.o_pos.left+i.x;if(p<r.minWidth){p=r.minWidth;n=g.o_w+g.o_pos.left-p}else{if(p>r.maxWidth){p=r.maxWidth;n=g.o_w+g.o_pos.left-p}}g.proxy.width(p).left(n);if(g.onChange){g.boxing().onChange(g,g.proxy)}}else{if(f.right){p=g.o_w+i.x;if(p<r.minWidth){p=r.minWidth}else{if(p>r.maxWidth){p=r.maxWidth}}g.proxy.width(p);if(g.onChange){g.boxing().onChange(g,g.proxy)}}}if(f.left||f.right){var c=p-g.o_w2;if(g.regions&&c!==0){g.regions.widthBy(c);g.o_w2=p}}if(f.top){j=g.o_h-i.y;m=g.o_pos.top+i.y;if(j<r.minHeight){j=r.minHeight;m=g.o_h+g.o_pos.top-j}else{if(j>r.maxHeight){j=r.maxHeight;m=g.o_h+g.o_pos.top-j}}g.proxy.height(j).top(m);if(g.onChange){g.boxing().onChange(g,g.proxy)}}else{if(f.bottom){j=g.o_h+i.y;if(j<r.minHeight){j=r.minHeight}else{if(j>r.maxHeight){j=r.maxHeight}}g.proxy.height(j);if(g.onChange){g.boxing().onChange(g,g.proxy)}}}if(f.top||f.bottom){var l=j-g.o_h2;if(g.regions&&l!==0){g.regions.heightBy(l);g.o_h2=j}}if(f.move){n=g.o_pos.left+i.x;m=g.o_pos.top+i.y;g.proxy.top(m).left(n);if(g.onChange){g.boxing().onChange(g,g.proxy)}}},_onDragstop:function(g,h,j,d){var c,f,k,i=g.proxy;if(!d.move){f={width:i.width()-g.o_w,height:i.height()-g.o_h}}if(d.left||d.top||d.move){c=i.cssPos();k={left:c.left-g.o_pos.left,top:c.top-g.o_pos.top}}if(g.onUpdate&&false===g.boxing().onUpdate(g,g._target,f,k)){}else{g.box._onUpdate(g,g._target,f,k)}if(g.properties._attached){if(xui.browser.ie6){g._target.ieRemedy()}g.proxy.html("",false).css({visibility:"hidden",border:"none",zIndex:"0",width:"0",height:"0"})}g.$onDrag=false}}});Class("xui.UI.Block","xui.UI.Widget",{Initialize:function(){var c=this,d=c.getTemplate();_.merge(d.FRAME.BORDER,{className:"xui-uiw-border {clsBorderType1}",PANEL:{tagName:"div",className:"{clsBorderType2} xui-uibg-bar",style:"{_panelstyle};{background};{_overflow};",text:"{html}"+xui.UI.$childTag}},"all");c.setTemplate(d);d=c.getAppearance();_.merge(d,{PANEL:{position:"relative",overflow:"auto"}});c.setAppearance(d)},Static:{Behaviors:{DroppableKeys:["PANEL"],PanelKeys:["PANEL"]},DataModel:{disabled:null,tips:null,iframeAutoLoad:{ini:"",action:function(){this.getSubNode("PANEL").html("",false);xui.UI.Div._applyAutoLoad(this)}},ajaxAutoLoad:{ini:"",action:function(){this.getSubNode("PANEL").html("",false);xui.UI.Div._applyAutoLoad(this)}},selectable:true,html:{html:1,action:function(c){this.getSubNode("PANEL").html(xui.adjustRes(c,0,1))}},borderType:{ini:"outset",listbox:["none","flat","inset","outset","groove","ridge"],action:function(m){var l=this,f=l.properties,j=l.getSubNode("BORDER"),h=l.getSubNode("PANEL"),g=/^xui-uiborder-/,c="xui-uiborder-flat",i="xui-uiborder-inset",d="xui-uiborder-outset",k=l.getRoot();j.removeClass(g);h.removeClass(g);switch(m){case"flat":j.addClass(c);break;case"inset":j.addClass(i);break;case"outset":j.addClass(d);break;case"groove":j.addClass(i);h.addClass(d);break;case"ridge":j.addClass(d);h.addClass(i);break}l.box._setB(l);xui.UI.$tryResize(l,k.get(0).style.width,k.get(0).style.height,true)}},background:{format:"color",ini:"",action:function(c){this.getSubNode("PANEL").css("background",c)}},width:100,height:100},Appearances:{KEY:{"line-height":"1.22em"}},RenderTrigger:function(){var c=this;if(c.box.KEY=="xui.UI.Block"){if(c.properties.iframeAutoLoad||c.properties.ajaxAutoLoad){xui.UI.Div._applyAutoLoad(this)}}},_setB:function(d){var f=d.properties,c=f.borderType;f.$hborder=f.$vborder=f.$iborder=0;if(c=="flat"||c=="inset"||c=="outset"){f.$hborder=f.$vborder=1;f.$iborder=0}else{if(c=="groove"||c=="ridge"){f.$hborder=f.$vborder=f.$iborder=1}}},LayoutTrigger:function(){var c=this.properties.borderType;if(c!="none"){this.boxing().setBorderType(c,true)}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.background=d.background?"background:"+d.background:"";if(_.isStr(d.overflow)){d._overflow=d.overflow.indexOf(":")!=-1?(d.overflow):("overflow:"+d.overflow)}return d},_onresize:function(h,g,d){var f=arguments.callee.upper.apply(this,arguments),i=h.properties,c=(i.$iborder||0)*2;if(f.width){f.width-=c}if(f.height&&"auto"!==f.height){f.height-=c}h.getSubNode("PANEL").cssSize(f,true)}}});Class("xui.UI.Label","xui.UI.Widget",{Instance:{_shadowText:function(c){return this.each(function(d){d.getSubNode("SHADOW").css("display","block")})},_unShadowText:function(c){return this.each(function(d){d.getSubNode("SHADOW").css("display","none")})}},Initialize:function(){var c=this.getTemplate();_.merge(c.FRAME.BORDER,{SHADOW:{$order:1,style:"display:none;",SICON:{$order:0,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},SCAPTION:{text:"{caption}",style:"color:#cdcdcd;",$order:1}},BOX:{$order:2,ICON:{$order:0,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{text:"{caption}",$order:1}}},"all");this.setTemplate(c)},Static:{Appearances:{KEY:{"font-size":"12px","line-height":"14px"},BOX:{position:"absolute"},SHADOW:{position:"absolute",top:"4px"}},DataModel:{selectable:true,caption:{ini:undefined,action:function(g){var f=this,h=f.properties,c=f.boxing(),d=f.keys;g=(_.isSet(g)?g:"")+"";f.getSubNodes(["CAPTION","SCAPTION"]).html(xui.adjustRes(g,true));if(h.hAlign!="left"){c.setHAlign(h.hAlign,true)}if(h.vAlign!="top"){c.setVAlign(h.vAlign,true)}}},image:{format:"image",action:function(f){var d=this,c=d.keys;d.getSubNodes(["ICON","SICON"]).css("display",f?"":"none").css("backgroundImage",f?("url("+xui.adjustRes(f||"")+")"):"")}},imagePos:{action:function(f){var d=this,c=d.keys;d.getSubNodes(["ICON","SICON"]).css("backgroundPosition",f)}},shadowText:{ini:false,action:function(d){var c=this.boxing();d=String(d).toLowerCase()!="false";if(d){c._shadowText(d)}else{c._unShadowText()}}},hAlign:{ini:"right",listbox:["left","center","right"],action:function(h){var g=this,k=g.getSubNode("BOX"),j=g.getSubNode("SHADOW"),i=g.properties,f=function(){switch(h){case"left":k.css({left:0,right:"auto",marginLeft:"auto"});j.css({left:i._textSshadowSize+"px",right:"auto",marginLeft:"auto"});break;case"right":k.css({left:"auto",right:i._textSshadowSize+"px",marginLeft:"auto"});j.css({left:"auto",right:0,marginLeft:"auto"});break;case"center":k.css({left:"50%",right:"auto",marginLeft:-1*k.get(0).offsetWidth/2+"px"});j.css({left:"50%",right:"auto",marginLeft:-1*k.get(0).offsetWidth/2+i._textSshadowSize+"px"});break}};if(k.get(0).offsetWidth){f()}else{_.asyRun(f)}}},vAlign:{ini:"top",listbox:["top","middle","bottom"],action:function(h){var g=this,k=g.getSubNode("BOX"),j=g.getSubNode("SHADOW"),i=g.properties,f=function(){switch(h){case"top":k.css({top:0,bottom:"auto",marginTop:"auto"});j.css({top:i._textSshadowSize+"px",bottom:"auto",marginTop:"auto"});break;case"bottom":k.css({top:"auto",bottom:i._textSshadowSize+"px",marginTop:"auto"});j.css({top:"auto",bottom:0,marginTop:"auto"});break;case"middle":k.css({top:"50%",bottom:"auto",marginTop:-1*k.get(0).offsetHeight/2+"px"});j.css({top:"50%",bottom:"auto",marginTop:-1*k.get(0).offsetHeight/2+i._textSshadowSize+"px"});break}};if(k.get(0).offsetHeight){f()}else{_.asyRun(f)}}},fontSize:{action:function(d){var c=this;c.getSubNodes(["CAPTION","SCAPTION"]).css("fontSize",d)}},fontWeight:{action:function(d){var c=this;c.getSubNodes(["CAPTION","SCAPTION"]).css("fontWeight",d)}},width:120,height:20,_textSshadowSize:4},RenderTrigger:function(){var c=this.properties,d=this.boxing();if(c.fontSize){d.setFontSize(c.fontSize,true)}if(c.fontWeight){d.setFontWeight(c.fontWeight,true)}if(c.shadowText){d.setShadowText(true,true)}},LayoutTrigger:function(){var d=this.properties,f=this.boxing(),c=d.shadowText;if(d.hAlign!="left"||c){f.setHAlign(d.hAlign,true)}if(d.vAlign!="top"||c){f.setVAlign(d.vAlign,true)}}}});Class("xui.UI.ProgressBar",["xui.UI.Widget","xui.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(d){d.getSubNode("FILL").width(c+"%");d.getSubNode("CAP").text(d.properties.captionTpl.replace(/\{value\}/g,c))})}},Initialize:function(){var c=this,d=c.getTemplate();_.merge(d.FRAME.BORDER,{FILL:{tagName:"div",style:"width:{value}%;{fillBG}",text:"{html}"+xui.UI.$childTag},INN:{$order:2,tagName:"div",CAP:{tagName:"div"}}},"all");c.setTemplate(d);d=c.getAppearance();_.merge(d,{BORDER:{border:"1px solid #95B611","font-size":0,"line-height":0},INN:{display:"table",position:"absolute",left:0,top:0,width:"100%",height:"100%"},CAP:{"text-align":"center"},FILL:{position:"absolute",width:"1px",left:0,top:0,height:"100%","background-image":xui.UI.$bg("bar.gif",""),"background-repeat":"repeat-x","background-position":"left top","background-color":"#96E115",width:0}});c.setAppearance(d)},Static:{DataModel:{value:0,width:300,height:22,captionTpl:{ini:"{value}%",action:function(){this.boxing()._setCtrlValue(this.properties.$UIvalue)}},fillBG:{ini:"",action:function(c){this.getSubNode("FILL").css("background",c)}},$hborder:1,$vborder:1},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.fillBG=d.fillBG?"background:"+d.fillBG:"";return d},_ensureValue:function(c,d){return parseInt(d,10)||0},_onresize:function(i,g,c){var d=arguments.callee.upper.apply(this,arguments),f;if(d.height){f=d.height+"px";i.getSubNodes(["INN","CAP","FILL"]).css({height:f,"line-height":f})}}}});Class("xui.UI.Button",["xui.UI.Widget","xui.absValue"],{Instance:{activate:function(){this.getSubNode("FOCUS").focus();return this},_setCtrlValue:function(c){if(_.isNull(c)||!_.isDefined(c)){c=false}return this.each(function(g){var f=g.properties;if(f.type!="status"){return}g.getSubNode("BORDER").tagClass("-checked",c);if(f.border){var d=g.getSubNode("BORDER").$getBorder();if(d){d.get(0).getRoot().tagClass("-checked",c)}}})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["FOCUS"])},resetValue:function(f){this.each(function(g){if(g.properties.type=="drop"){g.boxing().setCaption("",true)}});var c=arguments.callee.upper,d=c.apply(this,_.toArr(arguments));c=null;return d},setUIValue:function(g,f){this.each(function(h){var i=h.properties;if(i.$UIvalue!==g&&i.type=="drop"){h.boxing().setCaption("",true)}});var c=arguments.callee.upper,d=c.apply(this,_.toArr(arguments));c=null;return d}},Initialize:function(){this.addTemplateKeys(["DROP"]);var c=this.getTemplate();_.merge(c.FRAME,{FOCUS:{$order:2,className:"xui-ui-unselectable",tabindex:"{tabindex}",TB:{cellpadding:"0",cellspacing:"0",width:"100%",height:"100%",border:"0",tagName:"table",TR:{tagName:"tr",TDL:{tagName:"td"},TD:{$order:1,align:"{hAlign}",valign:"{vAlign}",tagName:"td",width:"100%",height:"100%",BOX:{ICON:{$order:1,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{$order:2,text:"{caption}"}}},TDR:{$order:2,tagName:"td",className:"{dropCls}",TDRI:{}}}}}},"all");this.setTemplate(c)},Static:{Appearances:{KEY:{"font-size":"12px","line-height":"14px",cursor:"pointer"},BORDER:{"font-size":0,"line-height":0,"background-color":"#D2D7DF"},"BORDER-mouseover":{$order:2,"background-color":"#F7D928"},"BORDER-mousedown, BORDER-checked":{$order:2,"background-color":"#F9E56A"},DROP:{$order:10,"background-image":xui.UI.$bg("drop.gif","","Button"),"background-repeat":"no-repeat","background-position":"left bottom","padding-left":"16px"},"DROP-mouseover":{$order:11,"background-position":"-16px bottom"},"DROP-mousedown":{$order:12,"background-position":"right bottom"},"TDR,TDL":{"padding-left":"6px"},".setting-xui-button":{"border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},"KEY-b-t":{top:"-1px",height:"10px","background-image":xui.UI.$bg("vertical.gif","","Button"),"background-repeat":"repeat-x","background-position":"left top"},"KEY-b-b":{bottom:"-1px",height:"10px","background-image":xui.UI.$bg("vertical.gif","","Button"),"background-repeat":"repeat-x","background-position":"left bottom"},"BORDER-mouseover KEY-b-t, BORDER-mouseover KEY-b-b":{$order:1,"background-image":xui.UI.$bg("vertical_mouseover.gif","","Button")},"BORDER-checked KEY-b-t, BORDER-checked KEY-b-b, BORDER-mousedown KEY-b-t, BORDER-mousedown KEY-b-b":{$order:2,"background-image":xui.UI.$bg("vertical_mousedown.gif","","Button")},"KEY-b-l":{left:"-1px",width:"4px","background-image":xui.UI.$bg("horizontal.gif","","Button"),"background-repeat":"repeat-y","background-position":"left top"},"KEY-b-r":{right:"-1px",width:"4px","background-image":xui.UI.$bg("horizontal.gif","","Button"),"background-repeat":"repeat-y","background-position":"right top"},"BORDER-mouseover KEY-b-l, BORDER-mouseover KEY-b-r":{$order:1,"background-image":xui.UI.$bg("horizontal_mouseover.gif","","Button")},"BORDER-checked KEY-b-l, BORDER-checked KEY-b-r, BORDER-mousedown KEY-b-l, BORDER-mousedown KEY-b-r":{$order:2,"background-image":xui.UI.$bg("horizontal_mousedown.gif","","Button")},"KEY-b-lt":{top:"-1px",left:"-1px",width:"4px",height:"10px","background-image":xui.UI.$bg("corner.gif","","Button"),"background-repeat":"no-repeat","background-position":"left top"},"KEY-b-rt":{top:"-1px",right:"-1px",width:"4px",height:"10px","background-image":xui.UI.$bg("corner.gif","","Button"),"background-repeat":"no-repeat","background-position":"right top"},"KEY-b-rb":{right:"-1px",bottom:"-1px",width:"4px",height:"10px","background-image":xui.UI.$bg("corner.gif","","Button"),"background-repeat":"no-repeat","background-position":"right bottom"},"KEY-b-lb":{left:"-1px",bottom:"-1px",width:"4px",height:"10px","background-image":xui.UI.$bg("corner.gif","","Button"),"background-repeat":"no-repeat","background-position":"left bottom"},"BORDER-mouseover KEY-b-lt, BORDER-mouseover KEY-b-rt, BORDER-mouseover KEY-b-rb, BORDER-mouseover KEY-b-lb":{$order:1,"background-image":xui.UI.$bg("corner_mouseover.gif","","Button")},"BORDER-checked KEY-b-lt, BORDER-checked KEY-b-rt, BORDER-checked KEY-b-rb, BORDER-checked KEY-b-lb, BORDER-mousedown KEY-b-lt, BORDER-mousedown KEY-b-rt, BORDER-mousedown KEY-b-rb, BORDER-mousedown KEY-b-lb":{$order:2,"background-image":xui.UI.$bg("corner_mousedown.gif","","Button")},FOCUS:{overflow:"hidden",display:"block",left:0,top:0,"z-index":"20",width:"100%",height:"100%",position:"absolute","outline-offset":"-1px","-moz-outline-offset":(xui.browser.gek&&xui.browser.ver<3)?"-1px !important":null},BOX:{display:"inline","white-space":"nowrap"},CAPTION:{cursor:"pointer","vertical-align":xui.browser.ie6?"baseline":"middle",display:"inline","font-size":"12px","line-height":"14px"}},Behaviors:{HoverEffected:{KEY:["BORDER"]},ClickEffected:{KEY:["BORDER"]},NavKeys:{FOCUS:1},onClick:function(d,g,h){var f=d.properties;if(f.disabled){return false}d.getSubNode("FOCUS").focus();var c=d.boxing();if(f.type=="status"){if(f.readonly){return false}c.setUIValue(!f.$UIvalue);if(d.onChecked){c.onChecked(d,g,f.$UIvalue)}}if(d.onClick){return c.onClick(d,g,h,f.$UIvalue)}},onKeydown:function(d,g,h){var f=xui.Event.getKey(g),c=f.key;if(c==" "||c=="enter"){d.getSubNode("KEY").afterMousedown();d.__fakeclick=1}},onKeyup:function(d,g,h){var f=xui.Event.getKey(g),c=f.key;if(c==" "||c=="enter"){d.getSubNode("KEY").afterMouseup();if(d.__fakeclick){xui.use(h).onClick()}}delete d.__fakeclick},TDR:{onMousedown:function(c,d,f){if(c.properties.type!="drop"){return}xui.use(f).addClass(c.getClass("DROP","-mousedown"));return false},onMouseup:function(c,d,f){if(c.properties.type!="drop"){return}xui.use(f).removeClass(c.getClass("DROP","-mousedown"));return false},onMouseover:function(c,d,f){if(c.properties.type!="drop"){return}xui.use(f).addClass(c.getClass("DROP","-mouseover"))},onMouseout:function(c,d,f){if(c.properties.type!="drop"){return}xui.use(f).removeClass(c.getClass("DROP","-mouseover")).removeClass(c.getClass("DROP","-mousedown"))},onClick:function(c,d,f){if(c.properties.type!="drop"){return}c.boxing().onClickDrop(c,d,f);return false}}},DataModel:{caption:{ini:undefined,action:function(c){c=(_.isSet(c)?c:"")+"";this.getSubNode("CAPTION").html(xui.adjustRes(c,true))}},image:{format:"image",action:function(c){this.getSubNode("ICON").css("display",c?"":"none").css("backgroundImage",c?("url("+xui.adjustRes(c)+")"):"")}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c)}},hAlign:{ini:"center",listbox:["left","center","right"],action:function(c){this.getSubNode("TD").attr("align",c)}},vAlign:{ini:"middle",listbox:["top","middle","bottom"],action:function(c){this.getSubNode("TD").attr("valign",c)}},value:false,type:{ini:"normal",listbox:["normal","status","drop"],action:function(h){var f=this,c=f.getRoot(),g=f.getSubNode("TDR"),d=f.getClass("DROP");if(h=="drop"){g.addClass(d)}else{g.removeClass(d)}f.box._onresize(f)}},width:120,height:22,_customBorder:"BORDER",border:true},_ensureValue:function(c,d){if(c.properties.type=="status"){return !!d}else{return d}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.dropCls=d.type=="drop"?c.getClass("DROP"):"";return d},RenderTrigger:function(){var c=this,d=c.properties,f=c.boxing();if(d.type=="status"&&d.value){f.setValue(true,true)}},EventHandlers:{onClick:function(c,f,g,d){},onClickDrop:function(c,d,f){},onChecked:function(c,f,d){}}}});Class("xui.UI.CheckBox","xui.UI.Button",{Instance:{_setCtrlValue:function(c){return this.each(function(d){d.getSubNode("MARK").tagClass("-checked",!!c)})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["CAPTION"])}},Initialize:function(){var c=this.getTemplate();_.merge(c.FRAME.FOCUS.TB.TR.TD.BOX,{MARK:{$order:0,className:"xui-uicmd-check"}},"all");this.setTemplate(c)},Static:{Appearances:{KEY:{"font-size":"12px","line-height":"14px",border:0,cursor:"pointer"},BORDER:{},FOCUS:{overflow:"hidden",display:"block",position:"absolute",left:0,top:0,"z-index":"200",width:"100%",height:"100%","outline-offset":"-1px","-moz-outline-offset":(xui.browser.gek&&xui.browser.ver<3)?"-1px !important":null},BOX:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,"font-size":"12px","line-height":"14px",overflow:"hidden","vertical-align":"middle","white-space":"nowrap"},TD:{background:"transparent"},TDR:{background:"transparent"},TDL:{background:"transparent"},CAPTION:{display:"inline","white-space":"normal","vertical-align":xui.browser.ie6?"baseline":"middle",cursor:"pointer",zoom:xui.browser.ie?0:null}},Behaviors:{HoverEffected:{KEY:"MARK"},ClickEffected:{KEY:"MARK"},onClick:function(d,g,h){var f=d.properties,c=d.boxing();if(f.disabled||f.readonly){return false}c.setUIValue(!f.$UIvalue);if(d.onChecked){c.onChecked(d,f.$UIvalue)}d.getSubNode("FOCUS").focus()},FOCUS:{onKeydown:function(d,f,g){var c=xui.Event.getKey(f).key;if(c==" "||c=="enter"){d.getRoot().onClick(true);return false}}}},DataModel:{type:null,value:false,hAlign:"left",_customBorder:false,border:false},EventHandlers:{onClick:null},_ensureValue:function(c,d){return !!d}}});Class("xui.UI.Slider",["xui.UI","xui.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(j){var l=j.properties,i=l.steps,h=function(m){return j.getSubNode(m)},g=h("IND1"),f=h("IND2"),d=j.box._v2a(j,c),k=l.type=="vertical"?"top":"left";g[k](d[0]+"%");if(l.isRange){f[k](d[1]+"%")}})},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["BOX"])}},Static:{Templates:{style:"{_style}",className:"{_className}",BOX:{tagName:"div",className:"{_cls}",BG:{tagName:"div"},RULER:{$order:1,tagName:"div",RULERLEFT:{},RULERRIGHT:{}},IND:{$order:2,IND1:{style:"{_showD}",tabindex:"{tabindex}"},IND2:{style:"{_showD2}",tabindex:"{tabindex}"}},DECREASE:{style:"{_showDes}",tabindex:"{tabindex}"},INCREASE:{style:"{_showIns}",tabindex:"{tabindex}"}}},Appearances:{"IND, BT, RULER, RULERLEFT, RULERRIGHT, IND1, IND2, DECREASE, INCREASE":{"font-size":0,"line-height":0,position:"absolute"},BOX:{position:"relative",left:0,top:0,width:"100%",height:"100%"},"BOX-h DECREASE, BOX-h INCREASE":{top:"50%",width:"17px",height:"17px","margin-top":"-8px"},"BOX-v DECREASE, BOX-v INCREASE, BOX-h DECREASE, BOX-h INCREASE, BOX-h IND1,BOX-h IND2, BOX-v IND1,BOX-v IND2":{"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat"},"BOX-h DECREASE":{$order:1,left:0,"background-position":"-80px -70px"},"BOX-h INCREASE":{$order:1,right:0,"background-position":"-100px -70px"},"BOX-h DECREASE-mouseover":{$order:2,"background-position":"-80px -90px"},"BOX-h DECREASE-mousedown":{$order:3,"background-position":"-80px -110px"},"BOX-h INCREASE-mouseover":{$order:2,"background-position":"-100px -90px"},"BOX-h INCREASE-mousedown":{$order:3,"background-position":"-100px -110px"},"BOX-h BG":{top:"50%"},"BOX-h IND, BOX-h RULER":{"z-index":1,top:"50%",height:"6px","margin-top":"-3px"},"BOX-h RULER, BOX-h RULERLEFT, BOX-h RULERRIGHT":{"background-image":xui.UI.$bg("bar_vertical.gif","",true),"background-repeat":"repeat-x"},"BOX-h RULER":{$order:2,"background-position":"left -482px"},"BOX-h RULERLEFT, BOX-h RULERRIGHT":{"z-index":1,height:"6px",width:"5px"},"BOX-h RULERLEFT":{$order:2,"background-position":"left -474px",left:"-4px",top:0},"BOX-h RULERRIGHT":{$order:2,"background-position":"left -490px",right:"-4px",top:0},"BOX-h IND1,BOX-h IND2":{$order:1,"z-index":2,"background-position":"-21px -282px",height:"18px",width:"8px",left:0,top:0,cursor:"e-resize","margin-top":"-6px"},"BOX-h IND1-mouseover,BOX-h IND2-mouseover":{$order:2,"background-position":"-31px -282px"},"BOX-h IND1-mousedown,BOX-h IND2-mousedown":{$order:3,"background-position":"-41px -282px"},"BOX-v DECREASE, BOX-v INCREASE":{$order:10,left:"50%",width:"17px",height:"17px","margin-left":"-8px"},"BOX-v DECREASE":{$order:10,top:0,"background-position":"-120px -70px"},"BOX-v INCREASE":{$order:10,bottom:0,"background-position":"-140px -70px"},"BOX-v DECREASE-mouseover":{$order:11,"background-position":"-120px -90px"},"BOX-v DECREASE-mousedown":{$order:12,"background-position":"-120px -110px"},".xui-ui-disabled INCREASE, .xui-ui-disabled DECREASE":{$order:15,display:"none"},"BOX-v INCREASE-mouseover":{$order:11,"background-position":"-140px -90px"},"BOX-v INCREASE-mousedown":{$order:12,"background-position":"-140px -110px"},"BOX-v BG":{$order:10,left:"50%"},"BOX-v IND, BOX-v RULER":{$order:10,"z-index":1,left:"50%",width:"6px","margin-left":"-3px"},"BOX-v RULER, BOX-v RULERLEFT, BOX-v RULERRIGHT":{"background-image":xui.UI.$bg("bar_horizontal.gif","",true),"background-repeat":"repeat-y"},"BOX-v RULER":{$order:10,"background-position":"-482px top"},"BOX-v RULERLEFT, BOX-v RULERRIGHT":{$order:10,"z-index":1,width:"6px",height:"5px"},"BOX-v RULERLEFT":{$order:12,"background-position":"-490px top",top:"-4px",left:0},"BOX-v RULERRIGHT":{$order:12,"background-position":"-474px top",bottom:"-4px",left:0},"BOX-v IND1,BOX-v IND2":{$order:10,"z-index":2,"background-position":"left -272px",width:"18px",height:"8px",left:0,top:0,cursor:"n-resize","margin-left":"-6px"},"BOX-v IND1-mouseover,BOX-v IND2-mouseover":{$order:11,"background-position":"left -282px"},"BOX-v IND1-mousedown,BOX-v IND2-mousedown":{$order:12,"background-position":"left -292px"}},Behaviors:{HoverEffected:{IND1:"IND1",IND2:"IND2",DECREASE:"DECREASE",INCREASE:"INCREASE"},ClickEffected:{IND1:"IND1",IND2:"IND2",DECREASE:"DECREASE",INCREASE:"INCREASE"},onSize:xui.UI.$onSize,IND:{onClick:function(f,l,c){var d=f.properties;if(d.disabled||d.readonly){return false}var u=xui.use(c).offset(),s=xui.Event.getPos(l),i=f.box._v2a(f,f.properties.$UIvalue),h,g,n=d.type=="vertical",m=n?"top":"left",k=n?"offsetTop":"offsetLeft",j=n?"offsetHeight":"offsetWidth",r=s[m]-u[m],q=(r/xui.use(c).get(0)[j])*100;if(!d.isRange){i[0]=q}else{h=f.getSubNode("IND1")[k](),g=f.getSubNode("IND2")[k]();if(Math.abs(h-r)<Math.abs(g-r)){i[0]=q}else{i[1]=q}}f.boxing().setUIValue(f.box._adjustValue(f,i))}},IND1:{onKeydown:function(f,h,i){var g=f.properties;if(g.disabled||g.readonly){return}var d=g.type=="vertical",c=xui.Event.getKey(h).key;if(c==(d?"up":"left")){f.box._auto(f,false)}if(c==(d?"down":"right")){f.box._auto(f,true)}},onKeyout:function(c){xui.Thread.abort(c.$xid+":auto")},onKeyup:function(c){xui.Thread.abort(c.$xid+":auto")},beforeMousedown:function(d,i,k){if(xui.Event.getBtn(i)!="left"){return}var h=d.properties;if(h.disabled||h.readonly){return}var c=h.type=="vertical",j=c?"offsetTop":"offsetLeft",g=c?"offsetHeight":"offsetWidth",f=d.box;xui.use(k).startDrag(i,{widthIncrement:h.steps?d._size/h.steps:null,dragType:"none",targetReposition:true,horizontalOnly:c?true:null,verticalOnly:c?null:true,maxLeftOffset:xui.use(k).get(0)[j],maxRightOffset:xui.use(k).parent().get(0)[g]-xui.use(k).get(0)[j],dragCursor:"default"});xui.use(k).css("zIndex",10).focus();d.getSubNode("IND2").css("zIndex",5)},beforeDragbegin:function(d,f,g){var c=d.properties.type=="vertical";xui(g)[c?"top":"left"](d.__x=xui.use(g).get(0)[c?"offsetTop":"offsetLeft"])},onDrag:function(f,g,i){var h=xui.DragDrop.getProfile().offset,d=f.properties.type=="vertical",c=f.box._v2a(f,f.properties.$UIvalue);c[0]=((f.__x+h[d?"y":"x"])/xui.use(i).parent().get(0)[d?"offsetHeight":"offsetWidth"])*100;f.boxing().setUIValue(f.box._adjustValue(f,c))},onDragstop:function(c,d,f){xui(f).onMouseout(true,{$force:true}).onMouseup(true)},onClick:function(){return false}},IND2:{onKeydown:function(f,h,i){var g=f.properties;if(g.disabled||g.readonly){return}var d=g.type=="vertical",c=xui.Event.getKey(h).key;if(c==(d?"up":"left")){f.box._auto(f,false)}if(c==(d?"down":"right")){f.box._auto(f,true)}},onKeyout:function(c){xui.Thread.abort(c.$xid+":auto")},onKeyup:function(c){xui.Thread.abort(c.$xid+":auto")},beforeMousedown:function(d,i,k){if(xui.Event.getBtn(i)!="left"){return}var h=d.properties;if(h.disabled||h.readonly){return}var c=h.type=="vertical",j=c?"offsetTop":"offsetLeft",g=c?"offsetHeight":"offsetWidth",f=d.box;xui.use(k).startDrag(i,{widthIncrement:h.steps?d._size/h.steps:null,dragType:"none",targetReposition:true,horizontalOnly:c?true:null,verticalOnly:c?null:true,maxLeftOffset:xui.use(k).get(0)[j],maxRightOffset:xui.use(k).parent().get(0)[g]-xui.use(k).get(0)[j],dragCursor:"default"});xui.use(k).css("zIndex",10).focus();d.getSubNode("IND1").css("zIndex",5)},beforeDragbegin:function(d,f,g){var c=d.properties.type=="vertical";xui(g)[c?"top":"left"](d.__x=xui.use(g).get(0)[c?"offsetTop":"offsetLeft"])},onDrag:function(f,g,i){var h=xui.DragDrop.getProfile().offset,d=f.properties.type=="vertical",c=f.box._v2a(f,f.properties.$UIvalue);c[1]=((f.__x+h[d?"y":"x"])/xui.use(i).parent().get(0)[d?"offsetHeight":"offsetWidth"])*100;f.boxing().setUIValue(f.box._adjustValue(f,c))},onDragstop:function(c,d,f){xui(f).onMouseout(true,{$force:true}).onMouseup(true)},onClick:function(){return false}},RULERRIGHT:{onClick:function(g,i,j){var h=g.properties;if(h.disabled||h.readonly){return false}var f=g.boxing(),k=g.box,d=k._v2a(g,h.$UIvalue);if(!h.isRange){d[0]=100}else{d[1]=100}f.setUIValue(g.box._adjustValue(g,d))}},DECREASE:{onMousedown:function(c){if(c.properties.disabled||c.properties.readonly){return}c.box._auto(c,false)},onMouseout:function(c){if(c.properties.disabled||c.properties.readonly){return}xui.Thread.abort(c.$xid+":auto")},onMouseup:function(c){if(c.properties.disabled||c.properties.readonly){return}xui.Thread.abort(c.$xid+":auto")}},INCREASE:{onMousedown:function(c){if(c.properties.disabled||c.properties.readonly){return}c.box._auto(c,true)},onMouseout:function(c){if(c.properties.disabled||c.properties.readonly){return}xui.Thread.abort(c.$xid+":auto")},onMouseup:function(c){if(c.properties.disabled||c.properties.readonly){return}xui.Thread.abort(c.$xid+":auto")}}},DataModel:{position:"absolute",width:{ini:200},height:{ini:50},steps:0,value:"0:0",type:{listbox:["vertical","horizontal"],ini:"horizontal",action:function(c){this.boxing().refresh()}},isRange:{ini:true,action:function(c){this.boxing().refresh()}},showIncreaseHandle:{ini:true,action:function(c){this.boxing().refresh()}},showDecreaseHandle:{ini:true,action:function(c){this.boxing().refresh()}}},_prepareData:function(c){var g=arguments.callee.upper.call(this,c),f="display:none";g._showDes=g.showDecreaseHandle?"":f,g._showIns=g.showIncreaseHandle?"":f,g._showD2=g.isRange?"":f;g._cls=c.getClass("BOX",g.type=="vertical"?"-v":"-h");return g},_adjustValue:function(d,f){var g=d.properties,c=[];c[0]=parseFloat(f[0])||0;c[1]=parseFloat(f[1])||0;if(g.steps){f=100/g.steps;c[0]=Math.ceil(c[0]/f);if(g.isRange){c[1]=Math.ceil(c[1]/f)}}return g.isRange?c.join(":"):(c[0]+"")},_ensureValue:function(d,l){var c=d.properties,k=String(l).split(":"),g=0,i=c.steps?c.steps:100,j=[],h=function(m){return parseFloat(m)||0},f=function(m){return Math.min(i,Math.max(g,m))};j[0]=h(k[0]);if(c.isRange){j[1]=h(k[1]);if(j[0]>j[1]){k=j[1];j[1]=j[0];j[0]=k}}j[0]=f(j[0]);if(c.isRange){j[1]=f(j[1])}return c.isRange?j.join(":"):(j[0]+"")},_v2a:function(g,d){var c=g.properties.steps,f;d=typeof d=="string"?d.split(":"):d;d[0]=parseFloat(d[0])||0;d[1]=parseFloat(d[1])||0;if(c){d[0]=d[0]*100/c}if(c){d[1]=d[1]*100/c}if(d[0]>d[1]){f=d[0];d[1]=d[0];d[0]=f}return d},_auto:function(h,j){var c=h.$xid+":auto";if(xui.Thread.isAlive(c)){return}var d=h.properties,l,g=(d.steps?100/d.steps:1)*(j?1:-1),f={delay:300},i=h.box._v2a(h,d.$UIvalue),k=function(){i[0]+=g;if(d.isRange){i[1]+=g}h.boxing().setUIValue(h.box._adjustValue(h,i));f.delay*=0.8};f.task=k;xui.Thread(c,[f],500,null,k,null,true).start()},_onresize:function(h,d,q){var c=h.properties,m=c.type,l=function(f){return h.getSubNode(f)},s=l("RULER"),g=l("IND"),r=l("RULERLEFT");if(m=="vertical"){var n=r.height(),k=c.showDecreaseHandle?l("DECREASE").height():0,j=c.showIncreaseHandle?l("INCREASE").height():0,i=l("IND1").height();if(q){s.top(k+n).height(q-k-j-2*n);g.top(k).height(h._size=q-k-j-i)}}else{var n=r.width(),k=c.showDecreaseHandle?l("DECREASE").width():0,j=c.showIncreaseHandle?l("INCREASE").width():0,i=l("IND1").width();if(d){s.left(k+n).width(d-k-j-2*n);g.left(k).width(h._size=d-k-j-i)}}}}});Class("xui.UI.Input",["xui.UI.Widget","xui.absValue"],{Instance:{_setTB:function(f){var d=this.get(0),h=d.properties,i,c;if(!d.host||!h.tipsBinder){return}var g=d.tips;c=d.tips=d.tips||h.tips||"";i=xui.getObject(h.tipsBinder)||((i=d.host[h.tipsBinder])&&i.get(0));if(i&&(i.key=="xui.UI.Span"||i.key=="xui.UI.Div"||i.key=="xui.UI.SLabel")){if(i.renderId){i.getRootNode().innerHTML=c.charAt(0)=="$"?xui.wrapRes(c):c;i.getRoot().css("color",f==1?"gray":f==2?"red":"#000")}}if(g!==d.tips&&xui.Tips&&xui.Tips.getTips()){xui.Tips.setTips(d.tips)}},activate:function(){var c=this.get(0);if(c&&c.renderId){var d=c.getSubNode("INPUT").get(0);if(d){try{d.focus();if(!xui.browser.isTouch){d.tagName.toLowerCase()=="input"&&d.select()}}catch(f){}delete c._justFocus}}return this},_setCtrlValue:function(c){if(_.isNull(c)||!_.isDefined(c)){c=""}return this.each(function(d){if(d.$Mask&&!c){c=d.$Mask}d.$_inner=1;d.getSubNode("INPUT").attr("value",c+"");delete d.$_inner})},_getCtrlValue:function(){var d=this.getSubNode("INPUT"),c=(d&&!d.isEmpty())?this.getSubNode("INPUT").attr("value"):"";if(c.indexOf("\r")!=-1){c=c.replace(/(\r\n|\r)/g,"\n")}if(this.get(0).$Mask&&this.get(0).$Mask==c){c=""}return c},_setDirtyMark:function(){return this.each(function(f){var k=f.properties,c=f.getSubNode("INPUT"),n=f.box,i=f.boxing(),j=xui.UI.$css_tag_dirty,m=xui.UI.$css_tag_invalid,l=k.value!==k.$UIvalue;var h=f.tips;if(f._inValid==2){f.tips=k.tipsErr||k.tips}else{if(f._inValid==1){f.tips=k.tips}else{f.tips=k.tipsOK||k.tips}}if(h!==f.tips&&xui.Tips&&xui.Tips.getTips()){xui.Tips.setTips(f.tips)}if(f._dirtyFlag!==l){if(k.dirtyMark&&k.showDirtyMark){if(f.beforeDirtyMark&&false===i.beforeDirtyMark(f,l)){}else{if(f._dirtyFlag=l){c.addClass(j)}else{c.removeClass(j)}}}f._dirtyFlag=l}if(f.beforeFormatMark&&false===i.beforeFormatMark(f,f._inValid==2)){}else{var g=f.getSubNode("ERROR");if(f._inValid==2){c.addClass(m);g.css("display","block")}else{c.removeClass(m);g.css("display","none")}}i._setTB(f._inValid)})}},Initialize:function(){var c=this.getTemplate();_.merge(c.FRAME.BORDER,{style:"",LABEL:{style:"{labelShow};width:{labelSize}px;{labelHAlign}",text:"{labelCaption}"},BOX:{WRAP:{tagName:"div",INPUT:{tagName:"input",type:"{_type}",maxlength:"{maxlength}",tabindex:"{tabindex}",placeholder:"{placeholder}",style:"{_css};{hAlign};"}}}},"all");c.FRAME.ERROR={};this.setTemplate(c)},Static:{_maskMap:{"~":"[+-]","1":"[0-9]",a:"[A-Za-z]",u:"[A-Z]",l:"[a-z]","*":"[A-Za-z0-9]"},_maskSpace:"_",Appearances:{KEY:{"font-family":'"Verdana", "Helvetica", "sans-serif"',position:"relative"},BORDER:{"line-height":"0px","font-size":"0px"},LABEL:{"z-index":1,top:0,left:0,position:"absolute","padding-top":"4px","font-size":"12px"},WRAP:{left:0,position:"absolute",overflow:(xui.browser.gek&&xui.browser.ver<3)?"auto":"hidden"},BOX:{left:0,top:0,position:"absolute","background-image":xui.UI.$bg("inputbg.gif","","Input"),"background-repeat":"repeat-x","background-color":"#fff",border:"solid 1px #B5B8C8","z-index":10},"KEY-readonly input":{$order:2,color:"#909090",cursor:"pointer"},"KEY-readonly BOX, KEY-inputreadonly BOX":{$order:2,background:"#eee"},"BOX-focus, BOX-mouseover":{"border-color":"#7EADD9"},INPUT:{"padding-top":"2px","padding-left":"2px","padding-right":"2px","background-color":"transparent","background-image":xui.browser.ie?"url(.)":null,border:0,margin:0,"margin-top":xui.browser.ie?"-1px":null,"font-size":"12px",position:"relative",width:"102px",overflow:"auto","overflow-y":"auto","overflow-x":"hidden",resize:"none"},ERROR:{width:"9px",height:"9px",position:"absolute",right:"2px",top:"2px",display:"none","font-size":0,"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"left -244px","z-index":"50"},".setting-xui-input":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"},"KEY-b-t":{height:"2px",top:"-1px","background-image":xui.UI.$bg("vertical.gif","","Input"),"background-repeat":"repeat-x","background-position":"left top"},"KEY-b-b":{height:"2px",bottom:"-1px","background-image":xui.UI.$bg("vertical.gif","","Input"),"background-repeat":"repeat-x","background-position":"left bottom"},"BOX-focus KEY-b-t, BOX-focus KEY-b-b, BOX-mouseover KEY-b-t, BOX-mouseover KEY-b-b":{$order:1,"background-image":xui.UI.$bg("vertical_mouseover.gif","","Input")},"KEY-b-l":{width:"2px",left:"-1px","background-image":xui.UI.$bg("horizontal.gif","","Input"),"background-repeat":"repeat-y","background-position":"left top"},"KEY-b-r":{width:"2px",right:"-1px","background-image":xui.UI.$bg("horizontal.gif","","Input"),"background-repeat":"repeat-y","background-position":"right top"},"BOX-focus KEY-b-l, BOX-focus KEY-b-r, BOX-mouseover KEY-b-l, BOX-mouseover KEY-b-r":{$order:1,"background-image":xui.UI.$bg("horizontal_mouseover.gif","","Input")},"KEY-b-lt":{width:"2px",height:"2px",left:"-1px",top:"-1px","background-image":xui.UI.$bg("corner.gif","","Input"),"background-repeat":"no-repeat","background-position":"left top"},"KEY-b-rt":{width:"2px",height:"2px",right:"-1px",top:"-1px","background-image":xui.UI.$bg("corner.gif","","Input"),"background-repeat":"no-repeat","background-position":"right top"},"KEY-b-rb":{width:"2px",height:"2px",right:"-1px",bottom:"-1px","background-image":xui.UI.$bg("corner.gif","","Input"),"background-repeat":"no-repeat","background-position":"right bottom"},"KEY-b-lb":{width:"2px",height:"2px",left:"-1px",bottom:"-1px","background-image":xui.UI.$bg("corner.gif","","Input"),"background-repeat":"no-repeat","background-position":"left bottom"},"BOX-focus KEY-b-lt, BOX-focus KEY-b-rt, BOX-focus KEY-b-rb, BOX-focus KEY-b-lb, BOX-mouseover KEY-b-lt, BOX-mouseover KEY-b-rt, BOX-mouseover KEY-b-rb, BOX-mouseover KEY-b-lb":{$order:1,"background-image":xui.UI.$bg("corner_mouseover.gif","","Input")}},Behaviors:{HoverEffected:{BOX:["BOX"]},NavKeys:{INPUT:1},LABEL:{onClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onLabelClick){c.boxing().onLabelClick(c,d,f)}},onDblClick:function(c,d,f){if(c.properties.disabled){return false}if(c.onLabelDblClick){c.boxing().onLabelDblClick(c,d,f)}},onMousedown:function(c,d,f){if(xui.Event.getBtn(d)!="left"){return}if(c.properties.disabled){return false}if(c.onLabelActive){c.boxing().onLabelActive(c,d,f)}}},INPUT:{onChange:function(d,h,j){if(d.$_onedit||d.$_inner){return}var g=d.properties,c=d.box,i=d._inValid,f=xui.use(j).get(0).value;if(d.$Mask&&d.$Mask==f){f=""}d.boxing().setUIValue(f);g.$UIvalue=f;if(i!==d._inValid){if(d.renderId){d.boxing()._setDirtyMark()}}c._asyCheck(d)},onKeydown:function(h,j,l){var i=h.properties,d=h.box,c=i.multiLines,f=xui.Event,g=f.getKey(j);if(i.disabled||i.readonly){return}if(g.key=="enter"&&(!c||g.altKey)){xui.use(l).onChange()}d._asyCheck(h);if(i.mask){if(g.key.length>1){h.$ignore=true}else{delete h.$ignore}switch(g.key){case"backspace":d._changeMask(h,xui.use(l).get(0),"",false);return false;case"delete":d._changeMask(h,xui.use(l).get(0),"");return false}}},onKeypress:function(g,i,c){var f=g.properties,l=g.box,n=g.box,d=n._maskMap,h=xui.Event.getKey(i),m,j=xui.use(c).caret();if(g.beforeKeypress&&false===g.boxing().beforeKeypress(g,j,h,i,c)){return false}m=g.CF.beforeKeypress||g.$beforeKeypress;if(m&&false===m(g,j,h,i,c)){return false}l._asyCheck(g);if(f.mask){if(g.$ignore){delete g.$ignore;return true}if(h.ctrlKey||h.altKey){return true}n._changeMask(g,xui.use(c).get(0),h.key,true);return false}},onKeyup:function(d,h,i){var g=d.properties,c=d.box;if(xui.Event.getKey(h).key=="esc"){d.boxing().setUIValue(g.value,true);if(d.onCancel){d.boxing().onCancel(d)}}if(g.dynCheck){var f=xui.use(i).get(0).value;d.box._checkValid(d,f);d.boxing()._setDirtyMark()}c._asyCheck(d)},onMousedown:function(c,d,f){c._mousedownmark=1;_.asyRun(function(){if(c){delete c._mousedownmark}})},onMouseup:function(c,f,g){if(c.properties.selectOnFocus&&c._justFocus){var d=xui.use(g).get(0);if(!d.readOnly&&d.select){c.$mouseupDelayFun=_.asyRun(function(){delete c.$mouseupDelayFun;if(!xui.browser.isTouch){try{d.tagName.toLowerCase()=="input"&&d.select()}catch(h){}}})}delete c._justFocus}},onFocus:function(d,i,j){var h=d.properties,c=d.box;if(h.disabled||h.readonly){return false}if(d.onFocus){d.boxing().onFocus(d)}d.getSubNode("BORDER").tagClass("-focus");var f=xui.use(j).get(0);if(h.mask){var g=f.value;if(!g){d.$focusDelayFun=_.asyRun(function(){if(!d.box){return}delete d.$focusDelayFun;d.$_inner=true;f.value=d.$Mask;delete d.$_inner;c._setCaret(d,f)})}}if(h.selectOnFocus&&!f.readOnly&&f.select){if(xui.browser.kde){d.$focusDelayFun2=_.asyRun(function(){delete d.$focusDelayFun2;if(!xui.browser.isTouch){try{f.tagName.toLowerCase()=="input"&&f.select()}catch(k){}}})}else{if(!xui.browser.isTouch){try{f.tagName.toLowerCase()=="input"&&f.select()}catch(i){}}}if(d._mousedownmark){d._justFocus=1}}d.boxing()._setTB(3);c._asyCheck(d)},onBlur:function(d,h,i){_.resetRun(d.$xid+":asycheck");if(d.$focusDelayFun){_.clearTimeout(d.$focusDelayFun)}if(d.$focusDelayFun2){_.clearTimeout(d.$focusDelayFun2)}if(d.$focusDelayFun2){_.clearTimeout(d.$mouseupDelayFun)}var g=d.properties,c=d.box;if(g.disabled||g.readonly){return false}if(d.onBlur){d.boxing().onBlur(d)}if(d.destroyed){return false}d.getSubNode("BORDER").tagClass("-focus",false);var f=xui.use(i).get(0).value;if(d.$Mask&&d.$Mask==f){f=""}if(g.$UIvalue==f){d.box._checkValid(d,f)}d.boxing()._setDirtyMark();c._asyCheck(d,false)}}},DataModel:{selectable:true,_customBorder:"BOX",border:false,tipsErr:"",tipsOK:"",dynCheck:false,selectOnFocus:true,labelSize:{ini:0,action:function(c){this.getSubNode("LABEL").css({display:c?"":"none",width:(c||0)+"px"});xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},placeholder:{ini:"",action:function(c){this.getSubNode("INPUT").attr("placeholder",c)}},labelPos:{ini:"left",listbox:["left","top","right","bottom"],action:function(c){xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelGap:{ini:4,action:function(c){xui.UI.$doResize(this,this.properties.width,this.properties.height,true)}},labelCaption:{ini:"",action:function(c){c=(_.isSet(c)?c:"")+"";this.getSubNode("LABEL").html(xui.adjustRes(c,true))}},labelHAlign:{ini:"right",listbox:["","left","center","right"],action:function(c){this.getSubNode("LABEL").css("textAlign",c)}},valueFormat:{helpinput:[{caption:"required",id:"[^.*]"},{caption:"email",id:"^[\\w\\.=-]+@[\\w\\.-]+\\.[\\w\\.-]{2,4}$"},{caption:"charOnly",id:"^[a-zA-Z]*$"},{caption:"words",id:"^[\\w ]*$"},{caption:"integer",id:"^-?\\d\\d*$"},{caption:"positiveInteger",id:"^\\d\\d*$"},{caption:"number",id:"^-?(\\d\\d*\\.\\d*$)|(^-?\\d\\d*$)|(^-?\\.\\d\\d*$)"},{caption:"filepath",id:"([\\/]?[\\w_]+)+\\.\\w{1,9}$"},{caption:"URL",id:"^(http|https|ftp)\\:\\/\\/[\\w\\-\\_\\.]+[\\w\\-\\_](:[\\w]*)?\\/?([\\w\\-\\._\\?\\,\\'\\/\\\\\\+&amp;%\\$#\\=~])*$"},{caption:"color",id:"^\\#[0-9A-Fa-f]{6}$"},{caption:"HH:MM",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])$"},{caption:"HH:MM:SS",id:"^(([0-1][0-9])|([2][0-3])):([0-5][0-9])\\:([0-5][0-9])$"},{caption:"YYYY-MM-DD",id:"^([0-9]{4})\\-(([0][0-9])|([1][0-2]))\\-([0-3][0-9])$"},{caption:"DD/MM/YYYY",id:"^(([0-2][0-9])|([3][0-1]))/(([0][0-9])|([1][0-2]))/([0-9]{4})$"}]},mask:{action:function(f){var d=this,c=d.box;if(f){d.$MaskFormat=function(k,j){var h=k._maskMap,i=[],l=/[A-Za-z0-9]/;_.arr.each(j.split(""),function(n,m){i.push(h[n]||(l.test(n)?"":"\\")+n)});return"^"+i.join("")+"$"}(c,f);d.$Mask=function(l,j){var h=l._maskMap,i=[],k=l._maskSpace;_.arr.each(j.split(""),function(n,m){i.push(h[n]?k:n)});return i.join("")}(c,f);var g=d.properties.$UIvalue;g=_.isSet(g)?(g+""):"";d.boxing()._setCtrlValue(g+d.$Mask.slice(g.length))}else{delete d.$MaskFormat;delete d.$Mask}}},value:"",width:120,height:22,disabled:{ini:false,action:function(c){var d=this.getSubNode("INPUT");if(c){d.addClass("xui-ui-inputdisabled")}else{d.removeClass("xui-ui-inputdisabled")}if((""+d.get(0).type).toLowerCase()!="button"){if(!c&&this.properties.readonly){c=true}d.attr("readonly",c)}}},hAlign:{ini:"",listbox:["","left","center","right"],action:function(c){this.getSubNode("INPUT").css("textAlign",c)}},readonly:{ini:false,action:function(d){var f=this.getSubNode("INPUT"),c=this.getClass("KEY","-readonly");if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}if((""+f.get(0).type).toLowerCase()!="button"){if(!d&&this.properties.disabled){d=true}f.attr("readonly",d)}}},type:{ini:"text",listbox:["text","password"],set:function(c){var d=this;d.properties.type=c;if(d.renderId){d.boxing().refresh(true)}}},maxlength:{ini:-1,action:function(c){this.getSubNode("INPUT").attr("maxlength",c)}},multiLines:{ini:false,action:function(c){this.boxing().refresh()}},tipsBinder:{ini:"",set:function(c){if(c["xui.UIProfile"]){c=c.$xid}if(c["xui.UI"]&&(c=c.get(0))){c=c.$xid}this.properties.tipsBinder=c+""}}},EventHandlers:{onFocus:function(c){},onBlur:function(c){},onCancel:function(c){},beforeFormatCheck:function(c,d){},beforeFormatMark:function(c,d){},beforeKeypress:function(d,h,c,f,g){},onLabelClick:function(c,d,f){},onLabelDblClick:function(c,d,f){},onLabelActive:function(c,d,f){}},_prepareData:function(c){var f=arguments.callee.upper.call(this,c);f._type=f.type||"";if(xui.browser.kde){f._css="resize:none;"}f.hAlign=f.hAlign?("text-align:"+f.hAlign):"";f.labelHAlign=f.labelHAlign?("text-align:"+f.labelHAlign):"";f.labelShow=f.labelSize?"":("display:none");if(f.labelCaption){f.labelCaption=xui.adjustRes(f.labelCaption,true)}return f},_dynamicTemplate:function(g){var d=g.properties,c,h=g._exhash="$multiLines:"+d.multiLines,f=g.box.getTemplate(h);d.$UIvalue=d.value;if(!f){f=_.clone(g.box.getTemplate());if(d.multiLines){c=f.FRAME.BORDER.BOX.WRAP.INPUT;c.tagName="textarea";delete c.type}g.box.setTemplate(f,h)}g.template=f},_ensureValue:function(c,d){return""+(_.isSet(d)?d:"")},RenderTrigger:function(){var d=this,h=d.properties;_.asyRun(function(){if(d.box){d.boxing()._setTB(1)}});d.getSubNode("WRAP").$firfox2();if(h.readonly){d.boxing().setReadonly(true,true)}if(h.tipsBinder){d.boxing().setTipsBinder(h.tipsBinder,true)}var j=xui.browser.ie,i=d.getSubNode("INPUT").get(0),c=d.box,g=function(f){if(j&&("propertyName" in f)&&f.propertyName!="value"){return}c._asyCheck(d,false)};if(j&&i.attachEvent){i.attachEvent("onpropertychange",g);i.attachEvent("ondrop",g);d.$ondestory=function(){var f=this.getSubNode("INPUT").get(0);if(f){f.detachEvent("onpropertychange",g);f.detachEvent("ondrop",g)}f=g=null}}else{i.addEventListener("input",g,false);i.addEventListener("drop",g,false);if(xui.browser.gek){i.addEventListener("dragdrop",g,false)}d.$ondestory=function(){var f=this.getSubNode("INPUT").get(0);if(f){f.removeEventListener("input",g,false);f.removeEventListener("drop",g,false);if(xui.browser.gek){f.removeEventListener("dragdrop",g,false)}}f=g=null}}i=null},LayoutTrigger:function(){var c=this.properties;if(c.mask){this.boxing().setMask(c.mask,true)}},_changeMask:function(g,j,k,s,d){if(false!==d){var B=this,r=g.properties,A=B._maskMap,u=B._maskSpace,c=r.mask,f=g.$Mask,l=xui(j),m=l.caret();if(s===false&&m[0]==m[1]&&m[0]>0){l.caret(m[0]-1,m[0])}if(s===undefined&&m[0]==m[1]){l.caret(m[0],m[0]+1)}if(s===true){if(f.charAt(m[0])!=u){var x=m[0]+f.substr(m[0],f.length).indexOf(u);l.caret(x,Math.max(m[1],x))}}var m=l.caret(),w=j.value,q=r.mask.charAt(m[0]),h=B._maskMap[q],y,n;if(h&&k&&k.length==1){if(q=="l"){k=k.toLowerCase()}else{if(q=="u"){k=k.toUpperCase()}}}if(h&&new RegExp("^"+h+"$").test(k)||k==""){n=w;if(m[0]!=m[1]){n=n.substr(0,m[0])+f.substr(m[0],m[1]-m[0])+n.substr(m[1],n.length-m[1])}if(k){n=n.substr(0,m[0])+k+n.substr(m[0]+1,n.length-m[0]-1)}var z=[];_.arr.each(c.split(""),function(v,p){z.push((new RegExp("^"+(A[v]?A[v]:"\\"+v)+"$").test(n.charAt(p)))?n.charAt(p):f.charAt(p))});if(s===true){k=f.substr(m[0]+1,w.length-m[0]-1);y=k.indexOf(u);y=m[0]+(y==-1?0:y)+1}else{y=m[0]}if(xui.browser.opr){if(s===undefined){_.arr.insertAny(z,u,y)}if(s===false){_.arr.insertAny(z,u,y++)}}w=z.join("");j.value=w;g.boxing().setUIValue(w==f?"":w);B._setCaret(g,j,y)}}else{var B=this,r=g.properties,A=B._maskMap,c=r.mask,f=g.$Mask,n=j.value,z=[];_.arr.each(c.split(""),function(v,p){z.push((new RegExp("^"+(A[v]?A[v]:"\\"+v)+"$").test(n.charAt(p)))?n.charAt(p):f.charAt(p))});w=z.join("");j.value=w;g.boxing().setUIValue(w==f?"":w)}},_setCaret:function(c,d,f){if(c.properties.mask){if(typeof f!="number"){f=d.value.indexOf(this._maskSpace)}xui(d).caret(f,f)}},_checkValid2:function(c){if(!c.renderId){return true}return this._checkValid(c,c.getSubNode("INPUT").get(0).value)},_checkValid:function(f,g){var h=f.properties,d=(h.mask&&f.$MaskFormat),c=h.valueFormat||f.$valueFormat;if((f.beforeFormatCheck&&(f.boxing().beforeFormatCheck(f,g)===false))||(((g&&g.length)&&f.$Mask!==g)&&(d&&typeof d=="string"&&!(new RegExp(d)).test((g===0?"0":g)||"")))||(c&&typeof c=="string"&&!(new RegExp(c)).test((g===0?"0":g)||""))){f._inValid=2;return false}f._inValid=3;return true},_asyCheck:function(d,c){if(d.destroyed){return}if(!d.properties.dynCheck&&!d.properties.mask){return}_.resetRun(d.$xid+":asycheck",function(){if(!d.renderId){return}var g=d.getSubNode("INPUT"),h=g.get(0);if(!h){return}if(d.properties.mask){if(h.value.length!=d.$Mask.length){d.box._changeMask(d,h,"",true,c)}}if(d.properties.dynCheck){var f=h.value;if(d.$Mask&&d.$Mask==f){f=""}d.boxing().setUIValue(f,undefined,true)}})},_onresize:function(g,s,p){var x=1,d=1,j=xui.UI.$getCSSValue("xui-input-input","paddingTop"),c=xui.UI.$getCSSValue("xui-input-input","paddingLeft"),u=xui.UI.$getCSSValue("xui-input-input","paddingRight");var m=g.properties,r=g.getSubNode("BOX"),k=g.getSubNode("LABEL"),l=m.labelSize||0,v=m.labelGap||0,q=m.labelPos||"left",f=g.getSubNode("INPUT"),w=s,h=p,i=Math.max(0,(m.$b_lw||0)-x),n=Math.max(0,(m.$b_tw||0)-d);if(null!==w){w-=Math.max(x*2,(m.$b_lw||0)+(m.$b_rw||0));if(xui.browser.ie6){w=(parseInt(w/2,10))*2}}if(null!==h){h-=Math.max(d*2,(m.$b_lw||0)+(m.$b_rw||0));if(xui.browser.ie6){h=(parseInt(h/2,10))*2}if(xui.browser.ie6&&null===s){r.ieRemedy()}}r.cssRegion({left:i+(q=="left"?l:0),top:n+(q=="top"?l:0),width:w===null?null:Math.max(0,(w-((q=="left"||q=="right")?l:0))),height:h===null?null:Math.max(0,(h-((q=="top"||q=="bottom")?l:0)))});if(l){k.cssRegion({left:w===null?null:Math.max(0,q=="right"?(w-l+v):0),top:p===null?null:Math.max(0,q=="bottom"?(p-l+v):0),width:w===null?null:Math.max(0,((q=="left"||q=="right")?(l-v):w)),height:p===null?null:Math.max(0,((q=="top"||q=="bottom")?(l-v):p))})}if(w||h){f.cssSize({width:w?Math.max(0,(w-c-u-((q=="left"||q=="right")?l:0))):null,height:h?Math.max(0,(h-j-((q=="top"||q=="bottom")?l:0))):null})}if((g.$border||g.$shadow||g.$resizer)&&xui.browser.ie){r.ieRemedy()}}}});Class("xui.UI.RichEditor",["xui.UI","xui.absValue"],{Initialize:function(){this.addTemplateKeys(["TOOLBARBTN"])},Instance:{_setCtrlValue:function(c){if(!_.isSet(c)){c=""}return this.each(function(f){var h=f.$doc,d=h&&(h.body||h.documentElement);if(d){var g=window["/"];if(g&&g.indexOf(":/")!=-1){c=c.replace(/{\/}/g,g)}d.innerHTML=xui.adjustRes(c,0,1)}})},_getCtrlValue:function(){var f=this.get(0),h=f.$doc,c=h&&(h.body||h.documentElement);if(c){var d=c.innerHTML,g=window["/"];if(g&&g.indexOf(":/")!=-1){d=d.replace(new RegExp(g,"g"),"{/}")}return d}return""}},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className} xui-ui-selectable",EDITOR:{tagName:"div"},POOL:{}},DataModel:{selectable:true,value:"",width:400,height:300,frameTemplate:{ini:'<html style="overflow: auto; -webkit-overflow-scrolling: touch;padding:0;margin:0;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"> <style type="text/css">body{height: 100%;overflow: auto; -webkit-overflow-scrolling: touch;border:0;margin:0;padding:0;margin:0;cursor:text;background:#fff;color:#000;font-size:12px;}p{margin:0;padding:0;} div{margin:0;padding:0;}</style></head><body scroll="auto" spellcheck="false"></body></html>',action:function(){this.boxing().refresh()}},cmdList:{ini:"font1;font2;align;list;font4;font3;insert;clear;html",action:function(c){var d=this;if(!d.properties.disabled&&!d.properties.readonly){d.box._iniToolBar(d)}}},disabled:{ini:false,action:function(c){var c=this.properties.disabled||this.properties.readonly,d=this.$doc;if(d){if(d.body.contentEditable!=undefined&&xui.browser.ie){d.body.contentEditable=c?"false":"true"}else{d.designMode=c?"off":"on"}this.box._iniToolBar(this,!c)}}},readonly:{ini:false,action:function(c){this.boxing().setDisabled(c)}}},Appearances:{POOL:{position:"absolute",display:"none"},TOOLBARBTN:{background:xui.UI.$bg("toolbar.gif","no-repeat")},EDITOR:{position:"absolute",display:"block",left:0,top:0,width:"100%",height:"100%",padding:0,margin:0,border:"1px solid #648CB4","background-color":"#fff","z-index":"0"}},Behaviors:{onSize:xui.UI.$onSize},$cmds:{font1:[{id:"bold",command:"Bold",statusButton:true,imagePos:"-36px 0"},{id:"italic",command:"Italic",statusButton:true,imagePos:"-108px 0"},{id:"underline",command:"Underline",statusButton:true,imagePos:"-324px 0"},{id:"strikethrough",command:"strikeThrough",statusButton:true,imagePos:"-252px 0"}],font2:[{id:"subscript",command:"subscript",statusButton:true,imagePos:"-270px 0"},{id:"superscript",command:"superscript",statusButton:true,imagePos:"-288px 0"}],font3:[{id:"forecolor",command:"custom",imagePos:"0 0"},{id:"bgcolor",command:"custom",imagePos:"-18px 0"}],font4:[{id:"fontsize",command:"custom",caption:"$editor.fontsize",dropButton:true},{id:"fontname",command:"custom",caption:"$editor.fontname",dropButton:true},{id:"formatblock",command:"custom",caption:"$editor.formatblock",dropButton:true}],align:[{id:"left",command:"justifyleft",imagePos:"-144px 0"},{id:"center",command:"justifycenter",imagePos:"-54px 0"},{id:"right",command:"justifyright",imagePos:"-216px 0"},{id:"justify",command:"justifyfull",imagePos:"-126px 0"}],list:[{id:"indent",command:"indent",imagePos:"-90px 0"},{id:"outdent",command:"outdent",imagePos:"-180px 0"},{id:"ol",command:"insertorderedlist",imagePos:"-162px 0"},{id:"ul",command:"insertunorderedlist",imagePos:"-306px 0"}],insert:[{id:"hr",command:"insertHorizontalRule",imagePos:"-72px 0"},{id:"insertimage",command:"custom",imagePos:"-342px 0"},{id:"createlink",command:"custom",imagePos:"-360px 0"},{id:"unlink",command:"unlink",imagePos:"-378px 0"}],clear:[{id:"removeformat",command:"removeformat",imagePos:"-198px 0"}],html:[{id:"html",command:"custom",imagePos:"-234px 0"}]},_updateToolbar:function(g,j){var f=xui.$cache.profileMap[g],m;if(!f){return}if(f.properties.disabled||f.properties.readonly){return}if(f&&(m=f.$toolbar)){var n=f.$doc,k=j?false:n.queryCommandState("bold"),i=j?false:n.queryCommandState("italic"),d=j?false:n.queryCommandState("underline"),c=j?false:n.queryCommandState("strikethrough"),l=j?false:n.queryCommandState("subscript"),p=j?false:n.queryCommandState("superscript"),h=m.boxing();h.updateItem("bold",{value:k});h.updateItem("italic",{value:i});h.updateItem("underline",{value:d});h.updateItem("strikethrough",{value:c});h.updateItem("subscript",{value:l});h.updateItem("superscript",{value:p});n=null}},RenderTrigger:function(){var r=this;if(!r.properties.disabled&&!r.properties.readonly){r.box._iniToolBar(r)}if(!r.$inDesign){var d=r.getSubNode("EDITOR").get(0),i=r.$domId,q=r.properties.frameTemplate,f=d.id;if(!r.$once){r.$once=true;try{var l=r.$ifr=document.createElement("IFRAME")}catch(n){var l=r.$ifr=document.createElement("<iframe name='"+f+"' id='"+f+"'></iframe>")}var k=this,c=r._event=function(u){if(k&&(k.properties.disabled||k.properties.readonly)){return}_.resetRun("RichEditor:"+i,function(){if(!k.box){return}xui.UI.RichEditor._updateToolbar(i)},100);if(u.type=="mousedown"){xui.doc.onMousedown(true)}},g=function(u){if(!k){return}if(k.properties.disabled||k.properties.readonly){return}k.box._onchange(k)},s=function(u){if(!k){return}if(k.properties.disabled||k.properties.readonly){return}_.resetRun("RichEditor:"+i,function(){if(!k.box){return}xui.UI.RichEditor._updateToolbar(i,true)},100);if(k._onchangethread){clearInterval(k._onchangethread);k._onchangethread=null;if(k&&k.box){k.box._checkc(k)}}},j=function(v){if(k){var u=k.boxing();_.asyRun(function(){if(!k.box){return}u.refresh()})}},p,m,h=function(){_.setTimeout(function(){if(!frames[f]){return}if(!frames[f].document){return}if(r.$win!=frames[f].window){m=r.$win=frames[f].window;p=r.$doc=m.document;p.open();p.write(q);p.close();try{p.execCommand("styleWithCSS",0,false)}catch(w){try{p.execCommand("useCSS",0,true)}catch(w){}}var u=r.properties.disabled||r.properties.readonly;if(p.body.contentEditable!=undefined&&xui.browser.ie){p.body.contentEditable=u?"false":"true"}else{p.designMode=u?"off":"on"}if(u){r.box._iniToolBar(r,false)}m._gekfix=j;if(xui.browser.ie&&p.attachEvent){p.attachEvent("unload",j);if(!u){p.attachEvent("onmousedown",c);p.attachEvent("ondblclick",c);p.attachEvent("onclick",c);p.attachEvent("onkeyup",c);p.attachEvent("onkeydown",c);m.attachEvent("onfocus",g);m.attachEvent("onblur",s);(r.$beforeDestroy=(r.$beforeDestroy||{}))["ifmClearMem"]=function(){var B=this.$win,A=this.$doc,y=this._event;if(this._onchangethread){clearInterval(this._onchangethread);this._onchangethread=null}try{var x=A.designMode;A.designMode="off";A.designMode="on";A.designMode=x}catch(z){}B._gekfix=undefined;try{A.detachEvent("unload",B._gekfix)}catch(z){}if(!this.properties.disabled&&!this.properties.readonly){A.detachEvent("onmousedown",y);A.detachEvent("ondblclick",y);A.detachEvent("onclick",y);A.detachEvent("onkeyup",y);A.detachEvent("onkeydown",y);B.detachEvent("onfocus",g);B.detachEvent("onblur",s)}B=A=y=null}}}else{var v=r;if(xui.browser.opr||!m.addEventListener){v.$repeatT=xui.Thread.repeat(function(){if(!frames[f]){return false}else{if(!v.$win.document||!v.$win.document.defaultView){v.boxing().refresh()}}},99)}else{m.addEventListener("unload",j,false)}if(!u){p.addEventListener("mousedown",c,false);p.addEventListener("dblclick",c,false);p.addEventListener("click",c,false);p.addEventListener("keyup",c,false);if(xui.browser.gek||!m.addEventListener){p.addEventListener("focus",g,false);p.addEventListener("blur",s,false);p.addEventListener("keypress",c,false)}else{m.addEventListener("focus",g,false);m.addEventListener("blur",s,false);p.addEventListener("keydown",c,false)}}(r.$beforeDestroy=(r.$beforeDestroy||{}))["ifmClearMem"]=function(){var A=this.$win,z=this.$doc,B=this.$ifr,x=this._event;if(xui.browser.opr){if(v.$repeatT){v.$repeatT.abort()}}if(B.detachEvent){B.detachEvent("onload",h)}else{B.onload=null}try{A.removeEventListener("unload",A._gekfix,false)}catch(y){}A._gekfix=undefined;delete frames[this.$frameId];if(!this.properties.disabled&&!this.properties.readonly&&z.removeEventListener){z.removeEventListener("mousedown",x,false);z.removeEventListener("dblclick",x,false);z.removeEventListener("click",x,false);z.removeEventListener("keyup",x,false);if(xui.browser.gek||!A.removeEventListener){z.removeEventListener("focus",g,false);z.removeEventListener("blur",s,false);z.removeEventListener("keypress",x,false)}else{A.removeEventListener("focus",g,false);A.removeEventListener("blur",s,false);z.removeEventListener("keydown",x,false)}}v=j=x=A=z=null}}r.boxing()._setCtrlValue(r.properties.$UIvalue||"");l.style.visibility=""}})};r.$frameId=f;l.id=l.name=f;l.className=d.className;l.src="about:blank";l.frameBorder=0;l.border=0;l.scrolling="no";l.marginWidth=0;l.marginHeight=0;l.tabIndex=-1;l.allowTransparency="allowtransparency";l.style.visibility="hidden";xui.$cache.domPurgeData[l.$xid=d.$xid].element=l;d.parentNode.replaceChild(l,d);if(l.attachEvent){l.attachEvent("onload",h)}else{l.onload=h}}}},_checkc:function(d){if(d&&d.$doc){var f=d.$doc,c=f&&(f.body||f.documentElement);if(!d.__oldv){d.__oldv=c.innerHTML}if(c.innerHTML!=d.__oldv){d.__oldv=c.innerHTML;d.boxing().onChange(d)}}},_onchange:function(c){if(c.onChange){if(c._onchangethread){clearInterval(c._onchangethread);c._onchangethread=null}c._onchangethread=setInterval(function(){if(c&&c.box){c.box._checkc(c)}},500)}},_clearPool:function(c){c.getSubNode("POOL").empty();c.$colorPicker=c.$fontsizeList=c.$fontnameList=c.$formatblockList=c.$htmlEditor=null},_iniToolBar:function(d,j){var p=d,l=p.properties,q;if(p.$toolbar){p.$toolbar.boxing().destroy(true);delete p._$tb;delete p.$toolbar}if(j!==false){var n,m,c,i=[],k=p.getClass("TOOLBARBTN"),g=l.cmdList.split(";"),f={};_.arr.each(g,function(h){if((c=p.box.$cmds[h])&&!f[h]){f[h]=1;i.push({id:h,sub:c});_.arr.each(c,function(r){if(r.imagePos){r.imageClass=k}r.tips=xui.wrapRes("editor."+r.id)})}});p.getRoot().prepend(n=new xui.UI.ToolBar({selectable:false,handler:false,items:i,disabled:l.disabled||l.readonly}));n.render(true);d.$_tbH=q=n.getRoot().height();if(xui.browser.ie){n.getRoot().query("*").attr("unselectable","on")}n=p._$tb=n.get(0);n.onClick=p.box._toolbarclick;m=p._$composed={};m[n.$xid]=n;p.$toolbar=n;n.$hostage=p}xui.UI.$tryResize(d,l.width,l.height,true);return q},_toolbarclick:function(d,w,j,u,i){var g=d.$hostage;if(!g.$doc){return}var k=g.properties,h;g.$win.focus();if(w.command=="custom"){var s=w.id,p,f,r,n,v;switch(s){case"forecolor":case"bgcolor":if(!g.$colorPicker){h=true;g.$colorPicker=(new xui.UI.ColorPicker({selectable:false,barDisplay:false})).render(true)}p=g.$colorPicker;break;case"fontsize":case"fontname":case"formatblock":if(g.$lang!=xui.getLang()){g.box._clearPool(g)}g.$lang=xui.getLang();if(s=="fontsize"){if(!g.$fontsizeList){n=xui.getRes("editor.fontsizeList");n=n.split(";");v=[];var l;_.arr.each(n,function(y){y=y.split(",");l=y[0]=="..."?"1":y[0];v.push({id:y[0],caption:'<font size="'+y[0]+'" '+xui.$IEUNSELECTABLE()+">"+y[1]+"</font>"})});h=true;g.$fontsizeList=(new xui.UI.List({selectable:false,height:"auto",items:v,width:150})).render(true)}p=g.$fontsizeList}else{if(s=="fontname"){if(!g.$fontnameList){n=xui.getRes("editor.fontnameList");n=n.split(";");v=[];var l;_.arr.each(n,function(y){l=y=="..."?"":y;v.push({id:y,caption:'<span style="font-family:'+y+'" '+xui.$IEUNSELECTABLE()+">"+y+"</span>"})});h=true;g.$fontnameList=(new xui.UI.List({selectable:false,height:"auto",items:v})).render(true)}p=g.$fontnameList}else{if(s=="formatblock"){if(!g.$formatblockList){n=xui.getRes("editor.formatblockList");n=n.split(";");v=[];var l;_.arr.each(n,function(y){y=y.split(",");l=y[0]=="..."?"span":y[0];v.push({id:y[0],caption:"<"+l+' style="display:inline;padding:0;margin:0" '+xui.$IEUNSELECTABLE()+">"+y[1]+"</"+l+">"})});h=true;g.$formatblockList=(new xui.UI.List({selectable:false,height:"auto",items:v})).render(true)}p=g.$formatblockList}}}break;case"html":if(!g.$htmlEditor){h=true;g.$htmlEditor=new xui.UI.Input({multiLines:true,width:400,height:300,resizer:true})}p=g.$htmlEditor;break}if(p){f=function(){p.beforeUIValueSet(null);g.getSubNode("POOL").append(p.getRoot());r.setBlurTrigger(g.$xid);xui.Event.keyboardHook("esc");_.asyRun(function(){if(!g||!g.$win){return}g.$win.focus()})};p.setValue("",true);r=p.reBoxing();r.popToTop(i);if(h&&xui.browser.ie){p.getRoot().query("*").attr("unselectable","on")}_.tryF(p.activate,[],p);r.setBlurTrigger(g.$xid,function(){if(p==g.$htmlEditor){p.setUIValue(p._getCtrlValue())}f()});xui.Event.keyboardHook("esc",0,0,0,function(){f()},null,null,d.domId)}switch(s){case"forecolor":case"bgcolor":p.beforeUIValueSet(function(A,B,y){f();var z=g.$doc;if(s=="bgcolor"&&xui.browser.gek){z.execCommand("useCSS",0,false);z.execCommand("hilitecolor",false,"#"+y);z.execCommand("useCSS",0,true)}else{if(s=="bgcolor"){s=xui.browser.opr?"hilitecolor":"backcolor"}z.execCommand(s,false,xui.browser.kde?("#"+y):y)}z=null;return false});break;case"fontsize":case"fontname":case"formatblock":p.beforeUIValueSet(function(C,E,z){f();if(xui.browser.ie&&(z=="..."||s=="formatblock")){var A=g.$doc.selection,y=A?A.createRange():null;if(y&&y.parentElement().ownerDocument!=g.$doc){y=A=null}}var B=function(H,F){var J=g.$doc;if(y){g.$win.focus();if(H=="formatblock"&&F){var I=y.parentElement(),G;if(I.ownerDocument==J){if(/^\s*</.test(y.htmlText)){y.collapse(true);I=y.parentElement();if(I.tagName=="BODY"){G=I.innerHTML;I.innerHTML="<"+F+">"+G+"</"+F+">"}else{G=I.outerHTML;G=G.replace(/\<[\w]+/,"<"+F).replace(/[\w]+\>$/,F+">");I.outerHTML=G}}else{y.pasteHTML("<"+F+">"+y.htmlText+"</"+F+">")}}I=null}y.select();A=y=null}J.execCommand(H,false,F);J=null};if(z=="..."){var D=xui.getRes("editor."+s);xui.UI.Dialog.prompt(D,D,"",function(F){if(F){B(s,F)}},function(){if(xui.browser.ie){if(y){g.$win.focus();y.select()}A=y=null}})}else{B(s,z)}});break;case"insertimage":case"createlink":var q=xui.getRes("editor."+s),c=xui.getRes("editor."+s+"2");if(xui.browser.ie){var x=g.$doc.selection,m=x?x.createRange():null;if(m&&m.parentElement().ownerDocument!=g.$doc){m=x=null}}xui.UI.Dialog.prompt(q,c,"http://",function(y){if(xui.browser.ie){if(m){g.$win.focus();m.select()}x=m=null}if(y){var z=g.$doc;z.execCommand(s,false,xui.adjustRes(y,0,1));z=null}},function(){if(xui.browser.ie){if(m){g.$win.focus();m.select()}x=m=null}});break;case"html":p.setValue(g.boxing().getUIValue(),true);p.beforeUIValueSet(function(z,A,y){f();g.boxing().setUIValue(y)});break}}else{g.$doc.execCommand(w.command,false,w.commandArgs);if(w.id=="removeformat"){xui.UI.RichEditor._updateToolbar(g.$domId,true)}}},_ensureValue:function(c,d){var f=xui.$getGhostDiv();f.innerHTML=(_.isSet(d)?d:"")+"";d=f.innerHTML;f.innerHTML="";return d},_onresize:function(h,g,c){var f={},i=0;if(g||c){var j=h._$tb,d;if(j){d=j.getRoot().height();if(d){h.$_tbH=d}else{d=h.$_tbH}}i=(j?(d-1):0);if(!c){c=h.properties.height}f.height=c-i-2;if(g){f.width=g-2}}if(f.width<0){f.width=0}if(f.height<0){f.height=0}h.getSubNode("EDITOR").top(i).cssSize(f,true)}}});Class("xui.UI.ComboInput","xui.UI.Input",{Instance:{_adjustV:function(c){var d=this.get(0),f=d.properties;if(d.$isNumber){c=(""+c).replace(/[^\d.-]/g,"");c=_.isNumb(parseFloat(c))?_.toFixedNumber(c,f.precision):null}else{if(d.properties.type=="datepicker"||d.properties.type=="date"||d.properties.type=="datetime"){c=_.isDate(c)?c:_.isFinite(c)?new Date(parseInt(c,10)):null}else{if(typeof c=="string"&&c.indexOf("\r")!=-1){c=c.replace(/(\r\n|\r)/g,"\n")}}}return c},getValue:function(){var d=arguments.callee.upper,c=d.apply(this,_.toArr(arguments));d=null;return this._adjustV(c)},getUIValue:function(){var d=arguments.callee.upper,c=d.apply(this,_.toArr(arguments));d=null;return this._adjustV(c)},_getCtrlValue:function(){return this.get(0).properties.$UIvalue},_setCtrlValue:function(h){var f=this,g=arguments.callee,d=g._r1||(g._r1=/\</),c=g._r2||(g._r2=/\<\/?[^>]+\>/g);return this.each(function(j){if(!j.$typeOK){j.box._iniType(j)}var k=j.getSubNode("INPUT"),i=j.properties.type;h=j.$_onedit?f._toEditor(h):f.getShowValue(h);if(i!=="none"&&i!=="input"&&i!=="password"&&!j.properties.multiLines&&typeof h=="string"&&d.test(h)){h=h.replace(c,"")}if(j.$Mask&&!h){h=j.$Mask}j.$_inner=1;k.attr("value",h||"");delete j.$_inner;if(i=="colorpicker"||i=="color"){k.css({backgroundColor:h,color:xui.UI.ColorPicker.getTextColor(h)})}})},_compareValue:function(g,f){var d=this.get(0),c;if(c=d.CF.compareValue||d.$compareValue){return c(d,g,f)}return g===f},getShowValue:function(h){var f=this.get(0),i=f.properties,c,d;if(!_.isDefined(h)){h=i.$UIvalue}if(d=f.CF.getShowValue||f.$getShowValue){c=d(f,h)}else{if("listbox"==i.type){var g=(i.listKey)?xui.UI.getCachedData(i.listKey):i.items;if(g&&(d=_.arr.subIndexOf(g,"id",h))!=-1){c=g[d].caption+"";if(c&&c.length>0){c=xui.adjustRes(c)}}else{c=null}}else{c=f.$showValue}}if(!_.isSet(c)&&(f.$inputReadonly||i.inputReadonly)){c=_.isSet(i.caption)?i.caption:null}return""+(_.isSet(c)?c:_.isSet(h)?h:"")},_toEditor:function(f){var d=this.get(0),g=d.properties,c;if(c=d.CF.toEditor||d.$toEditor){return c(d,f)}return f},_fromEditor:function(f){var d=this.get(0),g=d.properties,c;if(c=d.CF.fromEditor||d.$fromEditor){return c(d,f)}return f},_cache:function(c){if(this.isDestroyed()){return}var g=this.get(0);var d=g.$drop,f=g.properties.cachePopWnd;if(d){if(!f){d.boxing().destroy(true);delete g.$drop;if(c){g.boxing().activate()}}else{if(!g.__tryToHide){g.__tryToHide=_.asyRun(function(){if(!g.box){return}delete g.__tryToHide;if(xui.browser.opr){d.getRoot().css("display","none")}if(d.boxing()._clearMouseOver){d.boxing()._clearMouseOver()}g.getSubNode("POOL").append(d.getRoot());if(c){g.boxing().activate()}})}}}delete g.$poplink;return f},clearPopCache:function(){var c=this.get(0);if(c.renderId){c.getSubNode("POOL").empty()}delete c.$drop;return this},setUploadObj:function(d){var f=this.get(0),i=f.properties,h=xui(d).get(0);if(h.tagName&&h.tagName.toLowerCase()=="input"&&h.type=="file"){if(f.renderId&&(i.type=="upload"||i.type=="file")){var g=f.getSubNode("FILE").get(0);xui.setNodeData(h.$xid=g.$xid,"element",h);h.id=g.id;h.onclick=g.onclick;h.onchange=g.onchange;g.$xid=null;g.id=g.onclick=g.onchange=null;delete f.$_domid[f.keys.FILE];xui([g]).addPrev(h).remove(false);this.setUIValue(h.value||"")}}return this},getUploadObj:function(){var d=this.get(0),h=d.properties;if(d.renderId&&(h.type=="upload"||h.type=="file")){var f=d.getSubNode("FILE").get(0);if(!f.value){return null}var g=f.cloneNode(false);g.value="";xui.setNodeData(g.$xid=f.$xid,"element",g);g.onclick=f.onclick;g.onchange=f.onchange;f.$xid=null;f.id=f.onclick=f.onchange=null;delete d.$_domid[d.keys.FILE];xui([f]).addPrev(g).remove(false);g=null;this.setUIValue(this.getValue());return f}},resetValue:function(f){this.each(function(g){if(g.properties.type=="upload"||g.properties.type=="file"){g.getSubNode("FILE").attr("value","")}});var c=arguments.callee.upper,d=c.apply(this,_.toArr(arguments));c=null;return d},_drop:function(c,d){return this.each(function(h){var p=h.properties,l=p.type,n=p.cachePopWnd;if(p.disabled||p.readonly){return}if(l=="upload"||l=="file"||l=="none"||l=="input"||l=="password"||l=="spin"||l=="currency"||l=="number"){return}if(h.$poplink){return}var f,q,j=h.boxing(),i=h.getRoot(),m=i.offset(),s=i.cssSize();s.width+=2;m.top+=i.offsetHeight();if((h.beforeComboPop&&false===j.beforeComboPop(h,m,c,d))||l=="getter"||l=="cmdbox"||l=="popbox"){return}if(h.__tryToHide){_.clearTimeout(h.__tryToHide);delete h.__tryToHide}var k;if(n){switch(l){case"timepicker":case"time":case"datepicker":case"date":case"datetime":case"colorpicker":case"color":k=l;break;default:if(p.listKey){if(typeof _.get(xui.$cache,["UIDATA",p.listKey])=="function"){h.$drop=k=null}else{k="!"+p.listKey}}else{k="$"+h.$xid}}if(k){_.filter(h.box.$drop,function(u){return !!u.renderId});h.$drop=h.box.$drop[k]}}if(!h.$drop){switch(l){case"combobox":case"listbox":case"helpinput":f=xui.create("List");f.setHost(h).setDirtyMark(false).setItems(_.copy(p.items)).setListKey(p.listKey||"");f.setWidth(p.dropListWidth||(p.width-(p.labelSize||0)));if(p.dropListHeight){f.setHeight(p.dropListHeight)}else{f.setHeight("auto")}f.afterClick(function(){if(!this.destroyed){this.boxing()._cache(true)}else{f.destroy(true)}return false});f.beforeUIValueSet(function(y,x,w){var u=this.boxing();if(l=="combobox"){var v=y.queryItems(y.properties.items,function(z){return z.id==w},false,true);if(v.length){w=v[0].caption}}u.setUIValue(w);return u._cache(true)});break;case"time":case"timepicker":f=xui.create("TimePicker");f.setHost(h);f.beforeClose(function(){if(!this.destroyed){this.boxing()._cache(true)}return false});f.beforeUIValueSet(function(x,y,w){var u=this.boxing();u.setUIValue(w);return u._cache(true)});break;case"date":case"datepicker":case"datetime":f=xui.create("DatePicker");if(l=="datetime"){f.setTimeInput(true)}f.setHost(h);f.beforeClose(function(){if(!this.destroyed){this.boxing()._cache(true)}else{f.destroy(true)}return false});f.beforeUIValueSet(function(x,y,w){var u=this.boxing();u.setUIValue(String(w.getTime()));return u._cache(true)});break;case"color":case"colorpicker":f=xui.create("ColorPicker");f.setHost(h);f.beforeClose(function(){if(!this.destroyed){this.boxing()._cache(true)}else{f.destroy(true)}return false});f.beforeUIValueSet(function(x,y,w){var u=this.boxing();u.setUIValue((w=="transparent"?"":"#")+w);return u._cache(true)});break}if(_.isHash(p.popCtrlProp)&&!_.isEmpty(p.popCtrlProp)){f.setProperties(p.popCtrlProp)}if(_.isHash(p.popCtrlEvents)&&!_.isEmpty(p.popCtrlEvents)){f.setEvents(p.popCtrlEvents)}h.$drop=f.get(0);if(k){h.box.$drop[k]=h.$drop}f.render()}f=h.$drop.boxing();f.setHost(h);switch(l){case"combobox":case"listbox":case"helpinput":case"time":case"timepicker":f.setValue(h.properties.$UIvalue,true);break;case"date":case"datepicker":case"datetime":var r=h.$drop.properties;if(r=h.properties.$UIvalue){f.setValue(new Date(parseInt(r,10)),true)}break;case"color":case"colorpicker":f.setValue(h.properties.$UIvalue.replace("#",""),true);break}h.$poplink=f.get(0);if(h.beforePopShow&&false===j.beforePopShow(h,h.$drop)){return}var g=f.reBoxing();g.popToTop(h.getSubNode("BOX"));_.tryF(f.activate,[],f);g.setBlurTrigger(h.key+":"+h.$xid,function(){j._cache()});xui.Event.keyboardHookUp("esc",0,0,0,function(){h.$escclosedrop=1;_.asyRun(function(){delete h.$escclosedrop});j.activate();xui.Event.keyboardHook("esc");j._cache(true)});if(h.afterPopShow){j.afterPopShow(h,h.$drop)}})},expand:function(){var c=this.get(0);if(c.renderId){c.boxing()._drop()}},collapse:function(){var c=this.get(0);if(c.renderId&&c.$poplink){c.boxing()._cache()}},getPopWnd:function(d){var c=this.get(0);if(c.$drop&&(d||c.$poplink)){return c.$drop.boxing()}}},Initialize:function(){this.addTemplateKeys(["FILE","BTN","TOP","MID","RBTN","R1","R1T","R1B","R2","R2T","R2B"]);var c=this.getTemplate();_.merge(c.FRAME.BORDER,{SBTN:{$order:50,className:"xui-ui-unselectable",style:"{_saveDisplay}",STOP:{},SMID:{className:"{_commandCls}"}}},"all");c.FRAME.POOL={};c.className+=" {typecls}";this.setTemplate(c);this._adjustItems=xui.absList._adjustItems},Static:{_beforeResetValue:function(c){c.properties.caption=undefined},_iniType:function(h){var i=h.properties,g=i.type,j=h.box;delete h.$beforeKeypress;delete h.$inputReadonly;delete h.$isNumber;delete h.$compareValue;delete h.$getShowValue;delete h.$toEditor;delete h.$fromEditor;delete h.$typeOK;if(g=="listbox"||g=="upload"||g=="file"||g=="cmdbox"){h.$inputReadonly=true}if(g!="listbox"&&g!="combobox"&&g!="helpinput"){i.items=[]}if(g=="timepicker"||g=="time"){var f={a:1,c:1,v:1,x:1};_.merge(h,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[-0-9:]/.test(l.key)||(l.ctrlKey&&!!f[l.key])},$getShowValue:function(k,c){return c?xui.UI.TimePicker._ensureValue(k,c):""},$fromEditor:function(k,c){if(c){c=xui.UI.TimePicker._ensureValue(k,c);if(c=="00:00"){c=k.properties.$UIvalue}}return c}},"all")}else{if(g=="datepicker"||g=="date"||g=="datetime"){var d=xui.Date;var f={a:1,c:1,v:1,x:1};_.merge(h,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[0-9:/\-_ ]/.test(l.key)||(l.ctrlKey&&!!f[l.key])},$compareValue:function(l,k,c){return(!k&&!c)||(String(k)==String(c))},$getShowValue:function(k,c){if(k.properties.dateEditorTpl){return c?d.format(c,k.properties.dateEditorTpl):""}else{return c?d.getText(new Date(parseInt(c,10)),k.properties.type=="datetime"?"ymdhn":"ymd"):""}},$toEditor:function(q,k){if(!k){return""}k=new Date(parseInt(k,10)||0);if(q.properties.dateEditorTpl){return d.format(k,q.properties.dateEditorTpl)}else{var c=(d.get(k,"m")+1)+"",r=d.get(k,"d")+"",l=d.get(k,"h")+"",s=d.get(k,"n")+"";return d.get(k,"y")+"-"+(c.length==1?"0":"")+c+"-"+(r.length==1?"0":"")+r+(q.properties.type=="datetime"?(" "+(l.length==1?"0":"")+l+":"+(s.length==1?"0":"")+s):"")}},$fromEditor:function(k,c){if(c){if(k.properties.dateEditorTpl){c=d.parse(c,k.properties.dateEditorTpl)}else{c=xui.Date.parse(c)}if(!c){c=k.properties.$UIvalue;if(_.isFinite(c)){c=new Date(parseInt(c,10))}}if(c){if(k.properties.type!="datetime"){c=d.getTimSpanStart(c,"d",1)}if(c.getFullYear()<k.properties.min){c.setTime(k.properties.min)}if(c.getFullYear()>k.properties.max){c.setTime(k.properties.max)}}}return c?String(c.getTime()):""}},"all")}else{if(g=="currency"){h.$isNumber=1;var f={a:1,c:1,v:1,x:1};_.merge(h,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[-0-9,. ]/.test(l.key)||(l.ctrlKey&&!!f[l.key])},$compareValue:function(l,k,c){return((k===""&&c!=="")||(c===""&&k!==""))?false:l.box._number(l,k)==l.box._number(l,c)},$getShowValue:function(l,k){var c=l.properties;if(_.isSet(k)&&k!==""){k=_.formatNumeric(l.box._number(l,k),c.precision,c.groupingSeparator,c.decimalSeparator,c.forceFillZero);if(l.properties.currencyTpl){k=l.properties.currencyTpl.replace("*",k)}}else{k=""}return k},$toEditor:function(l,k){var c=l.properties;return(_.isSet(k)&&k!=="")?_.formatNumeric(l.box._number(l,k),c.precision,c.groupingSeparator,c.decimalSeparator,c.forceFillZero):""},$fromEditor:function(k,c){return(_.isSet(c)&&c!=="")?k.box._number(k,c):""}},"all")}else{if(g=="number"||g=="spin"){h.$isNumber=1;var f={a:1,c:1,v:1,x:1};_.merge(h,{$beforeKeypress:function(m,n,l){return l.key.length!=1||/[-0-9. ]/.test(l.key)||(l.ctrlKey&&!!f[l.key])},$compareValue:function(l,k,c){return((k===""&&c!=="")||(c===""&&k!==""))?false:l.box._number(l,k)==l.box._number(l,c)},$getShowValue:function(l,k){var c=l.properties;k=(_.isSet(k)&&k!=="")?_.formatNumeric(l.box._number(l,k),c.precision,c.groupingSeparator,c.decimalSeparator,c.forceFillZero):"";if(l.properties.numberTpl){k=l.properties.numberTpl.replace("*",k)}return k},$toEditor:function(l,k){var c=l.properties;return(_.isSet(k)&&k!=="")?_.formatNumeric(l.box._number(l,k),c.precision,c.groupingSeparator,c.decimalSeparator,c.forceFillZero):""},$fromEditor:function(k,c){return(_.isSet(c)&&c!=="")?k.box._number(k,c):""}},"all")}}}}if(i.value){i.$UIvalue=i.value=j._ensureValue(h,i.value)}h.$typeOK=true},$drop:{},Appearances:{POOL:{position:"absolute",left:0,top:0,width:0,height:0,display:"none",visibility:"hidden"},FILE:{opacity:0,filter:(xui.browser.ie&&xui.browser.ver<9)?"alpha(opacity=0)":null,"z-index":"3",border:0,height:"100%",width:"100%",position:"absolute",top:0,right:0,cursor:"pointer","font-size":"12px",overflow:"hidden"},"KEY-type-number INPUT, KEY-type-spin INPUT, KEY-type-currency INPUT":{$order:4,"text-align":"right"},"KEY-type-file INPUT, KEY-type-cmdbox INPUT, KEY-type-listbox INPUT":{$order:4,cursor:"pointer","text-align":"left",overflow:"hidden"},"KEY-type-file BOX, KEY-type-cmdbox BOX, KEY-type-listbox BOX":{$order:4,"background-image":xui.UI.$bg("inputbgb.gif","","Input"),"background-repeat":"repeat-x","background-position":"left bottom","background-color":"#fff"},"RBTN,SBTN,BTN":{display:"block","z-index":"1",cursor:"pointer",width:"16px",height:"20px","font-size":0,"line-height":0,position:"absolute"},SBTN:{$order:2,"z-index":"6"},"SBTN,BTN,R1,R2":{"margin-top":"2px"},"R1, R2, BTN, SBTN, STOP, TOP, R1T, R2T, R1B, R2B, SMID,MID":{"background-image":xui.UI.$bg("bg.gif")},"SBTN, BTN":{$order:1,"background-position":"left bottom"},"R1,R2":{$order:1,display:"block","font-size":0,"line-height":0,cursor:"pointer",width:"16px",position:"absolute",height:"50%","background-position":"left bottom","margin-top":"2px"},R1:{top:0},R2:{bottom:"-2px"},"BTN-mouseover, SBTN-mouseover, R1-mouseover, R2-mouseover":{$order:2,"background-position":"-16px bottom"},"BTN-mousedown, SBTN-mousedown, R1-mousedown, R2-mousedown":{$order:3,"background-position":"-32px bottom"},"STOP, TOP, R1T, R2T":{$order:1,cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",top:"-2px",left:0,height:"4px","background-position":"left -104px"},"BTN-mouseover TOP,SBTN-mouseover STOP, R1-mouseover R1T, R2-mouseover R2T":{$order:2,"background-position":"-16px -104px"},"BTN-mousedown TOP,SBTN-mousedown STOP, R1-mousedown R1T, R2-mousedown R2T":{$order:3,"background-position":"-32px -104px"},"R1B,R2B":{cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",left:0,top:"50%","margin-top":"-4px",height:"6px","z-index":2},R1B:{$order:1,"background-position":"-14px -36px"},R2B:{$order:1,"background-position":"left -5px"},"SMID,MID":{$order:2,cursor:"pointer",width:"16px","font-size":0,"line-height":0,position:"absolute",bottom:"0",left:0,height:"16px"},SMID:{$order:3,"background-position":"-16px -16px"},"SMID-save":{$order:8,"background-position":"-32px 0"},"SMID-delete":{$order:8,"background-position":"-32px -16px"},"SMID-add":{$order:8,"background-position":"-32px -32px"},"SMID-remove":{$order:8,"background-position":"-32px -48px"},"SMID-select":{$order:8,"background-position":"left -16px"},"SMID-pop":{$order:8,"background-position":"-32px -64px"},".setting-xui-comboinput":{"border-style":"solid","border-top-width":"1px","border-bottom-width":"1px","border-left-width":"1px","border-right-width":"1px"}},_objectProp:{tagVar:1,dockMargin:1,popCtrlProp:1,popCtrlEvents:1},Behaviors:{HoverEffected:{BOX:"BOX",BTN:"BTN",SBTN:"SBTN",R1:"R1",R2:"R2"},ClickEffected:{BTN:"BTN",SBTN:"SBTN",R1:"R1",R2:"R2"},FILE:{onClick:function(c,d,f){var g=c.properties;if(g.disabled||g.readonly){return}if(c.onFileDlgOpen){c.boxing().onFileDlgOpen(c,f)}},onChange:function(c,d,f){c.boxing().setUIValue(xui.use(f).get(0).value+"")}},BTN:{onClick:function(c,d,f){var g=c.properties;if(g.type=="popbox"||g.type=="getter"){if(c.onClick&&false===c.boxing().onClick(c,d,f,g.$UIvalue)){return}}if(g.disabled||g.readonly){return}c.boxing()._drop(d,f);return false}},SBTN:{onClick:function(c,d,f){var g=c.properties;if(g.disabled||g.readonly){return}if(c.onCommand){c.boxing().onCommand(c,f)}}},BOX:{onClick:function(c,d,f){var g=c.properties;if(g.type=="cmdbox"){if(c.onClick){c.boxing().onClick(c,d,f,g.$UIvalue)}}else{if(g.inputReadonly||c.$inputReadonly){if(g.disabled||g.readonly){return}c.boxing()._drop(d,f)}}}},INPUT:{onChange:function(g,i,k){if(g.$_onedit||g.$_inner){return}var j=g._inValid,d=g.box,c=g.boxing(),f=c._fromEditor(xui.use(k).get(0).value),h=g.properties.$UIvalue;if(!c._compareValue(h,f)){g.$_inner=1;delete g.$_inner;if(f===null){c._setCtrlValue(h)}else{c.setUIValue(f);g.properties.$UIvalue=f;if(j!==g._inValid){if(g.renderId){c._setDirtyMark()}}}}d._asyCheck(g)},onKeyup:function(f,i,j){var h=f.properties,c=f.box,d=xui.Event.getKey(i);if(h.disabled||h.readonly){return false}if(f.$inputReadonly||h.inputReadonly){return}if(d.key=="esc"){if(f.$escclosedrop){return}f.$_onedit=true;f.boxing().setUIValue(h.value,true);f.$_onedit=false;if(f.onCancel){f.boxing().onCancel(f)}}if(h.dynCheck){var g=xui.use(j).get(0).value;f.box._checkValid(f,g);f.boxing()._setDirtyMark()}c._asyCheck(f);if(d.key=="down"||d.key=="up"){if(h.type=="spin"){xui.Thread.abort(f.$xid+":spin");return false}}},onMousedown:function(c,d,f){c._mousedownmark=1;_.asyRun(function(){if(c){delete c._mousedownmark}})},onMouseup:function(c,f,g){if(c.properties.selectOnFocus&&c._stopmouseupcaret){var d=xui.use(g).get(0);if(!d.readOnly&&d.select){c.$mouseupDelayFun=_.asyRun(function(){delete c.$mouseupDelayFun;try{d.select()}catch(h){}})}delete c._stopmouseupcaret}},onFocus:function(g,h,c){var d=g.properties,i=g.box;if(d.disabled||d.readonly){return false}if(g.onFocus){g.boxing().onFocus(g)}if(g.$inputReadonly||d.inputReadonly){return}g.getSubNode("BORDER").tagClass("-focus");var m=g.boxing(),j=d.$UIvalue,l=m._toEditor(j),f=xui.use(c).get(0),n=f.value;if(j!==l&&n!==l){g.$_onedit=true;f.value=l;delete g.$_onedit}if(d.mask){var k=f.value;if(!k){g.$focusDelayFun=_.asyRun(function(){if(!g.box){return}delete g.$focusDelayFun;g.$_onedit=true;g.boxing()._setCtrlValue(k=g.$Mask);delete g.$_onedit;i._setCaret(g,f)})}}if(d.selectOnFocus&&!f.readOnly&&f.select){if(xui.browser.kde){g.$focusDelayFun2=_.asyRun(function(){delete g.$focusDelayFun2;try{f.select()}catch(p){}})}else{try{f.select()}catch(h){}}if(g._mousedownmark){g._stopmouseupcaret=1}}g.boxing()._setTB(3);i._asyCheck(g)},onBlur:function(g,j,k){_.resetRun(g.$xid+":asycheck");if(g.$focusDelayFun){_.clearTimeout(g.$focusDelayFun)}if(g.$focusDelayFun2){_.clearTimeout(g.$focusDelayFun2)}if(g.$focusDelayFun2){_.clearTimeout(g.$mouseupDelayFun)}var i=g.properties;if(i.disabled||i.readonly){return false}if(g.onBlur){g.boxing().onBlur(g)}if(g.$inputReadonly||i.inputReadonly){return}var d=g.box,c=g.boxing(),h=i.$UIvalue,f=xui.use(k).get(0).value;if(g.$Mask&&g.$Mask==f){f="";h=g.$Mask}f=c._fromEditor(f);g.getSubNode("BORDER").tagClass("-focus",false);if(c._compareValue(i.$UIvalue,f)){g.box._checkValid(g,f);c._setCtrlValue(h)}c._setDirtyMark();d._asyCheck(g,false)},onKeydown:function(h,j,l){var i=h.properties;if(i.disabled||i.readonly){return}var d=h.box,c=i.multiLines,f=xui.Event,g=f.getKey(j);if(g.key=="enter"&&(!c||g.altKey)&&!i.inputReadonly&&!h.$inputReadonly){h.$_onedit=true;h.boxing().setUIValue(h.boxing()._fromEditor(xui.use(l).get(0).value),true);h.$_onedit=false}d._asyCheck(h);if(i.mask){if(g.key.length>1){h.$ignore=true}else{delete h.$ignore}switch(g.key){case"backspace":d._changeMask(h,xui.use(l).get(0),"",false);return false;case"delete":d._changeMask(h,xui.use(l).get(0),"");return false}}if(g.key=="down"||g.key=="up"){if(i.type=="spin"){if(!g.ctrlKey){h.box._spin(h,g.key=="up");return false}}else{if(g.ctrlKey&&i.type!="none"&&i.type!="input"&&i.type!="password"){h.boxing()._drop(j,l);return false}}}},onDblclick:function(c,d,f){c.getSubNode("BTN").onClick(true)}},R1:{onMousedown:function(c){var d=c.properties;if(d.disabled||d.readonly){return}c.box._spin(c,true)},onMouseout:function(c){xui.Thread.abort(c.$xid+":spin")},onMouseup:function(c){xui.Thread.abort(c.$xid+":spin")}},R2:{onMousedown:function(c){var d=c.properties;if(d.disabled||d.readonly){return}c.box._spin(c,false)},onMouseout:function(c){xui.Thread.abort(c.$xid+":spin")},onMouseup:function(c){xui.Thread.abort(c.$xid+":spin")}}},EventHandlers:{onFileDlgOpen:function(c,d){},onCommand:function(c,d){},beforeComboPop:function(c,g,d,f){},beforePopShow:function(c,d){},afterPopShow:function(c,d){},onClick:function(c,f,g,d){}},_posMap:{none:"",currency:"",number:"",combobox:"left top",listbox:"left top",file:"-16px top",getter:"left -31px",helpinput:"-16px -46px",cmdbox:"left -16px",popbox:"left -46px",time:"left -60px",date:"left -75px",color:"-16px -60px",timepicker:"left -60px",datepicker:"left -75px",datetime:"left -75px",colorpicker:"-16px -60px"},DataModel:{cachePopWnd:true,dateEditorTpl:"",precision:2,groupingSeparator:",",decimalSeparator:".",forceFillZero:true,popCtrlProp:{ini:{}},popCtrlEvents:{ini:{}},numberTpl:{ini:"",action:function(){this.boxing().setUIValue(this.properties.$UIvalue,true)}},currencyTpl:{ini:"$ *",action:function(){this.boxing().setUIValue(this.properties.$UIvalue,true)}},listKey:{set:function(d){var c=xui.UI.getCachedData(d),f=this;f.boxing().setItems(c?_.clone(c):f.properties.items);f.properties.listKey=d}},dropListWidth:0,dropListHeight:0,items:{ini:[],set:function(c){var d=this;c=d.properties.items=d.box._adjustItems(c);if(d.renderId){d.SubSerialIdMapItem={};d.ItemIdMapSubSerialId={};d.box._prepareItems(d,c);if(d.$poplink){d.$poplink.boxing().setItems(c)}else{d.boxing().clearPopCache()}}}},btnImage:{action:function(c){this.getSubNode("MID").css("backgroundImage",c?("url("+c+")"):"")}},btnImagePos:{action:function(c){this.getSubNode("MID").css("backgroundPosition",c)}},type:{ini:"combobox",listbox:_.toArr("none,input,password,combobox,listbox,file,getter,helpinput,cmdbox,popbox,date,time,datetime,color,spin,currency,number"),set:function(c){var d=this;d.properties.type=c;if(d.renderId){d.boxing().refresh(true)}}},increment:0.01,min:-Math.pow(10,15),max:Math.pow(10,15),commandBtn:{ini:"none",listbox:_.toArr("none,save,delete,add,remove,pop,select,custom"),action:function(c){this.boxing().refresh()}},disabled:{ini:false,action:function(c){var d=this.getSubNode("INPUT");if(c){d.addClass("xui-ui-inputdisabled")}else{d.removeClass("xui-ui-inputdisabled")}if((""+d.get(0).type).toLowerCase()!="button"){if(!c&&(this.properties.readonly||this.$inputReadonly)){c=true}d.attr("readonly",c)}}},inputReadonly:{ini:false,action:function(d){var f=this.getSubNode("INPUT"),c=this.getClass("KEY","-inputreadonly");if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}if(!d&&(this.properties.disabled||this.properties.readonly||this.$inputReadonly)){d=true}f.attr("readonly",d).css("cursor",d?"pointer":"")}},readonly:{ini:false,action:function(d){var f=this.getSubNode("INPUT"),c=this.getClass("KEY","-readonly");if(d){this.getRoot().addClass(c)}else{this.getRoot().removeClass(c)}if(!d&&(this.properties.disabled||this.properties.inputReadonly||this.$inputReadonly)){d=true}f.attr("readonly",d).css("cursor",d?"pointer":"")}},caption:{ini:null,set:function(c,d){var f=this.properties;f.caption=c;if(_.isSet(c)){c=c+"";f.caption=xui.adjustRes(c,false)}if(this.renderId){if(this.$inputReadonly||f.inputReadonly){this.getSubNode("INPUT").attr("value",this.boxing().getShowValue())}}},get:function(){return this.boxing().getShowValue()}}},RenderTrigger:function(){var d=this,c=d.boxing(),f=d.properties;d.box._iniType(d);if(f.readonly){c.setReadonly(true,true)}else{if(f.inputReadonly){c.setInputReadonly(true,true)}}},_spin:function(g,d){var j=g.$xid+":spin";if(xui.Thread.isAlive(j)){return}var i=g.properties,h=i.increment*(d?1:-1),f={delay:300},c=function(){var k=((+i.$UIvalue)||0)+h;k=(_.isSet(k)&&k!=="")?_.formatNumeric(g.box._number(g,k),i.precision,i.groupingSeparator,i.decimalSeparator,i.forceFillZero):"";g.boxing().setUIValue(k);f.delay*=0.9};f.task=c;xui.Thread(j,[f],500,null,c,null,true).start()},_dynamicTemplate:function(g){var d=g.properties,h=g._exhash="$multiLines:"+d.multiLines+";type:"+d.type+";",f=g.box.getTemplate(h);d.$UIvalue=d.value;if(!f){f=_.clone(g.box.getTemplate());var c=f.FRAME.BORDER;switch(d.type){case"none":case"input":case"currency":case"number":c.BOX.WRAP.INPUT.tagName="input";break;case"password":c.BOX.WRAP.INPUT.tagName="input";c.BOX.WRAP.INPUT.type="password";break;case"spin":c.RBTN={$order:20,className:"xui-ui-unselectable",style:"{rDisplay}",R1:{R1T:{},R1B:{}},R2:{R2T:{},R2B:{}}};break;case"upload":case"file":c.FILE={$order:20,className:"xui-ui-unselectable",tagName:"input",type:"file",hidefocus:xui.browser.ie?"hidefocus":null,size:"1"};case"listbox":case"cmdbox":c.BOX.WRAP.INPUT.tagName="input";c.BOX.WRAP.INPUT.type="button";default:c.BTN={$order:20,className:"xui-ui-unselectable",style:"{_popbtnDisplay}",TOP:{},MID:{style:"{_btnStyle}"}}}if(d.multiLines){switch(d.type){case"none":case"input":case"getter":case"helpinput":case"popbox":case"number":case"combobox":c.BOX.WRAP.INPUT.tagName="textarea";delete c.BOX.WRAP.INPUT.type}}g.box.setTemplate(f,h)}g.template=f},_prepareData:function(c){var d=arguments.callee.upper.call(this,c),f=c.box._posMap;if(f[d.type]){d._btnStyle=d.btnImage?("background: url("+d.btnImage+")"+(d.btnImagePos||"")):("background-position:"+(d.btnImagePos||f[d.type]))}d._type="text";d._saveDisplay=d.commandBtn!="none"?"":"display:none";d._commandCls=c.getClass("SMID","-"+d.commandBtn);d._popbtnDisplay=(d.type!="none"&&d.type!="input"&&d.type!="password")?"":"display:none";d.typecls=c.getClass("KEY","-type-"+(d.type=="colorpicker"?"color":d.type=="datepicker"?"date":d.type=="timepicker"?"time":d.type=="upload"?"file":d.type));return d},_ensureValue:function(f,h){var g=arguments.callee,k=f.properties;if(!_.isSet(h)||h===""){return""}if(f.$Mask&&f.$Mask==h){h=""}switch(f.properties.type){case"date":case"datepicker":case"datetime":var i;if(h){if(_.isDate(h)){i=h}else{if(_.isFinite(h)){i=new Date(parseInt(h,10))}else{i=xui.Date.parse(h+"")}}}return i?String(f.properties.type=="datetime"?i.getTime():xui.Date.getTimSpanStart(i,"d",1).getTime()):"";case"color":case"colorpicker":var j=xui.UI.ColorPicker._ensureValue(null,h);return(j=="transparent"?"":"#")+j;case"time":case"timepicker":return xui.UI.TimePicker._ensureValue(null,h);case"currency":case"number":case"spin":return this._number(f,h);default:return typeof h=="string"?h:(h||h===0)?String(h):""}},_number:function(c,d){var f=c.properties;d=_.toNumeric(d,f.precision,f.groupingSeparator,f.decimalSeparator,f.forceFillZero);if(_.isSet(f.max)){d=d>f.max?f.max:d}if(_.isSet(f.min)){d=d<f.min?f.min:d}return d},_onresize:function(i,z,v){var D=function(f){return f?i.getSubNode(f).get(0):null},h=D("INPUT"),C=h.type.toLowerCase()=="button",K=1,d=1,m=C?0:xui.UI.$getCSSValue("xui-comboinput-input","paddingTop"),c=C?0:xui.UI.$getCSSValue("xui-comboinput-input","paddingLeft"),G=C?0:xui.UI.$getCSSValue("xui-comboinput-input","paddingRight");var r=i.properties,x=i.getSubNode("BOX"),n=i.getSubNode("LABEL"),p=r.labelSize||0,H=r.labelGap||0,w=r.labelPos||"left",u="px",B=D(r.commandBtn!="none"?"SBTN":null),F=D(r.type=="spin"?"RBTN":(r.type=="none"||r.type=="input"||r.type=="password")?null:"BTN"),J=z,j=v,A=0,y=0,l=Math.max(0,(r.$b_lw||0)-K),s=Math.max(0,(r.$b_tw||0)-d);if(null!==J){J-=Math.max(K*2,(r.$b_lw||0)+(r.$b_rw||0));A=(B?B.offsetWidth:0);y=(F?F.offsetWidth:0);J-=(A+y);if(xui.browser.ie6){J=(parseInt(J/2,10))*2}}if(null!==j){j-=Math.max(d*2,(r.$b_lw||0)+(r.$b_rw||0));if(xui.browser.ie6){j=(parseInt(j/2,10))*2}if(xui.browser.ie6&&null===z){x.ieRemedy()}}var g=l+(w=="left"?p:0),I=s+(w=="top"?p:0),E=J===null?null:Math.max(0,J-((w=="left"||w=="right")?p:0)),k=j===null?null:Math.max(0,j-((w=="top"||w=="bottom")?p:0)),q=j===null?null:Math.max(0,v-((w=="top"||w=="bottom")?p:0));if(null!==E&&E-c-G>0){h.style.width=Math.max(0,E-c-G)+u}if(null!==k&&k-m>0){h.style.height=Math.max(0,k-m)+u}x.cssRegion({left:g,top:I,width:E,height:k});if(p){n.cssRegion({left:J===null?null:w=="right"?(J-p+H+A+y+K*2):0,top:v===null?null:w=="bottom"?(v-p+H):0,width:J===null?null:Math.max(0,((w=="left"||w=="right")?(p-H):J)),height:v===null?null:Math.max(0,((w=="top"||w=="bottom")?(p-H):v))})}g+=(E||0)+K*2;if(F){if(q!==null){F.style.height=Math.max(0,q-2)+u}if(E!==null){F.style.left=g+u}F.style.top=I+u;if(q!==null&&r.type=="spin"){if(q/2-2>0){D("R1").style.height=(q/2-2)+u;D("R2").style.height=(q/2-2)+u}}g+=A}if(B){if(q!==null){B.style.height=Math.max(0,q-2)+u}if(E!==null){B.style.left=g+u}B.style.top=I+u}if((i.$border||i.$shadow||i.$resizer)&&xui.browser.ie){x.ieRemedy()}}}});Class("xui.UI.Group","xui.UI.Div",{Instance:{activate:function(){var c=this.get(0);c.getSubNode("HANDLE").focus();return this},resetPanelView:function(d,f){if(!_.isSet(d)){d=true}if(!_.isSet(f)){f=true}var c;return this.each(function(g){if(g.renderId){delete g.$ini;if(d){c=g.boxing();c.removeChildren(true,f)}if(g.properties.toggle){c.setToggle(false)}}})},iniPanelView:function(){return this.each(function(d){var c=d.boxing();if(c.onIniPanelView&&c.onIniPanelView(d)!==false){d.$ini=true}})}},Static:{Behaviors:{NavKeys:{CAPTION:1},HoverEffected:{TOGGLE:"TOGGLE"},ClickEffected:{TOGGLE:"TOGGLE"},DroppableKeys:["PANEL"],PanelKeys:["PANEL"],DraggableKeys:["HANDLE"],onSize:xui.UI.$onSize,HANDLE:{onClick:function(c,d,f){if(c.properties.toggleBtn){c.box._toggle(c,!c.properties.toggle);return false}},onKeydown:function(c,d,f){if(xui.Event.getKey(d).key=="enter"){xui(f).onClick()}}}},Templates:{tagName:"div",style:"{_style}",className:"{_className}",FIELDSET:{tagName:"fieldset",className:" {toggleCls}",LEGEND:{tagName:"legend",HANDLE:{tabindex:"{tabindex}",TOGGLE:{className:"xui-uicmd-toggle2 {toggleCls2}",style:"{toggleDispplay}"},ICON:{$order:1,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{text:"{caption}",$order:2}}},PANEL:{$order:1,tagName:"div",style:"{panelDisplay};{_panelstyle};{_overflow};",text:"{html}"+xui.UI.$childTag}}},Appearances:{KEY:{zoom:xui.browser.ie6?"1":null},FIELDSET:{border:"1px solid #7ba3cb",position:"relative",overflow:"hidden",zoom:xui.browser.ie6?"1":null},"FIELDSET-checked":{$order:2,"padding-left":"2px","border-left":"0","border-right":"0","border-bottom":"0"},LEGEND:{"margin-left":"3px"},HANDLE:{cursor:"default",padding:"0 3px 0 6px",display:xui.$inlineBlock},PANEL:{position:"relative",overflow:"auto","line-height":"1.22em",background:xui.browser.ie?"url("+xui.ini.img_bg+") no-repeat left top":null},"FIELDSET-checked PANEL":{$order:4,display:"none"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","font-family":'"Verdana", "Helvetica", "sans-serif"',"font-size":"12px","line-height":"18px"}},DataModel:{selectable:true,caption:{ini:undefined,action:function(c){c=(_.isSet(c)?c:"")+"";this.getSubNode("CAPTION").html(xui.adjustRes(c,true))}},html:{action:function(c){this.getSubNode("PANEL").html(xui.adjustRes(c,0,1))}},toggleBtn:{ini:true,action:function(c){this.getSubNode("TOGGLE").css("display",c?"":"none")}},toggle:{ini:true,action:function(c){this.box._toggle(this,c)}},image:{format:"image",action:function(c){this.getSubNode("ICON").css("display",c?"":"none").css("backgroundImage",c?("url("+xui.adjustRes(c||"")+")"):"")}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c)}}},LayoutTrigger:function(){var d=this,f=d.properties,c=d.box;if(f.toggle){c._toggle(d,f.toggle)}},EventHandlers:{onIniPanelView:function(c){},beforeFold:function(c){},beforeExpand:function(c){},afterFold:function(c){},afterExpand:function(c){}},_prepareData:function(d){var f=arguments.callee.upper.call(this,d),c="display:none";f.toggleDispplay=f.toggleBtn?"":c;f.panelDisplay=f.toggleBtn&&!f.toggle?c:"";f.toggleCls=f.toggleBtn&&!f.toggle?d.getClass("FIELDSET","-checked"):"";f.toggleCls2=f.toggleBtn&&f.toggle?"xui-uicmd-toggle2-checked":"";d._toggle=!!f.toggle;return f},_onresize:function(f,d,c){if(c&&c!="auto"){f.getSubNode("FIELDSET").height(c);f.getSubNode("PANEL").height(c-(f.getSubNode("LEGEND").height()||18))}if(d&&d!="auto"){f.getSubNode("PANEL").width(d-2)}},_toggle:function(d,f){var g=d.properties,c=d.boxing();if(f&&!d.$ini){if(c.onIniPanelView){if(c.onIniPanelView(d)!==false){d.$ini=true}if(g.iframeAutoLoad||g.ajaxAutoLoad){xui.UI.Div._applyAutoLoad(d)}}}if(d._toggle!==!!f){d._toggle=g.toggle=!!f;if(f){if(c.beforeExpand&&false===c.beforeExpand(d)){return}}else{if(c.beforeFold&&false===c.beforeFold(d)){return}}d.getSubNode("PANEL").css("display",f?"":"none");if(g.toggleBtn){d.getSubNode("TOGGLE").tagClass("-checked",!!f)}d.getSubNode("FIELDSET").tagClass("-checked",!f);d.getRoot().height(g.toggle?g.height:"auto");d.getSubNode("FIELDSET").height(g.toggle?g.height:"auto");if(f){if(c.afterExpand){c.afterExpand(d)}}else{if(c.afterFold){c.afterFold(d)}}}}}});Class("xui.UI.ColorPicker",["xui.UI","xui.absValue"],{Instance:{activate:function(){this.getSubNode("TOGGLE").focus();return this},_setCtrlValue:function(d,c){return this.each(function(k){if(!k.renderId){return}var q=k.box,i=k.properties;if(d&&d.toLowerCase()=="transparent"){d="transparent"}var j=k.$hex=q._to3(d),h=k.$hex.join(""),n=k.$rgb=q.hex2rgb(d),l=k.$hsv=q.rgb2hsv(n),m=function(p,f){k.getSubNode(p).get(0).firstChild.nodeValue=String(f)},g=function(f){return parseInt(f*100,10)};if(d=="transparent"){j=k.$hex=["00","00","00"];n=k.$rgb=[0,0,0];l=k.$hsv=[0,0,0]}m("R",n[0]);m("G",n[1]);m("B",n[2]);m("H",j[0]);m("E",j[1]);m("X",j[2]);if(k.$hexinhsv!=h){m("HH",l[0]);m("S",g(l[1]));m("V",g(l[2]));delete k.$hexinhsv}q._setClrName(k,h);q._updateDftTip(k);if(i.advance&&k.$hexinadv!=h){q._updateMarks(k,d,true,l[0]);delete k.$hexinadv}if(c!=false){k.getSubNode("CAPTION").html((d=="transparent"?"":"#")+d,false)}})},getColorName:function(){return this.get(0).$clrN||""}},Initialize:function(){var k=this,c=xui.UI.$ID,p=xui.UI.$CLS,q=xui.UI.$tag_special,m=k.KEY,j=k._slist,d=j.length,g,f,h=[],n=xui.$IEUNSELECTABLE();k.addTemplateKeys(["TXT","DD1","DD2","DD3","R","G","B","HH","S","V","H","E","X"]);for(g=0;g<d;g++){h.push('<span  id="'+m+"-SC:"+c+":"+j[g]+'" style="background-color:#'+j[g]+'" '+n+">"+j[g]+"</span>")}f="<div "+n+'><span class="'+p+'-txt"'+n+'>R: </span><span id="'+m+"-R:"+c+':" class="'+p+"-dd2 xui-ui-draggable "+q+"DD2_CC"+q+'" '+n+'>R</span><span style="width:8px;height:8px" '+n+' ></span><span class="'+p+'-txt"'+n+'>H: </span><span id="'+m+"-HH:"+c+':" class="'+p+"-dd2 xui-ui-draggable "+q+"DD2_CC"+q+'" '+n+">H</span><span "+n+">\xB0</span></div><div "+n+'><span class="'+p+'-txt"'+n+'>G: </span><span id="'+m+"-G:"+c+':" class="'+p+"-dd2 xui-ui-draggable "+q+"DD2_CC"+q+'" '+n+'>G</span><span style="width:8px;height:8px" '+n+' ></span><span class="'+p+'-txt"'+n+'>S: </span><span id="'+m+"-S:"+c+':" class="'+p+"-dd2 xui-ui-draggable "+q+"DD2_CC"+q+'"  '+n+">S</span><span "+n+">%</span></div><div "+n+'><span class="'+p+'-txt"'+n+'>B: </span><span id="'+m+"-B:"+c+':" class="'+p+"-dd2 xui-ui-draggable "+q+"DD2_CC"+q+'" '+n+'>B</span><span style="width:8px;height:8px" '+n+' ></span><span class="'+p+'-txt"'+n+'>V: </span><span id="'+m+"-V:"+c+':" class="'+p+"-dd2 xui-ui-draggable "+q+"DD2_CC"+q+'" '+n+">V</span><span "+n+">%</span></div><div "+n+'><span style="width:38px"'+n+'>HEX: </span><span id="'+m+"-H:"+c+':" class="'+p+"-dd3 xui-ui-draggable "+q+"DD3_CC"+q+'" '+n+'>H</span><span id="'+m+"-E:"+c+':" class="'+p+"-dd3 xui-ui-draggable "+q+"DD3_CC"+q+'" '+n+""+n+'>E</span><span id="'+m+"-X:"+c+':" class="'+p+"-dd1 xui-ui-draggable "+q+"DD1_CC"+q+'" '+n+">X</span></div>";k.setTemplate({style:"{_style};height:auto;width:{_width}px;",tagName:"div",onselectstart:"return false",BORDER:{tagName:"div",BAR:{tagName:"div",className:"{classBar}",BART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",className:"xui-uibar-t",tagName:"table",BARTR:{tagName:"tr",BARTDL:{tagName:"td",className:"xui-uibar-tdl"},BARTDM:{$order:1,width:"100%",tagName:"td",className:"xui-uibar-tdm"},BARTDR:{$order:2,tagName:"td",className:"xui-uibar-tdr"}}},BARCMDL:{tagName:"div",className:"xui-uibar-cmdl"},BARCMDR:{tagName:"div",className:"xui-uibar-cmdr",CLOSE:{className:"xui-uicmd-close ",style:"{closeDisplay}"}}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main",MAINI:{tagName:"div",className:"xui-uicon-maini",CON:{$order:1,tagName:"div",SIMPLE:{tagName:"div",TOP:{$order:1,tagName:"div",DATA:{$order:0,tagName:"div",onselectstart:"return false",text:f},TRANS:{className:"xui-ui-btn",TRANSI:{className:"xui-ui-btni",TRANSC:{className:"xui-ui-btnc",TRANSA:{tabindex:"{tabindex}",text:"{_transparent}"}}}},EXAM:{$order:3,tagName:"div",EXAMI:{tagName:"div"}}},LIST:{$order:2,tagName:"div",text:h.join("")}},ADV:{$order:2,style:"{advDispay}",tagName:"div",ADVWHEEL:{$order:0,tagName:"div"},ADVCLR:{$order:1,tagName:"div"},ADVMARK1:{$order:3,tagName:"div"},ADVMARK2:{$order:4,tagName:"div"}}}}},TAIL:{$order:3,tagName:"div",className:"xui-uicon-main",TAILI:{tagName:"div",className:"xui-uicon-maini",CAPTION:{text:"{caption}"},SET:{className:"xui-ui-btn",SETI:{className:"xui-ui-btni",SETC:{className:"xui-ui-btnc",SETA:{tabindex:"{tabindex}",text:"{_set}"}}}},TOGGLE:{$order:2,tabindex:"{tabindex}"}}},BBAR:{$order:4,tagName:"div",className:"xui-uibar-bottom-s",BBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"xui-uibar-t",BBARTR:{tagName:"tr",BBARTDL:{tagName:"td",className:"xui-uibar-tdl"},BBARTDM:{$order:1,width:"100%",tagName:"td",className:"xui-uibar-tdm"},BBARTDR:{$order:2,tagName:"td",className:"xui-uibar-tdr"}}}}}})},Static:{_radius:84,_square:100,_bigRadius:97,_shadowRB:"BBARTDR",DataModel:{height:{ini:"auto",readonly:true},width:{ini:"auto",readonly:true},value:{ini:"FFFFFF",format:"color"},barDisplay:{ini:true,action:function(c){if(c){this.getSubNode("BAR").replaceClass("xui-uibar-top-s","xui-uibar-top")}else{this.getSubNode("BAR").replaceClass("xui-uibar-top","xui-uibar-top-s")}}},closeBtn:{ini:true,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}},advance:{ini:false,action:function(c){var d=this;d.getSubNode("ADV").css("display",c?"":"none");d.getSubNode("TOGGLE").tagClass("-adv",c);d.getRoot().width(c?410:210);if(c){d.box._updateMarks(d,d.properties.$UIvalue,true,d.$hsv[0])}}}},Appearances:{KEY:{},MAINI:{padding:"4px 5px 4px 0"},CON:{height:"198px",padding:"3px",position:"relative",border:"solid 1px #648CB4"},DATA:{"float":"left",width:"112px",height:"86px"},"DATA span":{"float":"left"},"DATA div":{"padding-top":"3px",clear:"both"},TXT:{width:"16px"},CAPTION:{"font-size":"12px","vertical-align":xui.browser.ie6?"baseline":"middle"},EXAM:{"float":"left","margin-top":"24px",padding:"3px",border:"solid 1px #648CB4","background-color":"#E5EBFB"},EXAMI:{height:"50px",width:"70px","white-space":"normal","text-align":"center",border:"solid 1px #648CB4"},"DD1, DD2, DD3":{display:"block",height:"16px",border:"1px solid #779EBF","padding-right":"2px",cursor:"e-resize","text-align":"right",background:"#F8FBFF"},DD1:{width:"16px"},DD2:{width:"24px"},DD3:{$order:2,width:"16px","border-right":"none"},TOP:{height:"92px",position:"relative"},LIST:{height:"106px",position:"relative",overflow:"hidden",margin:"0 2px","line-height":xui.browser.ie6?"0":null,clear:"both"},TAILI:{position:"relative","padding-top":"4px",height:"22px","text-align":"center"},SIMPLE:{"float":"left",width:"192px",position:"relative"},ADV:{"float":"right",width:"195px",height:"195px",position:"relative"},"ADV div":{cursor:"crosshair",position:"absolute"},ADVCLR:{background:xui.browser.ie6?null:xui.UI.$bg("bg.png","no-repeat left top"),_filter:xui.UI.$ieBg("bg.png"),height:"101px",left:"47px",top:"47px",width:"101px"},ADVWHEEL:{background:xui.browser.ie6?null:xui.UI.$bg("clr.png","no-repeat left top"),_filter:xui.UI.$ieBg("clr.png"),height:"195px",width:"195px"},"ADVMARK1, ADVMARK2":{background:xui.browser.ie6?null:xui.UI.$bg("picker.png","no-repeat left top"),_filter:xui.UI.$ieBg("picker.png"),height:"17px",margin:"-8px 0pt 0pt -8px",overflow:"hidden",width:"17px"},"LIST span":{height:"12px",width:"10px","font-size":xui.browser.ie6?"0":null,"float":"left",display:"block",overflow:"hidden","text-indent":"100px",margin:"0",cursor:"pointer",border:"1px solid #000",margin:"0 -1px -1px 0"},TRANS:{position:"absolute",top:"0",right:"0"},TRANSA:{width:"72px","text-align":"center"},SET:{position:"absolute",color:"#ff0000",display:"none",top:"0",right:"28px"},TOGGLE:{position:"absolute",right:"6px",top:"4px",display:xui.$inlineBlock,width:"15px",height:"15px",cursor:"default","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-300px -70px",zoom:xui.browser.ie6?1:null},"TOGGLE-mouseover":{"background-position":"-300px -90px"},"TOGGLE-mousedown":{"background-position":"-300px -110px"},"TOGGLE-adv":{"background-position":"-240px -70px"},"TOGGLE-adv-mouseover":{"background-position":"-240px -90px"},"TOGGLE-adv-mousedown":{"background-position":"-240px -110px"}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",SET:"SET",TRANS:"TRANS",TOGGLE:"TOGGLE"},ClickEffected:{CLOSE:"CLOSE",SET:"SET",TRANS:"TRANS",TOGGLE:"TOGGLE"},KEY:{onClick:function(){return false}},SC:{onMouseover:function(f,d,c){f.box._setTempUI(f,f.getSubId(c))},onClick:function(g,f,d){var c=g.getSubId(d);g.boxing()._setCtrlValue(g.$tempValue=c,false);g.box._vC(g);if(!g.properties.advance){g.boxing().setUIValue(c,true)}return false},onDblclick:function(g,f,d){var c=g.getSubId(d);g.boxing()._setCtrlValue(g.$tempValue=c,false);g.box._vC(g);g.boxing().setUIValue(c,true);return false}},LIST:{onMouseout:function(f,d,c){f.box._updateDftTip(f)}},SET:{onClick:function(d,c,f){d.box._vC(d);d.boxing().setUIValue(d.$tempValue,true)}},TRANS:{onClick:function(d,c,f){d.box._vC(d);d.boxing().setUIValue(d.$tempValue="transparent",true)}},CANCEL:{onClick:function(d,c,f){d.getSubNode("CLOSE").onClick(true)}},TOGGLE:{onClick:function(d,c,f){d.boxing().setAdvance(!d.properties.advance)}},R:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,0)},onDragstop:function(d,c,f){d.box._dd3(d,c,f,0)}},G:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,1)},onDragstop:function(d,c,f){d.box._dd3(d,c,f,1)}},B:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,2)},onDragstop:function(d,c,f){d.box._dd3(d,c,f,2)}},HH:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f,true)},onDrag:function(d,c,f){d.box._dd2(d,c,f,0,"hsv1")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,0,true,"hsv1")}},S:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f,true)},onDrag:function(d,c,f){d.box._dd2(d,c,f,1,"hsv2")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,1,true,"hsv2")}},V:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f,true)},onDrag:function(d,c,f){d.box._dd2(d,c,f,2,"hsv2")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,2,true,"hsv2")}},H:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,0,"hex")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,0)}},E:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,1,"hex")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,1)}},X:{beforeMousedown:function(d,c,f){d.box._dd1(d,c,f)},onDrag:function(d,c,f){d.box._dd2(d,c,f,2,"hex")},onDragstop:function(d,c,f){d.box._dd3(d,c,f,2)}},CLOSE:{onClick:function(f,g,h){var d=f.properties,c=f.boxing();if(d.disabled||d.readonly){return}if(false===c.beforeClose(f)){return}c.destroy()}},ADVWHEEL:{beforeMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d,true);f.getSubNode("ADVMARK1").startDrag(d,{dragType:"none"})}},ADVMARK1:{beforeMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d,true);f.getSubNode("ADVMARK1").startDrag(d,{dragType:"none"})},onDrag:function(f,d,g){var c=f.box;c._updateClrByPos(f,d,true)},onDragstop:function(d,c,f){d.box._updateValueByPos(d,c)},onDblclick:function(d,c,f){d.box._updateValueByPos(d,c);d.box._vC(d);d.boxing().setUIValue(d.$tempValue,true)}},ADVCLR:{beforeMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d);f.getSubNode("ADVMARK2").startDrag(d,{dragType:"none"});return false}},ADVMARK2:{beforeMousedown:function(f,d,g){var c=f.box;c._prepareAdv(f,d);c._updateClrByPos(f,d);f.getSubNode("ADVMARK2").startDrag(d,{dragType:"none"});return false},onDrag:function(f,d,g){var c=f.box;c._updateClrByPos(f,d)},onDragstop:function(d,c,f){d.box._updateValueByPos(d,c)},onDblclick:function(d,c,f){d.box._updateValueByPos(d,c);d.box._vC(d);d.boxing().setUIValue(d.$tempValue,true)}}},_vC:function(f){var h=f.properties,c=h.$UIvalue,g=c==f.$tempValue;f.getSubNode("SET").css("display",g?"none":"block");f.getSubNode("CAPTION").css("color",g?"#000":"#ff0000")},_prepareData:function(d){var f=arguments.callee.upper.call(this,d);var c="display:none";f.classBar=f.barDisplay?"xui-uibar-top":"xui-uibar-top-s";f.closeDisplay=f.closeBtn?"":c;f._width=f.advance?"410":"210";f.advDispay=f.advance?"":"display:none;";f._transparent=xui.wrapRes("inline.transparent");f._set=xui.wrapRes("inline.set");return f},EventHandlers:{beforeClose:function(c,d){}},RenderTrigger:function(){this.$onValueSet=this.$onUIValueSet=function(c){this.box._setClrName(this,c)}},_setClrName:function(f,d){var h=f,c="color.LIST.",g=xui.getRes(c+d);if(g==d){h.$clrN2=h.$clrN="#"+d}else{h.$clrN=g;h.$clrN2=xui.wrapRes(c+d)}},_slist:"FFFFFF,FFFFF0,FFFFE0,FFFF00,FFFAFA,FFFAF0,FFFACD,FFF8DC,FFF5EE,FFF0F5,FFEFD5,FFEBCD,FFE4E1,FFE4C4,FFE4B5,FFDEAD,FFDAB9,FFD700,FFC0CB,FFB6C1,FFA500,FFA07A,FF8C00,FF7F50,FF69B4,FF6347,FF4500,FF1493,FF00FF,FF00FF,FF0000,FDF5E6,FAFAD2,FAF0E6,FAEBD7,FA8072,F8F8FF,F5FFFA,F5F5F5,F5DEB3,F4A460,F0FFFF,F0FFF0,F0F8FF,F0E68C,F08080,EEE8AA,EE82EE,E9967A,E6E6FA,E1FFFF,DEB887,DDA0DD,DCDCDC,DC143C,DB7093,DAA520,DA70D6,D8BFD8,D3D3D3,D2B48C,D2691E,CD853F,CD5C5C,C71585,C0C0C0,BDB76B,BC8F8F,BA55D3,B22222,B0E0E6,B0C4DE,AFEEEE,ADFF2F,ADD8E6,A9A9A9,A52A2A,A0522D,9932CC,98FB98,9400D3,9370DB,90EE90,8FBC8F,8B4513,8B008B,8B0000,8A2BE2,87CEFA,87CEEB,808080,808000,800080,800000,7FFFAA,7FFF00,7CFC00,7B68EE,778899,708090,6B8E23,6A5ACD,696969,6495ED,5F9EA0,556B2F,4B0082,48D1CC,483D8B,4682B4,4169E1,40E0D0,3CB371,32CD32,2F4F4F,2E8B57,228B22,20B2AA,1E90FF,191970,00FFFF,00FFFF,00FF7F,00FF00,00FA9A,00CED1,00BFFF,008B8B,008080,008000,006400,0000FF,0000CD,00008B,000080,000000".split(","),_C16:"0123456789ABCDEF",_dd1:function(g,j,k,d){if(xui.Event.getBtn(j)!="left"){return}var i=g.properties,c=g.box,h=function(){var f=c.hex2rgb(g.$tempValue||i.$UIvalue);return d?c.rgb2hsv(f):f};xui.use(k).css("backgroundColor","red").startDrag(j,{dragType:"blank",targetReposition:false,widthIncrement:2,dragCursor:true});g.$temp=0;g.$start=h();g.$temp2=h()},_dd2:function(h,m,c,j,n){var k,g=xui.DragDrop.getProfile().offset,d=h.properties,f=h.$temp2,r=h.box,l=n=="hsv1"?361:n=="hsv2"?101:256,q;k=(n=="hsv2"?parseInt(h.$start[j]*100,10):parseInt(h.$start[j],10))+parseInt(g.x/2,10);k=(k%l+l)%l;if(h.$temp!=k){f[j]=h.$temp=n=="hsv2"?k/100:k;q=(n=="hsv1"||n=="hsv2")?r.hsv2rgb(f):f;q=r.rgb2hex(q);r._setTempUI(h,q);xui.use(c).text(n=="hex"?r._toFF(k):k)}},_dd3:function(g,k,c,h,j){if(g.$start[h]!==g.$temp){var d=g.properties,m=g.box,f=g.$start,l;f[h]=g.$temp;l=j?m.hsv2rgb(f):f;l=m.rgb2hex(l);if(j){g.$hexinhsv=l}g.boxing()._setCtrlValue(g.$tempValue=l,false);delete g.$hexinhsv;g.box._vC(g)}xui.use(c).css("backgroundColor","");g.$temp=g.$start=0},_setTempUI:function(k,f){var d=this,h=d.hex2rgb(f),c=k.boxing(),i=c.getSubNode("EXAMI"),g=d.rgb2hsv(h),j=xui.getRes("color.LIST."+f);i.css({backgroundColor:"#"+f,color:g[2]>0.6?"#000":"#FFF"});i.text(k.show_color=j==f?"#"+f:j)},_updateDftTip:function(f){var c=f.box,d=f.boxing().getSubNode("EXAMI");d.css({backgroundColor:"#"+f.$hex.join(""),color:f.$hsv[2]>0.6?"#000":"#FFF"});d.html(f.$clrN2||"",false)},_to3:function(c){if(!c){c="FFFFFF"}return[c.substr(0,2),c.substr(2,2),c.substr(4,2)]},_toFF:function(d){var c=this._C16;d=parseInt(d,10)||0;d=(d>255||d<0)?0:d;return c.charAt((d-d%16)/16)+c.charAt(d%16)},_to255:function(f){var d=this._C16,c=f.split("");return d.indexOf(c[0].toUpperCase())*16+d.indexOf(c[1].toUpperCase())},_webSafe:function(i,h,c){var d=arguments.callee,j=d.f||(d.f=function(f){return parseInt(f/51,10)*51});if(typeof i=="object"){h=i[1];c=i[2];i=i[0]}return[j(i),j(h),j(c)]},_updateMarks:function(d,c,j,i){var m=this,h=m.hex2rgb(c),g=m.rgb2hsv(h),f=(g[0]/360)*6.28,n=d.getSubNode("ADVCLR");if(j){var l=d.getSubNode("ADVMARK1"),k=d.getSubNode("ADVMARK2");l.cssPos({left:Math.round(Math.sin(f)*m._radius+m._bigRadius),top:Math.round(-Math.cos(f)*m._radius+m._bigRadius)});k.cssPos({left:Math.round(m._square*(g[1]-0.5)+m._bigRadius),top:Math.round(m._square*(0.5-g[2])+m._bigRadius)})}if(i!==undefined){n.css("backgroundColor","#"+m.rgb2hex(m.hsv2rgb([i,1,1])))}m._setTempUI(d,c)},_updateClrByPos:function(f,l,m){var x=this,i=xui.Event.getPos(l),p=f.$tpos,d=i.left-p.left,q=i.top-p.top,g,w,u,k,y,r,j,n,c;if(m){w=f.getSubNode("ADVMARK1");g=Math.atan2(d,-q);w.cssPos({left:Math.round(Math.sin(g)*x._radius+x._bigRadius),top:Math.round(-Math.cos(g)*x._radius+x._bigRadius)});k=Math.floor((g/6.28)*360);if(k<0){k+=360}j=[k,f.$hsv[1],f.$hsv[2]];n=x.hsv2rgb(j);c=x.rgb2hex(n);x._updateMarks(f,f.$t_hex=c,false,k)}else{u=f.getSubNode("ADVMARK2");y=Math.max(0,Math.min(1,(d/x._square)+0.5));r=Math.max(0,Math.min(1,0.5-(q/x._square)));u.cssPos({left:Math.round(x._square*(y-0.5)+x._bigRadius),top:Math.round(x._square*(0.5-r)+x._bigRadius)});j=[f.$hsv[0],y,r];n=x.hsv2rgb(j);c=x.rgb2hex(n);x._updateMarks(f,f.$t_hex=c)}},_updateValueByPos:function(c,d){c.$hexinadv=c.$t_hex;c.boxing()._setCtrlValue(c.$tempValue=c.$t_hex,false);delete c.$hexinadv;c.box._vC(c)},_prepareAdv:function(d,f){var c=this,g=d.getSubNode("ADVWHEEL").offset();d.$tpos={left:g.left+c._bigRadius,top:g.top+c._bigRadius}},_ensureValue:function(f,n){var l=this,j=arguments.callee,c=j.map||(j.map=(function(){var i={};_.arr.each(l._C16.split(""),function(p,k){i[p]=1});return i}())),d=j._r||(j._r=/rgb\(([^)]*)\)/);if(!n||typeof n!="string"||n=="transparent"){return"transparent"}if(d.test(n)){n=n.replace(d,"$1");n=n.split(",");n[0]=parseInt(n[0],10)||0;n[1]=parseInt(n[1],10)||0;n[2]=parseInt(n[2],10)||0;n=l.rgb2hex(n)}if(n.charAt(0)=="#"){n=n.substr(1,n.length)}var m="",g;for(var h=0;h<6;h++){g=n.charAt(h).toUpperCase();m+=(c[g]?g:"F")}return m},hsv2rgb:function(n,B,z){if(n instanceof Array){B=n[1];z=n[2];n=n[0]}var x=arguments.callee,w=x.f||(x.f=function(f){return Math.min(255,Math.round(f*256))}),c,u,y,m,l,j,d,A;if(B==0){return[z=w(z),z,z]}else{m=Math.floor((n/60)%6);l=(n/60)-m;j=z*(1-B);d=z*(1-l*B);A=z*(1-(1-l)*B);switch(m){case 0:c=z;u=A;y=j;break;case 1:c=d;u=z;y=j;break;case 2:c=j;u=z;y=A;break;case 3:c=j;u=d;y=z;break;case 4:c=A;u=j;y=z;break;case 5:c=z;u=j;y=d;break}return B==0?[z=w(z),z,z]:[w(c),w(u),w(y)]}},rgb2hsv:function(c,i,j){if(c instanceof Array){i=c[1];j=c[2];c=c[0]}c=c/255;i=i/255;j=j/255;var d=Math.min(c,i,j),k=Math.max(c,i,j),l=k-d,n=(k===0)?0:1-(d/k),m=k,f;switch(k){case d:f=0;break;case c:f=60*(i-j)/l;if(i<j){f+=360}break;case i:f=(60*(j-c)/l)+120;break;case j:f=(60*(c-i)/l)+240;break}return[Math.round(f),n,m]},rgb2hex:function(h,f,c){var d=this;if(h instanceof Array){f=h[1];c=h[2];h=h[0]}return d._toFF(h)+d._toFF(f)+d._toFF(c)},hex2rgb:function(d){var c=this;if(!d){d="FFFFFF"}if(d.charAt(0)=="#"){d=d.slice(1)}return[c._to255(d.substr(0,2)),c._to255(d.substr(2,2)),c._to255(d.substr(4,2))]},getTextColor:function(d){var c=this;d=c._ensureValue(0,d);if(d&&d.toLowerCase()=="transparent"){return"#000000"}d=c.hex2rgb(d);d=c.rgb2hsv(d);return(d&&d[2])>0.6?"#000000":"#FFFFFF"},_onresize:function(){}}});Class("xui.UI.DatePicker",["xui.UI","xui.absValue"],{Dependency:["xui.Date"],Instance:{activate:function(){this.getSubNode("PRE").focus();return this},_setCtrlValue:function(c){return this.each(function(f){if(!f.renderId){return}var d=f.box,g=f.properties;d._to(f,c,true);if(f.keys.CAPTION){f.getSubNode("CAPTION").html(xui.Date.getText(c,"ymd",g.firstDayOfWeek),false)}})},getDateFrom:function(){return this.get(0)._realstart}},Initialize:function(){var q=this,r=xui.UI.$ID,D=xui.UI.$tag_special,c=xui.UI.$CLS,E=q.KEY;q.addTemplateKeys(["H","COL","W","TBODY","THEADER","TD"]);var n='<colgroup id="'+E+"-COL:"+r+':"  class="'+D+"COL_CS"+D+' xui-custom {comcls}"  style="'+D+"COL_CS"+D+'"><col width="2%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/></colgroup>',f='<thead ID="'+E+"-THEADER:"+r+':" class="'+D+"THEADER_CS"+D+' xui-custom {comcls}"  style="'+D+"THEADER_CS"+D+'" ><tr height="1%"><th id="'+E+"-H:"+r+':7" class="xui-node xui-node-th '+c+"-h "+c+"-w "+D+"H_CC"+D+' xui-custom {comcls}" style="'+D+"H_CS"+D+'"></th>',d="</tr></thead>",m='<th id="'+E+"-H:"+r+':@" class="xui-node xui-node-th '+c+"-h "+D+"H_CC"+D+' xui-custom {comcls}"  style="'+D+"H_CS"+D+'">@</th>',w='<tbody id="'+E+"-TBODY:"+r+':"  class="'+D+"TBODY_CS"+D+' xui-custom {comcls}"  style="'+D+"TBODY_CS"+D+'" >',u="</tbody>",C="<tr>",A="</tr>",h='<th id="'+E+"-W:"+r+':@"  class="xui-node xui-node-th '+c+"-w "+D+"W_CC"+D+' xui-custom {comcls}"  style="'+D+"W_CS"+D+'">@</th>',g='<td id="'+E+"-TD:"+r+':@" class="xui-node xui-node-td '+c+"-td "+D+"TD_CC"+D+' xui-custom {comcls}"  style="'+D+"TD_CS"+D+'" '+xui.$IEUNSELECTABLE()+" ></td>",p,y,x,v,s,B=[],z=[];for(y=0;y<7;y++){z[z.length]=m.replace(/@/g,y)}v=s=0;for(y=0;y<48;y++){x=y%8;B[B.length]=(x==0?C:"")+(x==0?h:g).replace(/@/g,x==0?s:v)+(x==7?A:"");if(x!==0){v++}else{s++}}p=n+f+z.join("")+d+w+B.join("")+u;q.setTemplate({tagName:"div",style:"{_style};height:auto;",onselectstart:"return false",BORDER:{tagName:"div",BAR:{tagName:"div",className:"xui-uibar-top",style:"{barDisplay};",BART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",className:"xui-uibar-t",tagName:"table",BARTR:{tagName:"tr",BARTDL:{tagName:"td",className:"xui-uibar-tdl"},BARTDM:{$order:1,width:"100%",tagName:"td",className:"xui-uibar-tdm"},BARTDR:{$order:2,tagName:"td",className:"xui-uibar-tdr"}}},BARCMDL:{tagName:"div",className:"xui-uibar-cmdl",PRE2:{$order:0,tabindex:"{tabindex}"},PRE:{$order:1,tabindex:"{tabindex}"},YEAR:{$order:2,className:"xui-ui-draggable"},YTXT:{$order:3,text:"-"},MONTH:{$order:4,className:"xui-ui-draggable"},MTXT:{$order:5,text:"-"},DAY:{$order:6},NEXT:{$order:7,tabindex:"{tabindex}"},NEXT2:{$order:8,tabindex:"{tabindex}"}},BARCMDR:{tagName:"div",className:"xui-uibar-cmdr",CLOSE:{className:"xui-uicmd-close ",style:"{closeDisplay}"}}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main",MAINI:{tagName:"div",className:"xui-uicon-maini",CON:{tagName:"div",BODY:{tagName:"table",cellpadding:"0",cellspacing:"0",width:"100%",text:p}}}},TAIL:{$order:3,tagName:"div",className:"xui-uicon-main",TAILI:{tagName:"div",className:"xui-uicon-maini",CAPTION:{tagName:"div",style:"{_nocap}",text:"{caption}",$order:0},TIME:{style:"{_timectrl}",tagName:"div",TPRE2:{$order:0,tabindex:"{tabindex}"},TPRE:{$order:1,tabindex:"{tabindex}"},HOUR:{$order:2,className:"xui-ui-draggable"},MTXT:{$order:3,text:":"},MINUTE:{$order:4,className:"xui-ui-draggable"},TNEXT:{$order:6,tabindex:"{tabindex}"},TNEXT2:{$order:7,tabindex:"{tabindex}"}},TODAY:{tabindex:"{tabindex}",title:"{_todaytitle}"},SET:{className:"xui-ui-btn",SETI:{className:"xui-ui-btni",SETC:{className:"xui-ui-btnc",SETA:{tabindex:"{tabindex}",text:"{_set}"}}}}}},BBAR:{$order:4,tagName:"div",className:"xui-uibar-bottom-s",BBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"xui-uibar-t",BBARTR:{tagName:"tr",BBARTDL:{tagName:"td",className:"xui-uibar-tdl"},BBARTDM:{$order:1,width:"100%",tagName:"td",className:"xui-uibar-tdm"},BBARTDR:{$order:2,tagName:"td",className:"xui-uibar-tdr"}}}}}})},Static:{_shadowRB:"BBARTDR",Appearances:{KEY:{overflow:"visible"},BORDER:{overflow:"visible",position:"relative"},BODY:{position:"relative"},BARCMDL:{top:"3px"},TAILI:{position:"relative",height:"24px"},TIME:{padding:"2px 18px"},SET:{position:"absolute",display:"none",color:"#ff0000",top:"0",right:"5px"},TODAY:{position:"absolute",top:"3px",left:"0",display:xui.$inlineBlock,width:"16px",height:"16px",cursor:"default","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"right top",_zoom:1},"TODAY-mouseover":{"background-position":"right -20px"},"TODAY-mousedown":{"background-position":"right -40px"},"PRE,PRE2,NEXT,NEXT2,TPRE,TPRE2,TNEXT,TNEXT2":{$order:0,display:xui.$inlineBlock,position:"relative",margin:"0 2px",width:"15px",height:"15px","vertical-align":"middle",cursor:"default","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat",_zoom:1},"PRE, TPRE":{$order:1,"background-position":"-260px -70px"},"PRE-mouseover, TPRE-mouseover":{$order:2,"background-position":"-260px -90px"},"PRE-mousedown, TPRE-mousedown":{$order:3,"background-position":"-260px -110px"},"PRE2, TPRE2":{$order:1,"background-position":"-240px -70px"},"PRE2-mouseover, TPRE2-mouseover":{$order:2,"background-position":"-240px -90px"},"PRE2-mousedown, TPRE2-mousedown":{$order:3,"background-position":"-240px -110px"},"NEXT, TNEXT":{$order:1,"background-position":"-280px -70px"},"NEXT-mouseover, TNEXT-mouseover":{$order:2,"background-position":"-280px -90px"},"NEXT-mousedown, TNEXT-mousedown":{$order:3,"background-position":"-280px -110px"},"NEXT2, TNEXT2":{$order:1,"background-position":"-300px -70px"},"NEXT2-mouseover, TNEXT2-mouseover":{$order:2,"background-position":"-300px -90px"},"NEXT2-mousedown, TNEXT2-mousedown":{$order:3,"background-position":"-300px -110px"},"YEAR,MONTH,DAY,HOUR,MINUTE":{$order:4,height:"15px","font-weight":"bold","vertical-align":"middle",border:"1px solid #779EBF","background-color":"#F8FBFF","padding-left":"2px",cursor:"e-resize"},YEAR:{width:"32px"},"MONTH, DAY,HOUR, MINUTE":{width:"16px"},CAPTION:{padding:"4px 0 0 0","text-align":"center","font-size":"12px","vertical-align":xui.browser.ie6?"baseline":"middle"},MAINI:{"padding-top":"4px","padding-bottom":"4px"},CON:{"border-left":"solid 1px #648CB4","border-top":"solid 1px #648CB4"},BODY:{overflow:"visible"},"TD .exday":{color:"#C1C1C1"},TD:{$order:1,"text-align":"center","background-color":"#EFF8FF",border:0,"border-right":"solid 1px #648CB4","border-bottom":"solid 1px #648CB4","font-size":"12px"},TH:{$order:1,border:0,"border-right":"solid 1px #648CB4","border-bottom":"solid 1px #648CB4","font-size":"12px"},"TD-free":{$order:1,"text-align":"center","background-color":"#F9F7D1"},"TD-mouseover":{$order:3,"background-color":"#d9e8fb"},"TD-checked":{$order:4,"background-color":"#316AC5","font-weight":"bold",color:"#fff"},"W,H":{$order:3,color:"#333333","background-color":"#E8EEF7","vertical-align":"middle","text-align":"center"}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",TD:"TD",PRE:"PRE",PRE2:"PRE2",NEXT:"NEXT",NEXT2:"NEXT2",TPRE:"TPRE",TPRE2:"TPRE2",TNEXT:"TNEXT",TNEXT2:"TNEXT2",SET:"SET",TODAY:"TODAY"},ClickEffected:{CLOSE:"CLOSE",TD:"TD",PRE:"PRE",PRE2:"PRE2",NEXT:"NEXT",NEXT2:"NEXT2",TPRE:"TPRE",TPRE2:"TPRE2",TNEXT:"TNEXT",TNEXT2:"TNEXT2",SET:"SET",TODAY:"TODAY"},KEY:{onClick:function(){return false}},TD:{onClick:function(d,h,i){var g=d.properties,j=d.getSubId(i),f=d.$daymap,c=f[j];if(g.disabled||g.readonly){return false}xui.use(i).onMouseout(true,{$force:true});c=xui.Date.add(d.$tempValue,"d",xui.Date.diff(d.$tempValue,c,"d",g.firstDayOfWeek));d.box._to(d,c);if(!g.timeInput){d.boxing().setUIValue(c)}},onDblclick:function(c,f,g){var d=c.properties;if(d.timeInput){xui.use(g).onMouseout(true,{$force:true});c.boxing().setUIValue(c.$tempValue,true)}}},TODAY:{onClick:function(c,d,f){xui.use(f).onMouseout(true,{$force:true});c.boxing().setUIValue(c.properties.timeInput?new Date:xui.Date.getTimSpanStart(new Date,"d",1),true)}},SET:{onClick:function(c,d,f){xui.use(f).onMouseout(true,{$force:true});c.boxing().setUIValue(c.$tempValue,true)}},CLOSE:{onClick:function(d,g,h){var f=d.properties,c=d.boxing();if(f.disabled||f.readonly){return}if(false===c.beforeClose(d,h)){return}c.destroy(true)}},PRE:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"m",-1))}},NEXT:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"m",1))}},PRE2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"y",-1))}},NEXT2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"y",1))}},TPRE:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"n",-1))}},TNEXT:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"n",1))}},TPRE2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"h",-1))}},TNEXT2:{onClick:function(c,f,g){var d=c.properties;if(d.disabled||d.readonly){return}c.box._to(c,xui.Date.add(c.$tempValue,"h",1))}},YEAR:{beforeMousedown:function(c,d,f){return c.box._ondown(c,d,f,10)},onDrag:function(c,f,h){var d,g=xui.DragDrop.getProfile().offset;d=parseInt(c.$year,10)+parseInt(g.x/10,10);if(c.$temp!=d){c.$temp2=parseInt(g.x/10,10);c.getSubNode("YEAR").html(d,false)}},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"y")}},MONTH:{beforeMousedown:function(c,d,f){return c.box._ondown(c,d,f,20)},onDrag:function(c,f,h){var d,g=xui.DragDrop.getProfile().offset;d=parseInt(c.$month,10)+(parseInt(g.x/20,10)%12);d=(d%12+12)%12;if(c.$temp!=d){c.$temp=d;c.$temp2=d-c.$month+1;c.getSubNode("MONTH").html(((d+1)<=9?"0":"")+(d+1),false)}},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"m")}},DAY:{beforeMousedown:function(c,d,f){return c.box._ondown(c,d,f,10)},onDrag:function(d,h,j){var c=new Date(d.$year,d.$month,0),k=c.getDate();var g=d.properties,f,i=xui.DragDrop.getProfile().offset;f=parseInt(d.$day,10)+(parseInt(i.x/10,10)%k);f=(f%k+k)%k+1;if(d.$temp!=f){d.$temp=f;d.$temp2=f-d.$day;d.getSubNode("DAY").html((f<=9?"0":"")+f,false)}},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"d")}},HOUR:{beforeMousedown:function(c,d,f){return c.box._ondown(c,d,f,20)},onDrag:function(c,d,f){return c.box._ondrag(c,20,24,"HOUR",c.$hour)},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"h")}},MINUTE:{beforeMousedown:function(c,d,f){return c.box._ondown(c,d,f,10)},onDrag:function(c,d,f){return c.box._ondrag(c,10,60,"MINUTE",c.$minute)},onDragstop:function(c,d,f){return c.box._onds(c,d,f,"n")}}},DataModel:{timeInput:{ini:false,action:function(c){this.getSubNode("CAPTION").css("display",c?"none":"block");this.getSubNode("SET").css("display",c?"block":"none");this.getSubNode("TIME").css("display",c?"block":"none");this.getSubNode("TODAY").attr("title",xui.getRes(c?"inline.now":"inline.today"))}},height:{ini:"auto",readonly:true},width:{ini:210,readonly:true},value:{ini:new Date,format:"date"},closeBtn:{ini:true,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}},firstDayOfWeek:{ini:0,action:function(){this.boxing().refresh()}},offDays:{ini:"60",action:function(){this.boxing().refresh()}},hideWeekLabels:{ini:false,action:function(){this.boxing().refresh()}},dateInputFormat:{ini:"yyyy-mm-dd",listbox:["yyyy-mm-dd","mm-dd-yyyy","dd-mm-yyyy"],action:function(){this.boxing().refresh()}}},EventHandlers:{beforeClose:function(c,d){}},_prepareData:function(f){var g=arguments.callee.upper.call(this,f);var c="display:none";g.closeDisplay=g.closeBtn?"":c;var d="display:none;";if(f.properties.timeInput){g._todaytitle=xui.getRes("inline.now");g._nocap=d}else{g._todaytitle=xui.getRes("inline.today");g._timectrl=d}g._set=xui.wrapRes("inline.set");return g},_ensureValue:function(c,f){var g;if(f){if(_.isDate(f)){g=f}else{if(_.isFinite(f)){g=new Date(parseInt(f,10))}}}g=g||new Date;if(!c.properties.timeInput){g=xui.Date.getTimSpanStart(g,"d")}return g},RenderTrigger:function(){var f=this,h=f.properties,i=f.boxing(),d=f.box;d._setWeekLabel(f);var g={yyyy:"YEAR",mm:"MONTH",dd:"DAY"},c=h.dateInputFormat.split("-");if(g[c[0]]&&g[c[1]]&&g[c[2]]){f.getSubNode("YTXT").addPrev(f.getSubNode(g[c[0]]));f.getSubNode("MTXT").addPrev(f.getSubNode(g[c[1]]));f.getSubNode("MTXT").addNext(f.getSubNode(g[c[2]]))}},_getWeekNodes:function(c){return c.$weeks||(c.$weeks=c.getSubNode("W",true))},_getTDNodes:function(c){return c.$tds||(c.$tds=c.getSubNode("TD",true))},_getLabelNodes:function(c){return c.$days||(c.$days=c.getSubNode("TD",true))},_getHeaderNodes:function(c){return c.$header||(c.$header=c.getSubNode("H",true))},_setWeekLabel:function(g){var j=g.properties;var i=j.firstDayOfWeek,h=function(f){f=g.getSubId(f);if(f=="7"){return f}f=(parseInt(f,10)+i);return f<7?f:(f-7)};g.box._getHeaderNodes(g).each(function(k,f){k.innerHTML=xui.wrapRes("date.WEEKS."+h(k.id))});if(j.hideWeekLabels){g.getSubNode("BODY").query("TR").first().remove();g.getSubNode("COL").first().remove()}var c=g.getClass("TD","-free"),d={};if(j.offDays){_.arr.each(j.offDays.split(""),function(f){f=parseInt(f,10);if(f>=0&&f<=6){d[f]=1}});g.box._getTDNodes(g).each(function(k,f){f=((f+i)-7*parseInt((f+i)/7,10));if(d[f]){k.className=k.className+" "+c}})}},_setBGV:function(h,d,c){var f=xui.Date,j=h.properties,i=h.$daymap||(h.$daymap=[]),g,k;h.box._getLabelNodes(h).each(function(m,l){k=f.add(d,"d",l);i[l]=k;g=f.get(k,"m")==c?"#":'<p class="xui-node xui-node-p exday xui-custom {comcls}">#</p>';k=f.get(k,"d");m.innerHTML=g.replace("#",k)});if(!j.hideWeekLabels){h.box._getWeekNodes(h).each(function(m,l){m.innerHTML=f.get(f.add(d,"ww",l),"ww",j.firstDayOfWeek)})}},_to:function(i,h,d){var c=i.properties,k=c.firstDayOfWeek,j=xui.Date,r=i.keys,n=c.$UIvalue,l=-1,g,q,s=j.getTimSpanStart(j.getTimSpanStart(h,"m"),"ww",1,k),f=j.get(h,"m",k);i.$tempValue=h;this._setBGV(i,i._realstart=s,f);if(i.$selnode){i.$selnode.tagClass("-checked",false)}_.arr.each(i.$daymap,function(p,m){if(j.get(p,"m",k)+"-"+j.get(p,"d",k)==j.get(h,"m",k)+"-"+j.get(h,"d",k)){l=m;return false}});g=this._getTDNodes(i).get()[l];(i.$selnode=xui([g]).tagClass("-checked"));i.getSubNode("SET").css("display",(d||n.getTime()==h.getTime())?"none":"block");i.getSubNode("CAPTION").css("color",(d||n.getTime()==h.getTime())?"":"#ff0000");q=j.get(h,"y",k);if(i.$year!=q){i.$year=q;i.getSubNode("YEAR").html(q,false)}q=j.get(h,"m",k)+1;if(i.$month!=q){i.$month=q;i.getSubNode("MONTH").html((q<=9?"0":"")+q,false)}q=j.get(h||h,"d",k);if(i.$day!=q){i.$day=q;i.getSubNode("DAY").html((q<=9?"0":"")+q,false)}q=j.get(h,"h",k);if(i.$hour!=q){i.$hour=q;i.getSubNode("HOUR").html((q<=9?"0":"")+q,false)}q=j.get(h,"n",k);if(i.$minute!=q){i.$minute=q;i.getSubNode("MINUTE").html((q<=9?"0":"")+q,false)}},_ondown:function(d,f,g,c){if(xui.Event.getBtn(f)!="left"){return}xui.use(g).startDrag(f,{dragType:"blank",targetReposition:false,widthIncrement:c,dragCursor:true});d.$temp=d.$temp2=0},_ondrag:function(g,d,c,f,i){var j=g.properties,h,k=xui.DragDrop.getProfile().offset;h=parseInt(i,10)+(parseInt(k.x/d,10)%c);h=(h%c+c)%c;if(g.$temp!=h){g.$temp=h;g.$temp2=h-i;g.getSubNode(f).html((h<=9?"0":"")+h,false)}},_onds:function(f,h,i,d){if(f.$temp2){var g=f.properties,c=xui.Date.add(f.$tempValue,d,f.$temp2);f.box._to(f,c)}f.$temp=f.$temp2=0},_onresize:function(){}}});Class("xui.UI.TimePicker",["xui.UI","xui.absValue"],{Dependency:["xui.Date"],Instance:{activate:function(){this.getSubNode("PRE").focus();return this},_setCtrlValue:function(c){return this.each(function(g){if(!g.renderId){return}var d=g.box,f=d._v2a(c);g.$hour=f[0];g.$minute=f[1];g.getSubNode("HI",true).removeClass(d._excls_c3).removeClass(d._excls_mo3);g.getSubNode("HI",f[0]).addClass(d._excls_c3);g.getSubNode("MI",true).removeClass(d._excls_c).removeClass(d._excls_mo);g.getSubNode("MI",f[1]).addClass(d._excls_c);g.getSubNode("HOUR").html(f[0],false);g.getSubNode("MINUTE").html(f[1],false);g.getSubNode("CAPTION").html(g.box._showV(g,g.box._v2a(f)),false)})}},Initialize:function(){this.addTemplateKeys(["HI","MI"]);var g,k,l,d,f,c,n,j;f=this._excls3;c=this._excls4;n=xui.UI.$ID;j='<span id="'+this.KEY+"-HI:"+n+':@" class="xui-node xui-node-span '+f+' !" '+xui.$IEUNSELECTABLE()+" >@</span>";g=[];for(k=0;k<24;k++){g[g.length]=j.replace(/@/g,k<10?("0"+k):k).replace("!",((k%6===0)?c:"")+" xui-custom {comcls}")}l=g.join("");g.length=0;f=this._excls;c=this._excls2;n=xui.UI.$ID;j='<span id="'+this.KEY+"-MI:"+n+':@" class="xui-node xui-node-span '+f+' !" '+xui.$IEUNSELECTABLE()+" >@</span>";g=[];for(k=0;k<60;k++){g[g.length]=j.replace(/@/g,k<10?("0"+k):k).replace("!",((k%5===0)?c:"")+" xui-custom {comcls}")}d=g.join("");g.length=0;this.setTemplate({tagName:"div",onselectstart:"return false",style:"{_style};height:auto;",BORDER:{tagName:"div",BAR:{tagName:"div",className:"xui-uibar-top",style:"{barDisplay};",BART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"xui-uibar-t",BARTR:{tagName:"tr",BARTDL:{tagName:"td",className:"xui-uibar-tdl"},BARTDM:{$order:1,width:"100%",tagName:"td",className:"xui-uibar-tdm"},BARTDR:{$order:2,tagName:"td",className:"xui-uibar-tdr"}}},BARCMDL:{tagName:"div",className:"xui-uibar-cmdl",PRE2:{$order:0,tabindex:"{tabindex}"},PRE:{$order:1,tabindex:"{tabindex}"},HOUR:{$order:2,className:"xui-ui-draggable"},MTXT:{$order:3,text:":"},MINUTE:{$order:4,className:"xui-ui-draggable"},NEXT:{$order:6,tabindex:"{tabindex}"},NEXT2:{$order:7,tabindex:"{tabindex}"}},BARCMDR:{tagName:"div",className:"xui-uibar-cmdr",CLOSE:{className:"xui-uicmd-close ",style:"{closeDisplay}"}}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main",MAINI:{tagName:"div",className:"xui-uicon-maini",CONH:{tagName:"div",className:"xui-uiborder-inset",text:l},CONM:{$order:2,tagName:"div",className:"xui-uiborder-inset",text:d}}},TAIL:{$order:3,tagName:"div",className:"xui-uicon-main",TAILI:{tagName:"div",className:"xui-uicon-maini",CAPTION:{text:"{caption}"},SET:{className:"xui-ui-btn",SETI:{className:"xui-ui-btni",SETC:{className:"xui-ui-btnc",SETA:{tabindex:"{tabindex}",text:"{_set}"}}}}}},BBAR:{$order:4,tagName:"div",className:"xui-uibar-bottom-s",BBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"xui-uibar-t",BBARTR:{tagName:"tr",BBARTDL:{tagName:"td",className:"xui-uibar-tdl"},BBARTDM:{$order:1,width:"100%",tagName:"td",className:"xui-uibar-tdm"},BBARTDR:{$order:2,tagName:"td",className:"xui-uibar-tdr"}}}}}})},Static:{_shadowRB:"BBARTDR",_excls:"xuiex-timepicker",_excls2:"xuiex-timepicker2",_excls3:"xuiex-timepicker3",_excls4:"xuiex-timepicker4",_excls_mo:"xuiex-timepicker-mouseover",_excls_c:"xuiex-timepicker-checked",_excls_mo3:"xuiex-timepicker3-mouseover",_excls_c3:"xuiex-timepicker3-checked",_mover:function(f,d){var c=this,g=f.className;if(d==2){if(g.indexOf(c._excls_mo3)==-1){f.className=g+" "+c._excls_mo3}}else{if(g.indexOf(c._excls_mo)==-1){f.className=g+" "+c._excls_mo}}f=null},_mout:function(f,d){var c=this,g=f.className;if(d==2){if(g.indexOf(c._excls_mo3)!=-1){f.className=g.replace(c._excls_mo3,"")}}else{if(g.indexOf(c._excls_mo)!=-1){f.className=g.replace(c._excls_mo,"")}}f=null},Appearances:{KEY:{},MAINI:{"padding-top":"4px"},CONH:{width:"240px"},CONM:{"margin-top":"4px",width:"240px"},BARCMDL:{top:"3px"},"PRE,PRE2,NEXT,NEXT2":{position:"relative",margin:"0 2px",width:"15px",height:"15px","vertical-align":"middle",cursor:"default","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat",_zoom:1},PRE:{$order:1,"background-position":"-260px -70px"},"PRE-mouseover":{$order:2,"background-position":"-260px -90px"},"PRE-mousedown":{$order:3,"background-position":"-260px -110px"},NEXT:{$order:1,"background-position":"-280px -70px"},"NEXT-mouseover":{$order:2,"background-position":"-280px -90px"},"NEXT-mousedown":{$order:3,"background-position":"-280px -110px"},PRE2:{$order:1,"background-position":"-240px -70px"},"PRE2-mouseover":{$order:2,"background-position":"-240px -90px"},"PRE2-mousedown":{$order:3,"background-position":"-240px -110px"},NEXT2:{$order:1,"background-position":"-300px -70px"},"NEXT2-mouseover":{$order:2,"background-position":"-300px -90px"},"NEXT2-mousedown":{$order:3,"background-position":"-300px -110px"},"HOUR, MINUTE":{$order:3,margin:"0 2px",height:"15px",width:"16px","font-weight":"bold","vertical-align":"middle",border:"1px solid #779EBF","background-color":"#F8FBFF",cursor:"e-resize","padding-left":"2px"},SET:{position:"absolute",display:"none",color:"#ff0000",top:"1px",right:"5px"},TAILI:{position:"relative","padding-top":"4px",height:"20px","text-align":"center"},CAPTION:{"font-size":"12px","vertical-align":xui.browser.ie6?"baseline":"middle"},".xuiex-timepicker2, .xuiex-timepicker4":{$order:1,"background-color":"#FDF8D2"},".xuiex-timepicker":{"font-size":"12px",width:"24px",height:"16px","text-align":"center","background-color":"#F9F9FB"},".xuiex-timepicker3":{"font-size":"12px",width:"20px",height:"16px","text-align":"center","background-color":"#F9F9FB","font-weight":"bold"},".xuiex-timepicker-mouseover, .xuiex-timepicker3-mouseover":{$order:2,"background-color":"#d9e8fb"},".xuiex-timepicker-checked, .xuiex-timepicker3-checked":{$order:2,"background-color":"#316AC5",color:"#fff"}},Behaviors:{HoverEffected:{CLOSE:"CLOSE",PRE:"PRE",NEXT:"NEXT",PRE2:"PRE2",NEXT2:"NEXT2",SET:"SET"},ClickEffected:{CLOSE:"CLOSE",PRE:"PRE",NEXT:"NEXT",PRE2:"PRE2",NEXT2:"NEXT2",SET:"SET"},KEY:{onClick:function(){return false}},HOUR:{beforeMousedown:function(c,d,f){if(xui.Event.getBtn(d)!="left"){return}xui(f).startDrag(d,{dragType:"blank",targetReposition:false,widthIncrement:5,dragCursor:true});c.$temp2=0},onDrag:function(f,h,j){var g,i=xui.DragDrop.getProfile().offset,d=f.properties.$UIvalue,c=d.split(":");c[0]=(parseFloat(c[0])||0)+parseInt(i.x/10,10);c[0]=(c[0]%24+24)%24;f.$temp2=(c[0]<=9?"0":"")+c[0];if(d[0]!=f.$temp2){f.getSubNode("HOUR").html(f.$temp2,false)}},onDragstop:function(c,d,f){if(c.$temp2){c.$hour=c.$temp2;c.boxing()._setCtrlValue(c.$hour+":"+c.$minute)}c.$temp2=0;c.box._hourC(c)}},MINUTE:{beforeMousedown:function(c,d,f){if(xui.Event.getBtn(d)!="left"){return}xui(f).startDrag(d,{dragType:"blank",targetReposition:false,widthIncrement:5,dragCursor:true});c.$temp2=0},onDrag:function(f,h,j){var g,i=xui.DragDrop.getProfile().offset,d=f.properties.$UIvalue,c=d.split(":");c[0]=(parseFloat(c[0])||0)+parseInt(i.x/20,10);c[0]=(c[0]%60+60)%60;f.$temp2=(c[0]<=9?"0":"")+c[0];if(d[0]!=f.$temp2){f.getSubNode("MINUTE").html(f.$temp2,false)}},onDragstop:function(c,d,f){if(c.$temp2){c.$minute=c.$temp2;c.boxing()._setCtrlValue(c.$hour+":"+c.$minute)}c.$temp2=0;c.box._hourC(c)}},SET:{onClick:function(f){var g=f.properties,d=g.$UIvalue,c=d.split(":");c[0]=f.$hour;c[1]=f.$minute;f.boxing().setUIValue(c.join(":"),true);if(f.box){f.box._hourC(f)}}},HI:{onMouseover:function(c,d,f){if(c.properties.disableHoverEffect){return}c.box._mover(xui.use(f).get(0),2)},onMouseout:function(c,d,f){if(c.properties.disableHoverEffect){return}c.box._mout(xui.use(f).get(0),2)},onClick:function(c,d,f){c.$hour=c.getSubId(f);c.boxing()._setCtrlValue(c.$hour+":"+c.$minute);if(c.box){c.box._hourC(c)}},onDblclick:function(c,d,f){c.$hour=c.getSubId(f);c.boxing().setUIValue(c.$hour+":"+c.$minute,true);if(c.box){c.box._hourC(c)}}},MI:{onMouseover:function(c,d,f){if(c.properties.disableHoverEffect){return}c.box._mover(xui.use(f).get(0))},onMouseout:function(c,d,f){if(c.properties.disableHoverEffect){return}c.box._mout(xui.use(f).get(0))},onClick:function(c,d,f){c.$minute=c.getSubId(f);c.boxing().setUIValue(c.$hour+":"+c.$minute,true);if(c.box){c.box._hourC(c)}}},PRE:{onClick:function(d,g,h){var f=d.properties;if(f.disabled||f.readonly){return}var c=d.$minute;c=(parseFloat(c)||0)-1;c=(c%60+60)%60;d.$minute=c=(c<=9?"0":"")+c;d.boxing()._setCtrlValue(d.$hour+":"+d.$minute);if(d.box){d.box._hourC(d)}}},NEXT:{onClick:function(d,g,h){var f=d.properties;if(f.disabled||f.readonly){return}var c=d.$minute;c=(parseFloat(c)||0)+1;c=(c%60+60)%60;d.$minute=c=(c<=9?"0":"")+c;d.boxing()._setCtrlValue(d.$hour+":"+d.$minute);if(d.box){d.box._hourC(d)}}},PRE2:{onClick:function(d,g,h){var f=d.properties;if(f.disabled||f.readonly){return}var c=d.$hour;c=(parseFloat(c)||0)-1;c=(c%24+24)%24;d.$hour=c=(c<=9?"0":"")+c;d.boxing()._setCtrlValue(d.$hour+":"+d.$minute);if(d.box){d.box._hourC(d)}}},NEXT2:{onClick:function(d,g,h){var f=d.properties;if(f.disabled||f.readonly){return}var c=d.$hour;c=(parseFloat(c)||0)+1;c=(c%24+24)%24;d.$hour=c=(c<=9?"0":"")+c;d.boxing()._setCtrlValue(d.$hour+":"+d.$minute);if(d.box){d.box._hourC(d)}}},CLOSE:{onClick:function(f,g,h){var d=f.properties,c=f.boxing();if(d.disabled||d.readonly){return}if(false===c.beforeClose(f,h)){return}c.destroy(true)}}},DataModel:{height:{ini:"auto",readonly:true},width:{ini:250,readonly:true},value:{ini:"00:00",format:"time"},closeBtn:{ini:true,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}}},EventHandlers:{beforeClose:function(c,d){}},_hourC:function(g){var i=g.properties,f=i.$UIvalue,c=f.split(":"),h=(c[0]+"")==(g.$hour+"")&&(c[1]+"")==(g.$minute+"");g.getSubNode("SET").css("display",h?"none":"block");g.getSubNode("CAPTION").css("color",h?"":"#ff0000")},_prepareData:function(d){var f=arguments.callee.upper.call(this,d);var c="display:none";f.closeDisplay=f.closeBtn?"":c;f._set=xui.wrapRes("inline.set");return f},_ensureValue:function(f,g){var d,c=[];if(g&&typeof g=="string"){d=g.split(":")}else{if(g&&typeof g=="object"&&_.isArr(g)){d=g}else{d=[]}}c[0]=parseFloat(d[0])||0;c[1]=parseFloat(d[1])||0;if(c[0]<0){c[0]=0}if(c[0]>23){c[0]=23}if(c[1]<0){c[1]=0}if(c[1]>59){c[1]=59}c[0]=(c[0]<=9?"0":"")+c[0];c[1]=(c[1]<=9?"0":"")+c[1];return c.join(":")},formatValue:function(c){return c.join(":")},_v2a:function(c){return typeof c=="string"?c.split(":"):c},_showV:function(d,c){var g=d.CF;if(typeof g.formatCaption=="function"){return g.formatCaption(c)}else{return c.join(":")}},_onresize:function(){}}});Class("xui.UI.List",["xui.UI","xui.absList","xui.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(g){if(!g.renderId){return}var n=g.box,v=g.boxing().getUIValue(),d=g.properties,y=n._ITEMKEY||"ITEM",i=n._DIRTYKEY||"ITEM",j=function(p,z){return g.getSubNode(p,z)},q=function(k){return g.getSubIdByItemId(k)};if(d.selMode=="single"){var u=q(v);if(v!==null&&u){j(i,u).tagClass("-checked",false).tagClass("-mouseover",false)}u=q(c);if(u){j(i,u).tagClass("-checked")}if(u){var f=j(y,u);if(f){var r=g.getSubNode("ITEMS"),l=f.offset(null,r),s=l?l.top:0,w=f.offsetHeight(),m=r.scrollHeight(),x=r.scrollTop(),h=r.height();if(m>h){if(s<x||(s+w)>(x+h)){r.scrollTop(s)}}}}}else{if(d.selMode=="multi"||d.selMode=="multibycheckbox"){v=v?v.split(d.valueSeparator):[];c=c?c.split(d.valueSeparator):[];_.arr.each(v,function(k){j(i,q(k)).tagClass("-checked",false).tagClass("-mouseover",false)});_.arr.each(c,function(k){j(i,q(k)).tagClass("-checked")})}}})},_clearMouseOver:function(){var d=this.constructor,c=d._ITEMKEY||"ITEM";this.getSubNode(c,true).tagClass("-mouseover",false)},adjustSize:function(){return this.each(function(j){var f=j.getRoot(),g=j.getSubNode("ITEMS"),d=j.properties,i,c;if(f.css("display")=="none"){c=1;f.css("visibility","hidden")}if(j.properties.height!="auto"){g.height("auto");i=Math.min(d.maxHeight,g.offsetHeight());d.height=i;g.height(i)}else{g.height("auto");i=g.offsetHeight();if(i>d.maxHeight){g.height(d.maxHeight);j.getRoot().height(d.maxHeight)}}if(c){f.css("visibility","");f.css("display","none")}j.getRoot().height("auto")})},activate:function(){return xui.absList.prototype.activate.call(this)},getShowValue:function(g){var f=this.get(0),h=f.properties,c,d;if(!_.isDefined(g)){g=h.$UIvalue}if((c=_.arr.subIndexOf(h.items,"id",g))!=-1){c=h.items[c].caption;c=c.charAt(0)=="$"?xui.getRes(c.slice(1)):c}else{c=""}return c},_setDirtyMark:function(){return arguments.callee.upper.apply(this,["ITEMS"])}},Static:{_DIRTYKEY:"ITEM",Templates:{tagName:"div",style:"{_style}",className:"xui-uibg-base {_className}",ITEMS:{$order:10,tagName:"div",className:"{_bordertype}",text:"{items}"},$submap:{items:{ITEM:{className:"{_itemRow} {itemClass} {disabled} {readonly}",style:"{itemStyle}{itemDisplay}",tabindex:"{_tabindex}",MARK:{$order:5,style:"{_cbDisplay}"},ICON:{$order:10,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{tagName:"text",text:"&nbsp;{caption}",$order:20},EXTRA:{text:"{ext}",$order:30}}}}},Appearances:{KEY:{"font-size":"12px"},EXTRA:{display:"none"},ITEMS:{position:"relative",overflow:"auto","overflow-x":"hidden"},ITEM:{display:"block",zoom:xui.browser.ie?1:null,"font-family":'"Verdana", "Helvetica", "sans-serif"',border:0,cursor:"pointer","font-size":"12px",padding:"4px 2px",position:"relative"},"ITEM-mouseover, ITEM-mousedown, ITEM-checked":{"background-image":xui.UI.$bg("item.gif",""),"background-repeat":"repeat-x"},"ITEM-mouseover":{$order:1,"background-color":"#FAD200","background-position":"left -51px"},"ITEM-mousedown":{$order:2,"background-color":"#F5D22D","background-position":"left -101px"},"ITEM-checked":{$order:2,"background-color":"#AAD2FA","background-position":"left top"},MARK:{$order:1,cursor:"pointer",width:"16px",height:"16px","vertical-align":"middle","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-20px -70px"},"ITEM-checked MARK":{$order:2,"background-position":"0 -70px"}},Behaviors:{HoverEffected:{ITEM:"ITEM"},ClickEffected:{ITEM:"ITEM"},DraggableKeys:["ITEM"],DroppableKeys:["ITEM","ITEMS"],onSize:xui.UI.$onSize,ITEM:{onDblclick:function(d,g,h){var c=d.properties,f=d.getItemByDom(h);d.boxing().onDblclick(d,f,g,h)},onClick:function(d,l,c){var n=d.properties,u=d.getItemByDom(c),p=d.getSubId(c),k=d.boxing(),r=xui.Event.getKey(l);if(d.beforeClick&&false===o.boxing().beforeClick(d,u,l,c)){return false}if(n.disabled||u.disabled){return false}if(d.onClick){k.onClick(d,u,l,c)}xui.use(c).focus();switch(n.selMode){case"none":k.onItemSelected(d,u,l,c,0);break;case"multibycheckbox":if(n.readonly||u.readonly){return false}if(d.keys.MARK){if(d.getKey(xui.Event.getSrc(l).id||"")!=d.keys.MARK){k.onItemSelected(d,u,l,c,0);break}}case"multi":if(n.readonly||u.readonly){return false}var s=k.getUIValue(),j=s?s.split(n.valueSeparator):[],q=1;if(j.length&&(r.ctrlKey||r.shiftKey||n.noCtrlKey||n.$checkbox)){if(r.shiftKey){var m=n.items,g=_.arr.subIndexOf(m,"id",d.$firstV.id),f=_.arr.subIndexOf(m,"id",u.id),h;j.length=0;for(h=Math.min(g,f);h<=Math.max(g,f);h++){j.push(m[h].id)}}else{if(_.arr.indexOf(j,u.id)!=-1){_.arr.removeValue(j,u.id);q=-1}else{j.push(u.id)}}j.sort();s=j.join(n.valueSeparator);if(k.getUIValue()!==s){k.setUIValue(s);if(k.get(0)&&k.getUIValue()==s){k.onItemSelected(d,u,l,c,q)}}break}case"single":if(n.readonly||u.readonly){return false}if(k.getUIValue()!==u.id){d.$firstV=u;k.setUIValue(u.id);if(k.get(0)&&k.getUIValue()==u.id){k.onItemSelected(d,u,l,c,1)}}break}if(d.afterClick){k.afterClick(d,u,l,c)}},onKeydown:function(f,i,c){var m=xui.Event.getKey(i),l=m[0],d=m[2],k=xui(c),h=f.getRoot().nextFocus(true,true,false),j=f.getRoot().nextFocus(false,true,false);switch(xui.Event.getKey(i)[0]){case"tab":if(d){if(k.get(0)!=h.get(0)){h.focus();return false}}else{if(k.get(0)!=j.get(0)){j.focus();return false}}break;case"left":case"up":var g=k.nextFocus(false,true,false);if(k.get(0)==h.get(0)){j.focus()}else{k.nextFocus(false)}return false;break;case"right":case"down":var g=k.nextFocus(true,false,false);if(k.get(0)==j.get(0)){h.focus()}else{k.nextFocus()}return false;break;case"enter":k.onClick(true);break}},onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f,c.getItemByDom(f))!==false}}}},DataModel:{selMode:{ini:"single",listbox:["single","none","multi","multibycheckbox"],action:function(c){if(!this.box._ITEMMARKED){this.getSubNode("MARK",true).css("display",(c=="multi"||c=="multibycheckbox")?"":"none")}}},borderType:{ini:"flat",listbox:["none","flat","inset","outset"],action:function(d){var g=this,j=g.properties,h=g.getSubNode("ITEMS"),f=/^xui-uiborder-/,i="xui-uiborder-",c=g.getRoot();h.removeClass(f);h.addClass(i+d);xui.UI.$tryResize(g,c.get(0).style.width,c.get(0).style.height,true)}},noCtrlKey:true,width:120,height:150,maxHeight:420,itemRow:{ini:false,action:function(c){var d=this.getSubNode("ITEM",true);if(c){d.addClass("xui-item-row")}else{d.removeClass("xui-item-row")}}}},EventHandlers:{onClick:function(c,d,f,g){},beforeClick:function(c,d,f,g){},afterClick:function(c,d,f,g){},onDblclick:function(c,d,f,g){},onItemSelected:function(d,f,g,h,c){}},_onStartDrag:function(c,d,f,g){var g=xui.Event.getPos(d);xui.use(f).startDrag(d,{dragType:"icon",shadowFrom:f,targetLeft:g.left+12,targetTop:g.top+12,dragCursor:"pointer",dragDefer:1,dragKey:c.box.getDragKey(c,f),dragData:c.box.getDragData(c,d,f)});return false},_onDropTest:function(d,i,k,c,g,f){var j=g&&g.domId,h=xui.use(k).id();if(j){if(j==h){return false}if(_.get(xui.use(k).get(0),["previousSibling","id"])==j){return false}}},_onDrop:function(g,l,d,m,j,p){xui.DragDrop.setDragIcon("none");var i=g.getKey(xui.use(d).id()),f=j.profile,c=j.domId,h,n=xui.absObj.$specialChars;h=_.clone(f.getItemByDom(c),function(q,k){return !n[(k+"").charAt(0)]});f.boxing().removeItems([h.id]);if(i==g.keys.ITEM){g.boxing().insertItems([h],p.id,true)}else{g.boxing().insertItems([h])}return false},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d._bordertype="xui-uiborder-"+d.borderType;return d},_prepareItem:function(c,d){d._cbDisplay=(c.properties.selMode=="multi"||c.properties.selMode=="multibycheckbox")?"":"display:none;";d._itemRow=c.properties.itemRow?"xui-item-row":""},RenderTrigger:function(){if(this.key!="xui.UI.List"){return}var c=this.properties;xui.UI.$doResize(this,c.width,c.height)},_onresize:function(i,h,d){var f=i.properties,g=f.borderType!="none"?2:0,j=f.dock,c=f.maxHeight;if(d){i.getSubNode("ITEMS").height(d=="auto"?d:(d-g));if(j!="fill"&&j!="cover"&&j!="height"&&j!="left"&&j!="right"){if(i.getSubNode("ITEMS").height()>c){i.getSubNode("ITEMS").height(c);i.getRoot().height("auto")}}}if(h){i.getSubNode("ITEMS").width(h=="auto"?h:(h-g))}}}});Class("xui.UI.Gallery","xui.UI.List",{Instance:{getStatus:function(d){var c=this.get(0).getItemByItemId(d);return(c&&c._status)||"ini"}},Initialize:function(){var c=this.getTemplate();c.$submap={items:{ITEM:{tabindex:"{_tabindex}",className:"{itemClass} {disabled} {readonly}",style:"padding:{itemPadding}px;margin:{itemMargin}px;{itemStyle}",ITEMFRAME:{style:"{_itemSize};",CAPTION:{tagName:"div",style:"{capDisplay}",text:"{caption}",$order:0},CONTENT:{tagName:"div",$order:1,className:"xui-busy",style:"{_loadbg}",IBWRAP:{tagName:"div",IMAGE:{tagName:"img",src:"{image}",width:"{imgWidth}",height:"{imgHeight}",style:"{imgStyle}"}}},COMMENT:{tagName:"div",text:"{comment}",$order:2}},FLAG:{$order:20,className:"{flagClass}",style:"{flagStyle}"},EXTRA:{text:"{ext}",$order:30}}}};this.setTemplate(c)},Static:{Appearances:{FLAG:{position:"absolute",left:"auto",top:0,right:0,width:"32px",height:"32px",display:"none"},EXTRA:{display:"none"},KEY:{overflow:"visible"},ITEMS:{position:"relative",overflow:"auto","overflow-x":"hidden",zoom:xui.browser.ie6?1:null},ITEM:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,position:"relative",cursor:"pointer","vertical-align":"top",border:xui.browser.ie6?"solid 1px #fefefe":"solid 1px transparent",_filter:"chroma(color=#FEFEFE)",margin:0},ITEMFRAME:{display:xui.browser.ie?"inline-block":"block",position:"relative",overflow:"hidden",border:0,padding:0,margin:0,width:"100%",height:"100%","-moz-box-flex":"1"},IBWRAP:{"font-size":0,"line-height":0},"ITEM-mouseover":{$order:1,padding:0,border:"solid 1px #a0c8f0","background-color":"#e1f0ff"},"ITEM-mousedown":{$order:2,padding:0,border:"solid 1px #dcdcdc","background-color":"#bbcef1"},"ITEM-checked":{$order:2,padding:0,border:"solid 1px #bbcef1","background-color":"#bbcef1"},"ITEM-mouseover, ITEM-mousedown, ITEM-checked":{},IMAGE:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,visibility:"hidden","vertical-align":"middle"},CAPTION:{"text-align":"center",overflow:"hidden","white-space":"nowrap","font-weight":"bold"},CONTENT:{"text-align":"center",overflow:"hidden","white-space":"nowrap","background-repeat":"no-repeat","background-position":"center center"},COMMENT:{display:"block","font-size":"12px",margin:"2px","text-align":"center"}},Behaviors:{IMAGE:{onLoad:function(c,h,i){var g=c.properties,j=xui.use(i),f=j.get(0),d=c.getItemByDom(i);if(d.autoItemSize||g.autoItemSize){j.attr("width","");j.attr("height","")}xui(f).parent(2).removeClass("xui-busy");j.onLoad(null).onError(null).$removeEventHandler("load").$removeEventHandler("error");f.style.visibility="visible";d._status="loaded"},onError:function(c,h,i){var g=c.properties,j=xui.use(i),f=j.get(0),d=c.getItemByDom(i);xui(f).parent(2).removeClass("xui-busy").addClass("xui-err");if(d.errImg||g.errImg){xui(f).parent(2).css("backgroundImage","url("+(d.errImg||g.errImg)+")")}j.onLoad(null).onError(null).$removeEventHandler("load").$removeEventHandler("error");f.style.visibility="hidden";d._status="error"}}},DataModel:({autoItemSize:{ini:false,action:function(){this.boxing().refresh()}},loadingImg:"",errImg:"",itemMargin:{ini:6,action:function(c){if(typeof c!="object"){this.getSubNode("ITEM",true).css("margin",(""+parseFloat(c))==(""+c)?c+"px":c)}else{this.getSubNode("ITEM",true).css(c)}}},itemPadding:{ini:2,action:function(c){if(typeof c!="object"){this.getSubNode("ITEM",true).css("padding",(""+parseFloat(c))==(""+c)?c+"px":c)}else{this.getSubNode("ITEM",true).css(c)}}},itemWidth:{ini:32,action:function(c){this.getSubNode("ITEMFRAME",true).width(c)}},itemHeight:{ini:32,action:function(c){this.getSubNode("ITEMFRAME",true).height(c)}},imgWidth:{ini:16,action:function(c){this.getSubNode("IMAGE",true).width(c)}},imgHeight:{ini:16,action:function(c){this.getSubNode("IMAGE",true).height(c)}},width:200,height:200}),_prepareItem:function(c,d){var f=c.properties;_.arr.each(_.toArr("itemWidth,itemHeight,imgWidth,imgHeight,itemPadding,itemMargin,autoItemSize,loadingImg,errImg"),function(g){d[g]=_.isSet(d[g])?d[g]:f[g]});d.caption=d.caption||"";if(d.caption===""){d.capDisplay="display:none;"}d.comment=d.comment||"";d._tabindex=f.tabindex;if(d.autoItemSize||f.autoItemSize){d._itemSize=""}else{d._itemSize="width:"+d.itemWidth+"px;height:"+d.itemHeight+"px;"}if(d.loadingImg||f.loadingImg){d._loadbg="background-image:url("+(d.loadingImg||f.loadingImg)+")"}}}});Class("xui.UI.IconList","xui.UI.List",{Instance:{getStatus:function(d){var c=this.get(0).getItemByItemId(d);return(c&&c._status)||"ini"}},Initialize:function(){var c=this.getTemplate();c.$submap={items:{ITEM:{tabindex:"{_tabindex}",className:"xui-busy {itemClass} {disabled}  {readonly}",style:"padding:{itemPadding}px;margin:{itemMargin}px;{itemStyle};{itemDisplay};{_loadbg}",IBWRAP:{tagName:"div",IMAGE:{tagName:"img",src:"{image}",width:"{itemWidth}",height:"{itemHeight}",style:"{imgStyle}"}}}}};this.setTemplate(c)},Static:{Appearances:{KEY:{overflow:"auto","overflow-x":"hidden"},ITEMS:{overflow:"auto","overflow-x":"hidden",position:"relative","line-height":"14px",zoom:xui.browser.ie6?1:null},ITEM:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,position:"relative",cursor:"pointer",border:"solid 1px #C2E4FC","vertical-align":"top","background-repeat":"no-repeat","background-position":"center center"},IMAGE:{visibility:"hidden"},IBWRAP:{"font-size":0,"line-height":0},"ITEM-mouseover":{$order:1,padding:0,border:"solid 1px #a0c8f0","background-color":"#e1f0ff"},"ITEM-mousedown":{$order:2,padding:0,border:"solid 1px #dcdcdc","background-color":"#bbcef1"},"ITEM-checked":{$order:2,padding:0,border:"solid 1px #bbcef1","background-color":"#bbcef1"},"ITEM-mouseover, ITEM-mousedown, ITEM-checked":{}},Behaviors:{IMAGE:{onLoad:function(c,h,i){var g=c.properties,j=xui.use(i),f=j.get(0),d=c.getItemByDom(i);if(d.autoItemSize||g.autoItemSize){j.attr("width","");j.attr("height","")}xui(f).parent(2).removeClass("xui-busy");j.onLoad(null).onError(null).$removeEventHandler("load").$removeEventHandler("error");f.style.visibility="visible";d._status="loaded"},onError:function(c,h,i){var g=c.properties,j=xui.use(i),f=j.get(0),d=c.getItemByDom(i);xui(f).parent(2).removeClass("xui-busy").addClass("xui-err");if(d.errImg||g.errImg){xui(f).parent(2).css("backgroundImage","url("+(d.errImg||g.errImg)+")")}j.onLoad(null).onError(null).$removeEventHandler("load").$removeEventHandler("error");f.style.visibility="hidden";d._status="error"}}},DataModel:({autoItemSize:{ini:false,action:function(){this.boxing().refresh()}},loadingImg:"",errImg:"",itemMargin:{ini:6,action:function(c){if(typeof c!="object"){this.getSubNode("ITEM",true).css("margin",(""+parseFloat(c))==(""+c)?c+"px":c)}else{this.getSubNode("ITEM",true).css(c)}}},itemPadding:{ini:2,action:function(c){if(typeof c!="object"){this.getSubNode("ITEM",true).css("padding",(""+parseFloat(c))==(""+c)?c+"px":c)}else{this.getSubNode("ITEM",true).css(c)}}},itemWidth:{ini:16,action:function(c){this.getSubNode("IMAGE",true).width(c)}},itemHeight:{ini:16,action:function(c){this.getSubNode("IMAGE",true).height(c)}},width:200,height:200}),_prepareItem:function(c,d){var f=c.properties;_.arr.each(_.toArr("itemWidth,itemHeight,itemPadding,itemMargin,autoItemSize,loadingImg,errImg"),function(g){d[g]=_.isSet(d[g])?d[g]:f[g]});d._tabindex=f.tabindex;if(d.loadingImg||f.loadingImg){d._loadbg="background-image:url("+(d.loadingImg||f.loadingImg)+")"}}}});Class("xui.UI.Panel","xui.UI.Div",{Instance:{activate:function(d){var f,c=this.constructor;if(f=xui.UI._cache["$"+c.activeWndId]){f.getSubNode("TBAR").tagClass("-focus",false)}delete c.activeWndId;if(d!==false){f=this.get(0);f.getSubNode("TBAR").tagClass("-focus");f.getSubNode("CAPTION").focus();c.activeWndId=f.$xid}},resetPanelView:function(d,f){if(!_.isSet(d)){d=true}if(!_.isSet(f)){f=true}var c;return this.each(function(g){if(g.renderId){delete g.$ini;if(d){c=g.boxing();c.removeChildren(true,f)}if(g.properties.toggle){c.setToggle(false)}}})},iniPanelView:function(){return this.each(function(d){var c=d.boxing();if(c.onIniPanelView&&c.onIniPanelView(d)!==false){d.$ini=true}})}},Static:{_shadowRB:"BBARTDR",Templates:{tagName:"div",style:"{_style}",className:"{_className}",BORDER:{tagName:"div",TBAR:{tagName:"div",className:"xui-uibar-top",BART:{cellpadding:"0",cellspacing:"0",width:"100%",height:"100%",border:"0",tagName:"table",className:"xui-uibar-t",BARTR:{tagName:"tr",BARTDL:{tagName:"td",className:"xui-uibar-tdl"},BARTDM:{$order:1,width:"100%",tagName:"td",className:"xui-uibar-tdm"},BARTDR:{$order:2,tagName:"td",className:"xui-uibar-tdr"}}},BARCMDL:{tagName:"div",className:"xui-uibar-cmdl",TOGGLE:{className:"xui-uicmd-toggle {toggleCls}",style:"{toggleDisplay}",$order:0},ICON:{$order:0,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{tabindex:"{tabindex}",text:"{caption}",$order:1}},BARCMDR:{tagName:"div",className:"xui-uibar-cmdr",INFO:{className:"xui-uicmd-info",style:"{infoDisplay}",$order:1},OPT:{className:"xui-uicmd-opt",style:"{optDisplay}",$order:1},POP:{className:"xui-uicmd-pop",style:"{popDisplay}",$order:2},REFRESH:{className:"xui-uicmd-refresh",style:"{refreshDisplay}",$order:3},CLOSE:{className:"xui-uicmd-close ",style:"{closeDisplay}",$order:4}}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main",MAINI:{tagName:"div",className:"xui-uicon-maini",PANEL:{tagName:"div",className:"{_bordertype}",style:"{panelDisplay};{_panelstyle};{_overflow};",text:"{html}"+xui.UI.$childTag}}},BBAR:{$order:3,tagName:"div",className:"xui-uibar-bottom-s",BBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"xui-uibar-t",BBARTR:{tagName:"tr",BBARTDL:{tagName:"td",className:"xui-uibar-tdl"},BBARTDM:{$order:1,width:"100%",tagName:"td",className:"xui-uibar-tdm"},BBARTDR:{$order:2,tagName:"td",className:"xui-uibar-tdr"}}}}}},Appearances:{KEY:{overflow:"hidden",background:"transparent"},"KEY BORDER":{zoom:xui.browser.ie6?1:null},PANEL:{position:"relative",left:0,top:0,overflow:"auto","line-height":"1.22em",zoom:xui.browser.ie6?1:null},CAPTION:{"font-size":"12px",cursor:"pointer",display:"inline","vertical-align":xui.browser.ie6?"baseline":"middle"}},Behaviors:{DroppableKeys:["PANEL"],PanelKeys:["PANEL"],DraggableKeys:["TBAR"],NoDraggableKeys:["INFO","OPT","CLOSE","POP","REFRESH","TOGGLE"],HoverEffected:{INFO:"INFO",OPT:"OPT",CLOSE:"CLOSE",POP:"POP",REFRESH:"REFRESH",TOGGLE:"TOGGLE"},ClickEffected:{INFO:"INFO",OPT:"OPT",CLOSE:"CLOSE",POP:"POP",REFRESH:"REFRESH",TOGGLE:"TOGGLE"},onSize:xui.UI.$onSize,INFO:{onClick:function(c,d,f){c.boxing().onShowInfo(c,d,f)}},OPT:{onClick:function(c,d,f){c.boxing().onShowOptions(c,d,f)}},REFRESH:{onClick:function(c,d,f){c.boxing().onRefresh(c)}},TOGGLE:{onClick:function(c,d,f){c.box._toggle(c,!c.properties.toggle);return false}},CAPTION:{onClick:function(c,d,f){if(!c.onClickBar||false===c.boxing().onClickBar(c,f)){return xui.Event.getKey(d).shiftKey}}},CLOSE:{onClick:function(f,g,h){var d=f.properties;if(d.disabled){return}var c=f.boxing();if(false===c.beforeClose(f)){return}c.destroy()}},POP:{onClick:function(d,g,c){var i=d.properties;if(i.disabled){return}var j=d.getRoot().offset(),m=d.getRoot().cssSize(),n={parent:null,host:null,properties:null,events:null,CS:null,CC:null,CB:null,CF:null,init:null};if(d.beforePop&&false==d.boxing().beforePop(d,n,g,c)){return false}var k=_.copy(xui.UI.Dialog.$DataStruct),l={};_.merge(k,i,"with");_.merge(k,{dock:"none",width:Math.max(m.width,200),height:Math.max(m.height,100),left:j.left,top:j.top,landBtn:true},"all");if(n.properties){_.merge(k,n.properties,"with")}if(n.events){_.merge(l,n.events,"all")}var h=new xui.UI.Dialog(k,l,n.host||d.host,n.CS||null,n.CC||null,n.CB||null,n.CF||null);if(_.isFun(n.init)&&false===n.init(h,d,n)){}else{h.show(n.parent||xui("body"));var f=[];_.arr.each(d.children,function(p){f.push(p[0])});if(f.length){h.append(xui.UI.pack(f,false))}d.boxing().removeChildren().destroy(true)}}}},DataModel:{selectable:true,position:"absolute",zIndex:0,dock:"fill",caption:{ini:undefined,action:function(c){c=(_.isSet(c)?c:"")+"";this.getSubNode("CAPTION").html(xui.adjustRes(c,true))}},image:{format:"image",action:function(c){this.getSubNode("ICON").css("display",c?"":"none").css("backgroundImage",c?("url("+xui.adjustRes(c||"")+")"):"")}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c)}},html:{action:function(c){this.getSubNode("PANEL").html(xui.adjustRes(c,0,1))}},toggle:{ini:true,action:function(c){this.box._toggle(this,c)}},infoBtn:{ini:false,action:function(c){this.getSubNode("INFO").css("display",c?"":"none")}},optBtn:{ini:false,action:function(c){this.getSubNode("OPT").css("display",c?"":"none")}},toggleBtn:{ini:false,action:function(c){this.getSubNode("TOGGLE").css("display",c?"":"none")}},closeBtn:{ini:false,action:function(c){this.getSubNode("CLOSE").css("display",c?"":"none")}},refreshBtn:{ini:false,action:function(c){this.getSubNode("REFRESH").css("display",c?"":"none")}},popBtn:{ini:false,action:function(c){this.getSubNode("POP").css("display",c?"":"none")}},borderType:{ini:"inset",listbox:["none","flat","inset","outset"],action:function(d){var g=this,j=g.properties,h=g.getSubNode("PANEL"),f=/^xui-uiborder-/,i="xui-uiborder-",c=g.getRoot();h.removeClass(f);h.addClass(i+d);xui.UI.$tryResize(g,c.get(0).style.width,c.get(0).style.height,true)}}},EventHandlers:{onRefresh:function(c){},beforePop:function(d,c,f,g){},beforeClose:function(c){},onIniPanelView:function(c){},beforeFold:function(c){},beforeExpand:function(c){},afterFold:function(c){},afterExpand:function(c){},onShowInfo:function(c,d,f){},onShowOptions:function(c,d,f){},onClickBar:function(c,d){}},LayoutTrigger:function(){var d=this,f=d.properties,c=d.box;if(f.toggle){c._toggle(d,f.toggle)}},_prepareData:function(d){var f=arguments.callee.upper.call(this,d);var c="display:none";f.panelDisplay=f.toggle?"":c;f.toggleCls=f.toggle?"xui-uicmd-toggle-checked":"";f.toggleDisplay=f.toggleBtn?"":c;f.infoDisplay=f.infoBtn?"":c;f.optDisplay=f.optBtn?"":c;f.closeDisplay=f.closeBtn?"":c;f.popDisplay=f.popBtn?"":c;f.refreshDisplay=f.refreshBtn?"":c;f._bordertype="xui-uiborder-"+f.borderType;d._toggle=!!f.toggle;return f},_onresize:function(d,c,n){var m={},l=d.getSubNode("TBAR"),k=d.getSubNode("PANEL"),j=d.getSubNode("BBAR"),h=d.getSubNode("MAIN"),g=d.getSubNode("MAINI"),q=d.properties.borderType=="none"?0:2,i,f,p;if(n){if(n=="auto"){m.height=n}else{i=l.height(),f=j.height();if((p=n-i-f)>0){m.height=p-q}}}if(c){m.width=c-(parseInt(g.css("paddingRight"),10)||0)-(parseInt(h.css("paddingLeft"),10)||0)-k._borderW()}k.cssSize(m,true)},_toggle:function(f,g){var i=f.properties,c=f.boxing();if(g&&!f.$ini){if(c.onIniPanelView){if(c.onIniPanelView(f)!==false){f.$ini=true}if(i.iframeAutoLoad||i.ajaxAutoLoad){xui.UI.Div._applyAutoLoad(f)}}}if(f._toggle!==!!g){f._toggle=i.toggle=!!g;if(g){if(c.beforeExpand&&false===c.beforeExpand(f)){return}}else{if(c.beforeFold&&false===c.beforeFold(f)){return}}f.getSubNode("PANEL").css("display",g?"":"none");if(i.toggleBtn){f.getSubNode("TOGGLE").tagClass("-checked",!!g)}var d=f.getSubNode("BORDER").height();f.getRoot().height(d?d:i.toggle?i.height:"auto");if(g){if(c.afterExpand){c.afterExpand(f)}}else{if(c.afterFold){c.afterFold(f)}}}}}});Class("xui.UI.PageBar",["xui.UI","xui.absValue"],{Instance:{_setCtrlValue:function(c){return this.each(function(h){if(!h.renderId){return}var l,f=h.properties,d=h.box._v2a(c),s=d[0],g=d[1],w=d[2],m=h.keys,x=function(z,y){return z.getSubNode(y)},i=x(h,"FIRST"),p=x(h,"PREV"),n=x(h,"PREM"),r=x(h,"CUR"),q=x(h,"NEXT"),u=x(h,"NEXTM"),j=x(h,"LAST"),k=function(B,A,z,y){if(A){B.first(3).attr("href",f.uriTpl.replace("*",A))}if(_.isSet(z)){B.first(3).html(f.textTpl.replace("*",z),false)}if(_.isSet(y)){B.get(0)._real_page=y}},v=function(z,y){z.css("display",y?"":"none")};k(i,s,s);k(n,"",".."+_.str.repeat(".",String(g-1-s).length),1);k(p,g-1,f.prevMark);k(r,g,g);k(q,g+1,f.nextMark);k(u,"",".."+_.str.repeat(".",String(w-g-1).length),1);k(j,w,w);if((l=g-s)<=0){v(i,0);v(n,0);v(p,0)}else{if(l==1){v(i,1);v(n,0);v(p,0)}else{if(l==2){v(i,1);v(n,0);v(p,1);k(p,g-1,g-1)}else{v(i,1);v(n,1);v(p,1);if(l==3){k(p,g-1,g-1);k(n,g-2,g-2,0)}}}}if((l=w-g)<=0){v(j,0);v(u,0);v(q,0)}else{if(l==1){v(j,1);v(u,0);v(q,0)}else{if(l==2){v(j,1);v(u,0);v(q,1);k(q,g+1,g+1)}else{v(j,1);v(u,1);v(q,1);if(l==3){k(q,g+1,g+1);k(u,g+2,g+2,0)}}}}})},setPage:function(c){return this.each(function(g){var f=g.properties.value,d=f.split(":");d[1]=parseInt(c,10)||d[0];g.boxing().setValue(d.join(":"))})}},Static:{Templates:{style:"{_style}",className:"{_className}",POOL:{style:"position:absolute;display:none;",POP:{tagName:"div",className:"xui-uibg-base"}},LABEL:{text:"{caption}"},FIRST:{$order:1,className:"xui-ui-btn",FIRSTI:{className:"xui-ui-btni",FIRSTC:{className:"xui-ui-btnc",FIRSTA:{tagName:"a",href:"#",tabindex:"{tabindex}"}}}},PREM:{$order:2,className:"xui-ui-btn",PREMI:{className:"xui-ui-btni",PREMC:{className:"xui-ui-btnc",PREMA:{tagName:"a",href:"#",tabindex:"{tabindex}"}}}},PREV:{$order:3,className:"xui-ui-btn",PREVI:{className:"xui-ui-btni",PREVC:{className:"xui-ui-btnc",PREVA:{tagName:"a",href:"#",tabindex:"{tabindex}",text:"{prevMark}"}}}},CUR:{$order:4,className:"xui-ui-btn xui-ui-btn-focus",CURI:{className:"xui-ui-btni",CURC:{className:"xui-ui-btnc",CURA:{tagName:"a",href:"#",tabindex:"{tabindex}"}}}},NEXT:{$order:5,className:"xui-ui-btn",NEXTI:{className:"xui-ui-btni",NEXTC:{className:"xui-ui-btnc",NEXTA:{tagName:"a",href:"#",tabindex:"{tabindex}",text:"{nextMark}"}}}},NEXTM:{$order:6,className:"xui-ui-btn",NEXTMI:{className:"xui-ui-btni",NEXTMC:{className:"xui-ui-btnc",NEXTMA:{tagName:"a",href:"#",tabindex:"{tabindex}"}}}},LAST:{$order:7,className:"xui-ui-btn",LASTI:{className:"xui-ui-btni",LASTC:{className:"xui-ui-btnc",LASTA:{tagName:"a",href:"#",tabindex:"{tabindex}"}}}}},Appearances:{LABEL:{"font-size":"12px",padding:"3px 6px 0 6px","vertical-align":"top","white-space":"nowrap"},KEY:{display:"inline",overflow:"visible"},"KEY a:focus, POP a:focus":{"outline-offset":"","-moz-outline-offset":(xui.browser.gek&&xui.browser.ver<3)?"":null},"KEY .xui-ui-btn, POP .xui-ui-btn":{"margin-right":"3px"},"KEY .xui-ui-btn a, POP .xui-ui-btn a":{padding:"0 3px 0 3px"},"PREV,CUR,NEXT":{"font-weight":"bold"},POP:{border:"dotted 1px gray",background:"#fff",position:"absolute",padding:"3px","line-height":"26px"}},Behaviors:{HoverEffected:{FIRST:"FIRST",PREM:"PREM",PREV:"PREV",NEXT:"NEXT",NEXTM:"NEXTM",LAST:"LAST",POPI:"POPI",CUR:"CUR"},ClickEffected:{FIRST:"FIRST",PREM:"PREM",PREV:"PREV",NEXT:"NEXT",NEXTM:"NEXTM",LAST:"LAST",POPI:"POPI",CUR:"CUR"},POP:{onClick:function(c,f,h){var g=xui(h),d=xui.Event.getSrc(f);g.setBlurTrigger(c.key+":"+c.$xid,null);c.getSubNode("POOL").append(g);if(d.tagName.toLowerCase()=="a"||((d=d.firstChild)&&(d.tagName.toLowerCase()=="a"))||((d=d.firstChild)&&(d.tagName.toLowerCase()=="a"))||((d=d.firstChild)&&(d.tagName.toLowerCase()=="a"))){return c.box._click(c,d.parentNode.parentNode.parentNode)}}},FIRST:{onClick:function(c,d,f){return c.box._click(c,f)}},PREM:{onClick:function(c,d,f){if(xui.use(f).get(0)._real_page){c.box._show(c,d,f,0);return false}else{return c.box._click(c,f)}}},PREV:{onClick:function(c,d,f){return c.box._click(c,f)}},CUR:{onClick:function(c,d,f){return c.box._click(c,f)}},NEXT:{onClick:function(c,d,f){return c.box._click(c,f)}},NEXTM:{onClick:function(c,d,f){if(xui.use(f).get(0)._real_page){c.box._show(c,d,f,1);return false}else{return c.box._click(c,f)}}},LAST:{onClick:function(c,d,f){return c.box._click(c,f)}}},DataModel:{dataField:null,dataBinder:null,readonly:null,autoTips:false,caption:{ini:" Page: ",action:function(c){c=(_.isSet(c)?c:"")+"";this.getSubNode("LABEL").html(xui.adjustRes(c,true))}},value:"1:1:1",uriTpl:"#*",textTpl:"*",prevMark:"&lt;",nextMark:"&gt;",_moreStep:100},EventHandlers:{onClick:function(c,d){}},_ensureValue:function(g,h){h=h+"";var f=h.split(":"),c=[],d=function(i){return parseInt(i,10)||1};if(f.length<3){c=g.properties.$UIvalue.split(":");f[1]=f[0];f[0]=c[0];f[2]=c[2]}c[0]=d(f[0]);c[1]=d(f[1]);c[2]=d(f[2]);c[0]=Math.max(c[0],1);c[0]=Math.min(c[0],c[1]);c[2]=Math.max(c[1],c[2]);return c.join(":")},_v2a:function(c){c=typeof c=="string"?c.split(":"):c;c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10);c[2]=parseInt(c[2],10);return c},_click:function(g,i){if(g.properties.disabled){return false}var c=g.boxing(),f=c.getValue(),d=f.split(":");var h=c.onClick(g,parseInt(xui(i).first(3).attr("href").split("#")[1],10)||d[0]);return typeof h=="boolean"?h:false},_show:function(j,B,k,A){if(j.properties.disabled){return false}var f=j.properties,c=j.box._v2a(f.value),x=c[0],h=c[1],z=c[2],r=j.keys,C=function(l,i){return l.getSubNode(i)},s=C(j,"POOL"),p=C(j,"POP"),d=function(i){return Math.ceil((i+1)/10)*10},D=[],q,v,u,y,w;if(A){if((q=z-1-h)<=0){return}u=h+1;w=z}else{if((q=h-1-x)<=0){return}u=1;w=h-1}v=Math.ceil(q/f._moreStep);if(v>10){u=d(u);w=d(w)-1;v=d(v)}else{u=u+v}var g=j.keys.POPI+":"+j.serialId+":";while(u<w){D.push('<span style="margin-top:3px;" id="'+g+u+'" class="xui-node xui-node-span xui-ui-btn"><span class="xui-node xui-node-span xui-ui-btni"><span class="xui-node xui-node-span xui-ui-btnc"><a class="xui-node xui-node-a" href="'+f.uriTpl.replace("*",u)+'">'+f.textTpl.replace("*",u)+"</a></span></span></span>");u=u+v}p.width("auto");p.html(D.join(" "));xui("body").append(p);if(p.width()>300){p.width(300)}p.popToTop(k);p.setBlurTrigger(j.key+":"+j.$xid,function(){s.append(p)})}},Initialize:function(){this.addTemplateKeys(["POPI"])}});Class("xui.UI.Tabs",["xui.UI","xui.absList","xui.absValue"],{Instance:{_setCtrlValue:function(c){this.each(function(h){var f=h.domId,i=h.boxing(),n=i.getUIValue(),d=h.properties,j=h.box.$DataModel,k=function(v,q){var s=h.getSubIdByItemId(v),u=h.getItemByItemId(v);if(s){q.push(s);if(!j.hasOwnProperty("noPanel")||!d.noPanel){var r=i.getPanel(v).get(0);if(r&&(u._scrollTop=r.scrollTop||0)){r.scrollTop=0}i.getPanel(v).css("display","none")}}},p=function(v,q){var r=h.getSubIdByItemId(v),u=h.getItemByItemId(v);if(r){q.push(r);if(!j.hasOwnProperty("noPanel")||!d.noPanel){i.getPanel(v).css("display","block");if(u._scrollTop){i.getPanel(v).get(0).scrollTop=u._scrollTop}var s=h.getRootNode().style;xui.UI.$tryResize(h,s.width,s.height,true,c);s=null;h.box._forLazyAppend(h,u,c);h.box._forIniPanelView(h,u)}}};var m=[],l=[];if(j.hasOwnProperty("selMode")&&j.hasOwnProperty("noPanel")&&d.noPanel&&d.selMode=="multi"){n=n?n.split(d.valueSeparator):[];_.arr.each(n,function(q){k(q,m)});c=c?c.split(d.valueSeparator):[];var g="";_.arr.each(c,function(r){var q=l.length;p(r,l);if(q<l.length){g=r}});if(!d.noHandler&&g){_.tryF(h.box._adjustScroll,[h,g],h.box)}}else{k(n,m);p(c,l);if(!d.noHandler&&l.length){_.tryF(h.box._adjustScroll,[h,c],h.box)}}if(m.length){h.getSubNodes("ITEM",m).tagClass("-checked",false)}if(l.length){h.getSubNodes("ITEM",l).tagClass("-checked")}})},append:function(h,c,g,d){var f=this.get(0).properties;if(c=c||f.$UIvalue||f.value){arguments.callee.upper.call(this,h,c+"",g,d)}return this},getCurPanel:function(){var f=this.get(0),d=f.box.$DataModel,c=f.properties.$UIvalue;if(d.hasOwnProperty("noPanel")&&d.hasOwnProperty("selMode")&&f.properties.selMode=="multi"){c=c.split(prop.valueSeparator);c=c[0]||null}return c?this.getPanel(c):null},getPanel:function(c){var d=this.get(0);return d.getSubNodeByItemId("PANEL",c+"")},addPanel:function(f,j,k){var h={},l=k&&k.id,d=this.getItems(),g=f.id||f.tag;if(d.length){if(-1!=_.arr.subIndexOf(d,"id",g)){return false}if(!l){l=d[d.length-1].id}}_.merge(h,{caption:f.caption,image:f.image,closeBtn:f.closeBtn||false,popBtn:f.popBtn||false,optBtn:f.optBtn||false,imagePos:f.imagePos,dragKey:f.dragKey,dropKeys:f.dropKeys,id:f.id||f.tag||_.id()});this.insertItems([h],l);var c=[];_.arr.each(j,function(i){c.push(i[0])});this.append(xui.UI.pack(c,false),h.id);return this},removePanel:function(f){var c=this,d=c.getItemByDom(f);return c.removeItems([d.id])},getPanelPara:function(h){var f=this.get(0),c=f.properties,g=f.getItemByDom(h),d=_.clone(g,false);if(!d.dragKey){d.dragKey=c.dragKey}if(!d.dropKeys){d.dropKeys=c.dropKeys}return d},getPanelChildren:function(f){var d=this.get(0),g=d.getItemIdByDom(f),c=[];if(g){_.arr.each(d.children,function(h){if(h[1]==g){c.push(h)}})}return c},resetPanelView:function(d,f,h){if(!_.isSet(f)){f=true}if(!_.isSet(h)){h=true}var c,g;return this.each(function(i){if(i.renderId){_.arr.each(i.properties.items,function(j){if(d===true||(d+"")===j.id){delete j._$ini}});if(f){i.boxing().removeChildren(d,h)}}})},iniPanelView:function(c){return this.each(function(d){if(c){if(c=d.getItemByItemId(c+"")){d.box._forIniPanelView(d,c)}}else{_.arr.each(d.properties.items,function(f){d.box._forIniPanelView(d,f)})}})},fireItemClickEvent:function(c){var f=this.getSubNodeByItemId("ITEM",c+""),d=xui.Event;if(d.__realtouch){d.__simulatedMousedown=1}f.onMousedown(true);if(d.__realtouch){d.__simulatedMousedown=0}return this},_afterInsertItems:function(g,i){if(!g.renderId){return}var h=g.box,j,d,c=g.properties;if(j=g.getSubNode(g.keys.BOX||g.keys.KEY)){j.append(g._buildItems("panels",i));if(!g.box.$DataModel.hasOwnProperty("noPanel")){if(!(d=this.getUIValue())){this.fireItemClickEvent((d=c.items[0])&&(d=d.id))}var f=g.getRootNode().style;xui.UI.$tryResize(g,f.width,f.height,true,d);f=null}}},removeItems:function(c){var d=this,g,f;if(!_.isArr(c)){c=[c]}_.arr.each(c,function(j,h){c[h]=""+j});d.each(function(h){if(!h.box.$DataModel.hasOwnProperty("noPanel")||!h.properties.noPanel){_.arr.each(c,function(i){f=h.getSubIdByItemId(i);if(f&&!(g=h.getSubNode("PANEL",f)).isEmpty()){g.remove()}})}});arguments.callee.upper.apply(d,arguments);d.each(function(k){if(!k.boxing().getUIValue()){var j;k.boxing().fireItemClickEvent((j=k.properties.items[0])&&j.id)}if(!k.box.$DataModel.hasOwnProperty("noPanel")||!k.properties.noPanel){var h=k.getRootNode().style;xui.UI.$tryResize(k,h.width,h.height,true,k.boxing().getUIValue());h=null}});return d},clearItems:function(){var c=this;c.each(function(d){if(!d.box.$DataModel.hasOwnProperty("noPanel")||!d.properties.noPanel){d.getSubNode("PANEL",true).remove()}});c.setValue(null,true);arguments.callee.upper.apply(c,arguments);return c},markItemCaption:function(d,i,g){var f=this.get(0);d=f.getItemByItemId(d+"");if((d._dirty!=i)||g){var h=d.id,c=f.getItemByItemId(h).caption;f.getSubNodeByItemId("CAPTION",h).html(f.getItemByItemId(h).caption=i?("*"+c):c.replace(/^\*/,"")).css({color:i?"#ff0000":"","font-weight":i?"bold":""});d._dirty=i}return this},_scrollToBottom:function(g,f){var d=this.get(0),h=d.getSubNode("ITEMS"),c=d.getSubNode("LIST").width();if(g){h.left(c-(g.offsetLeft+g.offsetWidth));if(!g.nextSibling){d.getSubNode("RIGHT").css("display","none")}else{if(f!==false&&g.nextSibling){d.$scrollTobottom=_.asyRun(arguments.callee,600,[g.nextSibling],this)}}d.getSubNode("LEFT").css("display","block")}},_scrollToTop:function(f,d){var c=this.get(0),g=c.getSubNode("ITEMS");if(f){g.left(-f.offsetLeft);if(!f.previousSibling){c.getSubNode("LEFT").css("display","none")}else{if(d!==false&&f.previousSibling){c.$scrollToTop=_.asyRun(arguments.callee,600,[f.previousSibling],this)}}c.getSubNode("RIGHT").css("display","block")}}},Static:{Templates:{tagName:"div",style:"{_style};",className:"{_className}",LIST:{$order:0,tagName:"div",style:"{_liststyle}",ITEMS:{tagName:"div",className:"xui-ui-unselectable",text:"{items}",style:"{HAlign}"},LEFT:{className:"xui-ui-unselectable"},RIGHT:{className:"xui-ui-unselectable"},DROP:{className:"xui-ui-unselectable"}},PNAELS:{$order:1,tagName:"text",text:"{panels}"},$submap:{items:{ITEM:{className:"{itemClass} {disabled} {readonly}",style:"{itemDisplay} {itemStyle}",ITEMI:{ITEMC:{HANDLE:{tabindex:"{_tabindex}",IBWRAP:{tagName:"div",style:"white-space:nowrap;",RULER:{},ICON:{$order:0,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{text:"{caption}",style:"{itemWidth};{itemAlign}",$order:1},CMDS:{$order:2,OPT:{$order:1,className:"xui-uicmd-opt",style:"{_opt}"},POP:{className:"xui-uicmd-pop",style:"{popDisplay}",$order:1},CLOSE:{className:"xui-uicmd-close ",style:"{closeDisplay}",$order:2}}}}}}}},panels:{PANEL:{tagName:"div",className:"xui-uibg-base",style:"{_overflow};{_bginfo}",text:"{html}"+xui.UI.$childTag}}}},Appearances:{KEY:{position:"absolute",overflow:"hidden"},LIST:{position:"relative",overflow:"hidden",left:0,width:"100%","background-image":xui.UI.$bg("line.gif",""),"background-repeat":"repeat-x","background-position":"center bottom"},LEFT:{cursor:"pointer",display:"none",position:"absolute",top:0,left:0,height:"26px",width:"16px","z-index":"10","background-image":xui.UI.$bg("cmds.png",""),"background-repeat":"no-repeat","background-position":"left top"},"LEFT-mouseover":{"background-image":xui.UI.$bg("cmds.png",""),"background-position":"-16px top"},RIGHT:{cursor:"pointer",display:"none",position:"absolute",top:0,right:"16px",height:"26px",width:"16px","z-index":"10","background-image":xui.UI.$bg("cmds.png",""),"background-repeat":"no-repeat","background-position":"-32px top"},"RIGHT-mouseover":{"background-image":xui.UI.$bg("cmds.png",""),"background-position":"-48px top"},DROP:{cursor:"pointer",display:"none",position:"absolute",top:0,right:0,height:"26px",width:"16px","z-index":"10","background-image":xui.UI.$bg("cmds.png",""),"background-repeat":"no-repeat","background-position":"-64px top"},"DROP-mouseover":{"background-image":xui.UI.$bg("cmds.png",""),"background-position":"-80px top"},ITEMS:{padding:"0 0 2px 0",position:"relative",left:0,top:0,"white-space":"nowrap"},ITEM:{$order:0,"font-family":'"Verdana", "Helvetica", "sans-serif"',cursor:"pointer","padding-right":"6px","vertical-align":"top","background-image":xui.UI.$bg("button.gif","",true),"background-repeat":"no-repeat","background-position":"right -540px"},"ITEM-mouseover":{$order:1,"background-position":"right -690px"},"ITEM-mousedown, ITEM-checked":{$order:2,"background-position":"right -840px","border-bottom":"solid 1px #FAD600;"},ITEMI:{$order:0,"padding-left":"6px","vertical-align":"top","background-image":xui.UI.$bg("button.gif","",true),"background-repeat":"no-repeat","background-position":"left -640px"},"ITEM-mouseover ITEMI":{$order:1,"background-position":"left -790px"},"ITEM-mousedown ITEMI, ITEM-checked ITEMI":{$order:2,"background-position":"left -940px"},ITEMC:{$order:0,padding:"5px 0 3px 0","vertical-align":"top","text-align":"center","background-image":xui.UI.$bg("button.gif","",true),"background-repeat":"repeat-x","background-position":"left -590px"},"ITEM-mouseover ITEMC":{$order:1,"background-position":"left -740px"},"ITEM-mousedown ITEMC, ITEM-checked ITEMC":{$order:2,"background-position":"left -890px"},HANDLE:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,cursor:"pointer","vertical-align":"middle","font-size":"12px"},RULER:{height:"18px",width:"1px","vertical-align":"middle"},PANEL:{position:"relative",display:"none",width:"100%",overflow:"auto"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle",margin:"0 4px"},CMDS:{"vertical-align":"middle"}},Behaviors:{NOTIPS:["GROUP","HANDLER"],DroppableKeys:["PANEL","KEY","ITEM"],PanelKeys:["PANEL"],DraggableKeys:["ITEM"],HoverEffected:{ITEM:"ITEM",OPT:"OPT",CLOSE:"CLOSE",POP:"POP",LEFT:"LEFT",RIGHT:"RIGHT",DROP:"DROP"},ClickEffected:{ITEM:"ITEM",OPT:"OPT",CLOSE:"CLOSE",POP:"POP"},onSize:xui.UI.$onSize,OPT:{onMousedown:function(){return false},onClick:function(c,d,f){c.boxing().onShowOptions(c,c.getItemByDom(f),d,f);return false}},CAPTION:{onMousedown:function(d,h,i){if(xui.Event.getBtn(h)!="left"){return}var c=d.properties,g=d.getItemByDom(i),f=d.boxing();if(c.disabled||g.disabled){return false}if(c.readonly||g.readonly){return false}if(f.getUIValue()==g.id){if(d.onCaptionActive){d.boxing().onCaptionActive(d,d.getItemByDom(i),h,i)}}}},ITEM:{onClick:function(c,d,f){return false},onMousedown:function(g,l,c){if(xui.Event.getBtn(l)!="left"){return false}if(g.getKey(xui.Event.getSrc(l).parentNode.id)==g.keys.CMDS){return false}var d=g.properties,k=g.box.$DataModel,m=g.getSubId(c),q=g.getItemByDom(c),j=g.boxing();if(d.disabled||q.disabled){return false}if(d.readonly||q.readonly){return false}g.getSubNode("HANDLE",m).focus();if(k.hasOwnProperty("selMode")&&k.hasOwnProperty("noPanel")&&d.noPanel&&d.selMode=="multi"){var p=j.getUIValue(),i=p?p.split(d.valueSeparator):[],n=1,h=false,f=false;if(i.length){if(_.arr.indexOf(i,q.id)!=-1){_.arr.removeValue(i,q.id);n=-1}else{i.push(q.id)}i.sort();p=i.join(d.valueSeparator);if(j.getUIValue()==p){h=false}else{j.setUIValue(p);if(j.get(0)&&j.getUIValue()==p){h=j.onItemSelected(g,q,l,c,n)||f}}return h}}if(j.getUIValue()!=q.id){j.setUIValue(q.id);if(j.getUIValue()==q.id){h=j.onItemSelected(g,q,l,c)||f;return h}}}},HANDLE:{onClick:function(c,d,f){return xui.Event.getKey(d).shiftKey},onKeydown:function(f,i,c){var n=xui.Event.getKey(i),m=n.key,d=n.shiftKey;if(m==" "||m=="enter"){f.getSubNode("ITEM",f.getSubId(c)).onMousedown();return false}var l=xui(c),j=f.getSubNode("ITEMS"),h=j.nextFocus(true,true,false),k=j.nextFocus(false,true,false);switch(m){case"tab":if(d){if(l.get(0)!=h.get(0)){h.focus();return false}}else{if(l.get(0)!=k.get(0)){k.focus();return false}}break;case"left":case"up":var g=l.nextFocus(false,true,false);if(l.get(0)==h.get(0)){k.focus()}else{l.nextFocus(false)}return false;break;case"right":case"down":var g=l.nextFocus(true,false,false);if(l.get(0)==k.get(0)){h.focus()}else{l.nextFocus()}return false;break}}},CLOSE:{onMousedown:function(){return false},onClick:function(f,h,c){var j=f.properties,p=f.getItemByDom(c),k=j.$UIvalue,m;if(j.disabled||p.disabled){return}if(j.readonly||p.readonly){return false}var l=f.boxing();if(false===l.beforePageClose(f,p,c)){return}m=_.copy(p);if(k&&k==p.id){var i=j.items,g=_.arr.subIndexOf(i,"id",p.id),n,d=(n=i[g+1])?n.id:(n=i[g-1])?n.id:(n=i[0])?n.id:null;if(d&&d!=k){f.boxing().fireItemClickEvent(d)}}l.removeItems(p.id);l.afterPageClose(f,m);var n=f.getRootNode().style;xui.UI.$tryResize(f,n.width,n.height,true);n=null}},POP:{onMousedown:function(){return false},onClick:function(g,i,c){var k=g.properties,p=g.getItemByDom(c),r={parent:null,host:null,properties:null,events:null,CS:null,CC:null,CB:null,CF:null,init:null},f=p.id;if(k.disabled||p.disabled){return false}if(k.readonly||p.readonly){return false}if(g.beforePagePop&&false==g.boxing().beforePagePop(g,p,r,i,c)){return false}var d=g.boxing().getPanel(f),l=g.getRoot().offset(),q=g.getRoot().cssSize(),m=_.copy(xui.UI.Dialog.$DataStruct),n={};_.merge(m,p,"with");_.merge(m,{dragKey:p.dragkey||k.dragKey,dock:"none",tag:p.tag||p.id,width:Math.max(q.width,200),height:Math.max(q.height,100),left:l.left,top:l.top,landBtn:true},"all");if(r.properties){_.merge(m,r.properties,"with")}if(r.events){_.merge(n,r.events,"all")}var j=new xui.UI.Dialog(m,n,r.host||g.host,r.CS||null,r.CC||null,r.CB||null,r.CF||null);if(_.isFun(r.init)&&false===r.init(j,g,r)){}else{j.show(r.parent||xui("body"));var h=[];_.arr.each(g.children,function(s){if(s[1]==f){h.push(s[0])}});if(h.length){j.append(xui.UI.pack(h,false))}g.boxing().removeChildren(f).removeItems(f)}}},ITEMS:{beforeMousedown:function(d,f,g){var c=xui.Event.getPos(f);if(!d._$scroll_l&&!d._$scroll_r){return}xui.use(g).startDrag(f,{horizontalOnly:true,dragType:"blank",dragDefer:2,targetLeft:c.left,targetTop:c.top,targetReposition:false,maxLeftOffset:d._$scroll_l,maxRightOffset:d._$scroll_r})},onDrag:function(d,f,g){var c=xui.DragDrop.getProfile();xui.use(g).left(-d._$scroll_r+c.offset.x)},onDragstop:function(c,d,f){if(c.box._adjustScroll){c.box._adjustScroll(c)}}},LEFT:{onMouseover:function(c,f,h){xui(h).css("display","none");var g=xui(h).get(0).ownerDocument||document;pos=xui.Event.getPos(f),node=g.elementFromPoint(pos.left,pos.top),pnode=c.getSubNode("ITEM",c.getSubId(node.id));xui(h).css("display","block");if(pnode=pnode.get(0)){c.boxing()._scrollToTop(pnode)}xui(h).css("display","block")},onMouseout:function(c,d,f){_.clearTimeout(c.$scrollToTop)},onClick:function(c,f,h){xui(h).css("display","none");var g=xui(h).get(0).ownerDocument||document;pos=xui.Event.getPos(f),node=g.elementFromPoint(pos.left,pos.top),pnode=c.getSubNode("ITEM",c.getSubId(node.id));xui(h).css("display","block");if(pnode=pnode.get(0)){if(pnode.previousSibling){pnode=pnode.previousSibling}_.clearTimeout(c.$scrollToTop);c.boxing()._scrollToTop(pnode,false)}}},RIGHT:{onMouseover:function(c,f,h){xui(h).css("display","none");var g=xui(h).get(0).ownerDocument||document;pos=xui.Event.getPos(f),node=g.elementFromPoint(pos.left,pos.top),pnode=c.getSubNode("ITEM",c.getSubId(node.id));xui(h).css("display","block");if((pnode=pnode.get(0))&&(pnode=pnode.nextSibling)){c.boxing()._scrollToBottom(pnode)}},onMouseout:function(c,d,f){_.clearTimeout(c.$scrollTobottom)},onClick:function(c,f,h){xui(h).css("display","none");var g=xui(h).get(0).ownerDocument||document;pos=xui.Event.getPos(f),node=g.elementFromPoint(pos.left,pos.top),pnode=c.getSubNode("ITEM",c.getSubId(node.id));xui(h).css("display","block");if(pnode=pnode.get(0)){if(pnode.nextSibling){pnode=pnode.nextSibling}_.clearTimeout(c.$scrollTobottom);c.boxing()._scrollToBottom(pnode,false)}}},DROP:{onMouseover:function(f,m,c){var d=f._droppopmenu;if(d){return}var k=f.boxing(),n=f.properties.items,h=[],g=n.length,p;if(n.length>10){p=Math.ceil(g/10);for(var j=0;j<p;j++){h.push({caption:(j*10+1)+" - "+Math.min(g,((j+1)*10+1)),sub:[]})}_.arr.each(n,function(q,l){h[parseInt(l/10)].sub.push(_.clone(q,false,1))})}else{h=_.clone(n,false,2)}d=f._droppopmenu=new xui.UI.PopMenu({items:h,autoHide:true},{onMenuSelected:function(i,l){k.fireItemClickEvent(l.id)},beforeHide:function(u,s){if(s){var l=xui(c),v=xui.Event.getPos(s),i=l.cssSize(),r=3,q=l.offset();if(v.left>q.left&&v.top>q.top-r&&v.left<q.left+i.width&&v.top<q.top+i.height){return false}}},onHide:function(){f._droppopmenu.destroy(true);delete f._droppopmenu}});d.pop(c)},onMouseout:function(f,g,c){var i;if(i=f._droppopmenu){var d=i.get(0).getRoot(),j=xui.Event.getPos(g),l=d.cssSize(),k=3,h=d.offset();if(j.left>h.left&&j.top>h.top-k&&j.left<h.left+l.width&&j.top<h.top+l.height){}else{i.hide()}}},onClick:function(d,c,f){xui(f).onMouseover(true)}}},DataModel:{selectable:true,dirtyMark:false,dataBinder:null,dataField:null,lazyAppend:true,dock:"fill",noPanel:false,width:200,height:200,position:"absolute",itemWidth:{ini:0,action:function(c){this.getSubNode("CAPTION",true).width(c)}},itemAlign:{ini:"",listbox:["","left","center","right"],action:function(c){this.getSubNode("CAPTION",true).css("text-align",c)}},HAlign:{ini:"left",listbox:["left","center","right"],action:function(c){this.getSubNode("ITEMS").css("textAlign",c)}},dropKeysPanel:"",value:{ini:""},selMode:{ini:"single",listbox:["single","multi"]},noHandler:{ini:false,action:function(d){this.getSubNode("LIST").css("display",d?"none":"");var c=this.getRootNode().style;xui.UI.$tryResize(this,c.width,c.height,true,this.$UIValue)}}},EventHandlers:{onIniPanelView:function(c,d){},beforePagePop:function(d,f,c,g,h){},beforePageClose:function(c,d,f){},afterPageClose:function(c,d){},onShowOptions:function(c,d,f,g){},onItemSelected:function(d,f,g,h,c){},onCaptionActive:function(c,d,f,g){}},RenderTrigger:function(){var d=this,c,g,f;if(c=d.properties.value){(f=d.boxing()).setUIValue(c);if(g=d.getItemByItemId(c)){f.onItemSelected(d,g)}}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.panels=d.items;if(d.HAlign){d.HAlign="text-align:"+d.HAlign+";"}d._liststyle=d.noHandler?"display:none":"";return d},_prepareItem:function(d,f){var h="display:none",g=d.properties,c;f.closeDisplay=f.closeBtn?"":h;f.popDisplay=f.popBtn?"":h;f._opt=f.optBtn?"":h;f.itemDisplay=f.hidden?h:"";if(c=f.itemWidth||g.itemWidth){f.itemWidth="width:"+c+(_.isFinite(c)?"px":"")}if(c=f.itemAlign||g.itemAlign){f.itemAlign="text-align:"+c}f._bginfo="";if(c=f.panelBgClr||g.panelBgClr){f._bginfo+="background-color:"+c+";"}if(c=f.panelBgImg||g.panelBgImg){f._bginfo+="background-image:url("+xui.adjustRes(c)+");"}if(c=f.panelBgImgPos||g.panelBgImgPos){f._bginfo+="background-position:"+c+";"}if(c=f.panelBgImgRepeat||g.panelBgImgRepeat){f._bginfo+="background-repeat:"+c+";"}if(c=f.panelBgImgAttachment||g.panelBgImgAttachment){f._bginfo+="background-attachment:"+c+";"}if(_.isStr(f.overflow)){f._overflow=f.overflow.indexOf(":")!=-1?(f.overflow):("overflow:"+f.overflow)}else{if(_.isStr(g.overflow)){f._overflow=g.overflow.indexOf(":")!=-1?(g.overflow):("overflow:"+g.overflow)}}},getDropKeys:function(c,d){return c.properties[c.getKey(xui.use(d).id())==c.keys.PANEL?"dropKeys":"dropKeysPanel"]},_forLazyAppend:function(d,m,k){var c=d.properties,g=d.boxing();if(c.lazyAppend){var h=d.children,j=[];_.arr.each(h,function(i){if(i[1]==k&&(!i[0].renderId||xui.UIProfile.getFromDom(xui(i[0].renderId).parent().id())!=d)){j.push(i[0])}});if(j.length){g.append(xui.UI.pack(j),k)}if(d.$attached){for(var f=0,l;l=d.$attached[f++];){if(l._render){l._render(true)}}delete d.$attached}h=d.exchildren;if(h&&h.length){j=[];_.filter(h,function(i){if(i[1]==k){j.push(i[0]);return false}});if(j.length){_.arr.each(j,function(i){g.append(xui(i),k)})}}h=d.excoms;if(h&&h.length){j=[];_.filter(h,function(i){if(i[1]==k){j.push(i[0]);return false}});if(j.length){_.arr.each(j,function(i){i.show(null,g,k,false)})}}}},_forIniPanelView:function(g,m){if(!m){return}var c=g.properties,i=g.boxing();if(!m._$ini){if(i.onIniPanelView(g,m)!==false){m._$ini=true}if(m.iframeAutoLoad){i.getPanel(m.id).css("overflow","hidden");var l=typeof m.iframeAutoLoad=="string"?{url:m.iframeAutoLoad}:_.clone(m.iframeAutoLoad,true),d="diframe_"+_(),k=xui.browser.ie&&xui.browser.ver<9,h=document.createElement(k?"<iframe name='"+d+"'>":"iframe");l.url=xui.adjustRes(l.url,false,true);h.id=h.name=d;if(_.isHash(m.iframeAutoLoad)){m.iframeAutoLoad.frameName=d}if(!l.query){l.query={}}l.query._rand=_();h.src=l.url;h.frameBorder="0";h.marginWidth="0";h.marginHeight="0";h.vspace="0";h.hspace="0";h.allowTransparency="true";h.width="100%";h.height="100%";i.getPanel(m.id).html("").append(h);xui.Dom.submit(l.url,l.query,l.method,d,l.enctype)}else{if(m.ajaxAutoLoad){var j=typeof m.ajaxAutoLoad=="string"?{url:m.ajaxAutoLoad}:_.clone(m.ajaxAutoLoad,true),n={rspType:"text"};_.merge(n,j.options);if(!j.query){j.query={}}j.query._rand=_();i.busy(null,null,"PANEL",g.getSubIdByItemId(m.id));var f=i.getPanel(m.id);xui.Ajax(xui.adjustRes(j.url,false,true),j.query,function(p){f.html(p,true,true);i.free()},function(p){f.html("<div>"+p+"</div>",true,false);i.free()},null,n).start()}}}},_showTips:function(g,f,j){if(g.properties.disableTips){return}if(g.onShowTips){return g.boxing().onShowTips(g,f,j)}if(!xui.Tips){return}var c=f.id,h,d,k=g.keys;h=_.get(f,["parentNode","id"])||"";d=_.get(f,["parentNode","parentNode","id"])||"";if(c.indexOf(k.ITEM)===0||h.indexOf(k.ITEM)===0||d.indexOf(k.ITEM)===0||c.indexOf(k.HANDLE)===0||h.indexOf(k.HANDLE)===0||d.indexOf(k.HANDLE)===0||c.indexOf(k.CMDS)===0||h.indexOf(k.CMDS)===0||d.indexOf(k.CMDS)===0){var l=arguments.callee.upper,i=l.apply(this,_.toArr(arguments));l=null;return i}else{return false}},_onresize:function(g,d,n,c,m){var q=g.properties,p=g.getItemByItemId(m);if(!p){m=q.$UIvalue}p=g.getItemByItemId(m);var f=g.boxing().getPanel(m),i=g.getSubNode("LIST"),k;if(!f||f.isEmpty()){return}var j=null,h=null;if(c){p._w=p._h=null}if(n&&p._h!=n){p._h=n;if(n&&n!="auto"){if(!q.noHandler){k=i.get(0).offsetHeight||i.offsetHeight();n=n-k}if(n>0){j=n}}else{j=n}}if(d&&p._w!=d){i.width(p._w=d);if(!q.noHandler){this._adjustScroll(g)}h=d}if(j||h){f.height(j).onSize()}},_adjustScroll:function(g,j){var k=g.getSubNode("LIST"),p=k.offsetWidth(),m=g.getSubNode("ITEMS"),i=m.left(),f=g.getSubNode("LEFT"),q=g.getSubNode("RIGHT"),d=g.getSubNode("DROP"),c=0,h=0,n=0;m.children().each(function(l){if(j&&g.getItemIdByDom(l.id)==j){h=c;n=l.offsetWidth}c+=l.offsetWidth});m.width(Math.max(c,p));if(c<=p){m.left(0);g._$scroll_r=g._$scroll_l=0;m.css("cursor","")}else{if(n){if((h+i<0)||(h+n-i>p)){i=-h}}if(c+i<p){m.left(p-c);g._$scroll_r=c-p;g._$scroll_l=0}else{m.left(i);g._$scroll_r=-i;g._$scroll_l=c-p+i}m.css("cursor","move")}f.css("display",g._$scroll_r?"block":"none");q.css("display",g._$scroll_l?"block":"none");d.css("display",(g._$scroll_l||g._$scroll_r)?"block":"none")}}});Class("xui.UI.Stacks","xui.UI.Tabs",{Initialize:function(){var c=this.getTemplate(),d=this.$Keys;c.BOX={tagName:"div",LIST:c.LIST,PNAELS:c.PNAELS};delete c.LIST.LEFT;delete c.LIST.RIGHT;delete c.LIST.DROP;delete c.LIST;delete c.PNAELS;this.setTemplate(c);delete d.LEFT;delete d.RIGHT;delete d.DROP},Static:{Appearances:{BOX:{border:"solid 1px #648CB4",position:"absolute",left:0,top:0},LIST:{position:"static"},ITEMS:{position:"static"},ITEM:{$order:0,display:"block",position:"absolute",cursor:"pointer","background-image":xui.UI.$bg("bar_vertical.gif","",true),"background-repeat":"repeat-x","background-position":"left -380px",width:"100%",left:0},ITEMC:{display:"block"},ITEMI:{display:"block"},"ITEM-mouseover":{$order:1,"background-position":"right -410px"},"ITEM-mousedown, ITEM-checked":{$order:2,"background-position":"right -440px"},HANDLE:{cursor:"pointer",display:"block","font-size":"12px",height:"100%",height:"18px",padding:"5px 0 5px 8px","white-space":"nowrap"},PANEL:{position:"absolute",display:"none",overflow:"auto"},CMDS:{position:"absolute",top:"6px",right:"8px","text-align":"right","vertical-align":"middle"}},DataModel:{$border:1,noPanel:null,noHandler:null,selMode:null},_onresize:function(g,d,s,c,q){var v=g.properties,u=g.getItemByItemId(q),p=v.$border*2;if(!u){q=v.$UIvalue}var r,l,j,i,n,h=null,k=null,m=g.getSubNode("BOX"),f=g.boxing().getPanel(q);if(!f||f.isEmpty()){return}if(s){s-=p;j=l=0;_.arr.each(v.items,function(w){i=g.getSubNodeByItemId("ITEM",w.id);i.cssRegion({bottom:"auto",top:l});l+=i.height();if(w.id==q){return false}});_.arr.each(v.items,function(w){if(w.id==q){return false}i=g.getSubNodeByItemId("ITEM",w.id);i.cssRegion({top:"auto",bottom:j});j+=i.height()},null,true);r=s-l-j;if(r>0){n=l;k=r}m.height(s)}if(d){d-=p;h=d;m.width(d)}f.cssRegion({width:h?h:null,height:k?k:null,top:n,left:0},true);if(h){g.getSubNode("LIST").width(h)}},_adjustScroll:null}});Class("xui.UI.ButtonViews","xui.UI.Tabs",{Initialize:function(){var c=this.getTemplate(),d=this.$Keys;c.LIST.className="xui-uibg-bar xui-uiborder-outset";delete c.LIST.LEFT;delete c.LIST.RIGHT;delete c.LIST.DROP;this.setTemplate(c);delete d.LEFT;delete d.RIGHT;delete d.DROP},Static:{Appearances:{LIST:{"z-index":"2",position:"absolute"},ITEMS:{"z-index":"2",position:"absolute",left:0,top:0},"ITEMS-left, ITEMS-left ITEMC":{$order:1,"text-align":"left"},"ITEMS-center, ITEMS-center ITEMC":{$order:1,"text-align":"center"},"ITEMS-right, ITEMS-right ITEMC":{$order:1,"text-align":"right"},ITEM:{$order:0,margin:"2px",position:"relative","font-family":'"Verdana", "Helvetica", "sans-serif"',cursor:"pointer","padding-right":"4px","vertical-align":"top","background-image":xui.UI.$bg("button.gif","",true),"background-repeat":"no-repeat","background-position":"right -270px"},"ITEM-mouseover":{$order:1,"background-position":"right -360px"},"ITEM-mousedown, ITEM-checked":{$order:2,"background-position":"right -450px"},ITEMI:{$order:0,"padding-left":"4px","vertical-align":"top","background-image":xui.UI.$bg("button.gif","",true),"background-repeat":"no-repeat","background-position":"left -330px"},"ITEM-mouseover ITEMI":{$order:1,"background-position":"left -420px"},"ITEM-mousedown ITEMI, ITEM-checked ITEMI":{$order:2,"background-position":"left -510px"},ITEMC:{$order:0,"vertical-align":"top",height:"20px",padding:"2px 0","background-image":xui.UI.$bg("button.gif","",true),"background-repeat":"repeat-x","background-position":"left -300px"},"ITEMS-block ITEM, ITEMS-block ITEMI, ITEMS-block ITEMC":{$order:2,display:"block"},"ITEM-mouseover ITEMC":{$order:1,"background-position":"left -390px"},"ITEM-mousedown ITEMC, ITEM-checked ITEMC":{$order:2,"background-position":"left -480px"},HANDLE:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,cursor:"pointer","vertical-align":"middle","font-size":"12px",margin:"1px"}},DataModel:{HAlign:null,barLocation:{ini:"top",listbox:["top","bottom","left","right"],action:function(d){var c=this,f=c.getSubNode("LIST"),g=c.getSubNode("ITEMS");switch(d){case"left":f.cssRegion({left:0,top:0,right:"auto",bottom:0});break;case"top":f.cssRegion({left:0,top:0,right:0,bottom:"auto"});break;case"right":f.cssRegion({left:"auto",top:0,right:0,bottom:0});break;case"bottom":f.cssRegion({left:0,top:"auto",right:0,bottom:0});break}switch(d){case"left":case"right":g.tagClass("-block",true);break;case"top":case"bottom":g.tagClass("-block",false);f.height("auto");break}c.boxing().setBarSize(c.properties.barSize,true)}},barHAlign:{ini:"left",listbox:["left","center","right"],action:function(d){var c=this.getSubNode("ITEMS");c.tagClass("(-left|-right|-center)",false).tagClass("-"+d,true)}},barVAlign:{ini:"top",listbox:["top","bottom"],action:function(d){var c=this.getSubNode("ITEMS");if(d=="top"){c.cssRegion({top:0,bottom:"auto"})}else{c.cssRegion({bottom:0,top:"auto"})}}},barSize:{ini:50,action:function(f){var d=this,h=d.properties,i=h.noPanel,g=d.getSubNode("LIST"),c=d.getSubNode("ITEMS");if(h.barLocation=="left"||h.barLocation=="right"){if(!i){g.merge(c).width(f)}}else{if(!i){g.height(f)}}var h=d.getRootNode().style;xui.UI.$tryResize(d,h.width,h.height,true)}},noPanel:{ini:false,action:function(c){this.boxing().setBarSize(this.properties.barSize,true)}}},LayoutTrigger:function(){var c=this.properties;this.boxing().setBarLocation(c.barLocation,true).setBarHAlign(c.barHAlign,true).setBarVAlign(c.barVAlign,true)},_onresize:function(j,f,r,d,q){var u=j.properties,l=u.noPanel,s=j.getItemByItemId(q);if(!s){q=u.$UIvalue}var h=j.boxing().getPanel(q),n,i,p=j.getSubNode("LIST"),c=j.getSubNode("ITEMS"),k=null,m=null,g;if(!u.noHandler){if(u.barLocation=="top"||u.barLocation=="bottom"){if(f){p.width(f-2);c.width(f-2);if(l){p.height(r-2)}i=0;k=f}p.height(g=c.offsetHeight());if(r-g>0){m=r-g-2}n=u.barLocation=="top"?2- -g:0}else{if(r){if(l){p.width(f-2);c.width(f-2)}p.height(r-2);n=0;m=r}if(f){i=u.barLocation=="left"?2- -u.barSize:0;k=f-u.barSize-2}}}else{k=f;m=r}if(!l){if(h&&!h.isEmpty()){h.cssRegion({width:k?k:null,height:m?m:null,left:i,top:n},true)}}},_adjustScroll:null}});Class("xui.UI.RadioBox","xui.UI.List",{Initialize:function(){var c=this.getTemplate();c.className="{_className}";c.$submap={items:{ITEM:{className:"{_itemRow} {itemClass} {disabled} {readonly}",style:"{itemStyle}",tabindex:"{_tabindex}",MARK:{$order:0,className:"{_markcls}"},ICON:{$order:1,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{text:"{caption}",$order:2}}}};this.setTemplate(c)},Static:{_DIRTYKEY:"MARK",_ITEMMARKED:true,Appearances:{ITEM:{display:xui.$inlineBlock,"font-family":' "Verdana", "Helvetica", "sans-serif"',border:0,padding:"4px",position:"relative",zoom:xui.browser.ie?1:null,cursor:"pointer",overflow:"hidden","vertical-align":"middle","font-size":"12px"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle"},ITEMS:{overflow:"auto","overflow-x":"hidden",position:"relative","line-height":"14px"},MARK:{$order:1,cursor:"pointer",width:"16px",height:"16px","vertical-align":"middle"},"ITEM-checked MARK":{$order:2}},DataModel:{borderType:{ini:"none"},checkBox:{ini:false,action:function(c){this.getSubNode("MARK",true).replaceClass(c?/(uicmd-radio)|(\s+uicmd-radio)/g:/(^uicmd-check)|(\s+uicmd-check)/g,c?" xui-uicmd-check":" xui-uicmd-radio")}}},Behaviors:{HoverEffected:{ITEM:null,MARK:"MARK"},ClickEffected:{ITEM:null,MARK:"MARK"}},_prepareItem:function(c,d){d._markcls=c.properties.checkBox?"xui-uicmd-check":"xui-uicmd-radio";d._itemRow=c.properties.itemRow?"xui-item-row":""}}});Class("xui.UI.StatusButtons",["xui.UI.List"],{Initialize:function(){var c=this.getTemplate();c.className="{_className}";c.$submap={items:{ITEM:{className:"{itemClass} {_endsClass} {disabled} {readonly}",style:"{itemMargin};{itemWidth};{itemAlign};{itemStyle}",tabindex:"{_tabindex}",ICON:{$order:10,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{$order:11,text:"{caption}"}}}};this.setTemplate(c)},Static:{Appearances:{ITEMS:{position:"relative",overflow:"auto","overflow-x":"hidden"},ITEM:{"vertical-align":"middle",position:"relative",height:"16px",padding:"3px",cursor:"pointer","font-size":0,"line-height":0,"white-space":"nowrap"},"ITEM-none":{"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-12px -130px","border-left":"solid 1px #7C9CBC","border-right":"solid 1px #7C9CBC"},"ITEM-left":{"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"left -130px","border-right":"solid 1px #7C9CBC"},"ITEM-right":{"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"right -130px","border-left":"solid 1px #7C9CBC"},"ITEM-mouseover, ITEM-mousedown, ITEM-checked":{},"ITEM-mouseover":{},"ITEM-mousedown":{},"ITEM-checked":{},"ITEM-left-mouseover":{$order:1,"background-position":"left -153px"},"ITEM-left-mousedown":{$order:2,"background-position":"left -176px"},"ITEM-left-checked":{$order:3,"background-position":"left -176px"},"ITEM-none-mouseover":{$order:1,"background-position":"-20px -153px"},"ITEM-none-mousedown":{$order:2,"background-position":"-20px -176px"},"ITEM-none-checked":{$order:3,"background-position":"-20px -176px"},"ITEM-right-mouseover":{$order:1,"background-position":"right -153px"},"ITEM-right-mousedown":{$order:2,"background-position":"right -176px"},"ITEM-right-checked":{$order:3,"background-position":"right -176px"},CAPTION:{display:xui.$inlineBlock,zoom:xui.browser.ie6?1:null,"vertical-align":"middle","font-size":"12px","line-height":"14px"},"ITEM-none CAPTION":{padding:"1px 4px"},"ITEM-left CAPTION":{padding:"1px 4px 1px 12px"},"ITEM-right CAPTION":{padding:"1px 12px 1px 1px"}},DataModel:({maxHeight:null,itemMargin:{ini:"",action:function(c){this.getSubNode("ITEM",true).css("margin",c)}},itemWidth:{ini:0,action:function(c){this.getSubNode("ITEM",true).width(c)}},itemAlign:{ini:"",listbox:["","left","center","right"],action:function(c){this.getSubNode("ITEM",true).css("text-align",c)}},itemLinker:{ini:"left",listbox:["none","left","right"],action:function(c){this.getSubNode("ITEM",true).tagClass("-none",false).tagClass("-left",false).tagClass("-right",false).tagClass("-"+c,true)}}}),Behaviors:{DroppableKeys:["ITEMS"]},EventHandlers:{},_prepareItem:function(d,f){var g=d.properties,c;f._tabindex=g.tabindex;if(c=f.itemMargin||g.itemMargin){f.itemMargin="margin:"+c}if(c=f.itemWidth||g.itemWidth){f.itemWidth="width:"+(c=="auto"?c:(c+"px"))}if(c=f.itemAlign||g.itemAlign){f.itemAlign="text-align:"+c}if(c=f.itemLinker||g.itemLinker){f._endsClass=d.getClass("ITEM","-"+c)}}}});Class("xui.UI.TreeBar",["xui.UI","xui.absList","xui.absValue"],{Instance:{_setCtrlValue:function(d,c){return this.each(function(g){if(!g.renderId){return}var l=g.boxing(),s=l.getUIValue(),n=g.properties,p=function(x,y,w){g.getSubNodeByItemId(x,y).tagClass("-checked",w)},j=n.selMode;if(j=="single"){var r=g.getSubIdByItemId(s);if(s&&r){g.getSubNode("BAR",r).tagClass("-checked",false)}r=g.getSubIdByItemId(d);if(r){g.getSubNode("BAR",r).tagClass("-checked");if(!g._innerSet){var f=g.getSubNode("ITEM",r);if(f){var m=g.getSubNode("BOX"),i=f.offset(null,m),q=i?i.top:0,u=f.offsetHeight(),k=m.scrollHeight(),v=m.scrollTop(),h=m.height();if(k>h){if(q<v||(q+u)>(v+h)){m.scrollTop(q)}}}}}}else{if(j=="multi"||j=="multibycheckbox"){s=s?s.split(n.valueSeparator):[];d=d?d.split(n.valueSeparator):[];if(c){_.arr.each(d,function(w){p("BAR",w)})}else{_.arr.each(s,function(w){p("BAR",w,false)});_.arr.each(d,function(w){p("BAR",w)})}}}})},insertItems:function(d,f,j,i){if(!d||!_.isArr(d)||d.length<1){return this}var g,h,c=this._afterInsertItems;return this.each(function(p){var l,q,m;h=p.box._adjustItems(d);if(!f){m=p.properties;l=m.items||(m.items=[])}else{m=p.getItemByItemId(f);l=_.isArr(m.sub)?m.sub:(m.sub=[])}if(p.renderId){if(!j){if(!f){g=p.getSubNode("ITEMS")}else{if(f&&m._inited){g=p.getSubNodeByItemId("SUB",f)}}if(g){q=p._buildItems("items",p.box._prepareItems(p,h,f));if(i){g.prepend(q)}else{g.append(q)}}}else{g=p.getSubNodeByItemId("ITEM",j);if(g){q=p._buildItems("items",p.box._prepareItems(p,h,f));if(i){g.addPrev(q)}else{g.addNext(q)}}}}if(!j){_.arr.insertAny(l,h,i?0:-1)}else{var n=_.arr.subIndexOf(l,"id",j);_.arr.insertAny(l,h,i?n:(n+1))}if(p.renderId){if(!f){p.boxing()._toggleNodes(h,true,true,true)}else{if(p.getItemByItemId(f)._inited){if(!(("iniFold" in m)?m.iniFold:p.properties.iniFold)){p.boxing()._toggleNodes(h,true,true,true)}}}}if(c&&p.renderId){p.boxing()._afterInsertItems(p,h,f,j,i)}if(p.renderId&&f){p.box._tofold(p,m,f)}})},_toggleNodes:function(d,h,g,l){var c=this,j=c.get(0),k=j.properties,i=function(f){if(_.isArr(f)){_.arr.each(f,function(m){if(l&&(_.isBool(m.iniFold)?m.iniFold:k.iniFold)){return}c.toggleNode(m.id,h,false);if(g&&m.sub&&_.isArr(m.sub)&&m.sub.length){i(m.sub)}})}};i(d);return c},toggleNode:function(j,h,d){var g=this.get(0),f=this,c=arguments.callee;if(j){var i=g.getItemByItemId(j);if(i&&i.sub){g.box._setSub(g,i,typeof h=="boolean"?h:!i._checked,d)}}else{_.arr.each(g.properties.items,function(k){c.call(f,k.id,h,d)})}return this},openToNode:function(c){return this.each(function(h){var g=false,f=[],d=function(i,k,j){j=j||0;var l=arguments.callee;_.arr.each(i,function(m){if(m.id==k){f.push(m);g=true;return false}if(m.sub&&_.isArr(m.sub)){g=l.call(l,m.sub,k,++j);if(g){f.push(m);return false}}});return g};d(h.properties.items,c);if(g){f.reverse();_.arr.each(f,function(k,j){if(k.sub){h.boxing().toggleNode(k.id,true);if(j==f.length-1&&!(k.hasOwnProperty("group")?k.group:h.properties.group)){h.boxing().fireItemClickEvent(k.id)}}else{h.boxing().fireItemClickEvent(k.id)}})}})}},Initialize:function(){this.addTemplateKeys(["DISABLED"])},Static:{_focusNodeKey:"BAR",Templates:{tagName:"div",style:"{_style}",className:"{_className}",ondrag:"return false",onselectstart:"return false",BORDER:{tagName:"div",BOX:{tagName:"div",onselectstart:"return false",ITEMS:{tagName:"div",text:"{items}"}}},$submap:{items:{ITEM:{className:"{itemClass}",style:"{itemStyle}{itemDisplay}",tagName:"div",BAR:{$order:0,tabindex:"{_tabindex}",className:"{cls_group} {cls_fold} {disabled} {readonly}",RULER:{$order:0,style:"{rulerStyle}",text:"{innerIcons}"},TOGGLE:{$order:1,className:"{togglemark}"},MARK:{$order:2,style:"{mark2Display}"},ITEMICON:{$order:3,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},ITEMCAPTION:{text:"&nbsp;{caption}",className:"{disabled}  {readonly}",$order:4},EXTRA:{text:"{ext}",$order:5},OPT:{$order:6}},SUB:{$order:1,tagName:"div",text:xui.UI.$childTag}}}}},Appearances:{KEY:{"font-family":"Verdana, Helvetica, sans-serif",border:0},EXTRA:{display:"none"},BOX:{left:0,overflow:"auto","overflow-x":"hidden",position:"relative"},ITEMS:{overflow:"hidden"},ITEM:{"white-space":"nowrap",position:"relative",overflow:"hidden"},BAR:{cursor:"pointer",zoom:xui.browser.ie?1:null,position:"relative",display:"block",overflow:"hidden","font-size":"12px",padding:"2px 4px",border:"1px solid","outline-offset":"-1px","-moz-outline-offset":(xui.browser.gek&&xui.browser.ver<3)?"-1px !important":null,"border-color":"#EDF4FC #698AB3 #698AB3 #EDF4FC","background-color":"#CCE4FC"},DISABLED:{color:"#808080"},"BAR-mouseover":{$order:1,"background-color":"#fffa9f"},"BAR-mousedown, BAR-checked":{$order:2,"background-color":"#fffa9f"},"BAR-GROUP":{$order:2,"border-top":"none","border-bottom":"none",padding:"5px 4px",height:"18px","background-image":xui.UI.$bg("bar_vertical.gif","",true),"background-repeat":"repeat-x","background-position":"left -380px"},"BAR-GROUP-mouseover":{$order:3,"background-position":"left -410px"},"BAR-GROUP-expand":{$order:4,"background-position":"left -440px"},SUB:{overflow:"hidden",zoom:xui.browser.ie?1:null,height:0,"font-size":"1px","line-height":"1px",position:"relative","margin-left":"16px"},MARK:{cursor:"pointer",width:"16px",height:"16px","vertical-align":"middle","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-20px -70px"},"BAR-checked MARK":{$order:3,"background-position":"0 -70px"},ITEMCAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle",padding:"2px"},OPT:{$order:1,position:"absolute",left:"auto",top:"auto",right:"2px",top:"2px",width:"16px",height:"16px",display:"none","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-130px -224px"},"OPT-mouseover":{$order:2,"background-position":"-130px -244px"},"OPT-mousedown":{$order:3,"background-position":"-130px -264px"}},Behaviors:{HoverEffected:{TOGGLE:"TOGGLE",BAR:"BAR",OPT:"OPT"},ClickEffected:{TOGGLE:"TOGGLE",BAR:"BAR",OPT:"OPT"},DraggableKeys:["BAR"],NoDraggableKeys:["TOGGLE"],DroppableKeys:["BAR","TOGGLE","BOX"],onSize:xui.UI.$onSize,TOGGLE:{onClick:function(d,h,i){var c=d.properties,g=xui.use(i).id(),f=d.getItemByDom(g);if(c.disabled||f.disabled){return false}if(!("sub" in f)){return false}d.box._setSub(d,f,!f._checked);return false}},BAR:{onDblclick:function(d,h,i){var c=d.properties,g=d.getItemByDom(i),f=d.onDblclick&&d.boxing().onDblclick(d,g,h,i);if(g.sub&&f!==false){d.getSubNode("TOGGLE",d.getSubId(i)).onClick()}},onClick:function(c,d,f){return c.box._onclickbar(c,d,f)},onKeydown:function(c,d,f){return c.box._onkeydownbar(c,d,f)},onContextmenu:function(c,d,f){if(c.onContextmenu){return c.boxing().onContextmenu(c,d,f,c.getItemByDom(f))!==false}},onMouseover:function(c,d,f){if(!c.properties.optBtn){return}c.getSubNode("OPT",c.getSubId(f)).setInlineBlock()},onMouseout:function(c,d,f){if(!c.properties.optBtn){return}c.getSubNode("OPT",c.getSubId(f)).css("display","none")}},OPT:{onClick:function(c,f,g){if(!c.properties.optBtn){return}if(c.onShowOptions){var d=c.getItemByDom(g);c.boxing().onShowOptions(c,d,f,g)}return false},onDblclick:function(c,d,f){return false}},BOX:{onScroll:function(c,d,f){if((d=xui.use(f)).scrollLeft()!==0){d.scrollLeft(0)}}}},EventHandlers:{onDblclick:function(c,d,f,g){},onGetContent:function(c,d,f){},onShowOptions:function(c,d,f,g){},onClick:function(c,d,f,g){},beforeClick:function(c,d,f,g){},afterClick:function(c,d,f,g){},onItemSelected:function(d,f,g,h,c){},beforeFold:function(c,d){},beforeExpand:function(c,d){},afterFold:function(c,d){},afterExpand:function(c,d){}},DataModel:{listKey:null,width:200,height:200,iniFold:true,animCollapse:true,dock:"fill",group:{ini:false,action:function(i){var h=this,g=h.properties.items,j=h.queryItems(g,function(k){return k.sub&&k.group===undefined}),f=xui();_.arr.each(j,function(k){f.merge(h.getSubNodeByItemId("BAR",k.id))});var d=h.getClass("BAR"),c=h.getClass("BAR","-group");if(i){f.replaceClass(new RegExp("(\\b)"+d+"([^b]*\\b)","g"),"$1"+c+"$2")}else{f.replaceClass(new RegExp("(\\b)"+c+"([^b]*\\b)","g"),"$1"+d+"$2")}}},selMode:{ini:"single",listbox:["single","none","multi","multibycheckbox"],action:function(f){var d=this,g=this.properties,c=[];_.each(this.SubSerialIdMapItem,function(h){if(!(h.sub&&(h.hasOwnProperty("group")?h.group:g.group))){c.push(d.getSubNodeByItemId("MARK",h.id).get(0))}});xui(c).css("display",(f=="multi"||f=="multibycheckbox")?"":"none")}},noCtrlKey:true,singleOpen:false,dynDestory:false,position:"absolute",optBtn:false},RenderTrigger:function(){this.boxing()._toggleNodes(this.properties.items,true,true,true)},_onclickbar:function(f,u,j){var k=f.properties,g=xui.use(j).id(),v=f.getItemByDom(g),m=f.getSubId(g),l=f.boxing(),x=xui.Event.getKey(u),w=f.getKey(xui.Event.getSrc(u).id||""),d=w==f.keys.TOGGLE||w==f.keys.MARK;if(!d&&f.beforeClick&&false===o.boxing().beforeClick(f,v,u,j)){return false}if(k.disabled||v.disabled){return false}if(!d&&f.onClick){l.onClick(f,v,u,j)}if(v.sub&&(v.hasOwnProperty("group")?v.group:k.group)){f.getSubNode("TOGGLE",m).onClick();return}f.getSubNode(f.box._focusNodeKey,m).focus();switch(k.selMode){case"none":l.onItemSelected(f,v,u,j,0);break;case"multibycheckbox":if(k.readonly||v.readonly){return false}if(f.keys.MARK){if(w!=f.keys.MARK){l.onItemSelected(f,v,u,j,0);break}}case"multi":if(k.readonly||v.readonly){return false}var q=l.getUIValue(),c=q?q.split(k.valueSeparator):[],h=1;if(c.length&&(x.ctrlKey||x.shiftKey||k.noCtrlKey)){if(x.shiftKey){if(f.$firstV._pid!=v._pid){return}var n=k.items;if(v._pid){var y=f.getItemByItemId(v._pid);if(y){n=y.sub}}var r=_.arr.subIndexOf(n,"id",f.$firstV.id),p=_.arr.subIndexOf(n,"id",v.id),s;c.length=0;for(s=Math.min(r,p);s<=Math.max(r,p);s++){c.push(n[s].id)}}else{if(_.arr.indexOf(c,v.id)!=-1){_.arr.removeValue(c,v.id);h=-1}else{c.push(v.id)}}c.sort();q=c.join(k.valueSeparator);if(l.getUIValue()!=q){f._innerSet=1;l.setUIValue(q);delete f._innerSet;if(l.get(0)&&l.getUIValue()==q){l.onItemSelected(f,v,u,j,h)}}break}case"single":if(l.getUIValue()!=v.id){f.$firstV=v;f._innerSet=1;l.setUIValue(v.id);delete f._innerSet;if(l.get(0)&&l.getUIValue()==v.id){l.onItemSelected(f,v,u,j,1)}}break}if(!d&&f.afterClick){l.afterClick(f,v,u,j)}},_onkeydownbar:function(g,i,c){var n=xui.Event.getKey(i),m=n.key,f=n.shiftKey,d=n.ctrlKey,l=g.getSubNode(g.box._focusNodeKey,g.getSubId(c)),j=g.getRoot(),h=j.nextFocus(true,true,false),k=j.nextFocus(false,true,false);switch(m){case"enter":l.onClick();break;case"tab":if(f){if(l.get(0)!=h.get(0)){h.focus();return false}}else{if(l.get(0)!=k.get(0)){k.focus();return false}}break;case"up":if(d){g.getSubNode("TOGGLE",g.getSubId(c)).onClick();return false}if(l.get(0)==h.get(0)){k.focus()}else{l.nextFocus(false,true,false).focus()}return false;break;case"down":if(d){g.getSubNode("TOGGLE",g.getSubId(c)).onClick();return false}if(l.get(0)==k.get(0)){h.focus()}else{l.nextFocus(true,false,false).focus()}return false;break;case"right":case"left":g.getSubNode("TOGGLE",g.getSubId(c)).onClick();return false}},_onStartDrag:function(c,d,f,g){var g=xui.Event.getPos(d);xui.use(f).startDrag(d,{dragType:"icon",shadowFrom:f,targetLeft:g.left+12,targetTop:g.top+12,dragCursor:"pointer",dragDefer:1,dragKey:c.box.getDragKey(c,f),dragData:c.box.getDragData(c,d,f)});return false},_onDropTest:function(f,l,c,m,j,n){var h=j&&j.domId;if(h){var i=xui.use(c).id();if(h==i){return false}if(_.get(xui.use(c).get(0),["parentNode","previousSibling","firstChild","id"])==h){return false}var g=f.getItemByDom(h);if(n&&g._pid==n.id){return false}var d=xui.use(c).get(0),k=f.getRootNode();while((d=d.parentNode)){if(f.getSubId(d.id)==f.getSubId(h)){return false}if(d.id==_.get(k,["parentNode","id"])){break}}}},_onDrop:function(g,l,d,p,j,r){xui.DragDrop.setDragIcon("none");var i=g.getKey(xui.use(d).id()),f=j.profile,c=j.domId,h,n=g.keys,q=xui.absObj.$specialChars,m=g.boxing();h=_.clone(f.getItemByDom(c),function(s,k){return !q[(k+"").charAt(0)]});f.boxing().removeItems([h.id]);if(i==n.BOX){m.insertItems([h],null,null,false)}else{if(i==n.BAR){m.insertItems([h],r._pid,r.id,true)}else{if(i==n.TOGGLE){m.insertItems([h],r.id,null,false)}}}return false},_prepareItem:function(f,m,g,h,k,l){var c=f.properties,j=f.ItemIdMapSubSerialId,i=f.SubSerialIdMapItem,d;if(h){g._pid=h}m.togglemark=m.sub?"xui-uicmd-toggle":"xui-uicmd-none";m.disabled=m.disabled?f.getClass("KEY","-disabled"):"";m.itemDisplay=m.hidden?"display:none;":"";m.mark2Display=(c.selMode=="multi"||c.selMode=="multibycheckbox")?"":"display:none;";m._tabindex=c.tabindex;if(m.sub&&(m.hasOwnProperty("group")?m.group:c.group)){m.cls_group=f.getClass("BAR","-group");m.mark2Display="display:none"}},_setSub:function(h,v,p,i){var f=h.domId,l=h.boxing(),q=h.getSubIdByItemId(v.id),n=h.properties,k=h.getSubNode("BAR",q),j=h.getSubNode("TOGGLE",q),m=h.getSubNode("SUB",q);if(xui.Thread.isAlive(h.key+h.id)){return}if(!p){if(v._checked){if(l.beforeFold&&false===l.beforeFold(h,v)){return}var w=function(){m.css({display:"none",height:0});j.tagClass("-checked",false);k.tagClass("-expand",false).tagClass("-fold");v._checked=false;if(n.dynDestory){var z=v.sub,r=[];for(var y=0,x=z.length;y<x;y++){r.push(z[y].id)}h.boxing().removeItems(r);v.sub=true;delete v._inited}if(l.afterFold){l.afterFold(h,v)}};if(!i){if(n.animCollapse){m.animate({height:[m.height(),0]},null,w,200,null,"expoOut",h.key+h.id).start()}else{w()}}else{w()}}if(i&&v.sub&&!n.dynDestory){_.arr.each(v.sub,function(r){if(r.sub&&r.sub.length){h.box._setSub(h,r,p,i)}})}}else{if(!v._checked){if(l.beforeExpand&&false===l.beforeExpand(h,v)){return}var g=function(z,H,y,B,F,E,r,A){var G=z.boxing(),x=z.properties,D=r===false||(_.isArr(r)&&r.length===0);if(!H._inited){delete H.sub;H._inited=true;if(r){if(typeof r=="string"){F.html(H.sub=r,false)}else{if(_.isArr(r)){G.insertItems(r,H.id);if(!H.sub){H.sub=r}}else{if(r["xui.Template"]||r["xui.UI"]){F.append(H.sub=r.render(true))}}}}z._innerSet=1;G.setUIValue(G.getUIValue(),true);delete z._innerSet}if(x.singleOpen){G._toggleNodes(H._pid?z.getItemByItemId(H._pid).sub:x.items,false)}var I=function(){F.css({display:"",height:"auto"});B.removeClass("xui-ui-busy");if(D){B.css("background-image","none")}else{B.tagClass("-checked");E.tagClass("-fold",false).tagClass("-expand")}H._checked=true;if(l.afterExpand){l.afterExpand(z,H)}};if(!A){var C=0;F.css("height","0px").css("display","");F.children().each(function(J){C+=J.offsetHeight});if(x.animCollapse){F.animate({height:[0,C]},null,I,200,null,"expoIn",z.key+z.id).start()}else{I()}}else{I()}},d=v.sub,s=function(r){g(h,v,f,j,m,k,r,i)},u;if((u=typeof d)=="string"||u=="object"){s(d)}else{if(h.onGetContent){j.addClass("xui-ui-busy");var c=h.boxing().onGetContent(h,v,s);if(c||c===false){if(c===true){v._inited=true}s(c)}}}}if(i&&v.sub){_.arr.each(v.sub,function(r){if(r.sub&&r.sub.length&&!r._checked){h.box._setSub(h,r,p,i)}})}}},_tofold:function(d,f,c){d.getSubNodeByItemId("BAR",c).addClass(d.getClass("BAR","-fold"));d.getSubNodeByItemId("TOGGLE",c).replaceClass(new RegExp("\\buicmd-none\\b"),"xui-uicmd-toggle")},_onresize:function(f,d,c){f.getSubNode("BORDER").cssSize({width:d?d:null,height:c?c:null});f.getSubNode("BOX").cssSize({width:d?d:null,height:c?c:null})}}});Class("xui.UI.TreeView","xui.UI.TreeBar",{Instance:{_afterInsertItems:function(d,f,c){d.box._reorderItems(d,c)},_afterRemoveItems:function(c,d){_.arr.each(d,function(f){c.box._reorderItems(c,f._pid)})}},Initialize:function(){this.addTemplateKeys(["IMAGE"])},Static:{Appearances:{ITEMS:{},ITEM:{"white-space":"nowrap",position:"relative",overflow:"hidden"},BAR:{zoom:xui.browser.ie?1:null,position:"relative",display:"block","font-size":"12px",padding:"0",border:"0","outline-offset":"-1px","-moz-outline-offset":(xui.browser.gek&&xui.browser.ver<3)?"-1px !important":null},"BAR-mouseover":{$order:12,"background-color":"#eee"},"BAR-mouseover, BAR-checked":{$order:14,"background-color":"#eee"},SUB:{zoom:xui.browser.ie?1:null,height:0,"font-size":"1px","line-height":"1px",position:"relative",overflow:"hidden"},BOX:{left:0,overflow:"auto",position:"relative","background-color":"#FFF"},"BAR ITEMICON":{"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-244px -236px"},"BAR-fold ITEMICON":{$order:1,"background-position":"-260px -236px"},"BAR-expand ITEMICON":{$order:1,"background-position":"-276px -236px"},"IMAGE-vertical, IMAGE-path-1, IMAGE-path-2, IMAGE-path-3, IMAGE-fold-1, IMAGE-fold-2, IMAGE-fold-3":{$order:1,"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"0 0",width:"16px",height:"18px","vertical-align":"middle"},"IMAGE-none":{width:"16px",height:"18px","vertical-align":"middle"},"IMAGE-path-1,IMAGE-path-2":{$order:2,"background-position":"-196px -236px"},"IMAGE-path-3":{$order:3,"background-position":"-212px -236px"},"IMAGE-fold-1":{$order:4,"background-position":"-196px -254px"},"IMAGE-fold-2":{$order:5,"background-position":"-212px -254px"},"IMAGE-fold-3":{$order:6,"background-position":"-228px -254px"},"IMAGE-fold-1-checked":{$order:7,"background-position":"-244px -254px"},"IMAGE-fold-2-checked":{$order:8,"background-position":"-260px -254px"},"IMAGE-fold-3-checked":{$order:9,"background-position":"-276px -254px"},"IMAGE-fold-1-mousedown":{$order:10,"background-position":"-196px -272px"},"IMAGE-fold-2-mousedown":{$order:11,"background-position":"-212px -272px"},"IMAGE-fold-3-mousedown":{$order:12,"background-position":"-228px -272px"},"IMAGE-fold-1-checked-mousedown":{$order:13,"background-position":"-244px -272px"},"IMAGE-fold-2-checked-mousedown":{$order:14,"background-position":"-260px -272px"},"IMAGE-fold-3-checked-mousedown":{$order:15,"background-position":"-276px -272px"},"IMAGE-vertical":{$order:16,"background-position":"-228px -236px"}},Behaviors:{MARK:{onClick:function(c,d,f){return c.box._onclickbar(c,d,xui.use(f).parent().xid())}},ITEMICON:{onClick:function(c,d,f){return c.box._onclickbar(c,d,xui.use(f).parent().xid())}}},DataModel:{group:null},_buildIcon:function(c,d){return"<span class='"+c+d+"'></span>"},_getType:function(d,c){return d?c=="last"?"-fold-3":c=="first"?"-fold-1":"-fold-2":c=="last"?"-path-3":c=="first"?"-path-1":"-path-2"},_prepareItem:function(f,v,g,j,m,n){var c=f.properties,l=f.ItemIdMapSubSerialId,k=f.SubSerialIdMapItem,d,i,r,h,u=f.getClass("IMAGE"),s=this._buildIcon,q=this._getType;if(j){g._pid=j;if(d=k[l[j]]){g._deep=d._deep+1;i=_.copy(d._icons);i.push(m==n-1?"last":m===0?"first":"middle");g._icons=i;v.rulerStyle="width:"+(g._deep*16)+"px;";h="";r=i.length-1;_.arr.each(i,function(w,p){if(p!==r){h+=s(u,w=="last"?"-none":"-vertical")}});v.innerIcons=h;v.togglemark=u+q(v.sub,i[r])}}else{g._deep=0;g._icons=[m==n-1?"last":m===0?"first":"middle"];v.rulerStyle="";v.innerIcons="";v.togglemark=u+q(v.sub,g._icons[0])}v.imageDisplay="";v.cls_fold=v.sub?f.getClass("BAR","-fold"):"";v.disabled=v.disabled?f.getClass("KEY","-disabled"):"";v.itemDisplay=v.hidden?"display:none;":"";v.mark2Display=c.selMode=="multibycheckbox"?"":"display:none;";v._tabindex=c.tabindex},_reorderItems:function(f,h){var c=f.properties,l=f.ItemIdMapSubSerialId,j=f.SubSerialIdMapItem,v=f.getClass("IMAGE"),n=this._getType;var u=function(x,p){if(x.sub&&x.sub.length){var w=arguments.callee;_.arr.each(x.sub,function(y){if(y._icons){p.push(y)}w(y,p)})}};if(h&&!l[h]){return}var r=f.box.KEY+"-RULER:"+f.serialId+":",g=h?j[l[h]].sub:c.items,k=g.length,d,m,s=0,i,q;_.arr.each(g,function(x,w){if(x._icons){d=x._icons[x._icons.length-1];m=w==k-1?"last":w===0?"first":"middle";if(d!=m){q=[];i=null;x._icons[s=x._icons.length-1]=m;i=x;var p=[];u(x,p);_.arr.each(p,function(y){y._icons[s]=m;q.push(y.id)});if(i){f.getSubNodeByItemId("TOGGLE",i.id).replaceClass(new RegExp("\\b"+v+"-[\\w]+-[\\w]+((-[\\w]+)*)\\b","g"),v+n(i.sub,m)+"$1")}if(q.length){_.arr.each(q,function(z,y){q[y]=r+l[z]});q=xui(q).first();if(s){q=q.next(s)}q.removeClass(new RegExp("\\b"+v+"[-\\w]+\\b")).addClass(v+(m=="last"?"-none":"-vertical"))}}}})},_tofold:function(f,g,d){var c=f.getClass("IMAGE");f.getSubNodeByItemId("BAR",d).addClass(f.getClass("BAR","-fold"));f.getSubNodeByItemId("TOGGLE",d).replaceClass(new RegExp("\\b"+c+"-path([-\\w]+)\\b"),c+"-fold$1")}}});Class("xui.UI.PopMenu",["xui.UI.Widget","xui.absList"],{Instance:{adjustSize:function(){this.each(function(c){if(c.renderId){var g=c.getSubNode("BORDER"),k=c.getSubNode("ITEMS").cssSize({width:"auto",height:"auto"}),f=c.getSubNode("ITEM",true),m=c.properties,i=0,d=0;d=k.height();if(d%2==0){d+=2}else{d+=1}k.addClass(c.getClass("ITEMS","-inline"));f.each(function(h){i=Math.max(i,h.offsetWidth)});if(i%2==0){i+=2}else{i+=1}k.removeClass(c.getClass("ITEMS","-inline"));k.cssSize({width:i,height:d});var j=Math.min(m._maxHeight,d)+g._borderW(),l=Math.min(m._maxWidth,i)+g._borderH();m.width=l;m.height=j;c.getRoot().cssSize({width:l,height:j});xui.UI.$doResize(c,l,j,true)}});return this._setScroll()},_setScroll:function(){return this.each(function(i){if(i.renderId){var j=i.getSubNode("ITEMS"),f=j.offsetTop(),g=j.offsetHeight(),c=i.getRoot(),d=c.offsetHeight();i.getSubNode("TOP").css("display",f===0?"none":"block");i.getSubNode("BOTTOM").css("display",(d>=g+f)?"none":"block")}})},_scrollToBottom:function(){return this.each(function(i){var k=i.getSubNode("ITEMS"),f=i.getSubNode("BORDER"),l=k.offsetTop(),j,g=k.offsetHeight(),c=false,d=f.height();if(d<g+l){if(!i.$scrollStep){i.$scrollStep=1}if(i.$scrollStep<5){i.$scrollStep=i.$scrollStep*1.01}l-=i.$scrollStep;if(d>g+l){l=d-g;c=true}k.top(l);if(c){i.getSubNode("BOTTOM").css("display","none");i.$scrollTobottom=false;i.$scrollStep=null}else{i.getSubNode("TOP").css("display","block");if(i.$scrollTobottom){_.asyRun(arguments.callee,0,[i],this)}}}})},_scrollToTop:function(){return this.each(function(d){var f=d.getSubNode("ITEMS"),g=f.offsetTop(),c=false;if(g<0){if(!d.$scrollStep){d.$scrollStep=1}if(d.$scrollStep<5){d.$scrollStep=d.$scrollStep*1.01}g+=d.$scrollStep;if(g>=-1){g=0;c=true}f.top(g);if(c){d.getSubNode("TOP").css("display","none");d.$scrollToTop=false;d.$scrollStep=null}else{d.getSubNode("BOTTOM").css("display","block");if(d.$scrollToTop){_.asyRun(arguments.callee,0,[d],this)}}}})},pop:function(k,m,r,j){var i=this.get(0),d=i.properties,c="$subPopMenuShowed",g="$highLight",q="$childPopMenu";if(!i.renderId){var h=i.boxing().render(true);xui.Dom.getEmptyDiv().append(h)}var n=i.getRoot();if(i.$highLight){xui([i.$highLight]).tagClass("-mouseover",false)}i._conainer=r;n.popToTop(k,m,r);var l=function(){var f=arguments.callee.profile;if(f.box){f.boxing().hide();if(f.$popGrp){f.$popGrp.length=0}}};l.profile=i;if(!i.$popGrp||!i.$popGrp.length){i.$popGrp=[n._get(0)];n.setBlurTrigger(i.$xid,null);n.setBlurTrigger(i.$xid,l,i.$popGrp)}i[q]=i[c]=i[g]=null;return this},hide:function(l,h,i){var n,g=this.get(0),f=g.properties,k=g.getRoot(),c="$subPopMenuShowed",d="$highLight",m="$childPopMenu",j=function(){if(false!==l){if(false===g.boxing().beforeHide(g,h,i)){return this}}if(!k||k.css("display")=="none"){return}k.setBlurTrigger(g.$xid,null);if(g.$hideMenuPool){g.$hideMenuPool.append(k)}else{k.css("display","none")}if(n=g[d]){xui([n]).tagClass("-mouseover",false)}var s=g[m],r;if(n=g[c]){n.hide(l,h)}while(s){s.boxing().hide(l,h);s=(r=s)[m];r[m]=r[c]=r[d]=null}g[m]=g[c]=g[d]=null;if(n=g.$parentPopMenu){n[c]=null}if(g.$popGrp){_.arr.removeValue(g.$popGrp,k._get(0))}if(false!==l){g.boxing().onHide(g)}};k.hide(j,null,h);return this},_afterInsertItems:function(c){if(!c.renderId){return}c.boxing().adjustSize()},_afterRemoveItems:function(c){if(!c.renderId){return}c.boxing().adjustSize()}},Initialize:function(){var c=this.getTemplate();_.merge(c.FRAME.BORDER,{TOP:{},BOTTOM:{},BOX:{tagName:"div",ITEMS:{tagName:"div",text:"{items}"}},POOL:{tagName:"div",style:"display:none;"}},"all");c.$submap={items:function(j,i,g,f,d){var h;f=f+"."+g.type;if(h=g.object){d[d.length]=h.build(g)}else{if(i[f]){xui.UI.$doTemplate(j,i,g,f,d)}}},"items.split":{ITEMSPLIT:{style:"{itemDisplay}"}},"items.button":{ITEM:{tabindex:-1,className:"{itemClass} {disabled}",style:"{itemStyle}{itemDisplay}",ICON:{$order:0,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:2},SUB:{style:"{displaySub}"}}},"items.checkbox":{ITEM:{tabindex:-1,className:"{itemClass} {disabled}",style:"{itemStyle}{itemDisplay}",CHECKBOX:{$order:0,className:"xui-ui-icon {checkboxCls}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:2}}},"items.radiobox":{ITEM:{tabindex:-1,className:"{itemClass} {disabled}",style:"{itemStyle}{itemDisplay}",RADIOBOX:{$order:0,className:"xui-ui-icon {radioboxCls}"},CAPTION:{text:"{caption}",$order:1},RULER:{style:"{displayAdd}",$order:2},ADD:{tagName:"div",style:"{displayAdd}",text:"{add}",$order:2}}}};this.setTemplate(c)},Static:{$initRootHidden:true,Appearances:{KEY:{"font-size":"12px",visibility:"hidden"},BORDER:{border:"1px solid","border-color":"#FFF #ACA899 #ACA899 #FFF"},BOX:{"background-color":"#EEF7FF",overflow:"hidden",position:"absolute",left:0,top:0,"font-size":"12px","z-index":"3"},ITEMS:{position:"absolute",top:0,left:0,overflow:"hidden","background-image":xui.UI.$bg("bg.gif",""),"background-repeat":"repeat-y","background-position":"left top"},"ITEMS-inline ITEM":{$order:5,display:xui.$inlineBlock},ITEM:{display:"block",position:"relative",overflow:"visible","white-space":"nowrap",color:"#000","font-family":'"Verdana", "Helvetica", "sans-serif"',cursor:"pointer",padding:"2px 20px 2px 2px"},ITEMSPLIT:{display:"block",position:"relative",overflow:"visible","white-space":"nowrap","font-size":"1px","line-height":"1px",padding:"2px 0",margin:"2px 2px 2px 26px","background-image":xui.UI.$bg("split_horizontal.gif","",true),"background-repeat":"repeat-x","background-position":"left top"},"ITEM-mouseover":{$order:1,"background-color":"#FFFA9F"},"ITEM-checked":{$order:2,"background-color":"#FFFA9F"},ICON:{margin:0},TOP:{cursor:"pointer",display:"none",position:"absolute","margin-left":"-8px",right:0,height:"16px",width:"16px","z-index":"10",top:0,"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-48px -244px"},BOTTOM:{cursor:"pointer",display:"none",position:"absolute","margin-left":"-8px",right:0,height:"16px",width:"16px","z-index":"10",bottom:0,"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-66px -244px"},"RADIOBOX, CHECKBOX, RADIOBOX-checked, CHECKBOX-checked":{cursor:"pointer","vertical-align":"middle",width:"16px",height:"16px"},CHECKBOX:{"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-20px -70px",margin:0},"CHECKBOX-checked":{$order:1,"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"0 -70px"},RADIOBOX:{"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-60px -70px",margin:0},"RADIOBOX-checked":{$order:1,"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-40px -70px"},CAPTION:{"vertical-align":xui.browser.ie6?"baseline":"middle","padding-left":"6px"},RULER:{width:"100px","font-size":0,"line-height":0},ADD:{position:"absolute",top:"3px",right:0,width:"80px","padding-right":"20px","text-align":"right","z-index":"10",zoom:xui.browser.ie?1:null},SUB:{position:"absolute",top:"2px",right:"2px",width:"8px",height:"16px","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-200px -70px"}},Behaviors:{ITEM:{onMouseover:function(i,k,d){var g="$subPopMenuShowed",p="$allPops",h="$highLight",n="$showpops",j="$popGrp";if(i[h]==d){return}var l=i.properties,w=i.getItemByDom(d),m=w.id,v=false,s,f,u;if(u=i[g]){if(u==_.get(i,[p,m])){v=true}else{u.hide();i[g]=null}}if(!v){if(u=i[h]){xui([u]).tagClass("-mouseover",false)}i[h]=d;xui.use(d).tagClass("-mouseover");try{xui.use(d).get(0).focus()}catch(k){}}if(!v&&w.sub){if(!(_.isArr(w.sub)&&w.sub.length)){if(i.onShowSubMenu){var c=i["$sub:"+w.id];if(c&&c["xui.UI"]&&!c.isEmpty()){}else{c=i.boxing().onShowSubMenu(i,w,d)}if(c&&c["xui.UI"]&&!c.isEmpty()){i[g]=c;c=c.reBoxing();c.onMouseout(function(x,r,y){i.box._mouseout(i,r,y)},null,-1);i[j].push(c._get(0));c.popToTop(d,2,i._conainer);return}else{if(c&&_.isArr(c)&&c.length){w.sub=c}}}}if(_.isArr(w.sub)&&w.sub.length){i[p]=i[p]||{};if(!(s=i[p][m])){var q=i.properties;s=(new xui.UI.PopMenu({position:"absolute",items:w.sub,autoHide:q.autoHide,showEffects:q.showEffects,hideEffects:q.hideEffects})).render(true);s.onShowSubMenu(function(y,r,x){return i.boxing().onShowSubMenu(i,r,x)});s.onMenuSelected(function(y,r,x){return i.boxing().onMenuSelected(i,r,x)});f=s.get(0);f.$hideMenuPool=i.$hideMenuPool||i.getSubNode("POOL");i[p][m]=s;i[n]=i[n]||[i];f[n]=i[n];i[n].push(f)}else{f=s.get(0)}i[j].push(f.getRoot()._get(0));f[j]=i[j];f.$parentPopMenu=i;i.$childPopMenu=f;s.pop(d,2);i[g]=s}}},onMouseout:function(g,j,c){var k=g.properties,p=g.getItemByDom(c),l=p.id,h=true,d="$highLight",n;if(g[d]==c){return}if(n=g.$subPopMenuShowed){var f=j.toElement||j.relatedTarget,i=n.get(0).getRootNode();try{do{if(f==i){return}}while((f&&(f=f.parentNode)))}catch(m){}}xui.use(c).tagClass("-mouseover",false);g[d]=null},onClick:function(c,f,h){var i=c.properties,d=c.getItemByDom(h),g=d.id;if(i.disabled||d.disabled){return false}if(!d.group){if(d.type=="checkbox"){c.getSubNodeByItemId("CHECKBOX",d.id).tagClass("-checked",d.value=!d.value)}else{if(d.type=="radiobox"){c.getSubNode("RADIOBOX",true).tagClass("-checked",false);_.arr.each(i.items,function(j){if(j.type=="radiobox"){j.value=false}});c.getSubNodeByItemId("RADIOBOX",d.id).tagClass("-checked",d.value=true)}}if(c.onMenuSelected){c.boxing().onMenuSelected(c,d,h)}if(i.hideAfterClick){xui.use(h).tagClass("-mouseover",false);_.asyRun(function(){var k=c,j;if(!k.renderId){return}while(k){k.boxing().hide();k=(j=k).$parentPopMenu;j.$parentPopMenu=j.$subPopMenuShowed=null}c.$subPopMenuShowed=null;if(c.$popGrp){c.$popGrp.length=0}},100)}}},onFocus:function(d,i,j){var f=d.getSubNode("BOX"),g=f.scrollTop(),c=f.scrollHeight(),k=xui.use(j).offsetTop();if(k<g||k>g+c){xui.use(j).offsetTop(g)}xui.use(j).onMouseover()},onKeydown:function(g,i,d){var p=g.getItemByDom(d),j=g.properties.items,m=xui.Event.getKey(i).key,l=p.id,k,c,h,f,n;switch(m){case"enter":xui(d).onClick();break;case"up":c=true;k=false;_.arr.each(j,function(r,q){if(r.type=="split"){return}if(k){h=r.id;return c=false}if(r.id==l){k=true}},null,true);if(c){h=j[j.length-1].id}f=g.getSubNodeByItemId("ITEM",h).get(0);break;case"down":c=true;k=false;_.arr.each(j,function(r,q){if(r.type=="split"){return}if(k){h=r.id;return c=false}if(r.id==l){k=true}});if(c){h=j[0].id}f=g.getSubNodeByItemId("ITEM",h).get(0);break;case"left":if(n=g.$parentPopMenu){if(n=g.$parentPopMenu.$highLight){f=n}}break;case"right":if((n=g.$subPopMenuShowed)&&n==g.$allPops[l]){n.activate()}break}if(f&&f.tagName){try{f.focus()}catch(i){}}}},TOP:{onMouseover:function(c){c.$scrollToTop=true;c.boxing()._scrollToTop()},onMouseout:function(c){c.$scrollToTop=false;c.$scrollStep=null},onClick:function(c){c.$scrollStep*=2}},BOTTOM:{onMouseover:function(c){c.$scrollTobottom=true;c.boxing()._scrollToBottom()},onMouseout:function(c){c.$scrollTobottom=false;c.$scrollStep=null},onClick:function(c){c.$scrollStep*=2}},ITEMS:{afterKeydown:function(d,f){var c=xui.Event.getKey(f).key;if(c=="tab"||c=="enter"){return true}else{if(c=="esc"){do{d.boxing().hide()}while(d=d.$parentPopMenu);return false}else{return false}}}},BORDER:{onMouseout:function(c,d,f){c.box._mouseout(c,d,f)}}},DataModel:({dock:null,tabindex:null,tips:null,border:null,resizer:null,showEffects:"Blur",hideEffects:"",autoTips:false,shadow:true,_maxHeight:260,_maxWidth:300,left:-10000,hideAfterClick:true,autoHide:false,height:100,width:300,position:"absolute",$hborder:1,$vborder:1}),EventHandlers:{onShowSubMenu:function(c,d,f){},beforeHide:function(c,d){},onHide:function(c){},onMenuSelected:function(c,d,f){}},RenderTrigger:function(){this.boxing().adjustSize()},_mouseout:function(f,h){if(f.properties.autoHide){var i=xui.Event.getPos(h),d,g,c;_.arr.each(f.$popGrp,function(j){j=xui([j]);g=j.offset();d=j.cssSize();if(i.left>g.left&&i.top>g.top&&i.left<g.left+d.width&&i.top<g.top+d.height){return c=1}});if(!c){while(c=f.$parentPopMenu){f=c}f.boxing().hide(true,null,h);if(f.$popGrp){f.$popGrp.length=0}}}},_prepareItem:function(d,f){var c="display:none;";f.add=f.add||"";f.displayAdd=f.add?"":c;f.displaySub=f.sub?"":c;f.itemDisplay=f.hidden?c:"";f.type=f.type||"button";if(f.type=="checkbox"){f.checkboxCls=d.getClass("CHECKBOX",f.value?"-checked":"")}else{if(f.type=="radiobox"){f.radioboxCls=d.getClass("RADIOBOX",f.value?"-checked":"")}}},_onresize:function(g,f,c){var d=arguments.callee.upper.apply(this,arguments);g.getSubNode("BOX").cssSize(d)}}});Class("xui.UI.MenuBar",["xui.UI","xui.absList"],{Instance:{updateItem:function(g,f){var d=this,i=d.get(0),c=i.properties.items;if(_.arr.subIndexOf(c,"id",g)!=-1){arguments.callee.upper.call(d,g,f)}else{var h=0;_.each(i.$allPops,function(j){j.updateItem(g,f);h=1});if(!h){arguments.callee.upper.call(d,g,f)}}return d},_pop:function(l,d){var m=this,h=m.get(0);if(h.$curPop){m.hide()}if(!l.sub){return}if(h.beforePopMenu&&false==h.boxing().beforePopMenu(h,l,d)){return}else{xui.use(d).tagClass("-mousedown");var g,f=l.id,j=h.properties,i="$allPops";h.$curPop=f;h.$curElem=d;h.$menuPop=f;h[i]=h[i]||{};if(!h[i][f]){var k=function(n){var p={position:"absolute",items:n,autoHide:!!j.autoShowTime};if(j.showEffects){p.showEffects=j.showEffects}if(j.hideEffects){p.hideEffects=j.hideEffects}var q=xui.create("PopMenu",p);h.getSubNode("POOL").append(q);q.onHide(function(r){m.hide(false)}).onMenuSelected(function(u,r,s){return h.boxing().onMenuSelected(h,u,r,s)}).onShowSubMenu(function(u,r,s){return h.boxing().onShowSubMenu(h,u,r,s)});q.get(0).$hideMenuPool=h.getSubNode("POOL");q.get(0)[i]=h[i];h[i][f]=q};if(_.isArr(l.sub)&&l.sub.length){k(l.sub)}else{if(h.onGetPopMenu){var c=h.boxing().onGetPopMenu(h,l,k);if(_.isArr(c)&&c.length){k(l.sub=c)}}}}if(h[i][f]){h[i][f].pop(xui(d),1,xui(j.parentID))}return false}},_afterInsertItems:function(){this.clearPopCache()},hide:function(c){var d=this.get(0),g,h=d.$curPop,f=d.$curElem;if(g=d.$allPops[h]){if(false!==arguments[0]){g.hide(false,c)}d.getSubNode("POOL").append(g.reBoxing());xui([f]).tagClass("-mousedown",false)}d.$menuPop=d.$curPop=d.$curElem=null},clearPopCache:function(){var c=this.get(0);if(c.renderId){c.getSubNode("POOL").empty();c.$allPops=c.$curPop=c.$curElem=null}}},Initialize:function(){xui.SC("xui.UI.PopMenu")},Static:{_nocap2tip:true,Templates:{tagName:"div",className:"{_className}",style:"{_style}",POOL:{tagName:"div"},BORDER:{className:"xui-uibg-bar xui-uiborder-outset",tagName:"div",LIST:{tagName:"div",HANDLER:{style:"{handler}"},ITEMS:{$order:1,text:"{items}"}}},$submap:{items:{ITEM:{ITEMI:{ITEMC:{ITEMA:{tabindex:"{_tabindex}",className:" {typeCls} {disabled}",ICON:{$order:1,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{$order:2,text:"{caption}",style:"{captionDisplay}"}}}}}}}},Appearances:{KEY:{"font-size":0,"line-height":0,position:"absolute",left:0,top:0},POOL:{width:0,height:0,visibility:"hidden",position:"absolute",left:"-10000px",top:"-10000px"},BORDER:{left:0,top:0,"font-size":0,"line-height":0},HANDLER:{height:"22px",width:"7px","background-image":xui.UI.$bg("handler.gif","",true),"background-position":"left top",cursor:"move","vertical-align":"middle"},LIST:{padding:"2px"},ITEMS:{"vertical-align":"middle"},"LIST-disabled":{"background-color":"#E4E4E4"},"ITEM-mouseover, ITEM-mouseover ITEMI, ITEM-mouseover ITEMC, ITEM-mousedown, ITEM-mousedown ITEMI, ITEM-mousedown ITEMC":{"background-image":xui.UI.$bg("button.gif","",true),"background-repeat":"no-repeat"},ITEM:{height:"22px","white-space":"nowrap","vertical-align":"top",overflow:"hidden",margin:"0  3px 0 3px","padding-right":"6px","font-size":0,"line-height":0},"ITEM *":{cursor:"pointer"},ITEMI:{height:"22px","padding-left":"6px","vertical-align":"top"},ITEMC:{height:"22px","padding-top":"3px","vertical-align":"top"},ITEMA:{display:xui.$inlineBlock},"ITEM-mouseover":{$order:2,"background-position":"right -90px"},"ITEM-mousedown":{$order:3,"background-position":"right -180px"},"ITEM-mouseover ITEMI":{$order:2,"background-position":"left -150px"},"ITEM-mousedown ITEMI":{$order:3,"background-position":"left -240px"},"ITEM-mouseover ITEMC":{$order:2,"background-position":"left -120px","background-repeat":"repeat-x"},"ITEM-mousedown ITEMC":{$order:3,"background-position":"left -210px","background-repeat":"repeat-x"},CAPTION:{"font-size":"12px","line-height":"14px","vertical-align":xui.browser.ie6?"baseline":"middle"}},Behaviors:{ITEM:{onMouseover:function(d,h,j){var g=d.properties,c=j;if(g.disabled){return}var f=d.getItemByDom(j),i=f.id;if(f.disabled){return}xui.use(c).tagClass("-mouseover");if(d.$menuPop){if(d.$menuPop!=i){d.boxing()._pop(f,c)}}else{if(g.autoShowTime){_.resetRun(d.$xid+":autoShowTime",function(){d.boxing()._pop(f,c)},g.autoShowTime)}}},onMouseout:function(g,h,c){var d=g.properties;if(d.disabled){return}var m=g.getItemByDom(c);if(m.disabled){return}xui.use(c).tagClass("-mouseover",false);if(d.autoShowTime){var j=g.$allPops;if(j=j&&j[g.$curPop]){var f=j.get(0).getRoot(),k=xui.Event.getPos(h),n=f.cssSize(),l=3,i=f.offset();if(k.left>i.left&&k.top>i.top-l&&k.left<i.left+n.width&&k.top<i.top+n.height){}else{j.hide()}}_.resetRun(g.$xid+":autoShowTime",null)}},onMousedown:function(c,g,i){var f=c.properties;if(f.disabled){return}var d=c.getItemByDom(i),h=d.id;if(d.disabled){return}xui.use(i).tagClass("-mousedown");return c.boxing()._pop(d,i)},onMouseup:function(c,f,g){var d=c.getItemByDom(g);if(c.$menuPop!=d.id){xui.use(g).tagClass("-mousedown",false)}},onKeydown:function(f,i,c){var m=xui.Event.getKey(i),l=m.key,d=m.shiftKey,k=xui(c),h=f.getRoot().nextFocus(true,true,false),j=f.getRoot().nextFocus(false,true,false);switch(xui.Event.getKey(i).key){case"tab":if(d){if(k.get(0)!=h.get(0)){h.focus();return false}}else{if(k.get(0)!=j.get(0)){j.focus();return false}}break;case"left":case"up":var g=k.nextFocus(false,true,false);if(k.get(0)==h.get(0)){j.focus()}else{k.nextFocus(false)}return false;break;case"right":case"down":var g=k.nextFocus(true,false,false);if(k.get(0)==j.get(0)){h.focus()}else{k.nextFocus()}return false;break;case"enter":k.onMousedown();break}},onClick:function(c,f,g){var d=c.getItemByDom(g);if(c.$menuPop!=d.id){if(c.onMenuBtnClick){c.boxing().onMenuBtnClick(c,d,g)}}}}},DataModel:{listKey:null,autoTips:false,height:{ini:"auto",readonly:true},width:"auto",parentID:"",$hborder:1,$vborder:1,left:0,top:0,autoShowTime:200,handler:{ini:true,action:function(c){this.getSubNode("HANDLER").css("display",c?"":"none")}},position:"absolute",dock:{ini:"top",listbox:["top","bottom"]}},EventHandlers:{onGetPopMenu:function(c,d,f){},onMenuBtnClick:function(c,d,f){},beforePopMenu:function(c,d,f){},onShowSubMenu:function(c,g,d,f){},onMenuSelected:function(c,g,d,f){}},RenderTrigger:function(){if(this.properties.disabled){this.boxing().setDisabled(true,true)}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c);d.handler=d.handler?"":"display:none";return d}}});Class("xui.UI.ToolBar",["xui.UI","xui.absList"],{Instance:{updateItem:function(h,f){if(f.type){return arguments.callee.upper.call(this,h,f)}else{var r=this,d=r.get(0),m=d.box,s=d.properties.items,u=d.queryItems(s,function(v){return typeof v=="object"?v.id===h:v==h},true,true,true),n,w,l,k,j,i,g,q;if(_.isStr(f)){f={caption:f}}if(u.length){u=u[0];if(w=u[0]){if(_.isSet(f.id)){f.id+=""}if(f.id&&h!==f.id){n=f.id;var c=d.ItemIdMapSubSerialId,p;if(!c[n]){if(p=c[h]){c[n]=p;delete c[h];d.SubSerialIdMapItem[p].id=n}else{w.id=n}}}delete f.id;if(_.isEmpty(f)){return r}l=d.getSubNodeByItemId("ICON",n||h);k=d.getSubNodeByItemId("CAPTION",n||h);j=d.getSubNodeByItemId("ITEM",n||h);i=d.getSubNodeByItemId("LABEL",n||h);g=d.getSubNodeByItemId("BTN",n||h);if("value" in f&&f.value!==w.value){d.getSubNodeByItemId("BTN",n||h).tagClass("-checked",!!f.value)}if("caption" in f&&f.caption!==w.caption){k.html(f.caption);if(f.caption&&!w.caption){k.css("display","")}if(!f.caption&&w.caption){k.css("display","none")}}if("label" in f&&f.label!==w.label){i.html(f.label);if(f.label&&!w.label){i.css("display","")}if(!f.label&&w.label){i.css("display","none")}}if("disabled" in f&&f.disabled!==w.disabled){if(f.disabled){j.addClass("xui-ui-itemdisabled")}else{j.removeClass("xui-ui-itemdisabled")}g.onMouseout(true,{$force:true})}if("image" in f&&f.image!==w.image){l.css("background-image",f.image)}if("imagePos" in f&&f.imagePos!==w.imagePos){l.css("background-position",f.imagePos)}if("imageClass" in f&&f.imageClass!==w.imageClass){if(w.imageClass){l.removeClass(w.imageClass)}if(f.imageClass){l.addClass(f.imageClass)}}if("hidden" in f){var x=!!f.hidden;if(x){if(w.hidden!==true){j.css("display","none")}}else{if(w.hidden===true){j.css("display","")}}}_.merge(w,f,"all")}}return r}},showItem:function(d,c){return this.each(function(f){var g=f.getItemByItemId(d);if(g){g.hidden=c===false;f.getSubNodeByItemId("ITEM",d).css("display",c===false?"none":"")}})},showGroup:function(c,d){return this.each(function(f){_.arr.each(f.properties.items,function(h){if(h.id==c){h.hidden=d===false;return false}});var g=f.getSubNodeByItemId("GROUP",c);g.css("display",d===false?"none":"");if(f.renderId&&f.getRootNode().offsetWidth){xui.UI.$dock(f,true,true)}})}},Static:{_focusNodeKey:"BTN",_ITEMKEY:"GROUP",Templates:{tagName:"div",className:"{_className}",style:"{_style}",ITEMS:{className:"xui-uibg-bar xui-uiborder-outset",tagName:"div",style:"{mode}",text:"{items}"},$submap:{items:{GROUP:{className:"{groupClass}",style:"{grpDisplay} {groupStyle}",HANDLER:{style:"{mode2}"},LIST:{$order:1,tagName:"text",text:"{sub}"}}},"items.sub":{ITEM:{style:"{itemDisplay}",className:" {disabled}",IBWRAP:{tagName:"div",SPLIT:{style:"{splitDisplay}"},LABEL:{style:"{labelDisplay}",text:"{label}"},BTN:{className:"xui-ui-btn {itemcls} {itemClass}",style:"{itemStyle} {boxDisplay}",BTNI:{className:"xui-ui-btni",BTNC:{className:"xui-ui-btnc",BOX:{tabindex:"{_tabindex}",BOXWRAP:{tagName:"div",RULER:{},ICON:{$order:1,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat}  {imageDisplay}"},CAPTION:{$order:2,text:"{caption}",style:"{captionDisplay}"},DROP:{$order:3,style:"{dropDisplay}"}}}}}}}}}}},Appearances:{KEY:{"font-size":0,"line-height":0,position:"absolute",overflow:"hidden",left:0,top:0},"ITEM-object":{"vertical-align":"middle","margin-left":"4px"},RULER:{padding:"0px",margin:"0px",width:"0px"},ICON:{margin:0,"vertical-align":"middle"},ITEMS:{display:"block","padding-bottom":"1px","font-size":0,"line-height":0},HANDLER:{height:"22px",width:"7px","background-image":xui.UI.$bg("handler.gif","",true),"background-position":"left top",cursor:"move","vertical-align":"middle"},GROUP:{"font-size":0,"line-height":0,position:"static",padding:"2px 4px 0px 2px","vertical-align":"middle"},ITEM:{"vertical-align":"middle",padding:"1px"},"BTNC a":{padding:0},SPLIT:{$order:1,width:"6px",height:"15px","vertical-align":"middle","background-image":xui.UI.$bg("split_vertical.gif","",true),"background-position":"left top","background-repeat":"repeat-y"},BTN:{"padding-right":"3px"},BTNI:{"padding-left":"3px"},DROP:{width:"14px",height:"16px","vertical-align":"middle","background-image":xui.UI.$bg("drop.gif","","Button"),"background-position":"left center","background-repeat":"no-repeat"},"BTN-mouseover DROP":{$order:2,"background-position":"-16px center"},"BTN-mousedown DROP, BTN-checked DROP":{$order:2,"background-position":"-32px center"},BOX:{height:"auto"},"LABEL, CAPTION":{"vertical-align":"middle","margin-left":"2px","margin-right":"2px","font-size":"12px"},LABEL:{cursor:"default","padding-top":"3px"}},Behaviors:{NoTips:["GROUP","HANDLER"],HoverEffected:{BTN:["BTN"]},ClickEffected:{BTN:["BTN"]},BTN:{onClick:function(f,h,i){if(f.properties.disabled){return false}var d=xui.use(i).parent(3).id(),c=f.getItemByDom(d);if(c.disabled){return false}var g=f.getItemByDom(i);if(g.disabled){return false}xui.use(i).focus();if(g.type=="statusButton"){xui.use(i).tagClass("-checked",g.value=!g.value)}f.boxing().onClick(f,g,c,h,i);return false}}},DataModel:{listKey:null,height:{ini:"auto",readonly:true},width:"auto",left:0,top:0,handler:{ini:true,action:function(c){this.getSubNode("HANDLER",true).css("display",c?"":"none")}},position:"absolute",hAlign:{ini:"left",listbox:["left","center","right"],action:function(c){this.getSubNode("ITEMS",true).css("textAlign",c)}},dock:{ini:"top",listbox:["top","bottom"]}},EventHandlers:{onClick:function(c,d,g,f,h){}},_adjustItems:function(d){if(!d){d=[_()+""]}if(_.isStr(d)){d=[d]}var f=_.copy(d),c;_.arr.each(f,function(h,g){if(_.isArr(h)){h={id:_.id(),sub:h}}if(_.isHash(h)){f[g]=_.copy(h);f[g].sub=[];if(h.sub){_.arr.each(h.sub,function(i){f[g].sub.push(_.isHash(i)?_.copy(i):{id:i+""})})}}});return f},_prepareData:function(c){var g=arguments.callee.upper.call(this,c);var f=c.properties;g.mode=f.hAlign=="right"?"text-align:right;":"";return g},_prepareItem:function(d,f,r,l,m,n,g,i){var j="display:none",h=d.properties.tabindex,p=function(v,s,E,z,A,B,w,x){var u=s[xui.UI.$tag_subId]=typeof x=="string"?x:("a_"+v.pickSubId("aitem")),D;if(typeof E=="string"){E={caption:E}}if(false!==w){v.ItemIdMapSubSerialId[E.id]=u;v.SubSerialIdMapItem[u]=E}if(D=E.object){D=s.object=D["xui.absBox"]?D.get(0):D;if(D["xui.UIProfile"]){D.properties.position="relative";var C=v.getClass("ITEM","-object"),y=D.CC.KEY||(y=D.CC.KEY="");if(y.indexOf(C)===-1){D.CC.KEY=y+" "+C}}E.$xid=D.$xid;D.$item=E;D.$holder=v;if(!D.host||D.host===D){D.boxing().setHost(v.host,D.alias)}if(!v.$attached){v.$attached=[]}v.$attached.push(D)}else{if(E.statusButton){E.type="statusButton";delete E.statusButton}else{if(E.dropButton){E.type="dropButton";delete E.dropButton}else{if(E.split){E.type="split";delete E.split}}}if(E.type!=="split"&&!E.caption){E.caption=""}xui.UI.adjustData(v,E,s);if(E.type=="statusButton"&&!!E.value){s.itemcls=" xui-ui-btn-checked "+v.getClass("BTN","-checked",!!E.value)}s._tabindex=h;s.splitDisplay=s.type=="split"?"":j;s.labelDisplay=s.label?"":j;s.captionDisplay=s.caption?"":j;s.dropDisplay=E.type=="dropButton"?"":j;s.boxDisplay=(s.type!=="split"&&(s.caption||s.image||s.imageClass))?"":j}s.itemDisplay=E.hidden?j:"";E._pid=z};if(l){p(d,f,r,l,m,n,g,i)}else{var k=[],c,q=r.sub||[];l=r.id;f.mode2=("handler" in r)?(r.handler?"":j):(d.properties.handler?"":j);f.grpDisplay=r.hidden?j:"";f.sub=k;_.arr.each(q,function(s){c={id:s.id};p(d,c,s,l,m,n,g,i);k.push(c)})}}}});Class("xui.UI.Layout",["xui.UI","xui.absList"],{Instance:{getPanel:function(c){return this.get(0).getSubNodeByItemId("PANEL",c)},append:function(g,c,f,d){var h=this.get(0);return arguments.callee.upper.call(this,g,c||"main",f,d)},insertItems:function(c,f,d){return this._insertItems(c,f,d)},_insertItems:function(i,d,p,q){var f,k,l,j,c,g,h,n="before",m=this._afterInsertItems;return this.each(function(s){h=s.box;l=s.properties.items;if(!q){j=_.arr.subIndexOf(l,"id",d);if(j==-1){n=p?"before":"after"}else{if(l[j].id=="main"){n=p?"before":"after"}else{n=l[j].pos}}k=h._adjustItems2(i,n)}else{k=i}if(j==-1){_.arr.insertAny(l,k,p?0:-1)}else{_.arr.insertAny(l,k,p?j:j+1)}if(s.renderId){g=h._prepareItems(s,k,d);c=s._buildItems("items",g);s.getRoot().prepend(c);var r=s.getRootNode().style;xui.UI.$tryResize(s,r.width,r.height,true);r=null}if(m){s.boxing()._afterInsertItems(s,g,d,p)}})},_afterRemoveItems:function(d){if(d.renderId){var c=d.getRootNode().style;xui.UI.$tryResize(d,c.width,c.height,true);c=null}},updateItem:function(i,h){var q=this,g=q.get(0),f=g.properties.type=="vertical",k=g.box,r=g.properties.items,w=g.queryItems(r,function(v){return typeof v=="object"?v.id===i:v==i},true,true,true),l,x,s,u,j,n;if(typeof h!="object"){return}if(w.length){w=w[0];if(typeof w[0]!="object"){x=w[2][w[1]]={id:w[0]}}else{x=w[0]}if(_.isSet(h.id)){h.id+=""}if(h.id&&i!==h.id){l=h.id;var c=g.ItemIdMapSubSerialId,m;if(!c[l]){if(m=c[i]){c[l]=m;delete c[i];g.SubSerialIdMapItem[m].id=l}else{x.id=l}}}delete h.id;if(_.isEmpty(h)){return q}var p=false;u=g.getSubNodeByItemId("ITEM",i);if(!u.isEmpty()){if(h.hasOwnProperty("size")){h.size=parseInt(""+h.size,10);if(h.size!=x.size){x.size=h.size;if(f){u.height(h.size)}else{u.width(h.size)}p=true}}if(h.hasOwnProperty("hidden")){h.hidden=!!h.hidden;if(h.hidden!==x.hidden){g.getSubNodeByItemId("ITEM",i).css("display",h.hidden?"none":"");p=true}}if(h.hasOwnProperty("locked")){h.locked=!!h.locked;if(h.locked!==x.locked){g.getSubNodeByItemId("MOVE",i).css("display",h.locked?"none":"");p=true}}if(h.hasOwnProperty("folded")){h.folded=!!h.folded;if(h.folded!==x.folded){g.boxing().fireCmdClickEvent(i)}}if(h.hasOwnProperty("cmd")){h.cmd=!!h.cmd;if(h.cmd!==x.cmd){g.getSubNodeByItemId("CMD",i).css("display",h.cmd?"":"none")}}var d={};if(h.hasOwnProperty("panelBgClr")){d["background-color"]=h.panelBgClr}if(h.hasOwnProperty("panelBgImg")){d["background-image"]=h.panelBgImg?("url("+xui.adjustRes(h.panelBgImg)+")"):""}if(h.hasOwnProperty("panelBgImgPos")){d["position-color"]=h.panelBgImgPos}if(h.hasOwnProperty("panelBgImgRepeat")){d["background-repeat"]=h.panelBgImgRepeat}if(h.hasOwnProperty("panelBgImgAttachment")){d["background-attachment"]=h.panelBgImgAttachment}if(h.hasOwnProperty("overflow")){var m=h.overflow;if(m){if(m.indexOf(":")!=-1){_.arr.each(m.split(/\s*;\s*/g),function(y){var v=y.split(/\s*:\s*/g);if(v.length>1){d[_.str.trim(v[0])]=_.str.trim(v[1]||"")}})}}d.overflow=m||""}if(!_.isEmpty(d)){g.getSubNodeByItemId("PANEL",i).css(d)}}_.merge(x,h,"all");if(p){var n=g.getRootNode().style;xui.UI.$tryResize(g,n.width,n.height,true);n=null}}return q},fireCmdClickEvent:function(c){this.getSubNodeByItemId("CMD",c).onMousedown();return this}},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",text:"{items}",$submap:{items:{ITEM:{tagName:"div",className:"{cls1} {itemClass}",style:"{size};{itemStyle};{display}",MOVE:{$order:0,tagName:"div",className:"xui-uibg-bar {cls2} ",style:"{moveDisplay}"},CMD:{$order:1,tagName:"div",style:"{cmdDisplay}",className:"{cls3} "},PANEL:{tagName:"div",className:"xui-uibg-base",style:"position:absolute;left:0;top:0;{_bginfo};{_overflow};",text:xui.UI.$childTag}}}}},Appearances:{".setting-xui-layout":{width:"9px"},KEY:{position:"absolute",overflow:"hidden",left:0,top:0,"font-size":xui.browser.ie?0:null,"line-height":xui.browser.ie?0:null},MOVE:{$order:0,position:"absolute","z-index":"10","font-size":xui.browser.ie?0:null,"line-height":xui.browser.ie?0:null},"MOVE-mouseover":{$order:1,"background-color":"#C8E1FA"},CMD:{position:"absolute",cursor:"pointer","z-index":"20","font-size":xui.browser.ie?0:null,"line-height":xui.browser.ie?0:null},ITEM:{position:"absolute","z-index":1,overflow:"hidden","border-width":xui.browser.opr?"0px":null,"font-size":xui.browser.ie?0:null,"line-height":xui.browser.ie?0:null},PANEL:{position:"absolute",overflow:"auto","border-width":xui.browser.opr?"0px":null,"font-size":xui.browser.ie?0:null,"line-height":xui.browser.ie?0:null},"ITEM-MAIN":{left:0,right:0,top:0,bottom:0},"ITEM-TOP, ITEM-BOTTOM":{left:0,right:0},"ITEM-LEFT, ITEM-RIGHT":{top:0,bottom:0},"MOVE-TOP, MOVE-BOTTOM":{width:"100%",height:"7px",cursor:"n-resize","border-top":"solid 1px #c8e1fa","border-bottom":"solid 1px #648cb4"},"MOVE-LEFT, MOVE-RIGHT":{height:"100%",width:"7px",cursor:"w-resize","border-left":"solid 1px #c8e1fa","border-right":"solid 1px #648cb4"},"MOVE-TOP":{bottom:0},"MOVE-BOTTOM":{top:0},"MOVE-LEFT":{right:"0px"},"MOVE-RIGHT":{left:0},"CMD-TOP, CMD-BOTTOM, CMD-LEFT, CMD-RIGHT":{"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat"},"CMD-TOP":{$order:1,left:"50%","margin-left":"-20px",bottom:0,width:"40px",height:"9px","background-position":"-360px -232px"},"CMD-BOTTOM":{$order:1,left:"50%","margin-left":"-20px",top:0,width:"40px",height:"9px","background-position":"-360px -258px"},"CMD-LEFT":{$order:1,top:"50%","margin-top":"-20px",right:0,height:"40px",width:"9px","background-position":"-310px -240px"},"CMD-RIGHT":{$order:1,top:"50%","margin-top":"-20px",left:0,height:"40px",width:"9px","background-position":"-336px -240px"},"CMD-TOP-mouseover":{$order:2,"background-position":"-360px -245px"},"CMD-BOTTOM-mouseover":{$order:2,"background-position":"-360px -271px"},"CMD-LEFT-mouseover":{$order:2,"background-position":"-323px -240px"},"CMD-RIGHT-mouseover":{$order:2,"background-position":"-349px -240px"},"MOVE-MAIN":{$order:5,display:"none"},"CMD-MAIN":{$order:5,display:"none"}},Behaviors:{DroppableKeys:["PANEL"],PanelKeys:["PANEL"],HoverEffected:{MOVE:"MOVE",CMD:"CMD"},onSize:xui.UI.$onSize,MOVE:{beforeMousedown:function(i,p,c){if(xui.Event.getBtn(p)!="left"){return}var q=i.getSubId(c),x=i.getItemByDom(c);if(x.folded){return}var k=i.getItemByItemId("main"),g=i.getSubNode("ITEM",q),j=i.getSubNodeByItemId("ITEM","main"),u=xui.use(c).css("cursor"),v=i.properties,l,r,n,s,f,d;i.pos=x.pos;if(v.type=="vertical"){l=i._cur=g.height();n=j.height();if(x.pos=="before"){f=l-x.min;d=x.max?Math.min(parseInt(x.max,10)-l,(n-k.min)):(n-k.min)}else{f=x.max?Math.min(parseInt(x.max,10)-l,(n-k.min)):(n-k.min);d=l-x.min}xui.use(c).startDrag(p,{dragType:"copy",targetReposition:false,verticalOnly:true,maxTopOffset:f,maxBottomOffset:d,dragCursor:u,targetWidth:xui.browser.ie?xui.use(c).offsetWidth():null,targetHeight:xui.browser.ie?xui.use(c).offsetHeight():null,targetCallback:xui.browser.ie?function(h){h.tagClass("-(top|bottom)",false)}:null})}else{r=i._cur=g.width();s=j.width();if(x.pos=="before"){f=r-x.min;d=x.max?Math.min(parseInt(x.max,10)-r,(s-k.min)):(s-k.min)}else{f=x.max?Math.min(parseInt(x.max,10)-r,(s-k.min)):(s-k.min);d=r-x.min}xui.use(c).startDrag(p,{dragType:"copy",targetReposition:false,horizontalOnly:true,maxLeftOffset:f,maxRightOffset:d,dragCursor:u,targetWidth:xui.browser.ie?xui.use(c).offsetWidth():null,targetHeight:xui.browser.ie?xui.use(c).offsetHeight():null,targetCallback:xui.browser.ie?function(h){h.tagClass("-(left|right)",false)}:null})}i._limited=0},onDrag:function(g,i,k){var f=g.properties,j=xui.DragDrop,h=xui.DragDrop._profile,c=0;if(f.type=="vertical"){if((h.y<=h.restrictedTop)||(h.y>=h.restrictedBottom)){c=true}}else{if(h.x<=h.restrictedLeft||h.x>=h.restrictedRight){c=true}}if(c){if(!g._limited){g._bg=h.proxyNode.css("backgroundColor");h.proxyNode.css("backgroundColor","#ff6600");g._limited=true}}else{if(g._limited){h.proxyNode.css("backgroundColor",g._bg);g._limited=0}}},onDragstop:function(d,h,j){var c=d.properties,i=xui.use(j).parent(),g=d.getRoot(),f=d.getItemByDom(j);if(c.type=="vertical"){i.height(f.size=d._cur+(d.pos=="before"?1:-1)*xui.DragDrop.getProfile().offset.y);xui.UI.$tryResize(d,null,g.height(),true)}else{i.width(f.size=d._cur+(d.pos=="before"?1:-1)*xui.DragDrop.getProfile().offset.x);xui.UI.$tryResize(d,g.width(),null,true)}d._limited=0}},CMD:{onMousedown:function(j,n,d){if(xui.Event.getBtn(n)!="left"){return}var s=j.properties,p=j.getSubId(d),q=j.getItemByDom(d),f=j.getRoot(),k=j.getItemByItemId("main"),i=j.getSubNodeByItemId("ITEM","main"),g=j.getSubNode("ITEM",p),c=j.getSubNode("PANEL",p),h=j.getSubNode("MOVE",p),l=xui.UI.$getCSSValue("setting-xui-layout","width");if(s.type=="vertical"){if(q.folded){g.height(q.size);c.show();q.folded=false;if(q.pos=="before"){xui.use(d).replaceClass(/bottom/g,"top")}else{xui.use(d).replaceClass(/top/g,"bottom")}if(!q.locked){h.css("cursor","n-resize")}j.getSubNode("MOVE").tagClass("-checked",false)}else{g.height(l);c.hide();q.folded=true;if(q.pos=="before"){xui.use(d).replaceClass(/top/g,"bottom")}else{xui.use(d).replaceClass(/bottom/g,"top")}if(!q.locked){h.css("cursor","default")}j.getSubNode("MOVE").tagClass("-checked")}xui.UI.$tryResize(j,null,f.height(),true)}else{if(q.folded){g.width(q.size);c.show();q.folded=false;if(q.pos=="before"){xui.use(d).replaceClass(/right/g,"left")}else{xui.use(d).replaceClass(/left/g,"right")}if(!q.locked){h.css("cursor","w-resize")}j.getSubNode("MOVE").tagClass("-checked",false)}else{g.width(l);c.hide();q.folded=true;if(q.pos=="before"){xui.use(d).replaceClass(/left/g,"right")}else{xui.use(d).replaceClass(/right/g,"left")}if(!q.locked){h.css("cursor","default")}j.getSubNode("MOVE").tagClass("-checked")}xui.UI.$tryResize(j,f.width(),null,true)}return false}}},DataModel:{selectable:true,disabled:null,position:"absolute",type:{listbox:["vertical","horizontal"],ini:"vertical",action:function(h,i){if(h!=i){var f=this,k="auto",c=f.getSubNode("ITEM",true),d=f.getSubNode("MOVE",true),j=f.getSubNode("CMD",true);d.merge(c).merge(j);if(h=="vertical"){d.replaceClass(/(-left)(\b)/ig,"-top$2");d.replaceClass(/(-right)(\b)/ig,"-bottom$2");c.each(function(l){xui(l).height(xui(l).width())}).css({left:0,top:k,right:k,bottom:k})}else{d.replaceClass(/(-top)(\b)/ig,"-left$2");d.replaceClass(/(-bottom)(\b)/ig,"-right$2");c.each(function(l){xui(l).width(xui(l).height())}).css({left:k,top:0,right:k,bottom:k})}var g=f.getRoot().cssSize();xui.UI.$tryResize(f,g.width,g.height,true)}}},dock:"fill",listKey:null,width:200,height:200,items:{ini:[],set:function(i){var k=this;if(k.renderId){var g=k.boxing(),c=xui.$getGhostDiv(),f=_.copy(k.children),j,h;k.children.length=0;_.arr.each(f,function(l){delete l[0].$dockParent;c.appendChild(l[0].getRootNode())});g.clearItems();h=k.box._adjustItems(i);g._insertItems(h,null,null,true);_.arr.each(f,function(l){g.append.apply(g,l)});c.innerHTML="";var d=k.getRoot().cssSize();xui.UI.$tryResize(k,d.width,d.height,true)}else{k.properties.items=_.copy(i)}}}},_adjustItems2:function(d,f){var c=[];_.arr.each(d,function(g){if(g.id!="main"){c.push(g=_.isHash(g)?g:{id:""+g});g.pos=f}});_.arr.each(c,function(g){g.id=_.isStr(g.id)?g.id:_.id();g.min=g.min||10;g.size=parseInt(g.size,10)||80;g.locked=typeof g.locked=="boolean"?g.locked:false;g.folded=typeof g.folded=="boolean"?g.folded:false;g.hidden=typeof g.hidden=="boolean"?g.hidden:false;g.cmd=typeof g.cmd=="boolean"?g.cmd:true});return c},_adjustItems:function(d){var c,f=[],g=[];_.arr.each(d,function(h){if(h.id=="main"){c=h}else{if(h.pos=="before"){f.push(h)}else{h.pos="after";g.push(h)}}});c=c||{};c.id="main";c.min=c.min||10;d.length=0;_.arr.insertAny(d,this._adjustItems2(f,"before"));_.arr.insertAny(d,c);_.arr.insertAny(d,this._adjustItems2(g,"after"));return d},_prepareData:function(c){var d=c.properties;if(!d.items||!_.isArr(d.items)){d.items=_.clone([{id:"before",pos:"before",locked:false,size:60,min:50,max:200},{id:"after",pos:"after",locked:false,size:60,min:50,max:200}])}d.items=this._adjustItems(d.items);return arguments.callee.upper.call(this,c)},_prepareItems:function(d,c){var f=arguments.callee.upper.apply(this,arguments);_.arr.each(c,function(g){delete g.caption});return f},_prepareItem:function(d,g,f){var h=d.properties,c;if(g.id=="main"){g.cls1=d.getClass("ITEM","-main");g.cls2=d.getClass("MOVE","-main");g.cls3=d.getClass("CMD","-main")}else{if(h.type=="vertical"){g.size="height:"+g.size+"px"}else{g.size="width:"+g.size+"px"}var i;if(h.type=="vertical"){if(g.pos=="before"){i="top"}else{i="bottom"}}else{if(g.pos=="before"){i="left"}else{i="right"}}g.cls1=d.getClass("ITEM","-"+i);g.cls2=d.getClass("MOVE","-"+i);g.cls3=d.getClass("CMD","-"+i);g.display=g.hidden?"display:none":"";g.moveDisplay=g.locked?"display:none":"";g.cmdDisplay=g.cmd?"":"display:none"}g._bginfo="";if(c=g.panelBgClr||h.panelBgClr){g._bginfo+="background-color:"+c+";"}if(c=g.panelBgImg||h.panelBgImg){g._bginfo+="background-image:url("+xui.adjustRes(c)+");"}if(c=g.panelBgImgPos||h.panelBgImgPos){g._bginfo+="background-position:"+c+";"}if(c=g.panelBgImgRepeat||h.panelBgImgRepeat){g._bginfo+="background-repeat:"+c+";"}if(c=g.panelBgImgAttachment||h.panelBgImgAttachment){g._bginfo+="background-attachment:"+c+";"}if(_.isStr(g.overflow)){g._overflow=g.overflow.indexOf(":")!=-1?(g.overflow):("overflow:"+g.overflow)}else{if(_.isStr(h.overflow)){g._overflow=h.overflow.indexOf(":")!=-1?(h.overflow):("overflow:"+h.overflow)}}},RenderTrigger:function(){var c,d=this;_.arr.each(d.properties.items,function(f){if(f.id!="main"){if(f.folded&&(c=d.getSubIdByItemId(f.id))){f.folded=false;d.getSubNode("CMD",c).onMousedown()}}})},_onresize:function(g,d,q){var r=g.properties,p=g.keys.ITEM,c=g.keys.PANEL,h=g.getSubNode("MOVE",true),j=g.getItemByItemId("main"),m=j.min||10,k=xui.UI.$getCSSValue("setting-xui-layout","width");var l={},i={},f={};_.arr.each(r.items,function(s){itemId=g.getSubIdByItemId(s.id);l[itemId]={};i[itemId]={};f[itemId]=s});var n=function(s,F,v,z,H,B,E){var J,y,K,D,x=0,u=0,I=0,G=0,A=B;_.arr.each(s.items,function(w){if(w.id=="main"){return}if(w.pos=="before"){D=g.getSubIdByItemId(w.id);if(w.hidden){y=0;i[D][v]=w.size}else{if(w.folded){y=i[D][v]=k}else{G++;y=K=w.size;if(y>B+w.min){y-=B}else{B=y-w.min;y=w.min}y-=E;y=Math.max(y,(w.locked?0:k))}}i[D][z]=x;x+=y;l[D][z]=0;l[D][v]=y-(w.locked?0:k);i[D][H]=l[D][H]="auto";i[D][v]=y;if(!w.locked){m+=k}}});_.arr.each(s.items,function(w){if(w.id=="main"){return}if(w.pos=="after"){D=g.getSubIdByItemId(w.id);if(w.hidden){y=0;i[D][v]=w.size}else{if(w.folded){y=i[D][v]=k}else{G++;y=K=w.size;if(y>B+w.min){y-=B}else{B=y-w.min;y=w.min}y-=E;y=Math.max(y,(w.locked?0:k))}}i[D][H]=u;u+=y;l[D][H]=0;l[D][v]=y-(w.locked?0:k);i[D][z]=l[D][z]="auto";i[D][v]=y;if(!w.locked){m+=k}}},null,true);I=x+u;if(F-I>=m||E){J=g.getSubIdByItemId("main");i[J][v]=l[J][v]=F-I;i[J][z]=x}else{var C=_.toArr(arguments);if(!A){C[C.length-2]=(m-(F-I))/G}else{C[C.length-2]=A;C[C.length-1]=(m-(F-I))/G}n.apply(null,C)}};if(r.type!="vertical"){if(!_.isNull(d)){n(r,d,"width","left","right",0,0);_.each(i,function(u,s){if(u.width&&!f[s].folded){f[s].size=u.width}})}if(!_.isNull(q)){_.each(l,function(s,u){i[u].height=s.height=q})}}else{if(!_.isNull(q)){n(r,q,"height","top","bottom",0,0);_.each(i,function(u,s){if(u.height&&!f[s].folded){f[s].size=u.height}})}if(!_.isNull(d)){_.each(l,function(s,u){i[u].width=s.width=d})}}_.each(i,function(s,u){g.getSubNode("PANEL",u).cssRegion(l[u],true);g.getSubNode("ITEM",u).cssRegion(i[u])})}}});Class("xui.UI.TreeGrid",["xui.UI","xui.absValue"],{Instance:{activate:function(){var d=this.get(0),c;if(!d.renderId){return}d.getSubNode("ROWS").nextFocus(true,true,true);return this},_setCtrlValue:function(c){return this.each(function(g){if(!g.renderId){return}if(g.properties.activeMode=="none"){return}var i=g.boxing(),l=i.getUIValue(),j=g.properties,f=j.activeMode=="row"?"CELLS":"CELL",d=function(n,p){return g.getSubNode(n,p)},h=function(k){var p=g.rowMap2;if(j.activeMode=="row"){return p[k]}else{if(!k){return}var n=(""+k).split("|");return _.get(g.rowMap,[p[n[0]],"_cells",n[1]])}};if(j.selMode=="single"){var m=h(l);if(l&&m){d(f,m).tagClass("-checked",false)}m=h(c);if(m){d(f,m).tagClass("-checked")}}else{if(j.selMode=="multi"||j.selMode=="multibycheckbox"){l=l?(""+l).split(j.valueSeparator):[];c=c?(""+c).split(j.valueSeparator):[];_.arr.each(l,function(k){d(f,h(k)).tagClass("-checked",false)});_.arr.each(c,function(k){d(f,h(k)).tagClass("-checked")});if(c.length===0){d("HFMARK").tagClass("-checked",false);delete g._$checkAll}}}})},_insertRowsToDom:function(f,i,h,d,k){if(h){var l=f.rowMap[h];if(l&&!l._inited){return}}if(!i){i=[]}var g,j,j=f.getSubNode("FHCELL").width();_.arr.each(i,function(m){m._row0DfW=j?("width:"+j+"px"):"";_.arr.each(m.cells,function(n,p){n.width=n._col._pxWidth})});var c=f._buildItems("rows",i);if(!d){if(h){g=f.getSubNode("SUB",h)}else{g=f.getSubNode("ROWS")}if(k){g.prepend(c)}else{g.append(c)}}else{g=f.getSubNode("ROW",d);if(k){g.addPrev(c)}else{g.addNext(c)}}_.arr.each(i,function(m){m.open=false});delete f.$allrowscache;f.box._adjustBody(f,"addrow")},_refreshHeader:function(f){var d=this.get(0),k=d.properties,g=d.box,l=_.clone(k.grpCols,false,2),h,i,m=this.getRows("data");_.breakO(d.colMap,2);f=g._adjustHeader(f||[]);h=g._prepareHeader(d,f);k.header=f;this.removeAllRows();d.getSubNode("HCELL",true).remove();var c;if(h.length){c=d._buildItems("header",h);d.getSubNode("LHCELL").addPrev(c)}if(l&&_.isArr(l)&&l.length>0){l=g._adjustGrpColsData(d,l);k.grpCols=l;i=g._prepareGrpCols(d,l,h);if(i&&i.length){c=d._buildItems("grpCols",i);d.getSubNode("GRPCELLBOX").append(c)}g._adjustColsH(d);g._adjustColsV(d,k.headerHeight)}if(m&&m.length){this.setRows(m)}g._adjustBody(d,"addcol");var j=d.properties.colOptions;_.arr.each(h,function(n){if(_.isFun(n.colRenderer||j.colRenderer)){(n.colRenderer||j.colRenderer).call(null,d,n)}});if(d.$col_pop){d.$col_pop.destroy(true);delete d.$col_pop}_.each(d.$cache_editor,function(n){if(!n.destroyed){n.destroy(true)}});d.$cache_editor={}},_toggleRows:function(f,d){var c=this;if(f&&f.length){_.arr.each(f,function(g){c.toggleRow(g.id,d)})}},autoRowHeight:function(c){return this.each(function(f){if(f.renderId){var d=xui.Event;if(d.__realtouch){d.__simulatedMousedown=1}if(c&&f.rowMap2[c]){f.getSubNode("FHANDLER",f.rowMap2[c]).onDblclick(true)}else{_.each(f.rowMap,function(h,g){f.getSubNode("FHANDLER",g).onDblclick(true)})}if(d.__realtouch){d.__simulatedMousedown=0}}})},autoColWidth:function(c){return this.each(function(f){if(f.renderId){var d=xui.Event;if(d.__realtouch){d.__simulatedMousedown=1}if(c&&f.colMap2[c]){f.getSubNode("HHANDLER",f.colMap2[c]).onDblclick(true)}else{_.each(f.colMap,function(h,g){f.getSubNode("HHANDLER",g).onDblclick(true)})}if(d.__realtouch){d.__simulatedMousedown=0}}})},autoColHeight:function(){return this.each(function(d){if(d.renderId){var c=xui.Event;if(c.__realtouch){c.__simulatedMousedown=1}d.getSubNode("FHANDLER").onDblclick(true);if(c.__realtouch){c.__simulatedMousedown=0}}})},addHotRow:function(c){var d=this.get(0);if(d.renderId){d.box._addTempRow(d,c)}return this},removeHotRow:function(){var c=this.get(0);c.box._sethotrowoutterblur(c,true);delete c.__hastmpRow;this.removeRows([c.box._temprowid],false);return this},isDirtied:function(){var c=false;_.each(this.get(0).cellMap,function(d){if(d._oValue!==d.value){c=true;return false}});return c},_getObjByDom:function(g,d){var f=this.get(0),c=f.getSubId(typeof g=="string"?g.charAt(0)=="!"?((g=xui.use(g).get(0))&&g.id):g:g.id);return f[d=="row"?"rowMap":d=="col"?"colMap":"cellMap"][c]},getRowByDom:function(d,c){return this.get(0).box._getRow(this.get(0),this._getObjByDom(d,"row"),c)},getHeaderByDom:function(c){return this._getObjByDom(c,"col")},getCellByDom:function(c){return this._getObjByDom(c,"cell")},getRows:function(g){var f=this.get(0).properties.rows,d,c;if(!_.isArr(f)){return[]}if(g=="data"||g=="min"||g=="map"){d=_.clone(f,true);if(d&&d.length&&d[d.length-1]&&d[d.length-1].id==this.constructor._temprowid){d.pop()}if(g=="min"){_.arr.each(d,function(j,h){if(d[h].cells){_.each(c=d[h]=(d[h].cells||d[h]),function(i,k){c[k]=i.value})}})}return d}else{return f}},getRowbyRowId:function(g,f){var d=this.get(0),c=d.rowMap2[g];return d.box._getRow(d,d.rowMap[c],f)},getRowbyCell:function(c,d){return this.constructor._getRow(this.get(0),c._row,d)},toggleRow:function(g,d){var c=this.get(0),f=c.rowMap[c.rowMap2[g]];if(f&&f.sub){c.box._setSub(c,f,typeof d=="boolean"?d:!f._checked)}return this},updateRow:function(j,i){var x=this,h=x.get(0),s=x.getRowbyRowId(j),k;if(s){var q=s._serialId,m,c;if(typeof i!="object"){i={caption:i}}else{_.filter(i,true)}if(_.isSet(i.id)){i.id+=""}if(i.id&&i.id!==j){k=i.id;var d=h.rowMap2,l;if(!d[k]){if(l=d[j]){d[k]=l;delete d[j];h.rowMap[l].id=k;_.each(h.colMap,function(v){if(v=v._cells){v[k]=v[j];delete v[j]}})}}}else{i.id=j}if(_.isEmpty(i)){return x}if(("group" in i&&i.group!=s.group)||"cells" in i||("sub" in i&&!((i.sub===true&&!s.sub)||(!i.sub&&s.sub===true)))){var p="__special",n=s._pid?h.rowMap[s._pid].id:null;s.id=p;h.rowMap2[p]=h.rowMap2[k||j];delete h.rowMap2[k||j];_.each(h.colMap,function(v){if(v=v._cells){delete v[k||j]}});s=_.clone(s,true);_.merge(s,i,"all");if("sub" in i&&!i.sub){delete s.sub}x.insertRows([s],n,p,true);x.removeRows([p]);if(h.properties.activeMode=="row"){var w=h.properties.$UIvalue||"",f=(""+w).split(h.properties.valueSeparator);if(f.length&&_.arr.indexOf(f,j)!=-1){if(k){_.arr.removeValue(f,j)}x.setUIValue(f.join(h.properties.valueSeparator),true)}}}else{if("sub" in i){m=x.getSubNode("ROWTOGGLE",q);if(i.sub){m.removeClass("xui-uicmd-empty").addClass("xui-uicmd-toggle2")}else{m.removeClass("xui-uicmd-toggle2").addClass("xui-uicmd-empty")}}if(m=i.height){x.getSubNode("CELLS",q).height(m)}if(m=i.rowStyle){(c=x.getSubNode("CELLS",q)).attr("style",c.attr("style")+";"+m)}if(m=i.rowClass){x.getSubNode("CELLS",q).addClass(m)}if(i.hasOwnProperty("disabled")){var g=h.getClass("CELLS","-disabled");if(i.disabled){x.getSubNode("CELLS",q).addClass(g)}else{x.getSubNode("CELLS",q).removeClass(g)}}if(i.hasOwnProperty("readonly")){var g=h.getClass("CELLS","-readonly");if(i.readonly){x.getSubNode("CELLS",q).addClass(g)}else{x.getSubNode("CELLS",q).removeClass(g)}}if(m=i.firstCellStyle){(c=x.getSubNode("FCELL",q)).first().attr("style",c.attr("style")+";"+m)}if(m=i.firstCellClass){x.getSubNode("FCELL",q).first().addClass(m)}if(i.hasOwnProperty("caption")){x.getSubNode("FCELLCAPTION",q).get(0).innerHTML=i.caption}if(i.hasOwnProperty("preview")){if(i.preview){x.getSubNode("PREVIEW",q).css("display","block").html(i.preview)}else{x.getSubNode("PREVIEW",q).css("display","none")}}if(i.hasOwnProperty("summary")){if(i.summary){x.getSubNode("SUMMARY",q).css("display","block").html(i.summary)}else{x.getSubNode("SUMMARY",q).css("display","none")}}if(i.hasOwnProperty("rowResizer")){m=!!i.rowResizer;x.getSubNode("FHANDLER",q).css("display",(i.rowResizer=m)?"block":"none")}if("hidden" in i){var u=!!i.hidden;if(u){if(s.hidden!==true){x.getSubNode("ROW",q).css("display","none")}}else{if(s.hidden===true){x.getSubNode("ROW",q).css("display","")}}}_.merge(s,i,"all")}}else{var r=x.get(0).queryItems(x.getRows(),function(v){return typeof v=="object"?v.id===j:v==j},true,true,true);if(r.length){_.merge(r[0][0],i,"all")}}return x},insertRows:function(l,j,d,s){var f=arguments[4],q=this.constructor,h=this.get(0);if(l&&_.isArr(l)&&l.length>0){var u=h.properties,g=h.rowMap2,n=u.rowOptions,r=h.rowMap,m,v,i;j=g&&g[j];d=g&&g[d];if(d){v=h.rowMap[d];if(v){j=v._pid}}l=q._adjustRows(l);if(!j){m=_.isArr(u.rows)?u.rows:(u.rows=[])}else{i=r&&r[j];m=_.isArr(i.sub)?i.sub:(i.sub=[])}var w;if(h.renderId){if(!j||i._inited){w=q._prepareItems(h,l,j);this._insertRowsToDom(h,w,j,d,s,l);_.arr.each(l,function(c){if(_.isFun(c.rowRenderer||n.rowRenderer)){(c.rowRenderer||n.rowRenderer).call(null,h,c)}})}}if(!d){_.arr.insertAny(m,l,s?0:-1)}else{var p=_.arr.subIndexOf(m,"_serialId",d);_.arr.insertAny(m,l,s?p:(p+1))}if(h.renderId){if(!u.iniFold){h.boxing()._toggleRows(w,true)}h.box._asy(h)}if(w&&w.length){_.breakO(w,2);w.length=0}}if(f!==false&&h.renderId&&h.__hastmpRow){h.box.__ensurehotrow(h,null)}return this},removeRows:function(c){var g=arguments[1],l=this,h=l.get(0),f=h.properties,k=h.cellMap,d=[],j,i=0;c=_.isArr(c)?c:[c];_.arr.each(c,function(n,m){c[m]=""+n});_.arr.each(c,function(u){if(u=h.rowMap2[u]){i++;var s;if(s=h.rowMap[u]){var p=s._cells,q=s.id,n;if(s.sub&&_.isArr(s.sub)){var m=[];_.arr.each(s.sub,function(v){m.push(v.id)});l.removeRows(m)}_.each(p,function(w,v){delete k[w]._col._cells[q];_.breakO(k[w]);delete k[w];h.reclaimSubId(w.slice(2),"cell")});if(n=s._pid?(n=h.rowMap[s._pid])?n.sub:null:h.properties.rows){if(_.isArr(n)){_.filter(n,function(v){return v._serialId!=u})}}delete h.rowMap2[q];_.breakO(h.rowMap[u]);delete h.rowMap[u];d.push(h.getSubNode("ROW",u).get(0))}h.reclaimSubId(u.slice(2),"row")}else{var r=function(w){var v=_.arr.subIndexOf(w,"id",u);if(v!==-1){_.arr.removeFrom(w,v)}_.arr.each(w,function(x){if(x.sub){r(x.sub)}})};r(f.rows)}});if(i>0){if(j=f.$UIvalue){if((j=(""+j).split(f.valueSeparator)).length>1){_.filter(j,function(m){return _.arr.indexOf(c,m)==-1});f.$UIvalue=j.join(f.valueSeparator)}else{if(_.arr.indexOf(c,f.$UIvalue)!=-1){f.$UIvalue=null}}}xui(d).remove();if(h.$activeCell&&!xui.Dom.byId(h.$activeCell)){delete h.$activeCell}if(h.$activeRow&&!xui.Dom.byId(h.$activeRow)){delete h.$activeRow}delete h.$allrowscache;h.box._asy(h);h.box._adjustBody(h,"delrow")}if(g!==false&&h.renderId&&h.__hastmpRow){h.box.__ensurehotrow(h,null)}return l},insertCol:function(l,i,p){var h=this.get(0),g=h.properties,u=h.box,s=g.rows,d,n,z,y;p=_.isNumb(p)?p:-1;if(p===-1||g.header.length<p){p=g.header.length}if(p<0){p=0}var c=g.grpCols;if(c&&_.isArr(c)&&c.length){for(var x=0,v=c.length,r;x<v;x++){r=c[x];if(r.from>p){r.from++;r.to++}else{if(p>=r.from&&p<=r.to){r.to++}}}}if(h.renderId){z=u._parepareCol(h,l);l=z[0];_.arr.insertAny(g.header,l,p);n=h.getSubNode("HCELLS").children().get(p);if(n){xui(n).addNext(h._buildItems("header",[z[1]]))}var q=h.properties.colOptions;if(_.isFun(l.colRenderer||q.colRenderer)){(l.colRenderer||q.colRenderer).call(null,h,l)}g.grpCols=u._adjustGrpColsData(h,c);u._adjustColsH(h);u._adjustColsV(h,g.headerHeight);u._adjustBody(h,"addcol")}else{_.arr.insertAny(g.header,l,p)}i=_.isArr(i)?i:[];var w=0,f=function(j){_.arr.each(j,function(m,k){if(m.group){f(m.sub)}else{d=i[w];n=h.getSubNode("CELLS",m._serialId).children().get(p);if(n){y=u._parepareCell(h,d,m,l);_.arr.insertAny(m.cells,y[0],p);xui(n).addNext(h._buildItems("rows.cells",[y[1]]))}else{_.arr.insertAny(m.cells,d||{},p)}}w++})};if(s&&_.isArr(s)){f(s)}},removeCols:function(c){var g=arguments[1],n=this,i=n.get(0),k=i.box,f=i.properties,m=i.cellMap,h=xui.UI.$tag_subId,d=[],l=0;c=_.isArr(c)?c:[c];_.arr.each(c,function(q,p){c[p]=""+q});if(c&&c.length>1){c.sort(function(p,s){var q=_.arr.indexOf(f.header,p);if(q==-1){q=_.arr.subIndexOf(f.header,"id",p)}var r=_.arr.indexOf(f.header,s);if(r==-1){r=_.arr.subIndexOf(f.header,"id",s)}return q>r?1:q===r?0:-1})}var j=f.grpCols;if(j&&_.isArr(j)&&j.length){_.arr.each(c,function(u){var s=_.arr.indexOf(f.header,u);if(s==-1){s=_.arr.subIndexOf(f.header,"id",u)}if(s==-1){return}for(var r=0,q=j.length,p;r<q;r++){p=j[r];if(p.from>s){p.from--;p.to--}else{if(s>=p.from&&s<=p.to){p.to--}}}},null,true);_.filter(j,function(q){var p=q.to>=q.from;if(!p&&i.renderId){i.getSubNode("HCELL",q[h]).remove();delete i.colMap[q[h]];delete i.colMap2[q.id]}return p})}_.arr.each(c,function(v){var q=_.arr.indexOf(f.header,v);if(q==-1){q=_.arr.subIndexOf(f.header,"id",v)}if(q==-1){return}if(i.colMap2&&(v=i.colMap2[v])){l++;var p;if(p=i.colMap[v]){var u=p._cells,r=p.id;_.each(u,function(x,w){d.push(i.getSubNode("CELL",x).get(0));delete m[x]._row._cells[r];_.breakO(m[x]);delete m[x];i.reclaimSubId(x.slice(2),"cell")});delete i.colMap2[r];_.breakO(i.colMap[v]);delete i.colMap[v];d.push(i.getSubNode("HCELL",v).get(0))}i.reclaimSubId(v.slice(2),"header")}var s=function(w){_.arr.each(w,function(x){if(x.cells){_.arr.removeFrom(x.cells,q)}if(x.sub){s(x.sub)}})};s(f.rows);_.arr.removeFrom(f.header,q)},null,true);if(l>0){xui(d).remove();if(i.$activeCell&&!xui.Dom.byId(i.$activeCell)){delete i.$activeCell}f.grpCols=k._adjustGrpColsData(i,j);k._adjustColsH(i);k._adjustColsV(i,f.headerHeight);k._adjustBody(i,"delcol")}return n},removeAllRows:function(){var f=arguments[0],d=this.get(0),g=d.box,h=d.properties;if(!h.rows||h.rows.length<0){return this}for(var c in d.cellMap){d.reclaimSubId(c.slice(2),"cell")}for(var c in d.rowMap){d.reclaimSubId(c.slice(2),"row")}_.each(d.colMap,function(i){i._cells={}});_.breakO([d.rowMap,d.cellMap],3);d.rowMap={};d.cellMap={};d.rowMap2={};delete d.$activeCell;delete d.$activeRow;d.properties.rows.length=0;if(d.renderId){if(d.$sl!=0){d.getSubNode("HEADER").get(0).scrollLeft=d.$sl=0}d.getSubNode("SCROLL").scrollTop(0).scrollLeft(0);d.getSubNode("ROWS").empty()}delete d.$allrowscache;d.properties.$UIvalue=null;if(f!==false&&d.renderId&&d.__hastmpRow){g.__ensurehotrow(d,null)}g._adjustBody(d,"delrow");return this},resetRowValue:function(f){var d=this.get(0),g=this.getRowbyRowId(f),c=[],h=d.properties;_.arr.each(g.cells,function(i){if(i._oValue!==i.value){i._oValue=i.value;delete i.dirty;if(h.dirtyMark){c.push(d.getSubNode("CELLA",i._serialId).get(0))}}});if(h.dirtyMark&&h.showDirtyMark){xui(c).removeClass("xui-ui-dirty")}},resetColValue:function(g){var f=this.get(0),d=this.getHeaderByColId(g),c=[],h=f.properties;_.arr.each(d.cells,function(i){if(i._oValue!==i.value){i._oValue=i.value;delete i.dirty;if(h.dirtyMark){c.push(f.getSubNode("CELLA",i._serialId).get(0))}}});if(h.dirtyMark&&h.showDirtyMark){xui(c).removeClass("xui-ui-dirty")}},getActiveRow:function(){var c,d=this.get(0);if(d.properties.activeMode!="row"){return}if(!(c=d.$activeRow)){return}c=d.rowMap[d.getSubId(c)];if(c&&c.id&&c.id==d.box._temprowid){c=null}return c},setActiveRow:function(f){var d,g,c=this.get(0);if(c.properties.activeMode!="row"){return}c.box._activeRow(c,false);if(!(g=this.getRowbyRowId(f))){return}if(!(d=c.getSubNode("CELLS",g._serialId)).isEmpty()){c.box._activeRow(c,d.get(0).id)}return this},getHeader:function(g){var f=this.get(0).properties.header;if(!_.isArr(f)){return[]}if(g=="data"){return _.clone(f,true)}else{if(g=="min"){var d=_.clone(f,true),c;_.arr.each(d,function(j,h){d[h]=j.id});return d}else{return f}}},getHeaderByColId:function(g,f){var c=this.get(0).properties.header,d=_.arr.subIndexOf(c,"id",g);return d==-1?null:f=="data"?_.clone(c[d],true):f=="min"?c[d].id:c[d]},getHeaderByCell:function(c,f){var d=c._col;return !d?null:f=="data"?_.clone(d,true):f=="min"?d.id:d},updateHeader:function(c,r){var m=this,g=m.get(0),f=m.getHeaderByColId(c),p;if(!f){var h=g.properties.grpCols,i=_.arr.subIndexOf(h,"id",c);f=h[i];p=true}if(f){if(typeof r!="object"){r={caption:r+""}}else{_.filter(r,true)}delete r.id;if(g.renderId){var l=f._serialId,q,j;if(!p){if(q=r.width){var d=[];d.push(m.getSubNode("HCELL",l).get(0));_.each(f._cells,function(n){d.push(m.getSubNode("CELL",n).get(0))});xui(d).width(f._pxWidth=q);m.getSubNode("SCROLL").onScroll();m.constructor._adjustColsH(m.get(0));m.constructor._adjustBody(m.get(0),"setcol")}if(r.hasOwnProperty("visibility")&&!r.hasOwnProperty("hidden")){r.hidden=!r.visibility}if("hidden" in r){var k=!!r.hidden;if(k){if(f.hidden!==true){m.showColumn(c,false)}}else{if(f.hidden===true){m.showColumn(c,true)}}}}if(q=r.headerStyle||r.colStyle){(j=m.getSubNode("HCELLA",l)).attr("style",j.attr("style")+";"+q)}if(q=r.headerClass){m.getSubNode("HCELLA",l).addClass(q)}if(r.hasOwnProperty("caption")){m.getSubNode("HCELLCAPTION",l).get(0).innerHTML=r.caption}if("colResizer" in r){q=!!r.colResizer;m.getSubNode("HHANDLER",l).css("display",(r.colResizer=q)?"block":"none")}}_.merge(f,r,"all")}},showColumn:function(f,j){var i=this.get(0),c=i.colMap2,k=i.colMap,h,d,l,g=[];if(h=k[d=c[f]]){if(i.beforeColShowHide&&false===i.boxing().beforeColShowHide(i,f,j)){return false}g.push(i.getSubNode("HCELL",d).get(0));_.each(h._cells,function(m){g.push(i.getSubNode("CELL",m).get(0))});xui(g).css("display",(h.hidden=(j===false?true:false))?"none":"");if(i.afterColShowHide){i.boxing().afterColShowHide(i,f,j)}}i.box._adjustColsH(i);i.box._adjustBody(i,"setcol");return true},sortColumn:function(f,i,h){var g=this.get(0),d=g.colMap2[f],c=g.colMap[d];if(d&&c){if(_.isBool(i)){c._order=!i}if(_.isFun(h)){c.sortby=h}g.getSubNode("HCELLA",d).onClick()}return this},getCell:function(h,g){var d=this,f=this.get(0),c;_.each(f.cellMap,function(i){if(i.id&&i.id===h){h=i._serialId;return false}});c=f.cellMap[h];return !c?null:g=="data"?_.merge({rowId:c._row.id,colId:c._col.id},_.clone(c,true)):g=="min"?c.value:c},getCellbyRowCol:function(h,g,f){var d=this.get(0),c;c=_.get(d.rowMap,[d.rowMap2[h],"_cells",g]);c=c&&d.cellMap[c];return !c?null:f=="data"?_.merge({rowId:c._row.id,colId:c._col.id},_.clone(c,true)):f=="min"?c.value:c},getCells:function(g,d,c){var f={};_.each(this.get(0).cellMap,function(h){if((g?(g==h._row.id):1)&&(d?(d==h._col.id):1)){f[h.id]=c=="data"?_.merge({rowId:h._row.id,colId:h._col.id},_.clone(h,true)):c=="min"?h.value:h}});return f},updateCellByRowCol:function(k,h,f,j,i){var g,d=this,c=d.constructor;if(g=c._getCellId(d.get(0),k,h)){c._updCell(d.get(0),g,f,j,i)}return d},updateCell:function(g,d,i,h){var c=this,f=this.get(0);_.each(f.cellMap,function(j){if(j.id&&j.id===g){g=j._serialId;return false}});c.constructor._updCell(f,g,d,i,h);return c},editCellbyRowCol:function(g,f){var d=this.get(0),c=d.box;c._editCell(d,c._getCellId(d,g,f));return this},editCell:function(c){this.constructor._editCell(this.get(0),c);return this},focusCellbyRowCol:function(i,g){var d=this.get(0),c=d.box,h=c._getCellId(d,i,g),f=d.getSubNode("CELLA",h);if(f&&f.get(0)){f.focus(true)}return this},focusCell:function(c){var d=c._serialId;this.get(0).getSubNode("CELLA",d).focus(true);return this},getActiveCell:function(){var c,d=this.get(0);if(d.properties.activeMode!="cell"){return}if(!(c=d.$activeCell)){return}return d.cellMap[d.getSubId(c)]},setActiveCell:function(h,f){var g,c,d=this.get(0);if(d.properties.activeMode!="cell"){return}d.box._activeCell(d,false);if(typeof h=="object"){c=h}else{c=this.getCellbyRowCol(h,f)}if(!c){return}if(!(g=d.getSubNode("CELL",c._serialId)).isEmpty()){d.box._activeCell(d,g.get(0).id)}return this},resetGridValue:function(){return this.each(function(c){var d=c.properties;_.each(c.cellMap,function(f){f._oValue=f.value;delete f.dirty});if(d.dirtyMark&&d.showDirtyMark){c.getSubNode("CELLA",true).removeClass("xui-ui-dirty")}})},getDirtied:function(f,c){var d={};_.each(this.get(0).cellMap,function(g){if(g._oValue!==g.value&&(f?(f==g._row.id):1)&&(c?(c==g._col.id):1)){d[g.id]={rowId:g._row.id,colId:g._col.id,value:g.value,_oValue:g._oValue}}});return d},getSubNodeInGrid:function(d,h,g){var f=this,c=(h&&g)?f.getCellbyRowCol(h,g):g?f.getHeaderByColId(g):h?f.getRowbyRowId(h):null;return f.getSubNode(d,(c&&c._serialId)||true)},getEditor:function(){return _.get(this.get(0),["$curEditor"])},getEditCell:function(){return _.get(this.get(0),["$cellInEditor"])},offEditor:function(){var d=this.get(0),c;if(d&&d.$curEditor){c=d.$curEditor;_.tryF(c.undo,[],c)}},adjustEditor:function(g){var j=this,k=this.get(0);if(k&&k.$curEditor){var i=k.$curEditor,d=k.$cellInEditor;if(typeof g=="function"){g.apply(j,[i,d])}else{if(i.KEY=="xui.UI.ComboInput"){var f=k.getSubNode("CELL",d.id),c=f.offset(null,k.getSubNode("SCROLL")),h=f.cssSize();i.setLeft(c.left-1).setTop(c.top-1).setWidth(h.width+3).setHeight(h.height+2).reLayout(true)}}}return j}},Initialize:function(){this.addTemplateKeys(["ALT","PROGRESS"]);this.getCellPro=this.getCellOption;var c=this.prototype;c.getColumn=c.getHeader;c.updateColumn=c.updateHeader;c.getColByDom=c.getHeaderByDom;c.getColByColId=c.getHeaderByColId;c.getColByCell=c.getHeaderByCell},Static:{Templates:{tagName:"div",style:"{_style}",className:"{_className}",BORDER:{tagName:"div",BOX:{tagName:"div",HEADER:{$order:0,tagName:"div",style:"{showHeader}",HI:{tagName:"div",HCELLS:{tagName:"div",style:"{headerHeight};",FHCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};height:{_hcellheight}px;line-height:{_hcelllineh}px;}",className:"{cellCls}",tabindex:"{_tabindex}",HCELLA:{style:"line-height:inherit;{firstCellStyle};",className:"{firstCellClass}",HHANDLER:{tagName:"div",style:"{colDDDisplay}"},FHANDLER:{tagName:"div",style:"{rowDDDisplay}"},HFMARK:{className:"xui-uicmd-check",style:"{_rowMarkDisplay}"},GRIDCAPTION:{$order:2,text:"{gridHandlerCaption}"},SORT:{style:"{sortDisplay}"}}},OTHERHCELLS:{$order:1,tagName:"text",text:"{header}"},LHCELL:{$order:2}},GRPCELLBOX:{tagName:"div",style:"{headerHeight};",GRPCELLS:{$order:3,tagName:"text",text:"{grpCols}"}}}},SCROLL:{$order:1,tagName:"div",className:"xui-uibg-base ",BODY:{tagName:"div",FROW:{$order:0,tagName:"div"},ROWS:{$order:1,tagName:"div",text:"{rows}"},LROW:{$order:2,tagName:"div"}}},FOOTER:{$order:2},COLLIST:{tagName:"div"},ARROW:{}}},$submap:{header:{HCELL:{style:"width:{_pxWidth}px;height:{_hcellheight}px;line-height:{_hcelllineh}px;{colDisplay};",className:"{cellCls}",HCELLA:{className:"{headerClass}",style:"lline-height:inherit;{headerStyle};{colStyle}",tabindex:"{_tabindex}",HCELLCAPTION:{text:"{caption}"},SORT:{style:"{sortDisplay}"},HHANDLER:{$order:2,tagName:"div",style:"{colDDDisplay}"}}}},grpCols:{HCELL:{style:"position:absolute;width:{_pxWidth}px;height:{_hcellheight}px;line-height:{_hcelllineh}px;top:{_hcelltop}px;left:{_hcellleft}px;",className:"{cellCls}",HCELLA:{className:"{headerClass}",style:"line-height:inherit;{headerStyle};{colStyle}",tabindex:"{_tabindex}",HCELLCAPTION:{text:"{caption}"},HHANDLER:{$order:2,tagName:"div",style:"{colDDDisplay}"}}}},rows:{ROW:{tagName:"div",style:"{rowDisplay}",PREVIEW:{$order:1,tagName:"div",style:"{previewDisplay}",text:"{preview}"},CELLS:{$order:2,tagName:"div",className:"{rowCls} {rowClass}",style:"height:{rowHeight}px;{rowStyle}",FCELL:{$order:0,style:"{rowHandlerDisplay};{_row0DfW};",className:"{cellCls}",CELLA:{tabindex:"{_tabindex}",style:"{cellStyle}{firstCellStyle}",className:"{cellClass}{firstCellClass}",ROWLRULER:{style:"{_treeMode};width:{_rulerW}px"},ROWTOGGLE:{$order:2,style:"{_treeMode};",className:"{subClass}"},FHANDLER:{tagName:"div",style:"{rowDDDisplay}"},FCELLINN:{$order:3,ROWNUM:{style:"{_rowNumbDisplay}"},FCELLCAPTION:{$order:1,text:"{caption}"}},MARK:{$order:1,style:"{_rowMarkDisplay}"}}},OTHERCELLS:{tagName:"text",$order:1,text:"{cells}"},LCELL:{$order:2}},SUB:{$order:3,tagName:"div"},SUMMARY:{$order:4,tagName:"div",style:"{summaryDisplay}",text:"{summary}"}}},"rows.cells":function(h,g,f,d,c){var i=arguments.callee,j=i._m||(i._m={checkbox:".checkbox",button:".button",progress:".progress"});xui.UI.$doTemplate(h,g,f,d+(j[f.type]||".input"),c)},"rows.cells.input":{CELL:{style:"width:{width}px;{cellDisplay};",className:"{cellCls}",CELLA:{className:"{cellClass}",style:"{bgcolor};{color};{cellStyle}",tabindex:"{_tabindex}",text:"{caption}"}}},"rows.cells.button":{CELL:{style:"width:{width}px;{cellDisplay};",className:"{cellCls}",CELLA:{tagName:"button",className:"xui-button-border {cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",text:"{caption}"}}},"rows.cells.checkbox":{CELL:{style:"width:{width}px;{cellDisplay}",className:"{cellCls}",CELLA:{className:"{cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",CHECKBOX:{className:"{checkboxCls}"}}}},"rows.cells.progress":{CELL:{style:"width:{width}px;{cellDisplay}",className:"{cellCls}",CELLA:{className:"{cellClass}",style:"{cellStyle}",tabindex:"{_tabindex}",PROGRESS:{tagName:"div",style:"width:{progress};",text:"{caption}"}}}}}},Appearances:{KEY:{display:"block",position:"absolute",overflow:"hidden"},BOX:{display:"block",position:"relative",overflow:"hidden"},HEADER:{"background-image":xui.UI.$bg("head.gif"),"background-repeat":"repeat-x","background-position":"left top","background-color":"#CAE3FF",position:"relative",overflow:"hidden"},HI:{position:"relative"},GRPCELLBOX:{position:"absolute",overflow:"visible",left:0,top:0,width:0,height:0,"font-size":0,"line-height":0},SCROLL:{overflow:"auto",position:"relative"},ARROW:{position:"absolute","z-index":"20",left:0,top:0,display:"none",width:"14px",height:"18px","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-72px -270px"},COLLIST:{position:"absolute","z-index":"10",left:0,top:0,cursor:"pointer",visibility:"hidden","background-image":xui.UI.$bg("collist.gif",""),"background-repeat":"no-repeat","background-position":"center bottom","background-color":"#FFF1A0",border:"1px solid","border-color":"#fff #ACA899 #ACA899 #fff"},BODY:{overflow:"visible",position:"absolute","background-color":"#fff","padding-bottom":"1px",left:0,top:"0","font-size":0,"line-height":0},"SORT, SORT-checked":{width:"16px",height:"16px"},SORT:{"background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-110px -220px",position:"absolute",right:"2px",bottom:"2px"},"HCELL-mouseover SORT":{$order:1,"background-position":"-110px -240px"},"HCELL-mousedown SORT":{$order:2,"background-position":"-110px -260px"},"SORT-checked":{$order:3,"background-position":"-130px -220px"},"HCELL-mouseover SORT-checked":{$order:4,"background-position":"-130px -240px"},"HCELL-mousedown SORT-checked":{$order:5,"background-position":"-130px -260px"},HHANDLER:{position:"absolute",background:xui.browser.ie?"url("+xui.ini.img_bg+")":null,width:"4px",top:"0",right:"0",height:"100%",cursor:"e-resize","font-size":0,"line-height":0},"HCELLS, CELLS":{"overflow-y":xui.browser.ie?"hidden":"",position:"relative","white-space":"nowrap","font-size":"12px","line-height":"18px"},"HCELLS, GRPCELLBOX":{overflow:"visible"},CELLS:{"border-bottom":"1px solid #A2BBD9",overflow:"visible"},"CELLS-group":{$order:1,"border-right":"1px solid #A2BBD9"},"CELLS-group FCELL":{"border-right":0,"padding-right":"1px",overflow:"visible"},"CELLS-group FCELLCAPTION, CELLS-group CELLA, CELLS-group FCELLINN":{"font-weight":"bold",color:"#3764A0",overflow:"visible"},"PREVIEW,SUMMARY":{position:"relative",display:"none","padding-left":"16px","border-right":"1px solid #A2BBD9"},PREVIEW:{$order:4,"border-bottom":"1px solid #A2BBD9"},SUMMARY:{$order:4,"border-bottom":"1px solid #A2BBD9"},"CELLS-mouseover":{$order:4,"background-color":"#DFE8F6"},"CELLS-readonly CELLA":{$order:5,color:"#808080"},"CELL-readonly CELLA":{$order:6,color:"#808080"},"CELLS-disabled":{$order:7,"background-color":"#EBEADB"},"CELLS-disabled CELLA":{$order:7,color:"#808080"},"CELL-disabled":{$order:8,"background-color":"#EBEADB"},"CELL-disabled CELLA":{$order:8,color:"#808080"},"CELLS-active, CELL-active":{$order:5,"background-color":"#A3BAE9"},"CELLS-hot":{$order:6,"background-color":"#FFE97F"},"CELLS-checked, CELL-checked, CELLS-checked CELLA, CELL-checked CELLA":{$order:6,"background-color":"#7199E8",color:"#fff"},"FCELL CELLA":{"text-align":"left"},"FHCELL HCELLA":{"text-align":"center"},"HCELLCAPTION,SORT,HHANDLER":{"vertical-align":"middle"},FHANDLER:{position:"absolute",height:"4px",left:"0px",width:"100%",bottom:"0px",cursor:"n-resize","z-index":10,"font-size":0,"line-height":0},"FCELLCAPTION, FCELLINN":{"vertical-align":"middle",overflow:"hidden"},"FHCELL, HCELL":{"background-image":xui.UI.$bg("head.gif",""),"background-repeat":"repeat-x","background-position":"left top","background-color":"#CAE3FF","border-left":"1px solid #fff","border-top":"1px solid #fff","border-right":"1px solid #A2BBD9","border-bottom":"1px solid #A2BBD9",padding:0,"vertical-align":"bottom","font-size":"12px"},"FHCELL-mouseover, HCELL-mouseover":{"background-image":xui.UI.$bg("head_mouseover.gif",""),"background-repeat":"repeat-x","background-position":"left top","background-color":"#FFF1A0"},ROW:{position:"relative",zoom:xui.browser.ie?1:null,width:xui.browser.ie?"100%":null,"font-size":0,"line-height":0},ROWNUM:{"padding-right":"6px",color:"#808080"},"FCELL, CELL":{height:"100%","padding-left":"1px","border-right":"1px solid #A2BBD9",position:"relative",overflow:xui.browser.ie6?"hidden":"","font-size":"12px","line-height":"20px","vertical-align":"top"},"LHCELL, LCELL":{height:"100%",position:"relative","font-size":"12px","line-height":"20px","vertical-align":"top"},ALT:{"background-color":"#EFF8FF"},"CELL-label a":{color:"#000"},"CELL-input":{},"CELL-number, CELL-spin, CELL-currency":{"text-align":"right"},"CELL-checkbox":{"text-align":"center"},"CELL-button CELLA":{width:"100%",padding:0,"vertical-align":"middle","font-size":"12px","line-height":"100%"},"CELL-mouseover":{$order:5,"background-color":"#DFE8F6"},"FCELL CELLA, HCELLA":{position:"relative"},HCELLA:{$order:3,"text-align":"center","vertical-align":"middle","line-height":"inherit"},"HCELLA, CELLA":{display:"block",overflow:"hidden","-moz-box-flex":"1","outline-offset":"-1px","-moz-outline-offset":(xui.browser.gek&&xui.browser.ver<3)?"-1px !important":null,height:"100%",color:"#000",width:xui.browser.ie?"100%":"","line-height":"inherit"},"CELLA-inline":{$order:5,display:xui.$inlineBlock,width:"auto","-moz-box-flex":0},PROGRESS:{height:"100%","background-color":"#00ffff","text-align":"center","line-height":"22px",overflow:"visible",opacity:0.7,"*filter":"alpha(opacity=70)"},"CHECKBOX, MARK":{cursor:"pointer",width:"16px",height:"16px","vertical-align":"middle","background-image":xui.UI.$bg("icons.gif","",true),"background-repeat":"no-repeat","background-position":"-20px -70px"},"CELL-mouseover CHECKBOX":{$order:1,"background-position":"-20px -90px"},"CELL-mousedown CHECKBOX":{$order:2,"background-position":"-20px -110px"},"CHECKBOX-checked, CELLS-checked MARK":{$order:3,"background-position":"0 -70px"},"CELL-mouseover CHECKBOX-checked":{$order:4,"background-position":"0 -90px"},"CELL-mousedown CHECKBOX-checked":{$order:5,"background-position":"0 -110px"},SUB:{zoom:xui.browser.ie?1:null,height:0,position:"relative",overflow:"hidden","font-size":"1px","line-height":"1px"}},_objectProp:{tagVar:1,dockMargin:1,rowOptions:1,colOptions:1},Behaviors:{HoverEffected:{ROWTOGGLE:"ROWTOGGLE",HCELL:"HCELL",FHCELL:"FHCELL"},ClickEffected:{ROWTOGGLE:"ROWTOGGLE",CELL:"CELL",HCELL:"HCELL"},DroppableKeys:["SCROLL","CELLS","ROWTOGGLE"],DraggableKeys:["FCELL"],onSize:xui.UI.$onSize,HFMARK:{onClick:function(c,f,g){if(c.properties.selMode!="multi"&&c.properties.selMode!="multibycheckbox"){return}var d=[];_.each(c.rowMap,function(h){d.push(h.id)});if(c._$checkAll){delete c._$checkAll;c.boxing().setUIValue("");xui.use(g).tagClass("-checked",false);c.boxing().onRowSelected(c,"allrows",f,g,-1)}else{c._$checkAll=true;xui.use(g).tagClass("-checked");c.boxing().setUIValue(d.join(c.properties.valueSeparator));c.boxing().onRowSelected(c,"allrows",f,g,1)}}},SCROLL:{onScroll:function(d,g,h){var f=xui.use(h).get(0),c=f.scrollLeft||0;if(d.$sl!=c){d.getSubNode("HEADER").get(0).scrollLeft=d.$sl=c}}},HEADER:{onScroll:function(d,f,g){var c=xui.use(g).get(0).scrollLeft||0;if(d.$sl!=c){d.getSubNode("SCROLL").get(0).scrollLeft=d.$sl=c}}},HHANDLER:{beforeMousedown:function(i,k,c){if(xui.Event.getBtn(k)!="left"){return}var g=i.properties,f=i.getSubId(c);col=i.colMap[f];if(col&&col.relWidth){return}var h=xui(c),j=h.parent(2).width()-g._minColW,l=i.getSubNode("SCROLL"),d=l.offset().left+l.width()-xui.Event.getPos(k).left-4;if(g.disabled){return false}if(col&&col.disabled){return false}h.startDrag(k,{horizontalOnly:true,dragType:"blank",dragDefer:2,maxLeftOffset:j,maxRightOffset:d,targetReposition:false});xui.use(c).parent(2).onMouseout(true,{$force:true}).onMouseup(true)},onDragbegin:function(c,d,f){xui.DragDrop.getProfile().proxyNode.css({height:c.getRoot().height()+"px",width:"4px",backgroundColor:"#ddd",cursor:"e-resize"})},onDrag:function(f,h,j){var i=xui.DragDrop,g=i.getProfile(),c=0;if(g.x<=g.restrictedLeft||g.x>=g.restrictedRight){c=true}if(c){if(!f._limited){g.proxyNode.css("backgroundColor","#ff6600");f._limited=true}}else{if(f._limited){g.proxyNode.css("backgroundColor","#ddd");f._limited=0}}},onDragstop:function(h,i,c){var f=xui(c).parent(2),g=h.colMap[h.getSubId(c)];if(g){if(g&&g._isgroup){g=h.properties.header[g.to];f=h.getSubNode("HCELL",g._serialId)}if("maxWidth" in g){k=Math.min(g.maxWidth,k)}if("minWidth" in g){k=Math.max(g.minWidth,k)}}var k=f.width()+xui.DragDrop.getProfile().offset.x;if(h.beforeColResized&&false===h.boxing().beforeColResized(h,g?g.id:null,k)){h._limited=0;return}f.width(k);if(g){g._pxWidth=g.width=k}var d=[],j=[];if(h.getKey(xui.use(c).parent(2).id())==h.keys.FHCELL){h.box._setRowHanderW(h,k)}else{var l=h.colMap[h.getSubId(c)]._cells;_.each(l,function(m){d.push(h.getSubNode(h.keys.CELL,m).id())});xui(d).width(k)}if(h.afterColResized){h.boxing().afterColResized(h,g?g.id:null,k)}h.getSubNode("SCROLL").onScroll();h.box._adjustColsH(h);h.box._adjustBody(h,"setcol");h._limited=0},onClick:function(){return false},onDblclick:function(i,k,c){var f=i.properties,g=xui.use(c).parent(2),d=i.getSubId(c);col=i.colMap[d];if(col&&col._isgroup){col=i.properties.header[col.to];g=i.getSubNode("HCELL",col._serialId)}if(col&&col.relWidth){return}if(i.getKey(xui.use(c).parent(2).id())==i.keys.FHCELL){i.box._setRowHanderW(i,true);return}if(i.getRootNode().clientHeight<=0){return}var q=col._cells,r=i.getClass("CELLA","-inline"),h,l=[],j=[],m;_.each(q,function(n){h=i.getSubNode("CELLA",n);if(h._nodes.length){l.push(h.get(0));j.push(h.addClass(r).width())}});j.push(f._minColW);m=parseInt(Math.max.apply(null,j),10);if(m>f._maxColW){m=f._maxColW}if(i.beforeColResized&&false===i.boxing().beforeColResized(i,col?col.id:null,m)){return}if(col){if("maxWidth" in col){m=Math.min(col.maxWidth,m)}if("minWidth" in col){m=Math.max(col.minWidth,m)}}xui(l).parent().width(m);g.width(col._pxWidth=col.width=m);xui(l).removeClass(r);if(i.afterColResized){i.boxing().afterColResized(i,col.id,m)}i.box._adjustColsH(i);i.box._adjustBody(i,"setcol");return false}},FHANDLER:{beforeMousedown:function(g,h,c){if(xui.Event.getBtn(h)!="left"){return}var d=g.properties,k=g.rowMap[g.getSubId(c)],f=xui(c),l=f.parent(3).height()-d._minRowH,j=g.getSubNode("SCROLL"),i=j.offset().top+j.height()-xui.Event.getPos(h).top-4;if(d.disabled||(k&&k.disabled)){return false}f.startDrag(h,{verticalOnly:true,dragType:"blank",dragDefer:2,maxTopOffset:l,maxBottomOffset:i,targetReposition:false});xui.use(c).parent(2).onMouseout(true,{$force:true}).onMouseup(true);if(!k){g.getSubNode("COLLIST").css("visibility","hidden")}},onDragbegin:function(c,d,f){xui.DragDrop.getProfile().proxyNode.css({width:c.getRoot().width()+"px",height:"4px",backgroundColor:"#ddd",cursor:"n-resize"})},onDrag:function(f,h,j){var i=xui.DragDrop,g=i.getProfile(),c=0;if(g.y<=g.restrictedTop||g.y>=g.restrictedBottom){c=true}if(c){if(!f._limited){g.proxyNode.css("backgroundColor","#ff6600");f._limited=true}}else{if(f._limited){g.proxyNode.css("backgroundColor","#ddd");f._limited=0}}},onDragstop:function(f,k,c){var d=xui(c).parent(3),i=d.height()+xui.DragDrop.getProfile().offset.y,m=f.rowMap[f.getSubId(c)],g=f.properties.header,l,j;if(xui.browser.ie&&i%2==1){i+=1}if(f.beforeRowResized&&false===f.boxing().beforeRowResized(f,m?m.id:null,i)){f._limited=0;return}d.height(i);if(f.getKey(xui.use(c).parent(2).id())==f.keys.FHCELL){f.properties.headerHeight=i;f.box._adjustColsV(f,i);xui.UI.$tryResize(f,f.getRoot().width(),f.getRoot().height(),true)}else{m.height=i}if(f.afterRowResized){f.boxing().afterRowResized(f,m?m.id:null,i)}f.box._adjustBody(f,"setrow");f._limited=0},onDblclick:function(g,j,l){var i=g.properties,c=g.getSubId(l),k,d;if(g.getRootNode().clientHeight<=0){return}if(c){k=g.rowMap[c];d=g.getSubNode("CELLS",c);var f=d.height("auto").height();if(g.beforeRowResized&&false===g.boxing().beforeRowResized(g,k.id,f)){return}d.height(k.height=f)}else{var f=(g._headerLayers||0)*g.box.$DataStruct.headerHeight;if(g.beforeRowResized&&false===g.boxing().beforeRowResized(g,null,f)){return}g.box._adjustColsV(g,f);xui.UI.$tryResize(g,g.getRoot().width(),g.getRoot().height(),true)}if(g.afterRowResized){g.boxing().afterRowResized(g,k?k.id:null,f)}g.box._adjustBody(g,"setrow");return false},onClick:function(){return false}},ROWTOGGLE:{onClick:function(c,f,h){var d=c.properties,g=c.rowMap[c.getSubId(h)];if(d.disabled||g.disabled){return false}if(!g.sub){return}c.box._setSub(c,g,!g._checked);return false}},HCELLA:{onClick:function(j,m,c){var f=j.properties,d=j.getSubId(c),g=j.colMap[d];if(!g){if(j.onClickGridHandler){j.boxing().onClickGridHandler(j,m,c)}if(f.disabled){return false}if(!f.colSortable){return}}else{if(j.onClickHeader){j.boxing().onClickHeader(j,g,m,c)}if(f.disabled||g.disabled){return false}if(!(g.hasOwnProperty("colSortable")?g.colSortable:f.colSortable)){return}}if(g&&g._isgroup){g=j.properties.header[g.from]}if(j.beforeColSorted&&false===j.boxing().beforeColSorted(j,g)){return false}var k=(g?g._order:j._order)||false,r=(g?g.type:null)||"input",s=g?g.sortby:null,l=g?_.arr.indexOf(f.header,g):-1,q=arguments.callee,n=q.fun||(q.fun=function(w,z,y,x,D,G,v){var B,A,F=arguments.callee;if(z){B=z.sub;A=w.getSubNode("SUB",z._serialId).get(0)}else{z={_inited:true};B=w.properties.rows;A=w.getSubNode("ROWS").get(0)}var P=[],O=[],M=[],L=[],C,E;_.arr.each(B,function(Q){if(Q.sub&&Q.sub.length>1){F(w,Q,y,x,D,G,null)}P[P.length]=y==-1?Q.caption:(C=Q.cells)?(C=C[y])?C.value:"":Q[y];L[L.length]=y==-1?Q:(C=Q.cells)?C[y]:Q[y];O[O.length]=O.length});var I;if(typeof D!="function"){switch(x){case"number":case"spin":case"currency":E=function(Q){return parseFloat(Q)||0};break;case"datetime":case"date":E=function(Q){return _.isDate(Q)?Q.getTime():_.isFinite(Q)?parseInt(Q,10):0};break;default:E=function(Q){return Q||""}}I=function(Q,T){var R=E(P[Q]),S=E(P[T]);return(R>S?(G?1:-1):R===S?(Q>T?-1:1):(G?-1:1))}}else{I=function(Q,R){return D.apply(w,[Q,R,P,G,y,L])}}O.sort(I);var K=z._inited,N=_.copy(B),J;if(K){P=A.childNodes}_.arr.each(O,function(R,Q){B[Q]=N[R];if(K){M[Q]=P[R]}});if(K){var p=document.createDocumentFragment();for(var H=0;C=M[H];H++){p.appendChild(C)}if(v){A.insertBefore(p,v)}else{A.appendChild(p)}}});var u,i;if(j.__hastmpRow){u=j.properties.rows.pop();i=j.getSubNode("ROWS").get(0).lastChild}n(j,null,l,r,s,k,i);if(j.__hastmpRow){j.properties.rows.push(u)}j.getSubNode("SORT",true).css("display","none");var h=(g?j.getSubNode("SORT",g._serialId):j.getSubNode("SORT")).css("display","");h.tagClass("-checked",g?(!(g._order=!g._order)):(!(j._order=!j._order)));j.box._asy(j);delete j.$allrowscache;if(j.afterColSorted){j.boxing().afterColSorted(j,g)}},beforeMousedown:function(d,g,j){if(xui.Event.getBtn(g)!="left"){return}var f=d.properties;if(f.disabled){return}var c=d.colMap[d.getSubId(j)];if(!c||c._isgroup){return}if(f.disabled||c.disabled){return false}if(!(c.hasOwnProperty("colMovable")?c.colMovable:f.colMovable)){return}if(false===d.boxing().beforeColDrag(d,c.id)){return}var k=xui.Event.getPos(g),i=xui(j),h=d.getSubId(j);i.startDrag(g,{dragType:"icon",shadowFrom:i.parent(),dragCursor:"pointer",targetLeft:k.left+12,targetTop:k.top+12,targetReposition:false,dragDefer:2,dragKey:d.$xid+":col",dragData:i.parent().id()})},onDragbegin:function(c,d,f){xui(f).parent().onMouseout(true,{$force:true});xui(f).onMouseup(true)},beforeMouseover:function(h,j,c){var f=h.properties,d=h.getSubId(c),g=h.colMap[d];if(!g||g._isgroup){return}if(f.disabled||g.disabled){return false}var i=xui.DragDrop.getProfile();if(!i.dragData||i.dragKey!=h.$xid+":col"){return}var k=xui.use(c).parent().xid();if(false===h.box._colDragCheck(h,k)){return}xui.DragDrop.setDropElement(c).setDropFace(c,"move");var l=xui.use(k).get(0);h.getSubNode("ARROW").left(l.offsetLeft-8).top(l.offsetTop+l.offsetHeight).css("display","block")},beforeMouseout:function(f,h,i){var g=f.properties,k=f.getSubId(i),d=f.colMap[k];if(!d){return}if(g.disabled||d.disabled){return false}var j=xui.DragDrop.getProfile();if(!j.dragData||j.dragKey!=f.$xid+":col"){return}var c=xui.use(i).parent().xid();xui.DragDrop.setDropElement(null).setDropFace(null,"none");if(false===f.box._colDragCheck(f,c)){return}f.getSubNode("ARROW").css("display","none")},onDrop:function(g,A,n){var v=g.properties,u=g.box,w=g.getSubId(n),k=xui.UI.$tag_subId,i=g.colMap[w];if(!i){return}if(v.disabled||i.disabled){return false}var E=xui.use(n).parent().xid();g.getSubNode("ARROW").css("display","none");if(false===u._colDragCheck(g,E)){return}var D=xui.DragDrop.getProfile().dragData,q=D&&g.getSubId(D),s=g.getSubId(E),C=g.colMap,c=C[q],f=C[s];if(false===g.boxing().beforeColMoved(g,c.id,f.id)){return}xui.DragDrop.setDropFace(E,"none");var h=_.arr.subIndexOf(v.header,"_serialId",q),y=_.arr.subIndexOf(v.header,"_serialId",s);if(h===y||h===y-1){return}g.getSubNode("HCELL",s).addPrev(xui(xui.DragDrop.getProfile().dragData));_.each(f._cells,function(m,j){g.getSubNode("CELL",m).addPrev(g.getSubNode("CELL",c._cells[j]))});var B=v.header[h];_.arr.insertAny(v.header,B,y);_.arr.removeFrom(v.header,h+(h>y?1:0));var l=g.queryItems(v.rows,true,true);_.arr.each(l,function(j){j=j.cells?j.cells:j;if(!j||!_.isArr(j)){return}B=j[h];_.arr.removeFrom(j,h);_.arr.insertAny(j,B,y)});var d=v.grpCols;if(d&&_.isArr(d)&&d.length){for(var z=0,x=d.length,r;z<x;z++){r=d[z];if(r.from>y){r.from++;r.to++}else{if(y>=r.from&&y<=r.to){r.to++}}}for(var z=0,x=d.length,r;z<x;z++){r=d[z];if(r.from>h){r.from--;r.to--}else{if(h>=r.from&&h<=r.to){r.to--}}}_.filter(d,function(m){var j=m.to>=m.from;if(!j&&g.renderId){g.getSubNode("HCELL",m[k]).remove();delete g.colMap[m[k]];delete g.colMap2[m.id]}return j});v.grpCols=u._adjustGrpColsData(g,d);u._adjustColsH(g);u._adjustColsV(g,v.headerHeight)}g.boxing().afterColMoved(g,c.id,f.id);delete g.$allrowscache},onMouseover:function(h,i,c){var f=h.properties,d=h.getSubId(c),g=h.colMap[d];if(g){if(f.disabled||g.disabled){return false}if(!(g.hasOwnProperty("colHidable")?g.colHidable:f.colHidable)){return}if(!(g.hasOwnProperty("colDroppable")?g.colDroppable:f.colDroppable)){return}}else{if(f.disabled){return false}if(!f.colHidable){return}}_.resetRun(h.$xid+":collist",null);var k={},j=xui.use(c).parent().offset(null,h.getSubNode("BOX")),l=xui.use(c).parent().cssSize();if(l.width<16){return}k.height=l.height;k.width=14;k.left=j.left;k.top=j.top;h.getSubNode("COLLIST").cssRegion(k).css("visibility","visible")},onMouseout:function(d,g,h){var f=d.properties,i=d.getSubId(h),c=d.colMap[i];if(c){if(f.disabled||c.disabled){return false}if(!(c.hasOwnProperty("colHidable")?c.colHidable:f.colHidable)){return}}else{if(f.disabled){return false}if(!f.colHidable){return}}_.resetRun(d.$xid+":collist",function(){if(!d.box){return}d.getSubNode("COLLIST").css({visibility:"hidden",left:0,top:0})})},onContextmenu:function(d,f,g){if(d.onContextmenu){var c=d.getSubId(g);return d.boxing().onContextmenu(d,f,g,c?d.colMap[c]:null)!==false}}},COLLIST:{onMouseover:function(c,d,f){_.resetRun(c.$xid+":collist",null)},onMouseout:function(c,d,f){_.resetRun(c.$xid+":collist",function(){if(!c.box){return}xui.use(f).css("visibility","hidden")})},onClick:function(f,h,i){var g=f.properties;if(!f.$col_pop){var d=[],c;_.arr.each(f.properties.header,function(j){if(j.hasOwnProperty("colHidable")?j.colHidable:g.colHidable){d.push({id:j.id,caption:j.caption,type:"checkbox",value:j.hidden!==true})}});if(d.length){c=f.$col_pop=new xui.UI.PopMenu({hideAfterClick:false,items:d}).render(true);c.onMenuSelected(function(m,k,l){var j=1;_.arr.each(m.properties.items,function(n){if(n.value!==false){return j=false}});if(!j){f.boxing().showColumn(k.id,k.value)}else{m.getSubNodeByItemId("CHECKBOX",k.id).tagClass("-checked");k.value=true}})}}if(f.$col_pop){f.$col_pop.pop(i)}}},CELLS:{afterMouseover:function(c,f,h){var d=c.properties;if(d.disabled){return}if(d.disableHoverEffect){return}if(d.activeMode=="row"){xui.use(h).tagClass("-mouseover");if(c.onRowHover){var g=c.rowMap[c.getSubId(h)];c.boxing().onRowHover(c,g,true,f,h)}}},afterMouseout:function(c,f,h){var d=c.properties;if(d.disabled){return}if(d.disableHoverEffect){return}if(d.activeMode=="row"){xui.use(h).tagClass("-mouseover",false);if(c.onRowHover){var g=c.rowMap[c.getSubId(h)];c.boxing().onRowHover(c,g,false,f,h)}}},onDblclick:function(c,f,h){var d=c.properties,g=c.rowMap[c.getSubId(h)];if(d.disabled||g.disabled){return false}if(c.onDblclickRow){c.boxing().onDblclickRow(c,g,f,h)}return false},onClick:function(f,h,j){var g=f.properties,c=f.getSubId(j),k=f.keys,i=f.rowMap[c],d=f.getKey(xui.Event.getSrc(h).id||"");if(g.disabled||i.disabled){return false}if(d==k.ROWTOGGLE||d==k.MARK){return false}if(i.group){f.getSubNode("ROWTOGGLE",i._serialId).onClick()}if(f.onClickRow){f.boxing().onClickRow(f,i,h,j)}}},CELL:{afterMouseover:function(c,f,g){var d=c.properties;if(d.disabled){return}if(d.disableHoverEffect){return}if(d.activeMode=="cell"){xui.use(g).tagClass("-mouseover")}},afterMouseout:function(c,f,g){var d=c.properties;if(d.disabled){return}if(d.disableHoverEffect){return}if(d.activeMode=="cell"){xui.use(g).tagClass("-mouseover",false)}}},CELLA:{onDblclick:function(f,j,c){var l=f.cellMap[f.getSubId(c)];if(!l){return}if(f.properties.disabled){return}var i=f.box,h=i.getCellOption,k=h(f,l,"type"),g=h(f,l,"disabled"),d=h(f,l,"editable");if(!g&&(!d||(k=="button"||k=="label"))){f.boxing().onDblclickCell(f,l,j,c);if(k=="button"){return false}}},onClick:function(i,r,c){var g=i.properties,m=i.box,l=m.getCellOption,u=i.cellMap[i.getSubId(c)],f;if(u){if(i.properties.disabled){return false}var s=l(i,u,"type"),j=l(i,u,"disabled"),k=l(i,u,"readonly"),d=l(i,u,"event"),n=g.activeMode,h=l(i,u,"editable");if(!j&&(!h||(s=="button"||s=="label"))){if(typeof d=="function"&&false===d.call(i._host||i,i,u,null,null,r,c)){}else{if(i.onClickCell){i.boxing().onClickCell(i,u,r,c)}}if(s=="button"){return false}}if(!j&&!k&&s=="checkbox"){if(h){m._updCell(i,u,!u.value,g.dirtyMark,true);i.box._trycheckrowdirty(i,u);var q=u._row.id==i.box._temprowid;if(q){i.__needchecktmprow=true;i.box._sethotrowoutterblur(i)}}}if(!g.editable){if(n=="cell"){if(l(i,u,"disabled")){return false}f=xui(c).parent().id();m._sel(i,"cell",c,f,r)}else{if(n=="row"){if(g.disabled||u._row.disabled){return false}f=xui(c).parent(3).id();m._sel(i,"row",c,f,r)}}}}else{var v=i.rowMap[i.getSubId(c)];if(g.disabled||v.disabled){return false}if(typeof d=="function"&&false===d.call(i._host||i,i,v,null,null,r,c)){}else{if(i.onClickRowHandler){i.boxing().onClickRowHandler(i,v,r,c)}}if(g.activeMode=="row"){f=xui(c).parent(3).id();m._sel(i,"row",c,f,r)}}if(i.box){if(xui.use(c).get(0)){i.box._focuscell(i,r,c);i.$_focusbyclick=1;xui.use(c).focus();delete i.$_focusbyclick}}},onFocus:function(f,g,i){var d=f.boxing(),j=f.properties;if(f.$_focusbyclick){delete f.$_focusbyclick}else{f.box._focuscell(f,g,i)}if(f.afterCellFocused){var c=f.cellMap[f.getSubId(i)],h;if(c){h=c._row}else{h=f.rowMap[f.getSubId(i)]}d.afterCellFocused(f,c,h)}if(j.hotRowMode!="none"){var c=f.cellMap[f.getSubId(i)],h;if(c){h=c._row}else{h=f.rowMap[f.getSubId(i)]}if(f.__hastmpRow&&f.__needchecktmprow&&h.id!==f.box._temprowid){f.box._checkNewLine(f,"focuscell")}}},onKeydown:function(h,A,n){var w=h.properties,v=xui.Event.getKey(A),E=v.key,z=v.shiftKey,s=v.ctrlKey,g=xui(n),u=h.getSubNode("ROWS"),m=u.nextFocus(true,true,false),r=u.nextFocus(false,true,false),f=h.cellMap[h.getSubId(n)],k;if(h.beforeCellKeydown&&false===h.boxing().beforeCellKeydown(h,f,v)){return false}switch(E){case"enter":xui(n).onClick();break;case"tab":if(z){if(n!=m.xid()){g.nextFocus(false);return false}}else{if(n!=r.xid()){g.nextFocus();return false}}break;case"left":if(g.get(0)==m.get(0)){r.focus()}else{g.nextFocus(false)}return false;break;case"right":if(g.get(0)==r.get(0)){m.focus()}else{g.nextFocus()}return false;break;case"up":if(s){if(f){k=f._row}else{k=h.rowMap[h.getSubId(n)]}if(k&&!(w.disabled||k.disabled)&&(k.group||k.sub)){h.getSubNode("ROWTOGGLE",k._serialId).onClick();return false}}if(g.get(0)==m.get(0)){r.focus();return}case"down":if(s){if(f){k=f._row}else{k=h.rowMap[h.getSubId(n)]}if(k&&!(w.disabled||k.disabled)&&(k.group||k.sub)){h.getSubNode("ROWTOGGLE",k._serialId).onClick();return false}}var l=1,B=g.parent().get(0),y=B.parentNode.childNodes.length;while(B=B.previousSibling){l++}B=g.parent(2).get(0);if(!h.$allrowscache){h.box._cacheRows(h)}var j=_.arr.indexOf(h.$allrowscache,B),i=h.$allrowscache.length,C=0;if(E=="up"){j--;if(j==-1){j=i-1;l--;if(l==0){l=y}}}else{j++;if(j==i){C=1;j=0;l++;if(l==y+1){l=1}}}if(C&&w.hotRowMode!="none"){var d;if(!f){var k=h.rowMap[h.getSubId(n)];if(!k){return false}}else{d=f._col.id}var D=true,q=h.$allrowscache;if(h.__hastmpRow){D=h.box._checkNewLine(h,"keydown");if(!h.$allrowscache){h.box._cacheRows(h)}}if(D){h.box._addTempRow(h,d);return false}}var x=xui(h.$allrowscache[j]).first(),c=x;if(l>1){c=c.next(l-1)}if(c.isEmpty()){c=x}if(c&&!c.isEmpty()){c=c.first()}if(!c.isEmpty()){c.focus()}return false;break}},onContextmenu:function(d,f,g){if(d.onContextmenu){var c=d.getSubId(g);return d.boxing().onContextmenu(d,f,g,c?(d.cellMap[c]||d.rowMap[c]):null)!==false}}}},DataModel:{directInput:true,listKey:null,currencyTpl:"$ *",numberTpl:"",valueSeparator:";",selMode:{ini:"none",listbox:["single","none","multi","multibycheckbox"],action:function(c){this.getSubNodes(["HFMARK","MARK"],true).css("display",(c=="multi"||c=="multibycheckbox")?"":"none")}},dock:"fill",altRowsBg:{ini:false,action:function(h){var g=this;var f=g.getClass("ALT"),c=g.getSubNode("CELLS",true),i,d;c.removeClass(f);if(h){i=[];d=0;c.each(function(k,j){if(k.clientHeight){k=xui([k]);if((d++)%2==1){if(!k.hasClass(f)){k.addClass(f)}}else{if(k.hasClass(f)){k.removeClass(f)}}}});xui(i).addClass(f)}}},rowNumbered:{ini:false,action:function(q){var p=this,m=p.CF.getNumberedStr||function(f){return f},g=p.getSubNode("ROWNUM",true),k=0,d=p.rowMap,v,n=0,j=0,h=[],c=[],u="",r,s;g.css("display",q?"":"none");if(q){g.each(function(f){v=d[p.getSubId(f.id)];j=v._layer;if(j>n){h.push(k);c.push(u);u=u+k+".";k=0}else{if(j<n){while(j<n--){k=h.pop();u=c.pop()}}}k++;n=j;v._autoNumber=m(u+k);r=v.rowNumber||v._autoNumber;if(s=f.firstChild){if(s.nodeValue!=r){s.nodeValue=r}}else{f.appendChild(document.createTextNode(r))}})}else{g.text("")}}},editable:false,$subMargin:16,iniFold:true,animCollapse:false,position:"absolute",width:300,height:200,_minColW:5,_maxColW:300,_minRowH:20,gridHandlerCaption:{ini:"",action:function(c){c=(_.isSet(c)?c:"")+"";this.getSubNode("GRIDCAPTION").html(xui.adjustRes(c,true))}},rowHandlerWidth:{ini:50,set:function(c){var d=this;if(d.renderId){d.box._setRowHanderW(d,c)}else{d.properties.rowHandlerWidth=c}}},showHeader:{ini:true,action:function(c){this.getSubNode("HEADER").css("display",c?"":"none")}},headerHeight:{ini:18,action:function(c){var d=this;d.box._adjustColsV(d,c);xui.UI.$tryResize(d,d.getRoot().width(),d.getRoot().height(),true)}},rowHeight:{ini:20,action:function(c){this.getSubNode("CELLS",true).height(c)}},_colDfWidth:80,rowHandler:{ini:true,action:function(c){this.getSubNode("FHCELL").css("display",c?"":"none");this.getSubNode("FCELL",true).css("display",c?"":"none");this.box._adjustColsH(this);this.box._adjustBody(this,"rowhandler")}},rowResizer:{ini:false,action:function(c){this.getSubNode("FHANDLER",true).css("display",c?"":"none")}},colHidable:false,colResizer:{ini:true,action:function(c){this.getSubNode("HHANDLER",true).css("display",c?"":"none")}},colSortable:{ini:true,action:function(c){if(!c){this.getSubNode("SORT",true).css("display","none")}}},colMovable:false,header:{ini:{},set:function(d,c){var f=this;if(f.renderId){f.boxing()._refreshHeader(d)}else{f.properties.header=_.copy(d)}}},grpCols:{ini:{},set:function(d,c){var f=this;f.properties.grpCols=_.copy(d);if(f.renderId){f.boxing()._refreshHeader(_.clone(f.properties.header,false,2))}}},rows:{ini:{},set:function(c){var d=this;if(d.renderId){d.boxing().removeAllRows(false).insertRows(c)}else{d.properties.rows=_.copy(c)}}},activeMode:{ini:"row",listbox:["row","cell","none"],action:function(d){var c=this;if(d!="cell"&&c.$activeCell){xui(c.$activeCell).tagClass("-active",false);delete c.$activeCell}if(d!="row"&&c.$activeRow){xui(c.$activeRow).tagClass("-active",false);delete c.$activeRow}}},rowOptions:{ini:{},action:function(f){var c=this.boxing(),d=c.getRows("data");c.removeAllRows();c.insertRows(d)}},colOptions:{ini:{},action:function(f){var c=this.boxing(),d=c.getRows("data");c.removeAllRows();c.insertRows(d)}},treeMode:{ini:true,action:function(c){this.getSubNodes(["ROWLRULER","ROWTOGGLE"],true).css("display",c?"":"none")}},hotRowMode:{ini:"none",listbox:["none","show","hide","auto"],action:function(c){if(this.renderId){if(c=="none"){this.boxing().removeHotRow()}else{this.box.__ensurehotrow(this,null)}}}},hotRowNumber:"[*]",noCtrlKey:true},EventHandlers:{onBodyLayout:function(d,c){},beforeCellKeydown:function(d,c,f){},afterCellFocused:function(d,c,f){},beforeInitHotRow:function(c){},onInitHotRow:function(c){},beforeHotRowAdded:function(d,f,c){},afterHotRowAdded:function(c,d){},onGetContent:function(c,d,f){},onRowSelected:function(d,h,f,g,c){},beforeColDrag:function(c,d){},beforeColMoved:function(d,f,c){},afterColMoved:function(d,f,c){},beforeColSorted:function(d,c){},afterColSorted:function(d,c){},beforeColShowHide:function(d,f,c){},afterColShowHide:function(d,f,c){},beforeColResized:function(d,f,c){},afterColResized:function(d,f,c){},beforeRowResized:function(d,f,c){},afterRowResized:function(d,f,c){},beforeRowActive:function(c,d){},afterRowActive:function(c,d){},beforeCellActive:function(d,c){},afterCellActive:function(d,c){},beforeIniEditor:function(g,c,d,f){},onBeginEdit:function(f,c,d){},onEndEdit:function(f,c,d){},beforeCellUpdated:function(f,c,d,g){},afterCellUpdated:function(f,c,d,g){},onRowDirtied:function(c,d){},onRowHover:function(d,h,c,f,g){},onClickHeader:function(d,c,f,g){},onClickRow:function(c,g,d,f){},onClickRowHandler:function(c,g,d,f){},onDblclickRow:function(c,g,d,f){},onClickCell:function(d,c,f,g){},onDblclickCell:function(d,c,f,g){},onClickGridHandler:function(c,d,f){},beforeComboPop:function(f,d,c,i,g,h){},beforePopShow:function(f,d,c,g){},afterPopShow:function(f,d,c,g){},onCommand:function(f,d,c,g){}},RenderTrigger:function(){var d=this,f=d.properties,c=d.boxing();d.destroyTrigger=function(){var g=this,h=g.properties;_.breakO([g.colMap,g.rowMap,g.cellMap],3);h.header.length=0;h.rows.length=0;h.grpCols.length=0};d.$cache_editor={};if(!f.iniFold){c._toggleRows(f.rows,true)}_.arr.each(f.header,function(g){if(_.isFun(g.colRenderer||f.colOptions.colRenderer)){(g.colRenderer||f.colOptions.colRenderer).call(null,d,g)}});_.arr.each(f.grpCols,function(g){if(_.isFun(g.colRenderer||f.colOptions.colRenderer)){(g.colRenderer||f.colOptions.colRenderer).call(null,d,g)}});_.arr.each(f.rows,function(g){if(_.isFun(g.rowRenderer||f.rowOptions.rowRenderer)){(g.rowRenderer||f.rowOptions.rowRenderer).call(null,d,g)}});d.box._asy(d);d.box._adjustBody(d,"render");d.box.__ensurehotrow(d,null)},__ensurehotrow:function(f,c){var i=f.properties,g=f.box,d=false;if(!g||!f.renderId||i.hotRowMode=="none"){return}if(f.__hastmpRow){var h=f.properties.rows;if(h.length===0||h[h.length-1].id!=f.box._temprowid){d=true}}else{d=true}if(d){switch(i.hotRowMode){case"auto":if(!i.rows||i.rows.length===0){g._addTempRow(f,c)}break;case"show":g._addTempRow(f,c);break}}},_temprowid:"_ r _temp_",isHotRow:function(c){return(c.id||c)===this._temprowid},_addTempRow:function(f,c){var h=f.properties;if(h.readonly||h.disabled||!h.header||h.header.length<=0){return false}f.box._sethotrowoutterblur(f,true);delete f.__hastmpRow;f.boxing().removeRows([this._temprowid],false);if(f.beforeInitHotRow&&false===f.boxing().beforeInitHotRow(f)){return false}f.__needchecktmprow=true;var g=[],d=f.boxing();if(f.onInitHotRow){g=d.onInitHotRow(f)}if(_.isArr(g)){g={cells:g}}else{if(!_.isHash(g)){g={cells:[g]}}}g.id=this._temprowid;g.rowNumber=h.hotRowNumber;g.rowClass=f.getClass("CELLS","-hot");d.insertRows([g],null,null,false,false);f.__hastmpRow=true;if(c!==null){d.focusCellbyRowCol(g.id,c||h.header[0].id);f.box._sethotrowoutterblur(f)}},_checkNewLine:function(g,d){var c=g.properties;g.box._sethotrowoutterblur(g,true);if(!g.__hastmpRow){return}delete g.__needchecktmprow;var j=g.boxing(),f=this._temprowid,i=j.getRowbyRowId(f),m=c.hotRowMode=="show"?d=="keydown"?true:null:d?true:false;if(!i){return}if(g.beforeHotRowAdded){var h=j.beforeHotRowAdded(g,i,!d);if(_.isDefined(h)){m=h}}if(m===null){if(c.hotRowMode=="hide"||c.hotRowMode=="auto"){g.box._sethotrowoutterblur(g)}return false}else{if(m===false){if(c.hotRowMode=="hide"||c.hotRowMode=="auto"){delete g.__hastmpRow;j.removeRows([f],false);if(c.rows.length===0&&c.hotRowMode=="auto"){this._addTempRow(g,null)}}return false}else{if(m===true){var k=_.clone(i,true);var l=g.getClass("CELLS","-hot");if(l==k.rowClass){delete k.rowClass}else{k.rowClass=k.rowClass.replace(l,"")}delete g.__hastmpRow;j.removeRows([f],false);if(k.id==f){delete k.id}if(k.rowNumber==c.hotRowNumber){delete k.rowNumber}j.insertRows([k],null,null,false,false);if(g.afterHotRowAdded){j.afterHotRowAdded(g,c.rows[c.rows.length-1])}if(c.hotRowMode=="show"){if(!g.__hastmpRow){this._addTempRow(g,null)}}return true}else{g.__needchecktmprow=true;if(_.isHash(m)){j.focusCell(m)}else{j.focusCell(j.getCell(m))}g.box._sethotrowoutterblur(g);return false}}}},_sethotrowoutterblur:function(d,c){d.getSubNode("ROWS").setBlurTrigger(d.$domId+":ROWS",c?null:function(h,g){var f=xui.Event.getSrc(g)==d.getSubNode("SCROLL").get(0)?"focusin":null;d.__tmpRowBlurTrigger=_.asyRun(function(){if(!d.box){return}d.box._checkNewLine(d,f)})},null,null,true);if(c){if(d.__tmpRowBlurTrigger){_.clearTimeout(d.__tmpRowBlurTrigger);delete d.__tmpRowBlurTrigger}}},_cacheRows:function(d){var c=d.getSubNode("CELLS",true).get();_.filter(c,function(f){return !!f.clientHeight});d.$allrowscache=c},_asy:function(d){var f=d.properties,c=d.boxing(),g=d.$xid;if(f.altRowsBg){_.resetRun(g+"1",function(){c.setAltRowsBg(true,true)})}if(f.rowNumbered){_.resetRun(g+"2",function(){c.setRowNumbered(true,true)})}},_setRowHanderW:function(f,i){var l=f.properties,g=l.$subMargin,c=f.rowMap,j=f.getSubNode("FHCELL"),d,k;if(typeof i=="number"){k=i}else{if(i===true){var h=[],m;f.getSubNode("FCELLINN",true).each(function(n){if((m=n.parentNode).parentNode.offsetHeight>0&&xui.Dom.getStyle(m,"overflow")!="visible"){if(d=c[f.getSubId(n.id)]){h.push(xui([n]).width()+d._layer*g)}}});h.push(l._minColW);k=parseInt(Math.max.apply(null,h),10)+g*2}else{k=j.width()}}if(k){if(k<l._minColW){k=l._minColW}if(k<=0){return}if(l.rowHandlerWidth!=k){j.width(l.rowHandlerWidth=k);f.getSubNode("FCELL",true).width(k);f.getSubNode("ROWLRULER",true).each(function(n){d=c[f.getSubId(n.id)];n.style.width=(4+d._layer*g)+"px"});f.box._adjustColsH(f);f.box._adjustBody(f,"rowhandler")}}},_onStartDrag:function(c,d,g){var f=c.rowMap[c.getSubId(g)];if(f&&f.id==c.box._temprowid){return false}var h=xui.Event.getPos(d);c.$_ond=g;xui.use(g).startDrag(d,{dragType:"icon",shadowFrom:xui.use(g).parent()._get(0),targetLeft:h.left+12,targetTop:h.top+12,dragCursor:"pointer",dragDefer:2,dragKey:c.box.getDragKey(c,g),dragData:c.box.getDragData(c,d,g)});return false},_onDropTest:function(d,j,c,n,i,q){var f=i&&i.domId,h=c,l=i&&i.profile,p;if(h){var g=d.getKey(h),m=d.keys,r=d.rowMap[d.getSubId(h)];if(g==m.ROWTOGGLE&&!r.sub){return false}}if(l&&l.$xid==d.$xid){if(f&&d.getSubId(f)==d.getSubId(h)){return false}p=d.$_ond;c=xui(c).get(0);if(_.get(c,["parentNode","previousSibling"])==p){return false}do{if(c==p){c=p=null;return false}}while(c&&(c=c.parentNode)&&c!==document&&c!==window);c=p=null}},_onDragstop:function(d,h,i,c,g,f){delete d.$_ond},_onDrop:function(h,m,f,q,l,s){xui.DragDrop.setDragIcon("none");if(!l.profile||!l.profile[h.KEY]){return}var j=h.getKey(f),g=l.profile,d=l.domId,i,p=h.keys,r=xui.absObj.$specialChars,n=h.boxing(),c=g.rowMap[g.getSubId(d)],u=h.rowMap[h.getSubId(f)];c=_.clone(c,function(v,k){return !r[(k+"").charAt(0)]});g.boxing().removeRows([c.id]);if(j==p.SCROLL){n.insertRows([c],null,null,false)}else{if((j==p.ROWTOGGLE)&&u.sub){n.insertRows([c],u.id,null,false)}else{if(j==p.CELLS){n.insertRows([c],u._pid,u.id,true)}}}return false},_beforeSerialized:function(f){var h=arguments.callee.upper.call(this,f),c=f.properties,g=xui.absObj.$specialChars,d;h.properties.header=_.clone(c.header,function(l,j,k){return !g[((k===1?l.id:j)+"").charAt(0)]&&l!=undefined});h.properties.grpCols=_.clone(c.grpCols,function(l,j,k){return !g[((k===1?l.id:j)+"").charAt(0)]&&l!=undefined});h.properties.rows=_.clone(c.rows,function(l,j,k){return !g[((k===1?l.id:j)+"").charAt(0)]&&l!=undefined});if(h.properties.header.length===0){delete h.properties.header}if(h.properties.grpCols.length===0){delete h.properties.grpCols}if(h.properties.rows.length===0){delete h.properties.rows}return h},_clsCache:{},_colDragCheck:function(g,i){var c=xui.DragDrop.getProfile(),f=c.dragKey,h=c.dragData,d=g.colMap[g.getSubId(i)];if(!d||d._isgroup){return false}if(!(d.hasOwnProperty("colMovable")?d.colMovable:g.properties.colMovable)){return false}if(!f||!h||f!=(g.$xid+":col")){return false}if(h==xui.use(i).id()||h==xui.use(i).prev().id()){return false}},_prepareData:function(c){var d=arguments.callee.upper.call(this,c),g="display:none",f=c.properties;c.rowMap2={};c.rowMap={};c.cellMap={};d.showHeader=f.showHeader?"":g;d.colDDDisplay=f.colResizer?"":g;d.rowDDDisplay=f.rowResizer?"":g;d.rowHandlerDisplay=f.rowHandler?"":g;d.sortDisplay=g;d._hcelllineh=d._hcellheight=d.headerHeight?(d.headerHeight-2):"";d.headerHeight=d.headerHeight?("height:"+d.headerHeight+"px;"):"";d._rowMarkDisplay=(f.selMode=="multi"||f.selMode=="multibycheckbox")?"":"display:none;";if(f.header&&!_.isArr(f.header)){f.header=[]}if(f.grpCols&&!_.isArr(f.grpCols)){f.grpCols=[]}if(f.rows&&!_.isArr(f.rows)){f.rows=[]}f.header=this._adjustHeader(f.header);d.header=this._prepareHeader(c,f.header);d._row0DfW=d.rowHandlerWidth?("width:"+d.rowHandlerWidth+"px"):"";f.grpCols=this._adjustGrpColsData(c,f.grpCols);d.grpCols=this._prepareGrpCols(c,f.grpCols,d.header);arguments.callee.upper.call(this,c);f.rows=this._adjustRows(f.rows);d.rows=this._prepareItems(c,f.rows);return d},_parepareCol:function(f,d){var g=xui.UI.$tag_subId,j=f.properties,c=j.headerHeight,i="display:none",h;if(typeof d=="string"){d={id:d}}d._cells={};d[g]="h_"+f.pickSubId("header");d.id=d.id||d[g];f.colMap[d[g]]=d;d.width=d.width||j._colDfWidth;if(!d.relWidth){if(d.hasOwnProperty("minWidth")){d.width=Math.max(d.minWidth)}if(d.hasOwnProperty("maxWidth")){d.width=Math.min(d.minWidth)}}d._pxWidth=d.width;d._hcelllineh=d._hcellheight=c-2;h={sortDisplay:i,rowHandlerDisplay:j.rowHandler?"":i};h[g]=d[g];h._tabindex=j.tabindex;h.colDDDisplay=(("colResizer" in d)?d.colResizer:j.colResizer)?"":i;if(d.relWidth){h.colDDDisplay=i}if(d.hasOwnProperty("visibility")&&!d.hasOwnProperty("hidden")){d.hidden=!d.visibility}h.colDisplay=d.hidden===true?i:"";h.firstCellStyle=j.colOptions.firstCellStyle||"";h.firstCellClass=j.colOptions.firstCellClass||"";if(!d.type){d.type=j.colOptions.type||"input"}if(!d.caption){d.caption=d.id}xui.UI.adjustData(f,d,h);f.colMap2[d.id]=d[g];return[d,h]},_parepareCell:function(g,k,l,f){var j=this,d=xui.UI.$tag_subId,c=g.properties,i="display:none",h={};k=_.isSet(k)?_.isHash(k)?k:{value:k}:{};k._row=l;k._col=f;k[d]="c_"+g.pickSubId("cell");k.id=k.id||k[d];j._adjustCell(g,k,h);g.cellMap[h[d]]=k;l._cells[f.id]=h[d];f._cells[l.id]=h[d];return[k,h]},_prepareGrpCols:function(g,c,d){var f=g.properties;if(f.showHeader&&c&&_.isArr(c)&&c.length){var D=f.header,B=f.headerHeight,i=xui.UI.$tag_subId,r="display:none",l=[],u,s,E,F,G=g._headerLayers,E=parseInt(B/(G+1),10);flag=false;for(var C=0,z=c.length,q;C<z;C++){u={};s=0;flag=false;F=f.rowHandler?(f.rowHandlerWidth+2):0;q=c[C];xui.UI.adjustData(g,q,u);for(var A=0,x;A<=q.to;A++){x=D[A];v=d[A];if(A===q.from){flag=true;u._hcellleft=F}F+=v._pxWidth+2;if(flag&&!x.hidden){s+=v._pxWidth+2}}u._pxWidth=s-2;u._hcelllineh=u._hcellheight=E-2;u._hcelltop=E*(q._layer-1);u._tabindex=f.tabindex;u.colDDDisplay=(("colResizer" in q)?q.colResizer:f.colResizer)?"":r;l.push(u)}for(var A=0,y=D.length,x,v;A<y;A++){x=D[A];v=d[A];if(x._grp&&x._grp.length){v._hcelllineh=v._hcellheight=B-x._grp.length*E-2}}return l}},_prepareHeader:function(d,c){var g=[],f;d.colMap2={};d.colMap={};_.arr.each(c,function(j,h){f=d.box._parepareCol(d,j);c[h]=f[0];g.push(f[1])});return g},_renderCell:function(h,f,x,i){var E=h.box.getCellOption,A=x["xui.Dom"],G=A?f:x,j=E(h,f,"type"),m="",l="",B,y=(!A)&&x.caption,C=/</g,F=arguments.callee,H=F._dcls||(F._dcls=h.getClass("CELL","-disabled")),d=F._rcls||(F._rcls=h.getClass("CELL","-readonly")),g=F._ren||(F._ren=function(K,v,c,J){return(typeof v._$caption=="string"?v._$caption:typeof c.caption=="string"?c.caption:typeof(v.renderer||v._renderer)=="function"?(v.renderer||v._renderer).call(K,v):typeof J=="function"?J(v.value,K,v):(_.isSet(v.value)?String(v.value):""))||""}),z=F._f0=(F._f0=function(J,K,c){return J?xui.Date.getText(J,E(K,c,"dateEditorTpl")||"ymdhn"):""}),w=F._f1=(F._f1=function(J,K,c){return J?xui.Date.getText(J,E(K,c,"dateEditorTpl")||"ymd"):""}),u=F._f2=(F._f2=function(c){return c?(c+"").replace(C,"&lt;").replace(/\t/g,"    ").replace(/(\r\n|\n|\r)/g,"<br />"):""}),s=F._f3=(F._f3=function(c){return(c||c===0)?((c*100).toFixed(2)+"%"):""}),r=F._f4=(F._f4=function(J,K,c){if(J||J===0){return _.formatNumeric(parseFloat(J),E(K,c,"precision"),E(K,c,"groupingSeparator"),E(K,c,"decimalSeparator"),E(K,c,"forceFillZero"))}else{return""}}),q=F._f5=(F._f5=function(K,L,c){if(K||K===0){var J=E(L,c,"precision");return _.formatNumeric(parseFloat(K),_.isSet(J)?J:2,E(L,c,"groupingSeparator"),E(L,c,"decimalSeparator"),E(L,c,"forceFillZero"))}else{return""}}),p=F._f6=(F._f6=function(K,N,c){var M=E(N,c,"editorListItems");if(!M){if(M=E(N,c,"editorListKey")){M=xui.UI.getCachedData(M)}}if(M&&M.length){for(var L=0,J=M.length;L<J;L++){if(M[L].id===K){return M[L].caption||K}}}return K});switch(j){case"number":case"spin":var n=parseFloat(f.value);f.value=(n||n===0)?n:null;B=y||g(h,f,G,r);var I=E(h,f,"numberTpl");if(I&&B){B=I.replace("*",B)}if(A){x.html(B,false)}break;case"currency":var n=parseFloat((f.value+"").replace(/[^\d.-]/g,""));f.value=(n||n===0)?n:null;B=y||g(h,f,G,q);var I=E(h,f,"currencyTpl");if(I&&B!==""){B=I.replace("*",B)}if(A){x.html(B,false)}break;case"date":case"datepicker":f.value=_.isDate(f.value)?f.value:_.isFinite(f.value)?new Date(parseInt(f.value,10)):null;B=y||g(h,f,G,w);if(A){x.html(B,false)}break;case"datetime":f.value=_.isDate(f.value)?f.value:_.isFinite(f.value)?new Date(parseInt(f.value,10)):null;B=y||g(h,f,G,z);if(A){x.html(B,false)}break;case"textarea":f.value=f.value||"";f.cellClass="xui-cls-wordwrap "+f.cellClass;B=y||g(h,f,G,u);if(A){x.html(B,false)}break;case"color":case"colorpicker":var D=xui.UI.ColorPicker._ensureValue(0,f.value);f.value=f.value?((D!=="transparent"?"#":"")+D):"";B=y||g(h,f,G);if(f.value){m=xui.UI.ColorPicker.getTextColor(f.value);if(A){x.html(B,false);x.css("color",m).css("backgroundColor",f.value)}else{x.color="color:"+m+";";x.bgcolor="background-color:"+f.value+";"}}else{if(A){x.html(B,false);x.css("color","").css("backgroundColor","")}else{}}break;case"checkbox":f.value=!!f.value;B=f.value+"";if(A){x.first().tagClass("-checked",f.value)}else{x.checkboxCls=h.getClass("CHECKBOX",f.value?"-checked":"")}break;case"progress":f.value=parseFloat(f.value)||0;f.value=Math.min(Math.max(f.value,0),1);B=y||g(h,f,G,s);if(A){x.first().html(B,false).width(B)}else{x.progress=B}break;case"listbox":f.value=f.hasOwnProperty("value")?f.value:"";B=y||g(h,f,G,p);if(A){x.html((B===null||B===undefined)?f.value:B,false)}break;default:f.value=f.hasOwnProperty("value")?f.value:"";B=y||g(h,f,G);if(A){x.html((B===null||B===undefined)?f.value:B,false)}}f._$tips=B;var l=f.disabled||f._row.disabled||f._col.disabled,k=f.readonly||f._row.readonly||f._col.readonly;if(!A){x.cellCls=h.getClass("CELL","-"+j)+(l?(" "+H):"")+(k?(" "+d):"");x.type=j;x.value=f.value;x.caption=B;x.cellStyle=E(h,f,"cellStyle");x.cellClass=E(h,f,"cellClass")}else{if(l){x.addClass(H)}else{x.removeClass(H)}if(l=i.cellStyle){x.attr("style",x.attr("style")+";"+l)}if(l=i.cellClass){x.addClass(l)}}},_prepareItems:function(d,c,r){var s=this,k=d.properties,x=k.$subMargin,C=d.rowMap2,z=d.rowMap,q=r?z[r]?(z[r]._layer+1):0:0,g=xui.UI.$tag_subId,D=arguments.callee,A=D._id||(D._id=new _.id()),m=[],y,f,p,h,n,B,j="display:none";for(var w=0,u=c.length;w<u;w++){h=c[w];if(!h.id||C[h.id]){while(C[p=A.next()]){}h.id=p}else{h.id+=""}y="r_"+d.pickSubId("row");h[g]=y;z[y]=h;h._pid=r;h._cells={};h._layer=q;h._tabindex=k.tabindex;h._rowMarkDisplay=(k.selMode=="multi"||k.selMode=="multibycheckbox")?"":j;h._treeMode=k.treeMode?"":j;h._rowNumbDisplay=k.rowNumbered?"":j;p={id:h.id};p.rowCls="";if(h.disabled){p.rowCls+=d.getClass("CELLS","-disabled")}if(h.readonly){p.rowCls+=d.getClass("CELLS","-readonly")}if(h.group){p.rowCls+=d.getClass("CELLS","-group")}if(h.summary){p.summaryDisplay="display:block;"}if(h.preview){p.previewDisplay="display:block;"}if(h.hidden){p.rowDisplay=j}p._row0DfW=k.rowHandlerWidth?("width:"+k.rowHandlerWidth+"px"):"";p._rulerW=4+q*x;p.rowHeight=h.height||k.rowHeight;p.rowHandlerDisplay=k.rowHandler?"":j;p.rowDDDisplay=(("rowResizer" in h)?h.rowResizer:k.rowResizer)?"":j;p.firstCellStyle=h.firstCellStyle||k.rowOptions.firstCellStyle||"";p.firstCellClass=h.firstCellClass||k.rowOptions.firstCellClass||"";f=p.cells=[];p[g]=y;p.subClass=h.sub?"xui-uicmd-toggle2":"xui-uicmd-empty";C[h.id]=y;if(h.group){h.cells=null}if(!h.hasOwnProperty("caption")&&h.hasOwnProperty("value")){h.caption=""+h.value}if(h.caption&&!h.tips){h._$tips=h.caption}if(n=h.cells){_.arr.each(k.header,function(l,i){B=d.box._parepareCell(d,n[i],h,l);n[i]=B[0];f.push(B[1])})}xui.UI.adjustData(d,h,p);m.push(p)}return m},_adjustCell:function(g,c,j){var d=this,i=g.properties,f=c._col,h;if(h=d.getCellOption(g,c,"cellRenderer")){c._renderer=h}xui.UI.adjustData(g,c,j);if(!j.width){j.width=f._pxWidth}j._tabindex=i.tabindex;j.cellDisplay=f.hidden===true?"display:none;":"";d._renderCell(g,c,j);c._oValue=c.value},_setSub:function(h,q,l){var f=h.domId,m=h.properties,i=h.rowMap2[q.id],j=h.getSubNode("ROWTOGGLE",i),k=h.getSubNode("SUB",i);if(xui.Thread.isAlive(h.key+h.id)){return}if(q._checked){if(!l){var s=function(){k.css({display:"none",height:0});j.tagClass("-checked",false);q._checked=false;h.box._asy(h);delete h.$allrowscache;h.box._adjustBody(h,"showrow")};if(m.animCollapse){k.animate({height:[k.height(),0]},null,s,200,0,"expoOut",h.key+h.id).start()}else{s()}}}else{if(l){var g=function(w,C,u,x,A,r){var B=w.boxing(),v=w.properties,z=r===false||(_.isArr(r)&&r.length===0);if(!C._inited){delete C.sub;C._inited=true;if(r){if(typeof r=="string"){A.html(C.sub=r,false)}else{if(_.isArr(r)){B.insertRows(r,C.id)}else{if(r["xui.Template"]||r["xui.UI"]){A.append(C.sub=r.render(true))}}}}B._setCtrlValue(B.getUIValue(),true)}var y=0;A.css("height","0px").css("display","");A.children().each(function(E){y+=E.offsetHeight});var D=function(){x.removeClass("xui-ui-busy");x.tagClass("-busy",false);if(z){x.css("background","none")}else{A.css({display:"",height:"auto"});x.tagClass("-checked")}C._checked=true;w.box._asy(w);delete w.$allrowscache;w.box._adjustBody(w,"showrow")};if(v.animCollapse){A.animate({height:[0,y]},null,D,200,0,"expoIn",w.key+w.id).start()}else{D()}};var d=q.sub,n=function(r){g(h,q,f,j,k,r)},p;if((p=typeof d)=="string"||p=="object"){n(d)}else{if(h.onGetContent){j.addClass("xui-ui-busy");var c=h.boxing().onGetContent(h,q,n);if(c||c===false){if(c===true){q._inited=true}n(c)}}}}}},_getCellId:function(c,f,d){return _.get(c.rowMap,[c.rowMap2[f],"_cells",d])},_updCell:function(h,d,r,q,m){var i=h.box,c=h.properties,n=c.dirtyMark,g=c.showDirtyMark,l=xui.absObj.$specialChars,p,f,k;if(typeof d=="string"){p=h.cellMap[d]}else{p=d;d=p._serialId}if(!p){return}k=p._row.id==i._temprowid;if(!_.isHash(r)){r={value:r}}r=_.filter(r,function(u,s){return !l[s.charAt(0)]||s=="_$caption"});if(m){if(h.beforeCellUpdated&&false===h.boxing().beforeCellUpdated(h,p,r,k)){return}}delete p.caption;delete p._$caption;delete p._$tips;_.merge(p,r,"all");f=h.getSubNode("CELLA",d);if("type" in r){var j={};i._adjustCell(h,p,j);f.parent().replace(h._buildItems("rows.cells",[j]))}else{i._renderCell(h,p,f,r)}if("value" in r){if(!n||q===false){p._oValue=p.value}else{if(p.value===p._oValue){if(g){f.removeClass("xui-ui-dirty")}delete p.dirty}else{if(g){f.addClass("xui-ui-dirty")}p.dirty=true}}}if(m){if(h.afterCellUpdated){h.boxing().afterCellUpdated(h,p,r,k)}}},_ensureValue:function(d,f){if(d.properties.selMode=="multi"||d.properties.selMode=="multibycheckbox"){var c=_.isArr(f)?vaue:(f?(""+f):"").split(d.properties.valueSeparator);_.arr.removeValue(c,this._temprowid);c.sort();return c.join(d.properties.valueSeparator)}else{return f==this._temprowid?null:f}},_sel:function(g,h,l,u,z){var m=g.properties;if(m.activeMode!=h){return}var f=g.getSubId(u),A=h=="cell"?g.cellMap:g.rowMap,q=g.boxing(),n=A[f],C=xui.Event.getKey(z),j=h=="cell"?(n._row.id+"|"+n._col.id):n.id,r=m.selMode;switch(r){case"none":q.onRowSelected(g,n,z,l,0);break;case"multibycheckbox":if(g.keys.MARK){var p=g.getKey(xui.Event.getSrc(z).id||""),c=p==g.keys.MARK;if(!c){q.onRowSelected(g,n,z,l,0);break}}case"multi":var w=q.getUIValue(),d=w?(""+w).split(m.valueSeparator):[],k=1;if(d.length&&(C.ctrlKey||C.shiftKey||m.noCtrlKey)){if(C.shiftKey&&h=="row"){if(g.$firstV._pid!=n._pid){return false}var s=m.rows;if(n._pid){var B=A[n._pid];if(B){s=B.sub}}var x=_.arr.subIndexOf(s,"id",g.$firstV.id),v=_.arr.subIndexOf(s,"id",n.id),y;d.length=0;for(y=Math.min(x,v);y<=Math.max(x,v);y++){d.push(s[y].id)}}else{if(_.arr.indexOf(d,j)!=-1){_.arr.removeValue(d,j);k=-1}else{d.push(j)}}d.sort();w=d.join(m.valueSeparator);if(q.getUIValue()!=w){q.setUIValue(w);if(q.get(0)&&q.getUIValue()==w){q.onRowSelected(g,n,z,l,k)}}break}case"single":if(q.getUIValue()!=j){g.$firstV=n;q.setUIValue(j);if(q.get(0)&&q.getUIValue()==j){q.onRowSelected(g,n,z,l,1)}}break}},_activeCell:function(f,h){if(f.properties.activeMode!="cell"){return}if(f.$activeCell==h){return}var c=null;if(f.$activeCell){xui(f.$activeCell).tagClass("-active",false);delete f.$activeCell}if(h!==false){var d=f.getSubId(h),g=f.cellMap;c=g[d];if(f.beforeCellActive&&(false===f.boxing().beforeCellActive(f,c))){return}xui(f.$activeCell=h).tagClass("-active")}if(f.afterCellActive){f.boxing().afterCellActive(f,c)}},_activeRow:function(f,h){if(f.properties.activeMode!="row"){return}if(f.$activeRow==h){return}var d=null;if(f.$activeRow){xui(f.$activeRow).tagClass("-active",false);delete f.$activeRow}if(h!==false){var c=f.getSubId(h),g=f.rowMap;d=g[c];if(f.beforeRowActive&&(false===f.boxing().beforeRowActive(f,d))){return}xui(f.$activeRow=h).tagClass("-active")}if(f.afterRowActive){f.boxing().afterRowActive(f,d)}},getCellOption:function(g,c,f){var d=c,h=g.properties;return(d&&d.hasOwnProperty(f)&&_.isSet(d[f]))?d[f]:((d=c._row)&&d.hasOwnProperty(f)&&_.isSet(d[f]))?d[f]:((d=h.rowOptions)&&d.hasOwnProperty(f)&&_.isSet(d[f]))?d[f]:((d=c._col)&&d.hasOwnProperty(f)&&_.isSet(d[f]))?d[f]:((d=h.colOptions)&&d.hasOwnProperty(f)&&_.isSet(d[f]))?d[f]:((d=h)&&d.hasOwnProperty(f)&&_.isSet(d[f]))?d[f]:null},_trycheckrowdirty:function(d,c){if(!c||!c._row){return}_.resetRun(d.key+":"+d.$xid+":"+c._row.id,function(){if(!d.box){return}var g=d.$cellInEditor;if(c._row&&(!g||(g._row&&g._row!=c._row))){var f=false;_.arr.each(c._row.cells,function(h){if(h._oValue!==h.value){f=true;return false}});if(f&&c._row.id!=d.box._temprowid&&d.onRowDirtied){d.boxing().onRowDirtied(d,c._row)}}},100)},_editCell:function(i,s){var z=typeof s=="string"?i.cellMap[s]:s;if(!z){return}if(i.box.getCellOption(i,z,"disabled")||i.box.getCellOption(i,z,"readonly")){return}s=z._serialId;var B=i.getSubNode("CELL",s),f=z._col.id,G=z._row.id==i.box._temprowid;var c=i.$curEditor;if(c){_.tryF(c.undo,[],c)}c=null;var H=this,g=i.getSubNode("SCROLL"),j=i.box,w=function(h){return j.getCellOption(i,z,h)};c=i.box.getCellOption(i,z,"customEditor");if(c&&typeof c.iniEditor=="function"){c.iniEditor(i,z,B);_.tryF(c.activate,[],c);if(i.onBeginEdit){i.boxing().onBeginEdit(i,z,c)}}else{if(i.beforeIniEditor){c=i.boxing().beforeIniEditor(i,z,B,g);if(c===false){return}}if(!c||!c["xui.UI"]){var Q=w("type")||"input",x=w("editorAutoPop"),n=w("editorCacheKey"),d=w("editorProperties"),m=w("editorEvents"),r=w("editorFormat"),M=w("editorMask"),p=w("editorReadonly"),C=w("editorDropListWidth"),J=w("editorDropListHeight"),I,L;if(Q=="checkbox"){B.first().focus();return}else{if(Q=="button"||Q=="label"){return}}if(n&&i.$cache_editor[n]){c=i.$cache_editor[n]}if(!c){c=new xui.UI.ComboInput({dirtyMark:false,cachePopWnd:false,left:-1000,top:-1000,position:"absolute",visibility:"hidden",zIndex:100})}switch(Q){case"number":case"spin":case"currency":var O=w("precision"),D=w("increment"),P=w("min"),u=w("max"),E=w("maxlength"),l=w("currencyTpl"),A=w("numberTpl"),K=w("groupingSeparator"),y=w("decimalSeparator"),v=w("forceFillZero");c.setType(Q);if(Q=="currency"){if(!_.isSet(O)){O=2}if(_.isSet(l)){c.setCurrencyTpl(l)}}else{if(!_.isSet(O)){O=0}if(_.isSet(A)){c.setNumberTpl(A)}if(Q=="spin"&&_.isSet(D)){c.setIncrement(D)}if(_.isSet(P)){c.setMin(P)}if(_.isSet(u)){c.setMax(u)}if(_.isSet(E)){c.setMaxlength(E)}}if(_.isSet(O)){c.setPrecision(O)}if(_.isSet(K)){c.setFroupingSeparator(K)}if(_.isSet(y)){c.setDecimalSeparator(y)}if(_.isSet(v)){c.setForceFillZero(v)}break;case"progress":c.setType("spin").setMax(1).setMin(0).setPrecision(4).setIncrement(0.01);break;case"input":c.setType("none");break;case"textarea":c.setType("none").setMultiLines(true).setCommandBtn("save").onCommand(function(h){h.boxing().hide()});_.tryF(c.setResizer,[true],c);break;case"date":case"datepicker":case"datetime":var q=w("dateEditorTpl");if(q){c.setDateEditorTpl(q)}case"listbox":case"combobox":case"helpinput":case"time":case"timepicker":case"color":case"colorpicker":case"getter":case"popbox":case"cmdbox":c.setType(Q);if(i.box.getCellOption(i,z,"disabled")){}else{c.beforeComboPop(function(U,V,S,T){var h=U.$cell,R=i.box.getCellOption(i,h,"event");if(typeof R=="function"){return R.call(i._host||i,i,h,U,V,S,T)}else{return i.boxing().beforeComboPop(i,h,U,V,S,T)}});if(i.beforePopShow){c.beforePopShow(function(R,h){return i.boxing().beforePopShow(i,R.$cell,R,h)})}if(i.afterPopShow){c.afterPopShow(function(R,h){return i.boxing().afterPopShow(i,R.$cell,R,popCt)})}if(i.onCommand){c.onCommand(function(R,h){return i.boxing().onCommand(i,R.$cell,R,h)})}}break;case"file":c.setType(Q);break}g.append(c);if(n){i.$cache_editor[n]=c}if(c.setInputReadonly&&p){c.setInputReadonly(true)}if(c.setDropListWidth&&C){c.setDropListWidth(C)}if(c.setDropListHeight&&J){c.setDropListHeight(J)}if(r){if(typeof r=="function"&&c.beforeFormatCheck){c.beforeFormatCheck(r)}else{if(typeof r=="string"&&c.setValueFormat){c.setValueFormat(r)}}}if(M&&c.setMask){c.setMask(M)}if(d){L={};var N=i.getProperties();_.each(d,function(R,h){L=N[h]});c.setProperties(d)}if(m){c.setEvents(m)}c.resetValue();switch(Q){case"listbox":case"combobox":case"helpinput":if(I=w("editorListItems")){c.setListKey(null);c.setItems(I)}else{if(I=w("editorListKey")){c.setItems(null);c.setListKey(I)}}break;case"cmdbox":case"popbox":if(c.setCaption){c.setCaption(z.caption||"")}}c.setValue(z.$editorValue||z.value,true);delete z.$editorValue;if(z.$tag){if(c.setCaption){c.setCaption(z.$tag)}else{if(c.setValue){c.setValue(z.$tag)}}}c.get(0).$cell=z;c.get(0)._smartnav=true;c.undo=function(){var S=this;i.$curEditor=null;i.$cellInEditor=null;if(i.box){i.box._trycheckrowdirty(i,i.$cellInEditor)}if(S.get(0)){S.getSubNode("INPUT").onBlur(true);S.getRoot().setBlurTrigger(i.$xid+":editor");if(i.properties&&!i.properties.directInput){S.afterUIValueSet(null).beforeNextFocus(null).onCancel(null);S.setValue("",true)}if(r){if(S.beforeFormatCheck){S.beforeFormatCheck(null)}if(S.setValueFormat){S.setValueFormat("")}}if(M){if(S.setMask){S.setMask("")}}if(p){if(S.setInputReadonly){S.setInputReadonly(false)}}if(C){if(S.setDropListWidth){S.setDropListWidth(0)}}if(J){if(S.setDropListHeight){S.setDropListHeight(0)}}if(L){S.setProperties(L);L=null}delete S.get(0).$cell;delete S.get(0)._smartnav;S.setVisibility("hidden");if(_.isFun(S.collapse)){S.collapse()}}if(m){var R={};_.each(m,function(T,h){R[h]=null});S.setEvents(R)}S.undo=null;if(i.onEndEdit){i.boxing().onEndEdit(i,z,S)}if(!n&&S.get(0)){S.destroy(true)}S=null};c.afterUIValueSet(function(V,T,R){var U=w("type"),h;switch(U){case"number":case"spin":case"progress":R=parseFloat(R);R=(R||R===0)?R:null;break;case"currency":R=parseFloat((""+R).replace(/[^\d.-]/g,""));R=(R||R===0)?R:null;break;case"cmdbox":case"popbox":case"combobox":case"listbox":case"helpinput":h=V.boxing().getShowValue();break}var S={value:R};if(_.isDefined(h)){S.caption=S._$caption=h}if(V.properties.hasOwnProperty("tagVar")){S.tagVar=V.properties.tagVar}H._updCell(i,s,S,i.properties.dirtyMark,true)}).beforeNextFocus(function(S,R){if(c){_.tryF(c.undo,[],c);var h=xui.Event.getEventPara(R);if(h.keyCode=="enter"){h.keyCode="right"}i.getSubNode("CELLA",z._serialId).onKeydown(true,h)}return false}).onCancel(function(){if(c){_.tryF(c.undo,[],c)}}).getRoot().setBlurTrigger(i.$xid+":editor",function(){if(c){_.tryF(c.undo,[],c)}return false});var F=B.offset(null,g),k=B.cssSize();if(Q=="textarea"){c.setWidth(Math.max(200,k.width+3)).setHeight(Math.max(100,k.height+2)).reLayout(true,true).reBoxing().popToTop(B,4,g)}else{c.setWidth(k.width+3).setHeight(k.height+2).reLayout(true);c.reBoxing().show((F.left-1)+"px",(F.top-1)+"px")}c.setVisibility("visible");if(_.isFun(c.expand)&&(x!==false)&&(x||Q=="listbox"||Q=="date"||Q=="datepicker"||Q=="datetime"||Q=="time"||Q=="timepicker"||Q=="color"||Q=="colorpicker")){c.expand()}if(i.onBeginEdit){i.boxing().onBeginEdit(i,z,c)}_.asyRun(function(){if(!i.box){return}_.tryF(c&&c.activate,[],c)})}}i.$curEditor=c;i.$cellInEditor=z;if(G){i.__needchecktmprow=true;i.box._sethotrowoutterblur(i)}},_adjustBody:function(d,c,f){if(!d.renderId||d.destroyed){return}_.resetRun(d.$xid+"4",function(){if(!d.renderId||d.destroyed){return}d.getSubNode("SCROLL").css("overflow","hidden");var k=d.box._adjustRelWith(d);var p=d.getSubNode("ROWS"),n=d.getSubNode("HCELLS"),r=d.properties.header,s=d.getSubNode("SCROLL"),y,i,v,x=d.keys,j,q;if(p.get(0).clientHeight){if(n.get(0).clientHeight){if(y=n.get(0).childNodes){i=y.length;while(i){if(y[i-1].clientHeight){v=y[i-1];break}--i}}j=v?(v.offsetWidth+v.offsetLeft+100):0;n.parent().width(j);p.width(q=j)}else{if(y=p.get(0).childNodes){i=y.length;while(i){if(y[i-1].clientHeight){v=y[i-1];break}--i}if(v){var h=d.getSubId(v.id);y=d.getSubNode("CELLS",h);if(y=y.get(0).childNodes){i=y.length;while(i){if(y[i-1].clientHeight){v=y[i-1];break}--i}}}}}}if(v){p.width(q=v.offsetWidth+v.offsetLeft)}else{var g=d.properties,m=g.header,z=g.rows,u=g.rowHandler?(g.rowHandlerWidth+2):0;_.each(m,function(l){if(l.hidden!==true){u+=("_pxWidth" in l)?l._pxWidth:(l.width+2)}});p.width(q=u)}y=v=null;s.css("overflow","auto");if(q>s.width()+2){k="auto"}s.css("overflowX",k);s.onScroll();if(d.onBodyLayout){d.boxing().onBodyLayout(d,c)}if(f){f()}})},_adjustHeader:function(d){var f=_.copy(d),c;_.arr.each(f,function(h,g){f[g]=_.copy(h)});return f},_adjustGrpColsData:function(g,n){if(!_.isArr(n)){return _.copy(n)}var c=g.properties,l=c.header,r=l.length,q=(r+"").length,d=xui.UI.$tag_subId,s=_.copy(n,function(i){i.from=parseInt(i.from,10)||0;i.to=parseInt(i.to,10)||0;return i.from<=r&&i.to<=r&&i.to>=i.from});_.arr.each(s,function(m,j){s[j]=_.isHash?_.copy(m):{}});_.arr.stableSort(s,function(i,j){i.from>j.from?1:i.from==j.from?(i.to>j.to?-1:i.to==j.to?0:1):-1});for(var h=0,f=s.length,u;h<f;h++){u=s[h];u[d]=u[d]||("g_"+g.pickSubId("grpCol"));u.id=u.id||u[d];if(!u.caption){u.caption=u.id}u._isgroup=1;delete u._grp;g.colMap[u[d]]=u;g.colMap2[u.id]=u[d]}_.arr.each(s,function(w,v){for(var m=0;m<v;m++){if(s[v].to>s[m].from&&s[v].from<s[m].to){if(s[v].to>s[m].to){s[v].to=s[m].to}(s[v]._grp||(s[v]._grp=[])).push(s[m].id)}}});_.arr.each(l,function(i){delete i._grp});var p=0;for(var h=0,f=s.length,u;h<f;h++){u=s[h];for(var k=u.from;k<=u.to;k++){o=l[k];(o._grp||(o._grp=[])).push(u.id);if(!u._layer){u._layer=o._grp.length}p=Math.max(p,u._layer)}}g._headerLayers=p;return s},_adjustRows:function(d){var f,c;if(_.isArr(d)&&d.length&&typeof d[0]!="object"){f=[d]}else{f=_.copy(d)}_.arr.each(f,function(h,g){if(_.isArr(h)){f[g]={cells:h}}else{f[g]=_.copy(h)}c=f[g].cells=_.copy(f[g].cells);_.arr.each(c,function(k,j){if(!!k&&_.isHash(k)){c[j]=_.copy(k)}else{c[j]={value:k}}})});return f},_adjustColsH:function(h){var c=h.properties,q=c.header,r=c.grpCols;if(c.showHeader&&r&&_.isArr(r)&&r.length){var w,i,u,s=false;for(var p=0,g=r.length,v,f;p<g;p++){i=u=0;s=false;w=c.rowHandler?(c.rowHandlerWidth+2):0;v=r[p];for(var l=0,d;l<=v.to;l++){d=q[l];if(l===v.from){s=true;i=w}w+=d._pxWidth+2;if(s&&!d.hidden){u+=d._pxWidth+2}}f=h.getSubNode("HCELL",v._serialId);if(u>2){f.css({display:"",left:i+"px",width:(u-2)+"px"})}else{f.css({display:"none"})}}}},_adjustColsV:function(g,k){var c=g.colMap,n=g._headerLayers,i,d,f,j,m;g.getSubNodes(["HCELLS","GRPCELLBOX"]).height(k);g.getSubNode("FHCELL").css({height:k-2+"px","line-height":k-2+"px"});if(!n){g.getSubNode("HCELL",true).css({height:k-2+"px","line-height":k-2+"px"})}else{d=parseInt(k/(n+1),10);g.getSubNode("HCELL",true).each(function(h){f=g.getSubId(h.id);if(f=c[f]){if(f&&f._isgroup){xui(h).top(d*(f._layer-1));m=d}else{if(f._grp&&(i=f._grp.length)){m=k-i*d}else{m=k}}xui(h).css({height:m-2+"px","line-height":m-2+"px"})}})}},_focuscell:function(g,k,c){if(g.properties.disabled||g.properties.readonly){return}if(!xui.use(c).get(0)){return}var f=g.properties,i=g.box,h=i.getCellOption,m=g.cellMap[g.getSubId(c)],j=f.activeMode,d;if(m){var l=false;if(h(g,m,"editable")){if(h(g,m,"disabled")||h(g,m,"readonly")){l=false}else{l=true;xui(c).parent().tagClass("-mousedown",false);i._editCell(g,m._serialId);_.asyRun(function(){if(!g.box){return}xui.use(c).parent().onMouseout(true,{$force:true}).parent().onMouseout(true,{$force:true})})}}if(!l){if(m&&j=="cell"){d=xui.use(c).parent().id();i._activeCell(g,d)}}else{if(m&&j=="cell"){i._activeCell(g,false)}}}if(j=="row"){d=xui.use(c).parent(2).id();i._activeRow(g,d)}},_showTips:function(h,g,j){if(h.properties.disableTips){return}if(h.onShowTips){return h.boxing().onShowTips(h,g,j)}if(!xui.Tips){return}var k=h.keys,m,l=k.HCELL+":",d,c,i,f;if(h.properties.disabled){return}c=g.id;i=_.get(g,["parentNode","id"])||"";f=_.get(g,["parentNode","parentNode","id"])||"";d=h.getSubId(c);if(c.indexOf(k.FHCELL)==0||i.indexOf(k.FHCELL)==0||f.indexOf(k.FHCELL)==0){m={tips:h.properties.tips}}else{if(c.indexOf(k.FCELL)==0||i.indexOf(k.FCELL)==0){m=h.rowMap[d]}else{if(c.indexOf(k.HCELL)==0||i.indexOf(k.HCELLA)==0){m=h.colMap[d]}else{if(c.indexOf(k.CELL)==0||i.indexOf(k.CELLA)==0){m=h.cellMap[d]}}}}if(m){xui.Tips.show(j,("tips" in m)?m.tips:(m._$tips||m.caption))}else{xui.Tips.hide()}return true},_adjustRelWith:function(d){var c=d.properties,p=d.colMap,m=d.getSubNode("SCROLL"),j=d.getSubNode("BODY"),s=m.width(),y=0,g=0;d.getSubNodes("HCELL",true).each(function(i){if(i.clientHeight){y=i.offsetWidth-parseInt(i.style.width);return false}});var h=0,r=0,q=[],k=[];if(c.rowHandler){g++;h=c.rowHandlerWidth}_.each(d.colMap,function(i){if(i.hidden){return}if(!i.relWidth){h+=i.width}else{r+=parseFloat(i.width);q.push(i);k.push(i)}g++});if(!q.length){overflowX="auto";return}else{overflowX="hidden";if(m.isScrollBarShowed("y")){s-=xui.Dom.getScrollBarSize()}}while(q.length&&s!=h+g*y){var z=s-(h+g*y),A=0,u=q.length,x=0;for(var v=u-1;v>=0;v--){var f=q[v],n=v===0?(z-A):Math.round(z*(f.width/r));if(n<0){n=0}f._pxWidth=n;if(f.hasOwnProperty("minWidth")){if(f.minWidth>n){h+=f.minWidth;f._pxWidth=f.minWidth;_.arr.removeFrom(q,v);x++}}if(f.hasOwnProperty("maxWidth")){if(f.maxWidth<n){h+=f.maxWidth;f._pxWidth=f.maxWidth;_.arr.removeFrom(q,v);x++}}A+=f._pxWidth}if(x===0||x===u){break}}if(k.length){_.arr.each(k,function(l){var w,i=[];_.each(l._cells,function(B){w=d.getSubNode("CELL",B);if(w._nodes.length){i.push(w.get(0))}});w=d.getSubNode("HCELL",l._serialId);if(w._nodes.length){i.push(w.get(0))}xui(i).width(l._pxWidth)})}return overflowX},_getRow:function(g,i,f){if(i){if(f=="data"){return _.clone(i,true)}else{if(f=="min"){var d=_.clone(i,true),c;_.each(c=d=d.cells,function(l,k){c[k]=l.value});return d}else{if(f=="map"){var h={},j=g.properties.header;_.each(c=d=d.cells,function(l,k){h[j[k].id]=l});return h}else{return i}}}}},_onresize:function(f,d,l){var i={};if(d){i.width=d}if(l){i.height=l}var c=f.properties,h=f.getSubNode("HEADER"),g=f.getSubNode("SCROLL"),j=f.colMap,k=0;f.getSubNode("BORDER").cssSize(i);f.getSubNode("BOX").cssSize(i);if(d){h.width(d)}if(l){k=h.offsetHeight()}i.height=l?(l-k):null;g.cssSize(i);this._adjustBody(f,"resize")}}});Class("xui.UI.Dialog","xui.UI.Widget",{Instance:{showModal:function(d,g,f,h,c){this.show(d,true,g,f,h,c)},show:function(d,f,h,g,i,c){d=d||xui("body");return this.each(function(m){if(m.inShowing){return}var l,n=m.properties,k=m.boxing();switch(n.initPos){case"auto":if(_.isHash(h)){g=h.top;h=h.left}else{g=(g||g===0)?g:n.top;h=(h||h===0)?h:n.left}break;case"center":if(_.isHash(h)){g=h.top+(h.height-n.height)/2;h=h.left+(h.width-n.width)/2}else{var q=d.get(0)==xui("body").get(0)?xui.win:(d["xui.UI"]?d.getRoot():d);g=(g||g===0)?g:Math.max(0,(q.height()-n.height)/2+q.scrollTop());h=(h||h===0)?h:Math.max(0,(q.width()-n.width)/2+q.scrollLeft())}break}if(h<0){h=0}if(g<0){g=0}n.left=h;n.top=g;if(n.status=="max"){h=g=0}var j=function(){if(h||h===0){k.setLeft(h)}if(g||g===0){k.setTop(g)}d.append(k);var u=m.box,r=m.getRoot();if(n.iframeAutoLoad||n.ajaxAutoLoad){xui.UI.Div._applyAutoLoad(m)}if((f||n.modal)&&!m.$inModal){u._modal(m)}var s=m._$rs_args,p=function(){k.activate();if(m.onShow){m.boxing().onShow(m)}delete m.inShowing;_.tryF(i)};if(n.status=="min"){u._min(m,null,p,c)}else{if(n.status=="max"){u._max(m,null,p,c)}else{xui.UI.$doResize(m,(s&&s[1])||n.width,(s&&s[2])||n.height);r.show(h?(parseInt(h,10)||0)+"px":null,g?(parseInt(g,10)||0)+"px":null,p,null,c);u._refreshRegion(m)}}};m.inShowing=1;if(l=n.fromRegion){xui.Dom.animate({border:"solid 1px #555",background:"#888",opacity:0.1},{left:[l.left,h],top:[l.top,g],width:[l.width,n.width],height:[l.height,n.height]},null,j,300,0,"expoIn").start()}else{j()}})},hide:function(c){this.each(function(g){var i=g.properties,h=g.box,f=g.getRoot();var d=function(){if(g.inHiding){return}g.inHiding=1;if(g.$inModal){h._unModal(g)}if(i.status=="max"||i.status=="min"){var l=i.status;h._restore(g);i.status=l}var k=i.fromRegion,j=function(){delete g.inHiding};if(k){xui.Dom.animate({border:"solid 1px #555",background:"#888",opacity:0.1},{left:[i.left,k.left],top:[i.top,k.top],width:[i.width,k.width],height:[i.height,k.height]},null,j,300,0,"expoOut").start()}else{j()}};f.hide(d,null,c)});return this},close:function(d,c){return this.each(function(h){if(false!==d&&h.beforeClose&&false===h.boxing().beforeClose(h)){return}if(h.inClosing){return}h.inClosing=1;var i=h.properties,g=i.fromRegion,f=function(){h.boxing().destroy(c);delete h.inClosing};if(g){xui.Dom.animate({border:"solid 1px #555",background:"#888",opacity:0.1},{left:[i.left,g.left],top:[i.top,g.top],width:[i.width,g.width],height:[i.height,g.height]},null,f,300,0,"expoOut").start()}else{f()}})},activate:function(c){var d=this,f=this.get(0),h;f.box._active(f,c);this.getChildren(null,true).each(function(j){if(_.get(j,["properties","defaultFocus"])){try{_.asyRun(function(){j.boxing().activate()})}catch(i){}h=1;return false}});if(c!==false&&!h){try{f.getSubNode("CAPTION").focus()}catch(g){}}_.asyRun(function(){if(d.onActivated){d.onActivated(f)}})},isPinned:function(){return !!_.get(this.get(0),["properties","pinned"])}},Initialize:function(){var d=this,c=d.getTemplate();_.merge(c.FRAME.BORDER,{TABSTOP1:{$order:-1},TBAR:{tagName:"div",className:"xui-uibar-top",TBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"xui-uibar-t",TBARTR:{tagName:"tr",TBARTDL:{tagName:"td",className:"xui-uibar-tdl"},TBARTDM:{$order:1,width:"100%",tagName:"td",className:"xui-uibar-tdm"},TBARTDR:{$order:2,tagName:"td",className:"xui-uibar-tdr"}}},BARCMDL:{$order:1,tagName:"div",className:"xui-uibar-cmdl",ICON:{$order:0,className:"xui-ui-icon {imageClass}",style:"{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}"},CAPTION:{$order:1,tabindex:"{tabindex}",text:"{caption}"}},BARCMDR:{$order:2,tagName:"div",className:"xui-uibar-cmdr",INFO:{className:"xui-uicmd-info",style:"{infoDisplay}",$order:1},OPT:{className:"xui-uicmd-opt",style:"{optDisplay}",$order:1},PIN:{$order:2,className:"xui-uicmd-pin",style:"{pinDisplay}"},LAND:{$order:3,className:"xui-uicmd-land",style:"{landDisplay}"},REFRESH:{className:"xui-uicmd-refresh",style:"{refreshDisplay}",$order:4},MIN:{$order:5,className:"xui-uicmd-min",style:"{minDisplay}"},RESTORE:{$order:6,className:"xui-uicmd-restore",style:"display:none;"},MAX:{$order:7,className:"xui-uicmd-max",style:"{maxDisplay}"},CLOSE:{$order:8,className:"xui-uicmd-close ",style:"{closeDisplay}"}}},MAIN:{$order:2,tagName:"div",className:"xui-uicon-main",MAINI:{tagName:"div",className:"xui-uicon-maini",PANEL:{tagName:"div",style:"{_panelstyle};{_overflow};",text:"{html}"+xui.UI.$childTag}}},BBAR:{$order:3,tagName:"div",className:"xui-uibar-bottom",BBART:{cellpadding:"0",cellspacing:"0",width:"100%",border:"0",tagName:"table",className:"xui-uibar-t",BBARTR:{tagName:"tr",BBARTDL:{tagName:"td",className:"xui-uibar-tdl"},BBARTDM:{$order:1,width:"100%",tagName:"td",className:"xui-uibar-tdm"},BBARTDR:{$order:2,tagName:"td",className:"xui-uibar-tdr"}}}},TABSTOP2:{$order:9}},"all");d.setTemplate(c);xui.alert=d.alert;xui.confirm=d.confirm;xui.pop=d.pop;xui.prompt=d.prompt},Static:{_shadowRB:"BBARTDR",Appearances:{KEY:{overflow:"visible"},"TABSTOP1,TABSTOP2":{height:0,width:"16px",display:"inline",position:"absolute"},PANEL:{position:"relative",overflow:"auto","font-size":"12px","line-height":"1.22em"},CAPTION:{"font-size":"12px",display:"inline","vertical-align":xui.browser.ie6?"baseline":"middle"},BORDER:{position:"relative","font-size":0,"line-height":0}},Behaviors:{DroppableKeys:["PANEL"],PanelKeys:["PANEL"],DraggableKeys:["LAND"],HoverEffected:{INFO:"INFO",OPT:"OPT",PIN:"PIN",MIN:"MIN",MAX:"MAX",RESTORE:"RESTORE",CLOSE:"CLOSE",REFRESH:"REFRESH",LAND:"LAND"},ClickEffected:{INFO:"INFO",OPT:"OPT",PIN:"PIN",MIN:"MIN",MAX:"MAX",RESTORE:"RESTORE",CLOSE:"CLOSE",REFRESH:"REFRESH",LAND:"LAND"},onMousedown:function(c,d){if(!c.$inModal){c.box._active(c)}},afterKeydown:function(h,j){var i=xui.Event.getKey(j);if((j.$key||j.keyCode||j.charCode)==9){if(xui.browser.ie){var k="xui::_specialforietab";if(!xui.Dom.byId(k)){xui("body").append("<div style='display:none;position:absolute;' id="+k+"></div>")}xui.Dom.byId(k).innerHTML=_()+""}var g=h.getSubNode("TABSTOP1").get(0),f=h.getSubNode("TABSTOP2").get(0),c=xui.Event.getSrc(j),d;if(i.shiftKey){if(c!==g){g.tabIndex=c.tabIndex}f.removeAttribute("tabIndex")}else{if(c!==f){f.tabIndex=c.tabIndex}g.removeAttribute("tabIndex")}g=f=c=null}},onDragstop:function(f){var h=f.getRoot().cssPos(),g=f.properties,c=null,d=null;if(g.left!==h.left){g.left=c=h.left}if(g.top!==h.top){g.top=d=h.top}if(f.onMove&&(c!==null||d!==null)){f.boxing().onMove(f,c,d,null,null)}},TABSTOP1:{onFocus:function(h,p,c){var k=parseInt(xui.use(c).get(0).tabIndex||1+"",10)-1;var f=h.getRoot().get(0).getElementsByTagName("*"),q,g;for(var m=0,j=f.length,d;d=f[m];m++){if(d.nodeType==1){if(d.tabIndex&&d.tabIndex<=k){if(!q){q=(g=d).tabIndex}if(d.tabIndex>q){q=(g=d).tabIndex}if(q===k){break}}}}if(d){xui(d).focus();xui.use(c).get(0).tabIndex=d.tabIndex}else{d=h.getRoot().nextFocus(false,true,false);xui(d).focus();xui.use(c).get(0).tabIndex=d.get(0).tabIndex}f=d=null}},TABSTOP2:{onFocus:function(h,p,c){var k=parseInt(xui.use(c).get(0).tabIndex||1+"")+1;var f=h.getRoot().get(0).getElementsByTagName("*"),q,g;for(var m=0,j=f.length,d;d=f[m];m++){if(d.nodeType==1){if(d.tabIndex&&d.tabIndex>=k){if(!q){q=(g=d).tabIndex}if(d.tabIndex<q){q=(g=d).tabIndex}if(q===k){break}}}}if(d){xui(d).focus();xui.use(c).get(0).tabIndex=d.tabIndex}else{d=h.getRoot().nextFocus(true,true,false);xui(d).focus();xui.use(c).get(0).tabIndex=d.get(0).tabIndex}f=d=null}},TBAR:{beforeMousedown:function(c,d,f){if(xui.Event.getBtn(d)!="left"){return}if(c.getKey(xui.Event.getSrc(d).parentNode.id)==c.keys.BARCMDR){return}if(c.properties.movable&&!c._locked){c.box._active(c);c.getRoot().startDrag(d,{dragDefer:1,maxTopOffset:c.getRoot().top(),maxLeftOffset:c.getRoot().left(),targetOffsetParent:c.getRoot().parent()})}},onDblclick:function(c,d,f){if(c.getKey(xui.Event.getSrc(d).parentNode.id)==c.keys.BARCMDR){return}if(!c.properties.maxBtn){return}if(c.properties.status=="max"){c.box._restore(c)}else{c.box._max(c)}}},PIN:{onClick:function(f,g,h){var d=f.keys.PIN,c=f.properties;if(f.beforePin&&false===f.boxing().beforePin(f,c.pinned)){return}c.pinned=!c.pinned;f.getSubNode("PIN").tagClass("-checked",c.pinned);f._locked=c.pinned;if(c.resizer){if(!c.pinned){if(c.status!="min"&&f.$resizer){f.$resizer.show()}}else{if(f.$resizer){f.$resizer.hide()}}}}},MIN:{onClick:function(c,d,f){c.box._min(c)}},MAX:{onClick:function(c,d,f){c.box._max(c)}},RESTORE:{onClick:function(c,d,f){c.box._restore(c)}},INFO:{onClick:function(c,d,f){c.boxing().onShowInfo(c,d,f)}},OPT:{onClick:function(c,d,f){c.boxing().onShowOptions(c,d,f)}},REFRESH:{onClick:function(c,d,f){c.boxing().onRefresh(c)}},CLOSE:{onClick:function(c,d,f){c.boxing().close()}},LAND:{onClick:function(c,d,f){c.boxing().onLand(c,d,f)}}},DataModel:{selectable:true,tips:null,border:null,disabled:null,dock:"none",showEffects:"Classic",hideEffects:"",initPos:{ini:"center",listbox:["auto","center"]},iframeAutoLoad:{ini:"",action:function(){this.getSubNode("PANEL").html("",false);xui.UI.Div._applyAutoLoad(this)}},ajaxAutoLoad:{ini:"",action:function(){this.getSubNode("PANEL").html("",false);xui.UI.Div._applyAutoLoad(this)}},html:{html:1,action:function(c){this.getSubNode("PANEL").html(xui.adjustRes(c,0,1))}},caption:{ini:undefined,action:function(c){c=(_.isSet(c)?c:"")+"";this.getSubNode("CAPTION").html(xui.adjustRes(c,true))}},image:{format:"image",action:function(c){this.getSubNode("ICON").css("display",c?"":"none").css("backgroundImage",c?("url("+xui.adjustRes(c||"")+")"):"")}},imagePos:{action:function(c){this.getSubNode("ICON").css("backgroundPosition",c)}},shadow:true,resizer:true,movable:true,minBtn:{ini:true,action:function(c){var d=this.getSubNode("MIN");if(c){d.setInlineBlock()}else{d.css("display","none")}}},maxBtn:{ini:true,action:function(c){var d=this.getSubNode("MAX");if(c){d.setInlineBlock()}else{d.css("display","none")}}},restoreBtn:{ini:true,action:function(c){var d=this.getSubNode("RESTORE");if(c){d.setInlineBlock()}else{d.css("display","none")}}},infoBtn:{ini:false,action:function(c){this.getSubNode("INFO").css("display",c?"":"none")}},optBtn:{ini:false,action:function(c){this.getSubNode("OPT").css("display",c?"":"none")}},closeBtn:{ini:true,action:function(c){var d=this.getSubNode("CLOSE");if(c){d.setInlineBlock()}else{d.css("display","none")}}},refreshBtn:{ini:false,action:function(c){this.getSubNode("REFRESH").css("display",c?"":"none")}},pinBtn:{ini:false,action:function(c){var d=this.getSubNode("PIN");if(c){d.setInlineBlock()}else{d.css("display","none")}}},landBtn:{ini:false,action:function(c){var d=this.getSubNode("LAND");if(c){d.setInlineBlock()}else{d.css("display","none")}}},width:300,height:300,minWidth:200,minHeight:100,position:"absolute",fromRegion:{hidden:true,ini:null},modal:{ini:false,action:function(c){if(this.box){if(c){this.box._modal(this)}else{this.box._unModal(this)}}}},status:{ini:"normal",listbox:["normal","min","max"],action:function(f,g){var d=this,c=d.box;if(f=="min"){c._min(d,g)}else{if(f=="max"){c._max(d,g)}else{c._restore(d,g)}}}}},EventHandlers:{onRefresh:function(c){},onShow:function(c){},beforeClose:function(c){},onShowInfo:function(c,d,f){},onShowOptions:function(c,d,f){},onLand:function(c,d,f){},onActivated:function(c){},beforePin:function(c,d){},beforeStatusChanged:function(f,c,d){},afterStatusChanged:function(f,c,d){}},RenderTrigger:function(){var c=this;c.destroyTrigger=function(){var d=this;if(d.$inModal){d.box._unModal(d)}}},LayoutTrigger:function(){var c=this,d=c.properties;if(d.modal){var f=c.$modalDiv&&c.$modalDiv.parent();if(f&&f.get(0)&&f.get(0)!==c.getRootNode()){b._unModal(c)}b._modal(c)}},_prepareData:function(f){var g=arguments.callee.upper.call(this,f),d="display:none";g.minDisplay=g.minBtn?"":d;g.maxDisplay=g.maxBtn?"":d;g.infoDisplay=g.infoBtn?"":d;g.optDisplay=g.optBtn?"":d;g.closeDisplay=g.closeBtn?"":d;g.pinDisplay=g.pinBtn?"":d;g.landDisplay=g.landBtn?"":d;g.refreshDisplay=g.refreshBtn?"":d;g.statusDisplay=g.statusDisplay?"":d;g.statusHeight="height:"+g.statusHeight+"px";var c=f.properties.status;if(c=="min"||c=="max"){f.$noR=1}if(_.isStr(g.overflow)){g._overflow=g.overflow.indexOf(":")!=-1?(g.overflow):("overflow:"+g.overflow)}return g},_min:function(f,i,n,g){var d=f.getRoot(),k=f.box,c=d.parent(),q=f.properties;if(!i){i=q.status}if(f.beforeStatusChanged&&false===f.boxing().beforeStatusChanged(f,"min",i)){return}if(i=="max"){k._unMax(f)}else{k._refreshRegion(f)}f.getSubNodes(["PANEL","STATUS"]).css("display","none");if(q.minBtn){if(q.restoreBtn){f.getSubNode("RESTORE").setInlineBlock()}f.getSubNode("MIN").css("display","none")}if(q.resizer&&f.$resizer){f.$resizer.hide()}if(q.shadow){f.boxing()._unShadow(false)}q.status="min";var m=d.height(),l=f.getSubNode("BORDER").height(),j=f.getSubNode("TBAR").height();d.cssSize({width:q.minWidth,height:j+m-l},true);if(f.afterStatusChanged){f.boxing().afterStatusChanged(f,"min",i)}if(a&&xui.browser.ie&&xui.browser.ver<=8){_.filter(a.params,function(p,h){return !xui.Dom._cssfake[h]})}d.show(null,null,n,null,g)},_max:function(f,h,l,g){var d=f.getRoot(),i=f.box,j=f.boxing(),c=d.parent(),m=f.properties,k=xui.Dom._getEffects(m.showEffects,1);if(!h){h=m.status}if(f.beforeStatusChanged&&false===f.boxing().beforeStatusChanged(f,"max",h)){return}if(h=="min"){i._unMin(f)}else{i._refreshRegion(f)}if(m.pinBtn){f.getSubNode("PIN").css("display","none")}if(m.maxBtn){f.getSubNode("MAX").css("display","none");if(m.restoreBtn){f.getSubNode("RESTORE").setInlineBlock()}}f.old_m=m.movable;m.movable=false;if(m.resizer&&f.$resizer){f.$resizer.hide()}if(m.shadow&&(parseInt(m.dockMargin.right,10)<xui.UI.Shadow.SIZE||parseInt(m.dockMargin.bottom)<xui.UI.Shadow.SIZE)){j._unShadow(false)}m.status="max";j.setDock("cover",true);if(f.afterStatusChanged){f.boxing().afterStatusChanged(f,"max",h)}if(k&&xui.browser.ie&&xui.browser.ver<=8){_.filter(k.params,function(p,n){return !xui.Dom._cssfake[n]})}d.show(null,null,l,null,g)},_restore:function(f,c){var h=f.getRoot(),g=f.box,d=f.properties;if(!c){c=d.status}d.status="normal";if(f.beforeStatusChanged&&false===f.boxing().beforeStatusChanged(f,"normal",c)){return}if(c=="max"){g._unMax(f)}if(c=="min"){g._unMin(f)}f.getSubNode("RESTORE").css("display","none")},_unMax:function(f){var d=f.properties,c=f.boxing();f.getSubNode("MAX").setInlineBlock();if(d.pinBtn){f.getSubNode("PIN").setInlineBlock()}d.movable=f.old_m;if(d.shadow){c._shadow()}if(d.resizer&&!d.pinned){if(f.$resizer){f.$resizer.show()}else{c._resizer()}}c.setDock("none");xui.UI.$tryResize(f,d.width,d.height,true);if(f.afterStatusChanged){f.boxing().afterStatusChanged(f,"normal",status)}},_unMin:function(f){var d=f.properties,c=f.boxing();f.getSubNodes(["PANEL","STATUS"]).css("display","block");f.getSubNode("MIN").setInlineBlock();if(d.shadow){c._shadow()}if(d.resizer&&!d.pinned){if(f.$resizer){f.$resizer.show()}else{c._resizer()}}f.getRoot().cssSize({width:d.width,height:d.height});xui.UI.$tryResize(f,d.width,d.height,true)},_active:function(g,c){var d=this;if(c!==false&&xui.$cache.unique.activeWndId==g.$xid){return}d._deActive();if(c!==false){var i=xui(g.domId),h=i.topZindex(),f=parseInt(i.css("zIndex"),0);i.css("zIndex",h>f?h:f);g.getSubNode("TBAR").tagClass("-focus");xui.$cache.unique.activeWndId=g.$xid}},_deActive:function(){var c;if(c=xui.UI._cache["$"+xui.$cache.unique.activeWndId]){c.getSubNode("TBAR").tagClass("-focus",false)}delete xui.$cache.unique.activeWndId},_modal:function(g){var f=g.getRoot(),c,j=f.parent(),h;if(!j.isEmpty()){if(!g.$inModal){h=g.$modalDiv;if(!h||!h.get(0)||!h.get(0).parentNode){h=g.$modalDiv=xui.create("<div class='xui-cover xui-custom xui-cover-modal' style='left:0;top:0;position:absolute;overflow:hidden;display:block;z-index:0;'></div>");h.setSelectable(false)}j.append(h);if(j.get(0)===document.body||j.get(0)===document||j.get(0)===window){j=xui.win}h.css({display:"block",width:Math.max(j.width(),j.scrollWidth())+"px",height:Math.max(j.height(),j.scrollHeight())+"px"}).onMousedown(function(){return false}).topZindex(true);j.onSize(function(i){i=xui(i);h.width(i.width()).height(i.height());_.asyRun(function(){h.width(Math.max(i.width(),i.scrollWidth()));h.height(Math.max(i.height(),i.scrollHeight()))})},"dialog:"+g.serialId);var d=(parseInt(h.css("zIndex"),10)||0)+1;f.css("zIndex",d);if(d>=xui.Dom.TOP_ZINDEX){xui.Dom.TOP_ZINDEX=d+1}g.$inModal=true;j.setBlurTrigger(g.$xid+"_anti",true,xui([h.get(0),g.getRootNode()]))}}},_unModal:function(c){if(c.$inModal){var f=c.$modalDiv.parent();if(f.get(0)===document.body||f.get(0)===document||f.get(0)===window){f=xui.win}f.onSize(null,"dialog:"+c.serialId);c.getRoot().css("zIndex",0);c.$modalDiv.css("display","none");var d=c.getSubNode("BORDER");if(!d.isEmpty()){d.append(c.$modalDiv)}c.$inModal=false;f.setBlurTrigger(c.$xid+"_anti")}},_refreshRegion:function(c){if(!c.renderId){return}var d=c.properties;return _.merge(d,c.getRoot().cssRegion(),function(g,f){return d[f]!="auto"})},_adjust:function(j,p,i,c,m){p=p||"";if(!i){i=p;p=""}var d=j.$div.reBoxing(),k="xui:temp:dialog",l=arguments.callee,n,f;if(!xui.Dom.byId(k)){g=l._cache=d.clone(false);xui("body").append(g);g.css({overflow:"visible",position:"absolute",visibility:"visible",left:xui.Dom.HIDE_VALUE,top:xui.Dom.HIDE_VALUE}).id(k,true)}var g=l._cache;g.width("auto").height("auto");g.html(i,false);var q=g.cssSize();d.html(i);if(q.width>500){q.width=500;g.width(500);q.height=g.offsetHeight()+10;g.width("auto")}g.html("",false);q.height+=10;if(q.height>400){q.height=400}if(q.width<150){q.width=150}if(q.height<30){q.height=30}d.cssSize(q).css("overflow","auto").show();n=q.width+40;f=q.height+90;j.setCaption(p).setWidth(n).setHeight(f);return{width:n,height:f}},alert:function(q,k,p,i,h,n,r,c,j){var m=arguments.callee,l;if(j||!(l=m.dialog)||!l.get(0)||(!l.get(0).renderId)){l=new xui.UI.Dialog({overflow:"hidden",minBtn:false,maxBtn:false,pinBtn:false,resizer:false},{beforeClose:function(){_.tryF(l._$onClose);l._$onClose=null;if(!j){l.hide();return false}},onHotKeydown:function(v,u){if(u.key=="esc"){l.close()}}});var g=l.$cmd=new xui.UI.Div({height:26,dock:"bottom"},null,null,null,{KEY:"text-align:center;"}),f=l.$btn=new xui.UI.SButton({position:"relative",tabindex:1},{onClick:function(){l.close()},onHotKeydown:function(v,u){if(u.key=="enter"){l.close()}}},null,null,{KEY:"margin:0 4px"});g.append(f);var d=l.$div=new xui.UI.Div({left:10,top:10});l.append(g).append(d).render();if(!j){m.dialog=l}}l._$onClose=p;l.$btn.setCaption("&nbsp;&nbsp;"+(i||xui.wrapRes("$inline.ok"))+"&nbsp;&nbsp;");var s=xui.UI.Dialog._adjust(l,q,k);if(r&&r["xui.UI"]){r=r.getContainer(c)}if(!_.isSet(r)){r=xui("body")}l.show(r,true,h,n);_.resetRun("dlg_focus:"+l.get(0).$xid,function(){l.$btn.activate()});return l},confirm:function(p,s,r,v,k,g,i,n,q,c,j){var m=arguments.callee,l;if(j||!(l=m.dialog)||!l.get(0)||(!l.get(0).renderId)){l=new xui.UI.Dialog({overflow:"hidden",minBtn:false,maxBtn:false,pinBtn:false,resizer:false},{beforeClose:function(){if(!l._$_clicked){_.tryF(l._$onNo,["close"])}else{delete l._$_clicked}l._$onYes=l._$onNo=null;if(!j){l.hide();return false}},onHotKeydown:function(x,w){if(w.key=="esc"){l.close()}}});var h=l.$cmd=new xui.UI.Div({height:26,dock:"bottom"},null,null,null,{KEY:"text-align:center;"}),f=l.$btn1=new xui.UI.SButton({tabindex:1,position:"relative"},{onClick:function(){_.tryF(l._$onYes);l._$_clicked=1;l.close()}},null,null,{KEY:"margin:0 4px"});h.append(f);f=l.$btn2=new xui.UI.SButton({tabindex:1,position:"relative"},{onClick:function(){_.tryF(l._$onNo,["no"]);l._$_clicked=1;l.close()}},null,null,{KEY:"margin:0 4px"});h.append(f);var d=l.$div=new xui.UI.Div({left:10,top:10});l.append(h).append(d).render();if(!j){m.dialog=l}}l._$onYes=r;l._$onNo=v;delete l._$_clicked;l.$btn1.setCaption("&nbsp;&nbsp;"+(k||xui.wrapRes("$inline.yes"))+"&nbsp;&nbsp;");l.$btn2.setCaption("&nbsp;&nbsp;"+(g||xui.wrapRes("$inline.no"))+"&nbsp;&nbsp;");var u=xui.UI.Dialog._adjust(l,p,s);if(q&&q["xui.UI"]){q=q.getContainer(c)}if(!_.isSet(q)){q=xui("body")}l.show(q,true,i,n);_.resetRun("dlg_focus:"+l.get(0).$xid,function(){l.$btn2.activate()});return l},pop:function(l,i,h,g,k,m,c){var j=new xui.UI.Dialog({overflow:"hidden",minBtn:false,maxBtn:false,pinBtn:false,resizer:false},{onHotKeydown:function(r,q){if(q.key=="esc"){j.close()}}}),f=j.$cmd=new xui.UI.Div({height:26,dock:"bottom"},null,null,null,{KEY:"text-align:center;"}).append(j.$btn=new xui.UI.SButton({caption:"&nbsp;&nbsp;"+(h||"$inline.ok")+"&nbsp;&nbsp;",tabindex:1,position:"relative"},{onClick:function(){j.destroy()},onHotKeydown:function(r,q){if(q.key=="enter"){j.close()}}},null,null,{KEY:"margin:0 4px"})),d=j.$div=new xui.UI.Div({left:10,top:10,width:80}).setCustomStyle({KEY:"overflow:visible"});j.append(f).append(d).render();var n=xui.UI.Dialog._adjust(j,l,i);if(m&&m["xui.UI"]){m=m.getContainer(c)}if(!_.isSet(m)){m=xui("body")}j.show(m,false,g,k);_.resetRun("dlg_focus:"+j.get(0).$xid,function(){j.$btn.activate()});return j},prompt:function(q,u,k,s,v,j,f,h,p,r,c,i){var l,n=arguments.callee;if(i||!(l=n.dialog)||!l.get(0)||(!l.get(0).renderId)){l=new xui.UI.Dialog({overflow:"hidden",minBtn:false,maxBtn:false,pinBtn:false,resizer:false,left:200,top:200,width:300,height:130},{beforeClose:function(){if(!l._$_clickYes){_.tryF(l._$onNo)}else{delete l._$_clickYes}l._$inp.setValue("");l._$onYes=l._$onNo=null;if(!i){l.hide();return false}}});var d=l._$con=new xui.UI.Div({top:4,left:10,width:270,height:18}),g=new xui.UI.Div({height:26,dock:"bottom"},null,null,null,{KEY:"text-align:center;"}).append(l.$btn1=new xui.UI.SButton({position:"relative",tabindex:1},{onClick:function(){if(false!==_.tryF(l._$onYes,[l._$inp.getUIValue()])){l._$_clickYes=1;l.close()}}},null,null,{KEY:"margin:0 4px"}));g.append(l.$btn2=new xui.UI.SButton({tabindex:1,position:"relative"},{onClick:function(){l.close()}},null,null,{KEY:"margin:0 4px"}));var m=l._$inp=new xui.UI.Input({left:10,top:22,width:270,height:36,multiLines:true});l.append(d).append(g).append(m).render();if(!i){n.dialog=l}}l.setCaption(q||"Prompt");l._$con.setHtml(u||"");l._$inp.setValue(k||"",true);l._$onYes=s;l._$onNo=v;delete l._$_clickYes;l.$btn1.setCaption("&nbsp;&nbsp;"+(j||xui.wrapRes("$inline.ok"))+"&nbsp;&nbsp;");l.$btn2.setCaption("&nbsp;&nbsp;"+(f||xui.wrapRes("$inline.cancel"))+"&nbsp;&nbsp;");if(r&&r["xui.UI"]){r=r.getContainer(c)}if(!_.isSet(r)){r=xui("body")}l.show(r,true,h,p);_.resetRun("dlg_focus:"+l.get(0).$xid,function(){l._$inp.activate()});return l},_onresize:function(f,d,p,c){if(d&&f.properties.status=="min"){d=f.properties.minWidth}var r=arguments.callee.upper.apply(this,arguments),n={},m=f.getSubNode("TBAR"),l=f.getSubNode("PANEL"),k=f.getSubNode("BBAR"),i=f.getSubNode("MAIN"),h=f.getSubNode("MAINI"),j,g,q;if(p){if(p=="auto"){n.height=p}else{j=m.height(),g=k.height();if((q=r.height-j-g)>0){n.height=q}}}if(d){n.width=r.width-(parseInt(h.css("paddingRight"),10)||0)-(parseInt(i.css("paddingLeft"),10)||0)}l.cssSize(n,true)}}});